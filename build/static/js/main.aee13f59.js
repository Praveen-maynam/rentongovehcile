/*! For license information please see main.aee13f59.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:N.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+S(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),E(o,t,i,"",function(e){return e})):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+S(a=e[c],c);l+=E(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=E(a=a.value,t,i,u=s+S(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var s=0;function o(e){return"_leaflet_id"in e||(e._leaflet_id=++s),e._leaflet_id}function a(e,t,n){var r,i,s,o;return o=function(){r=!1,i&&(s.apply(n,i),i=!1)},s=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)},s}function l(e,t,n){var r=t[1],i=t[0],s=r-i;return e===r&&n?e:((e-i)%s+s)%s+i}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(f,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r})}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var x="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function k(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var N=window.requestAnimationFrame||b("RequestAnimationFrame")||k,_=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function j(e,t,n){if(!n||N!==k)return N.call(window,i(e,t));e.call(t)}function A(e){e&&_.call(window,e)}var C={__proto__:null,extend:n,create:r,bind:i,get lastId(){return s},stamp:o,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:p,getParamString:m,template:g,isArray:y,indexOf:v,emptyImageUrl:x,requestFn:N,cancelFn:_,requestAnimFrame:j,cancelAnimFrame:A};function S(){}function E(e){if("undefined"!==typeof L&&L&&L.Mixin){e=y(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}S.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,s=r(i);for(var o in s.constructor=t,t.prototype=s,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(E(e.includes),n.apply(null,[s].concat(e.includes))),n(s,e),delete s.statics,delete s.includes,s.options&&(s.options=i.options?r(i.options):{},n(s.options,e.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=s._initHooks.length;e<t;e++)s._initHooks[e].call(this)}},t},S.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},S.mergeOptions=function(e){return n(this.prototype.options,e),this},S.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var T={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var i=0,s=(e=h(e)).length;i<s;i++)this._on(e[i],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=h(e);for(var i=1===arguments.length,s=0,o=e.length;s<o;s++)i?this._off(e[s]):this._off(e[s],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,i,s;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var o=this._listens(e,t,n);if(!1!==o){var a=r[o];this._firingCount&&(a.fn=c,this._events[e]=r=r.slice()),r.splice(o,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(i=0,s=r.length;i<s;i++)r[i].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,a=s.length;o<a;o++){var l=s[o],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var i=t;"function"!==typeof t&&(r=!!t,i=void 0,n=void 0);var s=this._events&&this._events[e];if(s&&s.length&&!1!==this._listens(e,i,n))return!0;if(r)for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,s=r.length;i<s;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var i=0,s=(e=h(e)).length;i<s;i++)this._on(e[i],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var I=S.extend(T);function P(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var R=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function D(e,t,n){return e instanceof P?e:y(e)?new P(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new P(e.x,e.y):new P(e,t,n)}function M(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function O(e,t){return!e||e instanceof M?e:new M(e,t)}function B(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function F(e,t){return e instanceof B?e:new B(e,t)}function z(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function U(e,t,n){return e instanceof z?e:y(e)&&"object"!==typeof e[0]?3===e.length?new z(e[0],e[1],e[2]):2===e.length?new z(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new z(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new z(e,t,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(D(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(D(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new P(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new P(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(e){var t=(e=D(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=D(e)).x===this.x&&e.y===this.y},contains:function(e){return e=D(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},M.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof P||"number"===typeof e[0]||"x"in e)t=n=D(e);else if(t=(e=O(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof P?D(e):O(e))instanceof M?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=O(e);var t=this.min,n=this.max,r=e.min,i=e.max,s=i.x>=t.x&&r.x<=n.x,o=i.y>=t.y&&r.y<=n.y;return s&&o},overlaps:function(e){e=O(e);var t=this.min,n=this.max,r=e.min,i=e.max,s=i.x>t.x&&r.x<n.x,o=i.y>t.y&&r.y<n.y;return s&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return O(D(t.x-r,t.y-i),D(n.x+r,n.y+i))},equals:function(e){return!!e&&(e=O(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},B.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof z)t=e,n=e;else{if(!(e instanceof B))return e?this.extend(U(e)||F(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new z(t.lat,t.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new B(new z(t.lat-r,t.lng-i),new z(n.lat+r,n.lng+i))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof z||"lat"in e?U(e):F(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof B?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),s=i.lat>=t.lat&&r.lat<=n.lat,o=i.lng>=t.lng&&r.lng<=n.lng;return s&&o},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),s=i.lat>t.lat&&r.lat<n.lat,o=i.lng>t.lng&&r.lng<n.lng;return s&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},z.prototype={equals:function(e,t){return!!e&&(e=U(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,U(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};var V={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new M(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new z(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var s=e.getSouthWest(),o=e.getNorthEast();return new B(new z(s.lat-r,s.lng-i),new z(o.lat-r,o.lng-i))}},H=n({},V,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,s=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),a=s*s+Math.cos(r)*Math.cos(i)*o*o,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),q=6378137,W={R:q,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new P(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new z((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=q*Math.PI;return new M([-e,-e],[e,e])}()};function K(e,t,n,r){if(y(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function G(e,t,n,r){return new K(e,t,n,r)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new P((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Z=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return G(e,.5,-e,.5)}()}),Q=n({},Z,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e,t){var n,r,i,s,o,a,l="";for(n=0,i=e.length;n<i;n++){for(r=0,s=(o=e[n]).length;r<s;r++)l+=(r?"L":"M")+(a=o[r]).x+" "+a.y;l+=t?Me.svg?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,$="ActiveXObject"in window,ee=$&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Le("webkit"),re=Le("android"),ie=Le("android 2")||Le("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=re&&Le("Google")&&se<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&Le("chrome"),ce=Le("gecko")&&!ne&&!ae&&!$,ue=!le&&Le("safari"),de=Le("phantom"),he="OTransition"in X,pe=0===navigator.platform.indexOf("Win"),me=$&&"transition"in X,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,ge="MozPerspective"in X,ye=!window.L_DISABLE_3D&&(me||fe||ge)&&!he&&!de,ve="undefined"!==typeof orientation||Le("mobile"),xe=ve&&ne,be=ve&&fe,we=!window.PointerEvent&&window.MSPointerEvent,ke=!(!window.PointerEvent&&!we),Ne="ontouchstart"in window||!!window.TouchEvent,_e=!window.L_NO_TOUCH&&(Ne||ke),je=ve&&ae,Ae=ve&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Se=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Ee=!!document.createElement("canvas").getContext,Te=!(!document.createElementNS||!Y("svg").createSVGRect),Ie=!!Te&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Pe=!Te&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Re=0===navigator.platform.indexOf("Mac"),De=0===navigator.platform.indexOf("Linux");function Le(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Me={ie:$,ielt9:ee,edge:te,webkit:ne,android:re,android23:ie,androidStock:oe,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:de,opera12:he,win:pe,ie3d:me,webkit3d:fe,gecko3d:ge,any3d:ye,mobile:ve,mobileWebkit:xe,mobileWebkit3d:be,msPointer:we,pointer:ke,touch:_e,touchNative:Ne,mobileOpera:je,mobileGecko:Ae,retina:Ce,passiveEvents:Se,canvas:Ee,svg:Te,vml:Pe,inlineSvg:Ie,mac:Re,linux:De},Oe=Me.msPointer?"MSPointerDown":"pointerdown",Be=Me.msPointer?"MSPointerMove":"pointermove",Fe=Me.msPointer?"MSPointerUp":"pointerup",ze=Me.msPointer?"MSPointerCancel":"pointercancel",Ue={touchstart:Oe,touchmove:Be,touchend:Fe,touchcancel:ze},Ve={touchstart:Xe,touchmove:Je,touchend:Je,touchcancel:Je},He={},qe=!1;function We(e,t,n){return"touchstart"===t&&Ye(),Ve[t]?(n=Ve[t].bind(this,n),e.addEventListener(Ue[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ke(e,t,n){Ue[t]?e.removeEventListener(Ue[t],n,!1):console.warn("wrong event specified:",t)}function Ge(e){He[e.pointerId]=e}function Ze(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Qe(e){delete He[e.pointerId]}function Ye(){qe||(document.addEventListener(Oe,Ge,!0),document.addEventListener(Be,Ze,!0),document.addEventListener(Fe,Qe,!0),document.addEventListener(ze,Qe,!0),qe=!0)}function Je(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],He)t.touches.push(He[n]);t.changedTouches=[t],e(t)}}function Xe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Gt(t),Je(e,t)}function $e(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function i(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var i=Qt(e);if(!i.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||i.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var s=Date.now();s-r<=et?2===++n&&t($e(e)):n=1,r=s}}}else n=e.detail}return e.addEventListener("click",i),{dblclick:t,simDblclick:i}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,it,st,ot,at,lt=jt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=jt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function pt(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function mt(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function yt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function vt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=kt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function xt(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!vt(e,t)){var s=kt(e);wt(e,(s?s+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,d((" "+kt(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function kt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function Nt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&_t(e,t)}function _t(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(i){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function jt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function At(e,t,n){var r=t||new P(0,0);e.style[lt]=(Me.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,Me.any3d?At(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function St(e){return e._leaflet_pos||new P(0,0)}if("onselectstart"in document)rt=function(){Ot(window,"selectstart",Gt)},it=function(){Ft(window,"selectstart",Gt)};else{var Et=jt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(Et){var e=document.documentElement.style;st=e[Et],e[Et]="none"}},it=function(){Et&&(document.documentElement.style[Et]=st,st=void 0)}}function Tt(){Ot(window,"dragstart",Gt)}function It(){Ft(window,"dragstart",Gt)}function Pt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Rt(),ot=e,at=e.style.outlineStyle,e.style.outlineStyle="none",Ot(window,"keydown",Rt))}function Rt(){ot&&(ot.style.outlineStyle=at,ot=void 0,at=void 0,Ft(window,"keydown",Rt))}function Dt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Lt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Mt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:dt,getStyle:ht,create:pt,remove:mt,empty:ft,toFront:gt,toBack:yt,hasClass:vt,addClass:xt,removeClass:bt,setClass:wt,getClass:kt,setOpacity:Nt,testProp:jt,setTransform:At,setPosition:Ct,getPosition:St,get disableTextSelection(){return rt},get enableTextSelection(){return it},disableImageDrag:Tt,enableImageDrag:It,preventOutline:Pt,restoreOutline:Rt,getSizedParentNode:Dt,getScale:Lt};function Ot(e,t,n,r){if(t&&"object"===typeof t)for(var i in t)Vt(e,i,t[i],n);else for(var s=0,o=(t=h(t)).length;s<o;s++)Vt(e,t[s],n,r);return this}var Bt="_leaflet_events";function Ft(e,t,n,r){if(1===arguments.length)zt(e),delete e[Bt];else if(t&&"object"===typeof t)for(var i in t)Ht(e,i,t[i],n);else if(t=h(t),2===arguments.length)zt(e,function(e){return-1!==v(t,e)});else for(var s=0,o=t.length;s<o;s++)Ht(e,t[s],n,r);return this}function zt(e,t){for(var n in e[Bt]){var r=n.split(/\d/)[0];t&&!t(r)||Ht(e,r,null,null,n)}}var Ut={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vt(e,t,n,r){var i=t+o(n)+(r?"_"+o(r):"");if(e[Bt]&&e[Bt][i])return this;var s=function(t){return n.call(r||e,t||window.event)},a=s;!Me.touchNative&&Me.pointer&&0===t.indexOf("touch")?s=We(e,t,s):Me.touch&&"dblclick"===t?s=tt(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Ut[t]||t,s,!!Me.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,$t(e,t)&&a(t)},e.addEventListener(Ut[t],s,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,s),e[Bt]=e[Bt]||{},e[Bt][i]=s}function Ht(e,t,n,r,i){i=i||t+o(n)+(r?"_"+o(r):"");var s=e[Bt]&&e[Bt][i];if(!s)return this;!Me.touchNative&&Me.pointer&&0===t.indexOf("touch")?Ke(e,t,s):Me.touch&&"dblclick"===t?nt(e,s):"removeEventListener"in e?e.removeEventListener(Ut[t]||t,s,!1):e.detachEvent("on"+t,s),e[Bt][i]=null}function qt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Vt(e,"wheel",qt),this}function Kt(e){return Ot(e,"mousedown touchstart dblclick contextmenu",qt),e._leaflet_disable_click=!0,this}function Gt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Zt(e){return Gt(e),qt(e),this}function Qt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Yt(e,t){if(!t)return new P(e.clientX,e.clientY);var n=Lt(t),r=n.boundingClientRect;return new P((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Jt=Me.linux&&Me.chrome?window.devicePixelRatio:Me.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xt(e){return Me.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Jt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function $t(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:Ot,off:Ft,stopPropagation:qt,disableScrollPropagation:Wt,disableClickPropagation:Kt,preventDefault:Gt,stop:Zt,getPropagationPath:Qt,getMousePosition:Yt,getWheelDelta:Xt,isExternalTarget:$t,addListener:Ot,removeListener:Ft},tn=I.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=St(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=I.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(U(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Me.any3d&&!Me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ot(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(U(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),s=(e instanceof P?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),o=this.containerPointToLatLng(i.add(s));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():F(e);var n=D(t.paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"===typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var s=r.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),i),a=this.project(e.getNorthEast(),i);return{center:this.unproject(o.add(a).divideBy(2).add(s),i),zoom:i}},fitBounds:function(e,t){if(!(e=F(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=D(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){xt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Me.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),s=this.getSize(),o=this._zoom;e=U(e),t=void 0===t?o:t;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(o,t),c=i.distanceTo(r)||1,u=1.42,d=u*u;function h(e){var t=(l*l-a*a+(e?-1:1)*d*d*c*c)/(2*(e?l:a)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return p(e)/m(e)}var g=h(0);function y(e){return a*(m(g)/m(g+u*e))}function v(e){return a*(m(g)*f(g+u*e)-p(g))/d}function x(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),w=(h(1)-g)/u,k=n.duration?1e3*n.duration:1e3*w*.8;function N(){var n=(Date.now()-b)/k,s=x(n)*w;n<=1?(this._flyToFrame=j(N,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(s)/c)),o),this.getScaleZoom(a/y(s),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),N.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,F(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=D((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),s=this.project(e),o=this.getPixelBounds(),a=O([o.min.add(n),o.max.subtract(r)]),l=a.getSize();if(!a.contains(s)){this._enforcingBounds=!0;var c=s.subtract(a.getCenter()),u=a.extend(s).getSize().subtract(l);i.x+=c.x<0?-u.x:u.x,i.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),s=t.divideBy(2).round(),o=r.divideBy(2).round(),a=s.subtract(o);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new z(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(i,r.maxZoom):i)}var s={latlng:t,bounds:n,timestamp:e.timestamp};for(var o in e.coords)"number"===typeof e.coords[o]&&(s[o]=e.coords[o]);this.fire("locationfound",s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)mt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new B(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),s=this.getMaxZoom(),o=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=O(this.project(a,r),this.project(o,r)).getSize(),u=Me.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,p=t?Math.max(d,h):Math.min(d,h);return r=this.getScaleZoom(p,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(s,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new M(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(D(e),t)},layerPointToLatLng:function(e){var t=D(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(U(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return D(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return D(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(D(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return Yt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Ot(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Me.any3d,xt(e,"leaflet-container"+(Me.touch?" leaflet-touch":"")+(Me.retina?" leaflet-retina":"")+(Me.ielt9?" leaflet-oldie":"")+(Me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(e.markerPane,"leaflet-zoom-hide"),xt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Ft:Ot;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Me.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(i&&!$t(s,e))break;if(r.push(n),i)break}if(s===this._container)break;s=s.parentNode}return r.length||a||i||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Pt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var i=n({},e);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var s=this._findEventTargets(e,t);if(r){for(var o=[],a=0;a<r.length;a++)r[a].listens(t,!0)&&o.push(r[a]);s=o.concat(s)}if(s.length){"contextmenu"===t&&Gt(e);var l=s[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<s.length;a++)if(s[a].fire(t,c,!0),c.originalEvent._stopped||!1===s[a].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return St(this._mapPane)||new P(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return O([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),s=new M(r.subtract(i),r.add(i)),o=this._getBoundsOffset(s,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(r.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new M(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=O(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),s=r.max.subtract(e.max);return new P(this._rebound(i.x,-s.x),this._rebound(i.y,-s.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Me.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];At(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();At(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(j(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var sn=S.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return xt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),on=function(e){return new sn(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function r(r,i){var s=t+r+" "+t+i;e[r+i]=pt("div",s,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)mt(this._controlCorners[e]);mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return sn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),Wt(t);var r=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Ot(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=pt("a",e+"-toggle",t);i.href="#",i.title="Layers",i.setAttribute("role","button"),Ot(i,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Gt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",r),this._separator=pt("div",e+"-separator",r),this._overlaysList=pt("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ft(this._baseLayersList),ft(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(t),t.layerId=o(e.layer),Ot(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var s=document.createElement("span");return n.appendChild(s),s.appendChild(t),s.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)e=n[s],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])&&this._map.removeLayer(i[s]);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])||this._map.addLayer(r[s]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Ot(e,"click",Gt),this.expand();var t=this;setTimeout(function(){Ft(e,"click",Gt),t._preventClick=!1})}}),ln=function(e,t,n){return new an(e,t,n)},cn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var s=pt("a",n,r);return s.innerHTML=e,s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),Kt(s),Ot(s,"click",Zt),Ot(s,"click",i,this),Ot(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(xt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(xt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},dn=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new dn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Me.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new mn).addTo(this)});var fn=function(e){return new mn(e)};sn.Layers=an,sn.Zoom=cn,sn.Scale=dn,sn.Attribution=mn,on.layers=ln,on.zoom=un,on.scale=hn,on.attribution=fn;var gn=S.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var yn={Events:T},vn=Me.touch?"touchstart mousedown":"mousedown",xn=I.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Ot(this._dragStartTarget,vn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,vn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!vt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)xn._dragging===this&&this.finishDrag();else if(!(xn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(xn._dragging=this,this._preventOutline&&Pt(this._element),Tt(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Dt(this._element);this._startPoint=new P(t.clientX,t.clientY),this._startPos=St(this._element),this._parentScale=Lt(n);var r="mousedown"===e.type;Ot(document,r?"mousemove":"touchmove",this._onMove,this),Ot(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new P(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Gt(e),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),It(),it();var t=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var r,i,s,o,a,l,c,u,d,h=[1,4,2,8];for(i=0,c=e.length;i<c;i++)e[i]._code=Rn(e[i],t);for(o=0;o<4;o++){for(u=h[o],r=[],i=0,s=(c=e.length)-1;i<c;s=i++)a=e[i],l=e[s],a._code&u?l._code&u||((d=Pn(l,a,u,t,n))._code=Rn(d,t),r.push(d)):(l._code&u&&((d=Pn(l,a,u,t,n))._code=Rn(d,t),r.push(d)),r.push(a));e=r}return e}function wn(e,t){var n,r,i,s,o,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Mn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=U([0,0]),h=F(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=kn(e));var p=e.length,m=[];for(n=0;n<p;n++){var f=U(e[n]);m.push(t.project(U([f.lat-d.lat,f.lng-d.lng])))}for(a=l=c=0,n=0,r=p-1;n<p;r=n++)i=m[n],s=m[r],o=i.y*s.x-s.y*i.x,l+=(i.x+s.x)*o,c+=(i.y+s.y)*o,a+=3*o;u=0===a?m[0]:[l/a,c/a];var g=t.unproject(D(u));return U([g.lat+d.lat,g.lng+d.lng])}function kn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var s=U(e[i]);t+=s.lat,n+=s.lng,r++}return U([t/r,n/r])}var Nn,_n={__proto__:null,clipPolygon:bn,polygonCenter:wn,centroid:kn};function jn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Sn(e=Tn(e,n),n)}function An(e,t,n){return Math.sqrt(Ln(e,t,n,!0))}function Cn(e,t,n){return Ln(e,t,n)}function Sn(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,En(e,r,t,0,n-1);var i,s=[];for(i=0;i<n;i++)r[i]&&s.push(e[i]);return s}function En(e,t,n,r,i){var s,o,a,l=0;for(o=r+1;o<=i-1;o++)(a=Ln(e[o],e[r],e[i],!0))>l&&(s=o,l=a);l>n&&(t[s]=1,En(e,t,n,r,s),En(e,t,n,s,i))}function Tn(e,t){for(var n=[e[0]],r=1,i=0,s=e.length;r<s;r++)Dn(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<s-1&&n.push(e[s-1]),n}function In(e,t,n,r,i){var s,o,a,l=r?Nn:Rn(e,n),c=Rn(t,n);for(Nn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=Rn(o=Pn(e,t,s=l||c,n,i),n),s===l?(e=o,l=a):(t=o,c=a)}}function Pn(e,t,n,r,i){var s,o,a=t.x-e.x,l=t.y-e.y,c=r.min,u=r.max;return 8&n?(s=e.x+a*(u.y-e.y)/l,o=u.y):4&n?(s=e.x+a*(c.y-e.y)/l,o=c.y):2&n?(s=u.x,o=e.y+l*(u.x-e.x)/a):1&n&&(s=c.x,o=e.y+l*(c.x-e.x)/a),new P(s,o,i)}function Rn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Dn(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Ln(e,t,n,r){var i,s=t.x,o=t.y,a=n.x-s,l=n.y-o,c=a*a+l*l;return c>0&&((i=((e.x-s)*a+(e.y-o)*l)/c)>1?(s=n.x,o=n.y):i>0&&(s+=a*i,o+=l*i)),a=e.x-s,l=e.y-o,r?a*a+l*l:new P(s,o)}function Mn(e){return!y(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function On(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(e)}function Bn(e,t){var n,r,i,s,o,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Mn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=U([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=kn(e));var h=e.length,p=[];for(n=0;n<h;n++){var m=U(e[n]);p.push(t.project(U([m.lat-u.lat,m.lng-u.lng])))}for(n=0,r=0;n<h-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(0===r)c=p[0];else for(n=0,s=0;n<h-1;n++)if(o=p[n],a=p[n+1],(s+=i=o.distanceTo(a))>r){l=(s-r)/i,c=[a.x-l*(a.x-o.x),a.y-l*(a.y-o.y)];break}var f=t.unproject(D(c));return U([f.lat+u.lat,f.lng+u.lng])}var Fn={__proto__:null,simplify:jn,pointToSegmentDistance:An,closestPointOnSegment:Cn,clipSegment:In,_getEdgeIntersection:Pn,_getBitCode:Rn,_sqClosestPointOnSegment:Ln,isFlat:Mn,_flat:On,polylineCenter:Bn},zn={project:function(e){return new P(e.lng,e.lat)},unproject:function(e){return new z(e.y,e.x)},bounds:new M([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752.314245179,bounds:new M([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,s=Math.sqrt(1-i*i),o=s*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-o)/(1+o),s/2);return r=-n*Math.log(Math.max(a,1e-10)),new P(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,s=Math.sqrt(1-i*i),o=Math.exp(-e.y/r),a=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=s*Math.sin(a),t=Math.pow((1-t)/(1+t),s/2),a+=c=Math.PI/2-2*Math.atan(o*t)-a;return new z(a*n,e.x*n/r)}},Vn={__proto__:null,LonLat:zn,Mercator:Un,SphericalMercator:W},Hn=n({},H,{code:"EPSG:3395",projection:Un,transformation:function(){var e=.5/(Math.PI*Un.R);return G(e,.5,-e,.5)}()}),qn=n({},H,{code:"EPSG:4326",projection:zn,transformation:G(1/180,1,-1/180,.5)}),Wn=n({},V,{projection:zn,transformation:G(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});V.Earth=H,V.EPSG3395=Hn,V.EPSG3857=Z,V.EPSG900913=Q,V.EPSG4326=qn,V.Simple=Wn;var Kn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?y(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Gn=Kn.extend({initialize:function(e,t){var n,r;if(p(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Zn=function(e,t){return new Gn(e,t)},Qn=Gn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Gn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Gn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new B;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Yn=function(e,t){return new Qn(e,t)},Jn=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var i=D(r),s=D("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Me.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Xn(e){return new Jn(e)}var $n=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new xn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,s=St(t._icon),o=n.getPixelBounds(),a=n.getPixelOrigin(),l=O(o.min._subtract(a).add(i),o.max._subtract(a).subtract(i));if(!l.contains(s)){var c=D((Math.max(l.max.x,s.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=j(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=St(t._icon),i=t._map.layerPointToLatLng(r);n&&Ct(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Kn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),xt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ot(n,"focus",this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),s=!1;i!==this._shadow&&(this._removeShadow(),s=!0),i&&(xt(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&s&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Nt(this._icon,e),this._shadow&&Nt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?D(t.iconSize):D(0,0),r=t.iconAnchor?D(t.iconAnchor):D(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ir=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=U(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new M(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sr(e,t){return new ir(e,t)}var or=ir.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),p(this,t),this._latlng=U(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,s=this._mRadius/H.R/i,o=n.project([t+s,e]),a=n.project([t-s,e]),l=o.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(s*i)-Math.sin(t*i)*Math.sin(c*i))/(Math.cos(t*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-o.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function ar(e,t,n){return new or(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,s=Ln,o=0,a=this._parts.length;o<a;o++)for(var l=this._parts[o],c=1,u=l.length;c<u;c++){var d=s(e,t=l[c-1],n=l[c],!0);d<r&&(r=d,i=s(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=U(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new B,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Mn(e),r=0,i=e.length;r<i;r++)n?(t[r]=U(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new P(e,e);this._rawPxBounds&&(this._pxBounds=new M([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,i,s=e[0]instanceof z,o=e.length;if(s){for(i=[],r=0;r<o;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<o;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,s,o,a,l=this._parts;for(t=0,r=0,i=this._rings.length;t<i;t++)for(n=0,s=(a=this._rings[t]).length;n<s-1;n++)(o=In(a[n],a[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(o[0]),o[1]===a[n+1]&&n!==s-2||(l[r].push(o[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=jn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,s,o,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,s=this._parts.length;n<s;n++)for(r=0,i=(o=(a=this._parts[n]).length)-1;r<o;i=r++)if((t||0!==r)&&An(e,a[i],a[r])<=l)return!0;return!1}});function cr(e,t){return new lr(e,t)}lr._flat=On;var ur=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof z&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new P(t,t);if(e=new M(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,s=this._rings.length;i<s;i++)(r=bn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,s,o,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(s=0,o=(l=(t=this._parts[i]).length)-1;s<l;o=s++)n=t[s],r=t[o],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||lr.prototype._containsPoint.call(this,e,!0)}});function dr(e,t){return new ur(e,t)}var hr=Qn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=y(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var s=this.options;if(s.filter&&!s.filter(e))return this;var o=pr(e,s);return o?(o.feature=br(e),o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pr(e,t){var n,r,i,s,o="Feature"===e.type?e.geometry:e,a=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||fr;if(!a&&!o)return null;switch(o.type){case"Point":return mr(c,e,n=u(a),t);case"MultiPoint":for(i=0,s=a.length;i<s;i++)n=u(a[i]),l.push(mr(c,e,n,t));return new Qn(l);case"LineString":case"MultiLineString":return r=gr(a,"LineString"===o.type?0:1,u),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(a,"Polygon"===o.type?1:2,u),new ur(r,t);case"GeometryCollection":for(i=0,s=o.geometries.length;i<s;i++){var d=pr({geometry:o.geometries[i],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Qn(l);case"FeatureCollection":for(i=0,s=o.features.length;i<s;i++){var h=pr(o.features[i],t);h&&l.push(h)}return new Qn(l);default:throw new Error("Invalid GeoJSON object.")}}function mr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function fr(e){return new z(e[1],e[0],e[2])}function gr(e,t,n){for(var r,i=[],s=0,o=e.length;s<o;s++)r=t?gr(e[s],t-1,n):(n||fr)(e[s]),i.push(r);return i}function yr(e,t){return void 0!==(e=U(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function vr(e,t,n,r){for(var i=[],s=0,o=e.length;s<o;s++)i.push(t?vr(e[s],Mn(e[s])?0:t-1,n,r):yr(e[s],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function xr(e,t){return e.feature?n({},e.feature,{geometry:t}):br(t)}function br(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wr={toGeoJSON:function(e){return xr(this,{type:"Point",coordinates:yr(this.getLatLng(),e)})}};function kr(e,t){return new hr(e,t)}tr.include(wr),or.include(wr),ir.include(wr),lr.include({toGeoJSON:function(e){var t=!Mn(this._latlngs);return xr(this,{type:(t?"Multi":"")+"LineString",coordinates:vr(this._latlngs,t?1:0,!1,e)})}}),ur.include({toGeoJSON:function(e){var t=!Mn(this._latlngs),n=t&&!Mn(this._latlngs[0]),r=vr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),xr(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Gn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),xr(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var s=br(i);"FeatureCollection"===s.type?r.push.apply(r,s.features):r.push(s)}}}),n?xr(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Nr=kr,_r=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=F(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&yt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;At(this._image,n,t)},_reset:function(){var e=this._image,t=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),jr=function(e,t,n){return new _r(e,t,n)},Ar=_r.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(xt(t,"leaflet-image-layer"),this._zoomAnimated&&xt(t,"leaflet-zoom-animated"),this.options.className&&xt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],s=0;s<n.length;s++)r.push(n[s].src);this._url=n.length>0?r:[t.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=pt("source");a.src=this._url[o],t.appendChild(a)}}}});function Cr(e,t,n){return new Ar(e,t,n)}var Sr=_r.extend({_initImage:function(){var e=this._image=this._url;xt(e,"leaflet-image-layer"),this._zoomAnimated&&xt(e,"leaflet-zoom-animated"),this.options.className&&xt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Er(e,t,n){return new Sr(e,t,n)}var Tr=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof z||y(e))?(this._latlng=U(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Nt(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Nt(this._container,0),this._removeTimeout=setTimeout(i(mt,void 0,this._container),200)):mt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=U(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&yt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Qn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),Kn.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(p(i,r),i._source=this):(i=t&&!r?t:new e(r,this)).setContent(n),i}});var Ir=Tr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Tr.prototype.openOn.call(this,e)},onAdd:function(e){Tr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",qt))},onRemove:function(e){Tr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",qt))},getEvents:function(){var e=Tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Kt(t),Wt(this._contentNode),Ot(t,"contextmenu",qt),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=pt("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Ot(r,"click",function(e){Gt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,s="leaflet-popup-scrolled";i&&r>i?(t.height=i+"px",xt(e,s)):bt(e,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new P(this._containerLeft,-n-this._containerBottom);i._add(St(this._container));var s=e.layerPointToContainerPoint(i),o=D(this.options.autoPanPadding),a=D(this.options.autoPanPaddingTopLeft||o),l=D(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),u=0,d=0;s.x+r+l.x>c.x&&(u=s.x+r-c.x+l.x),s.x-u-a.x<0&&(u=s.x-a.x),s.y+n+l.y>c.y&&(d=s.y+n-c.y+l.y),s.y-d-a.y<0&&(d=s.y-a.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pr=function(e,t){return new Ir(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ir,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ir,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Zt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Rr=Tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Tr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Tr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Tr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,s=r.latLngToContainerPoint(r.getCenter()),o=r.layerPointToContainerPoint(e),a=this.options.direction,l=i.offsetWidth,c=i.offsetHeight,u=D(this.options.offset),d=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):o.x<s.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(D(t,n,!0)).add(u).add(d),bt(i,"leaflet-tooltip-right"),bt(i,"leaflet-tooltip-left"),bt(i,"leaflet-tooltip-top"),bt(i,"leaflet-tooltip-bottom"),xt(i,"leaflet-tooltip-"+a),Ct(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Nt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Dr=function(e,t){return new Rr(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Rr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Rr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Ot(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Ot(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Lr=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ft(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Mr(e){return new Lr(e)}Jn.Default=$n;var Or=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),mt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof P?e:new P(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,s=n.length;i<s;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Me.ielt9){Nt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var s=Math.min(1,(e-i.loaded)/200);Nt(i.el,s),s<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(A(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(mt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)mt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),s=Math.floor(t/2),o=n-1,a=new P(+i,+s);a.z=+o;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>r&&this._retainParent(i,s,o,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var s=2*t;s<2*t+2;s++){var o=new P(i,s);o.z=n+1;var a=this._tileCoordsToKey(o),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,s,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var s=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!s||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Me.any3d?At(e.el,i,r):Ct(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),s=t.getSize().divideBy(2*r);return new M(i.subtract(s),i.add(s))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),s=i.getCenter(),o=[],a=this.options.keepBuffer,l=new M(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new P(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var h=i.min.x;h<=i.max.x;h++){var p=new P(h,d);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(s)-t.distanceTo(s)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(h=0;h<o.length;h++)this._addTile(o[h],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new B(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new P(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(mt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){xt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Me.ielt9&&this.options.opacity<1&&Nt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&j(i(this._tileReady,this,e,null,s)),Ct(s,n),this._tiles[r]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(Nt(n.el,0),A(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(xt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Me.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new P(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new M(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Br(e){return new Or(e)}var Fr=Or.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Me.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Ot(n,"load",i(this._tileOnLoad,this,t,n)),Ot(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Me.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Me.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=x;var n=this._tiles[e].coords;mt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",x),Or.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==x))return Or.prototype._tileReady.call(this,e,t,n)}});function zr(e,t){return new Fr(e,t)}var Ur=Fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);var s=(t=p(this,t)).detectRetina&&Me.retina?2:1,o=this.getTileSize();r.width=o.x*s,r.height=o.y*s,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Fr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=O(n.project(t[0]),n.project(t[1])),i=r.min,s=r.max,o=(this._wmsVersion>=1.3&&this._crs===qn?[i.y,i.x,s.y,s.x]:[i.x,i.y,s.x,s.y]).join(","),a=Fr.prototype.getTileUrl.call(this,e);return a+m(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Vr(e,t){return new Ur(e,t)}Fr.WMS=Ur,zr.wms=Vr;var Hr=Kn.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),s=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));Me.any3d?At(this._container,s,n):Ct(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new M(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qr=Hr.extend({options:{tolerance:0},getEvents:function(){var e=Hr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Ot(e,"mousemove",this._onMouseMove,this),Ot(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ot(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,mt(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Me.retina?2:1;Ct(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Me.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Hr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,s,o=e._parts,a=o.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=o[n].length;r<i;r++)s=o[n][r],l[r?"lineTo":"moveTo"](s.x,s.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(xt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wr(e){return Me.canvas?new qr(e):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Gr={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Kr("shape");xt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Kr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;mt(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Kr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Kr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){yt(e._container)}},Zr=Me.vml?Kr:Y,Qr=Hr.extend({_initContainer:function(){this._container=Zr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mt(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Zr("path");e.options.className&&xt(t,e.options.className),e.options.interactive&&xt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){mt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,J(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){yt(e._path)}});function Yr(e){return Me.svg||Me.vml?new Qr(e):null}Me.vml&&Qr.include(Gr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wr(e)||Yr(e)}});var Jr=ur.extend({initialize:function(e,t){ur.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=F(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Xr(e,t){return new Jr(e,t)}Qr.create=Zr,Qr.pointsToPath=J,hr.geometryToLayer=pr,hr.coordsToLatLng=fr,hr.coordsToLatLngs=gr,hr.latLngToCoords=yr,hr.latLngsToCoords=vr,hr.getFeature=xr,hr.asFeature=br,nn.mergeOptions({boxZoom:!0});var $r=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Tt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Ot(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new M(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(mt(this._box),bt(this._container,"leaflet-crosshair")),it(),It(),Ft(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$r),nn.mergeOptions({doubleClickZoom:!0});var ei=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});nn.addInitHook("addHandler","doubleClickZoom",ei),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ti=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new xn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,s=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(s+n)?i:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,a=i.multiplyBy(o/s),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),d=c/(n.inertiaDeceleration*o),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),j(function(){t.panBy(h,{duration:d,easeLinearity:o,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ti),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ni=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Ot(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){Ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=D(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(D(t),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(i)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Zt(e)}}});nn.addInitHook("addHandler","keyboard",ni),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ri=gn.extend({addHooks:function(){Ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Xt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Zt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,s=n?Math.ceil(i/n)*n:i,o=e._limitZoom(t+(this._delta>0?s:-s))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});nn.addInitHook("addHandler","scrollWheelZoom",ri);var ii=600;nn.mergeOptions({tapHold:Me.touchNative&&Me.safari&&Me.mobile,tapTolerance:15});var si=gn.extend({addHooks:function(){Ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new P(t.clientX,t.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Ot(document,"touchend",Gt),Ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),ii),Ot(document,"touchend touchcancel contextmenu",this._cancel,this),Ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ft(document,"touchend",Gt),Ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new P(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",si),nn.mergeOptions({touchZoom:Me.touch,bounceAtZoomLimits:!0});var oi=gn.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),Ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Ot(document,"touchmove",this._onTouchMove,this),Ot(document,"touchend touchcancel",this._onTouchEnd,this),Gt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var a=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(a,this,!0),Gt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,A(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",oi),nn.BoxZoom=$r,nn.DoubleClickZoom=ei,nn.Drag=ti,nn.Keyboard=ni,nn.ScrollWheelZoom=ri,nn.TapHold=si,nn.TouchZoom=oi,e.Bounds=M,e.Browser=Me,e.CRS=V,e.Canvas=qr,e.Circle=or,e.CircleMarker=ir,e.Class=S,e.Control=sn,e.DivIcon=Lr,e.DivOverlay=Tr,e.DomEvent=en,e.DomUtil=Mt,e.Draggable=xn,e.Evented=I,e.FeatureGroup=Qn,e.GeoJSON=hr,e.GridLayer=Or,e.Handler=gn,e.Icon=Jn,e.ImageOverlay=_r,e.LatLng=z,e.LatLngBounds=B,e.Layer=Kn,e.LayerGroup=Gn,e.LineUtil=Fn,e.Map=nn,e.Marker=tr,e.Mixin=yn,e.Path=rr,e.Point=P,e.PolyUtil=_n,e.Polygon=ur,e.Polyline=lr,e.Popup=Ir,e.PosAnimation=tn,e.Projection=Vn,e.Rectangle=Jr,e.Renderer=Hr,e.SVG=Qr,e.SVGOverlay=Sr,e.TileLayer=Fr,e.Tooltip=Rr,e.Transformation=K,e.Util=C,e.VideoOverlay=Ar,e.bind=i,e.bounds=O,e.canvas=Wr,e.circle=ar,e.circleMarker=sr,e.control=on,e.divIcon=Mr,e.extend=n,e.featureGroup=Yn,e.geoJSON=kr,e.geoJson=Nr,e.gridLayer=Br,e.icon=Xn,e.imageOverlay=jr,e.latLng=U,e.latLngBounds=F,e.layerGroup=Zn,e.map=rn,e.marker=nr,e.point=D,e.polygon=dr,e.polyline=cr,e.popup=Pr,e.rectangle=Xr,e.setOptions=p,e.stamp=o,e.svg=Yr,e.svgOverlay=Er,e.tileLayer=zr,e.tooltip=Dr,e.transformation=G,e.version=t,e.videoOverlay=Cr;var ai=window.L;e.noConflict=function(){return window.L=ai,this},window.L=e}(t)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,R(k);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function k(e,n){f=!1,g&&(g=!1,v(A),A=-1),m=!0;var s=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,_=!1,j=null,A=-1,C=5,S=-1;function E(){return!(t.unstable_now()-S<C)}function T(){if(null!==j){var e=t.unstable_now();S=e;var n=!0;try{n=j(!0,e)}finally{n?N():(_=!1,j=null)}}else _=!1}if("function"===typeof x)N=function(){x(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=T,N=function(){P.postMessage(null)}}else N=function(){y(T,0)};function R(e){j=e,_||(_=!0,N())}function D(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(A),A=-1):g=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),f||m||(f=!0,R(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,O=Object.assign;function B(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function U(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case k:return"Portal";case j:return"Profiler";case _:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ne=null,_e=null;function je(e){if(e=xi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ae(e){Ne?_e?_e.push(e):_e=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=_e;if(_e=Ne=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Se(e,t){return e(t)}function Ee(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return Se(e,t,n)}finally{Te=!1,(null!==Ne||null!==_e)&&(Ee(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Oe=null,Be=!1,Fe=null,ze={onError:function(e){Me=!0,Oe=e}};function Ue(e,t,n,r,i,s,o,a,l){Me=!1,Oe=null,Le.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Nt,_t,jt,At=!1,Ct=[],St=null,Et=null,Tt=null,It=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=vi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void jt(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Bt(e)&&n.delete(t)}function zt(){At=!1,null!==St&&Bt(St)&&(St=null),null!==Et&&Bt(Et)&&(Et=null),null!==Tt&&Bt(Tt)&&(Tt=null),It.forEach(Ft),Pt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Ut(St,e),null!==Et&&Ut(Et,e),null!==Tt&&Ut(Tt,e),It.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Zt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return St=Mt(St,e,t,n,r,i),!0;case"dragenter":return Et=Mt(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Mt(Tt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Mt(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Zt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Zt=null;function Qt(e,t,n,r){if(Zt=null,null!==(e=vi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,$t=null;function en(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=O({},cn,{view:0,detail:0}),hn=sn(dn),pn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(pn),fn=sn(O({},pn,{dataTransfer:0})),gn=sn(O({},dn,{relatedTarget:0})),yn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function jn(){return _n}var An=O({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(An),Sn=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Tn=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(In),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,On=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Zn(e){Br(e,0)}function Qn(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Xn=$n}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Ie(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},_r={};function jr(e){if(Nr[e])return Nr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Nr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ar=jr("animationend"),Cr=jr("animationiteration"),Sr=jr("animationstart"),Er=jr("transitionend"),Tr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Tr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ir.length;Rr++){var Dr=Ir[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Ar,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Sr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Oe;Me=!1,Oe=null,Be||(Be=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Or(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Or(i,a,c),s=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ie(function(){var r=s,i=we(n),o=[];e:{var a=Tr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ar:case Cr:case Sr:l=yn;break;case Er:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Pe(m,h))&&u.push(Wr(m,f,p)))),d)break;m=m.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Sn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?a:bi(l),p=null==c?a:bi(c),(a=new u(f,m+"leave",l,n,i)).target=d,a.relatedTarget=p,f=null,vi(i)===r&&((u=new u(h,m+"enter",c,n,i)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Gr(p))m++;for(p=0,f=h;f;f=Gr(f))p++;for(;0<m-p;)u=Gr(u),m--;for(;0<p-m;)h=Gr(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Zr(o,a,l,u,!1),null!==c&&null!==d&&Zr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(o,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(y=Kr(r,x)).length&&(x=new bn(x,e,null,n,i),o.push({event:x,listeners:y}),v?x.data=v:null!==(v=Un(n))&&(x.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),$t=Xt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Br(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,fi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var ki=[],Ni=-1;function _i(e){return{current:e}}function ji(e){0>Ni||(e.current=ki[Ni],ki[Ni]=null,Ni--)}function Ai(e,t){Ni++,ki[Ni]=e.current,e.current=t}var Ci={},Si=_i(Ci),Ei=_i(!1),Ti=Ci;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){ji(Ei),ji(Si)}function Di(e,t,n){if(Si.current!==Ci)throw Error(s(168));Ai(Si,t),Ai(Ei,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return O({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ti=Si.current,Ai(Si,e),Ai(Ei,Ei.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,ji(Ei),ji(Si),Ai(Si,e)):ji(Ei),Ai(Ei,n)}var Bi=null,Fi=!1,zi=!1;function Ui(e){null===Bi?Bi=[e]:Bi.push(e)}function Vi(){if(!zi&&null!==Bi){zi=!0;var e=0,t=xt;try{var n=Bi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Fi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ge($e,Vi),i}finally{xt=t,zi=!1}}return null}var Hi=[],qi=0,Wi=null,Ki=0,Gi=[],Zi=0,Qi=null,Yi=1,Ji="";function Xi(e,t){Hi[qi++]=Ki,Hi[qi++]=Wi,Wi=e,Ki=t}function $i(e,t,n){Gi[Zi++]=Yi,Gi[Zi++]=Ji,Gi[Zi++]=Qi,Qi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),$i(e,1,0))}function ts(e){for(;e===Wi;)Wi=Hi[--qi],Hi[qi]=null,Ki=Hi[--qi],Hi[qi]=null;for(;e===Qi;)Qi=Gi[--Zi],Gi[Zi]=null,Ji=Gi[--Zi],Gi[Zi]=null,Yi=Gi[--Zi],Gi[Zi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function f(i,s,a,l){for(var c=null,u=null,d=s,f=s=0,g=null;null!==d&&f<a.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var y=p(i,d,a[f],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,f),null===u?c=y:u.sibling=y,u=y,d=g}if(f===a.length)return n(i,d),is&&Xi(i,f),c;if(null===d){for(;f<a.length;f++)null!==(d=h(i,a[f],l))&&(s=o(d,s,f),null===u?c=d:u.sibling=d,u=d);return is&&Xi(i,f),c}for(d=r(i,d);f<a.length;f++)null!==(g=m(d,i,f,a[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),s=o(g,s,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Xi(i,f),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,f=a,g=a=0,y=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var x=p(i,f,v.value,c);if(null===x){null===f&&(f=y);break}e&&f&&null===x.alternate&&t(i,f),a=o(x,a,g),null===d?u=x:d.sibling=x,d=x,f=y}if(v.done)return n(i,f),is&&Xi(i,g),u;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return is&&Xi(i,g),u}for(f=r(i,f);!v.done;g++,v=l.next())null!==(v=m(f,i,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(i,e)}),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===N&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===N){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===N?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case k:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Bc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return f(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Oc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=xs(!0),ws=xs(!1),ks=_i(null),Ns=null,_s=null,js=null;function As(){js=_s=Ns=null}function Cs(e){var t=ks.current;ji(ks),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){Ns=e,js=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ns)throw Error(s(308));_s=e,Ns.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Is=null;function Ps(e){null===Is?Is=[e]:Is.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Sl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,f=a;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=O({},d,h);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Ws=_i(qs),Ks=_i(qs),Gs=_i(qs);function Zs(e){if(e===qs)throw Error(s(174));return e}function Qs(e,t){switch(Ai(Gs,t),Ai(Ks,e),Ai(Ws,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ji(Ws),Ai(Ws,t)}function Ys(){ji(Ws),ji(Ks),ji(Gs)}function Js(e){Zs(Gs.current);var t=Zs(Ws.current),n=le(t,e.type);t!==n&&(Ai(Ks,e),Ai(Ws,n))}function Xs(e){Ks.current===e&&(ji(Ws),ji(Ks))}var $s=_i(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function mo(){throw Error(s(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?$o:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function xo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(xa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function _o(e,t){var n=oo,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,xa=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Io(9,Ao.bind(null,n,r,i,t),void 0,null),null===El)throw Error(s(349));0!==(30&so)||jo(n,t,i)}return i}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&Eo(e)}function Co(e,t,n){return n(function(){So(t)&&Eo(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Eo(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function To(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,oo,e),[t.memoizedState,e]}function Io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return xo().memoizedState}function Ro(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Io(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&fo(r,o.deps))return void(i.memoizedState=Io(t,n,s,r))}oo.flags|=e,i.memoizedState=Io(1|t,n,s,r)}function Lo(e,t){return Ro(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Oo(e,t){return Do(4,2,e,t)}function Bo(e,t){return Do(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Fo.bind(null,t,e),n)}function Uo(){}function Vo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=ft(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wo(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{xt=n,io.transition=r}}function Ko(){return xo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Yo(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Zo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Ts,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},$o={readContext:Ts,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:To,useDebugValue:Uo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=To(!1),t=e[0];return e=Wo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&so)||jo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Io(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=El.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ts,useCallback:Vo,useContext:Ts,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Oo,useLayoutEffect:Bo,useMemo:Ho,useReducer:wo,useRef:Po,useState:function(){return wo(bo)},useDebugValue:Uo,useDeferredValue:function(e){return qo(xo(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],xo().memoizedState]},useMutableSource:No,useSyncExternalStore:_o,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Ts,useCallback:Vo,useContext:Ts,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Oo,useLayoutEffect:Bo,useMemo:Ho,useReducer:ko,useRef:Po,useState:function(){return ko(bo)},useDebugValue:Uo,useDeferredValue:function(e){var t=xo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[ko(bo)[0],xo().memoizedState]},useMutableSource:No,useSyncExternalStore:_o,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Bs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Bs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Bs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(nc(t,e,r,n),zs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Pi(t)?Ti:Si.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Pi(t)?Ti:Si.current,i.context=Ii(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Vs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Wl=r),da(0,t)},n}function ma(e,t,n){(n=Bs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,xa=!1;function ba(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||xa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Na(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Aa(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Rl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Rl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Rl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Rl,Pl),Pl|=r;return ba(e,t,i,n),t.child}function ja(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var s=Pi(n)?Ti:Si.current;return s=Ii(t,s),Es(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||xa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Ha(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Ii(t,c=Pi(n)?Ti:Si.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var h=t.memoizedState;o.state=h,Vs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ei.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Ii(t,l=Pi(n)?Ti:Si.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Ls=!1,h=t.memoizedState,o.state=h,Vs(t,r,o,i);var m=t.memoizedState;a!==d||h!==m||Ei.current||Ls?("function"===typeof p&&(ra(t,n,p,r),m=t.memoizedState),(c=Ls||sa(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Sa(e,t,n,r,s,i)}function Sa(e,t,n,r,i,s){ja(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),qa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Ea(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qs(e,t.containerInfo)}function Ta(e,t,n,r,i){return ps(),ms(i),t.flags|=256,ba(e,t,n,r),t.child}var Ia,Pa,Ra,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oa(e,t,n){var r,i=t.pendingProps,o=$s.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai($s,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=El)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return fc(),Fa(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Zi++]=Yi,Gi[Zi++]=Ji,Gi[Zi++]=Qi,Yi=e.id,Ji=e.overflow,Qi=t),t=Ba(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&ms(r),bs(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Ua(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Va(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=$s.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai($s,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,s);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Ka(t),null;case 3:return r=t.stateNode,Ys(),ji(Ei),ji(Si),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:Xs(t);var i=Zs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Zs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ia(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&x(e,o,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs(Gs.current),Zs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(ji($s),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Ys(),Pa(e,t),null===e&&Vr(t.stateNode.containerInfo),Ka(t),null;case 10:return Cs(t.type._context),Ka(t),null;case 19:if(ji($s),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai($s,1&$s.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vl&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Je()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=$s.current,Ai($s,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),ji(Ei),ji(Si),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ji($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ji($s),null;case 4:return Ys(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function $a(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||$a(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&($a(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_c(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&r&&null!==n&&$a(n,n.return);break;case 5:if(fl(t,e),yl(e),512&r&&null!==n&&$a(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),xe(l,a);var u=xe(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):x(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(i,!!o.multiple,m,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){_c(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){_c(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,fl(t,e),Ya=u):fl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(m=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$a(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:$a(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Xa=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",a))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){_c(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Xa=l):kl(i);for(;null!==s;)Xa=s,xl(s,t,n),s=s.sibling;Xa=i,Qa=a,Ya=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Hs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(p){_c(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function kl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var s=t.return;try{il(t)}catch(l){_c(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){_c(t,o,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Nl,_l=Math.ceil,jl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Sl=0,El=null,Tl=null,Il=0,Pl=0,Rl=_i(0),Dl=0,Ll=null,Ml=0,Ol=0,Bl=0,Fl=null,zl=null,Ul=0,Vl=1/0,Hl=null,ql=!1,Wl=null,Kl=null,Gl=!1,Zl=null,Ql=0,Yl=0,Jl=null,Xl=-1,$l=0;function ec(){return 0!==(6&Sl)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==Il?Il&-Il:null!==fs.transition?(0===$l&&($l=ft()),$l):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Sl)&&e===El||(e===El&&(0===(2&Sl)&&(Ol|=n),4===Dl&&ac(e,Il)),rc(e,r),1===n&&0===Sl&&0===(1&t.mode)&&(Vl=Je()+500,Fi&&Vi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===El?Il:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Fi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),oi(function(){0===(6&Sl)&&Vi()}),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,$l=0,0!==(6&Sl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Sl;Sl|=2;var o=mc();for(El===e&&Il===t||(Hl=null,Vl=Je()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}As(),jl.current=o,Sl=i,null!==Tl?t=0:(El=null,Il=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=mt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zl,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zl,Hl),t);break}wc(e,zl,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zl,Hl),r);break}wc(e,zl,Hl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Bl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Sl))throw Error(s(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Hl),rc(e,Je()),null}function cc(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Vl=Je()+500,Fi&&Vi())}}function uc(e){null!==Zl&&0===Zl.tag&&0===(6&Sl)&&kc();var t=Sl;Sl|=1;var n=Cl.transition,r=xt;try{if(Cl.transition=null,xt=1,e)return e()}finally{xt=r,Cl.transition=n,0===(6&(Sl=t))&&Vi()}}function dc(){Pl=Rl.current,ji(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Ys(),ji(Ei),ji(Si),no();break;case 5:Xs(r);break;case 4:Ys();break;case 13:case 19:ji($s);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Tl=e=Rc(e.current,null),Il=Pl=t,Dl=0,Ll=null,Bl=Ol=Ml=0,zl=Fl=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(r=(n=Is[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(As(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Al.current=null,null===n||null===n.return){Dl=1,Ll=t,Tl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ga(a);if(null!==m){m.flags&=-257,ya(m,a,l,0,t),1&m.mode&&fa(o,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fa(o,u,t),fc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ms(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[o]:Fl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Us(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t,Us(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function mc(){var e=jl.current;return jl.current=Xo,null===e?Xo:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||0===(268435455&Ml)&&0===(268435455&Ol)||ac(El,Il)}function gc(e,t){var n=Sl;Sl|=2;var r=mc();for(El===e&&Il===t||(Hl=null,hc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(As(),Sl=n,jl.current=r,null!==Tl)throw Error(s(261));return El=null,Il=0,Dl}function yc(){for(;null!==Tl;)xc(Tl)}function vc(){for(;null!==Tl&&!Qe();)xc(Tl)}function xc(e){var t=Nl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Pl)))return void(Tl=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Dl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=xt,i=Cl.transition;try{Cl.transition=null,xt=1,function(e,t,n,r){do{kc()}while(null!==Zl);if(0!==(6&Sl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===El&&(Tl=El=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ec(tt,function(){return kc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=xt;xt=1;var l=Sl;Sl|=4,Al.current=null,function(e,t){if(ei=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++d===r&&(c=a),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Sl=l,xt=a,Cl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Zl=e,Ql=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Vi()}(e,t,n,r)}finally{Cl.transition=i,xt=r}return null}function kc(){if(null!==Zl){var e=bt(Ql),t=Cl.transition,n=xt;try{if(Cl.transition=null,xt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,Ql=0,0!==(6&Sl))throw Error(s(331));var i=Sl;for(Sl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,m=d.return;if(sl(d),d===u){Xa=null;break}if(null!==p){p.return=m,Xa=p;break}Xa=m}}}var f=o.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var x=e.current;for(Xa=x;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=x;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){_c(l,l.return,k)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(Sl=i,Vi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{xt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=Fs(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fs(t,e=ma(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Il&n)===n&&(4===Dl||3===Dl&&(130023424&Il)===Il&&500>Je()-Ul?hc(e,0):Bl|=n),rc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ac(e,n)}function Ec(e,t){return Ge(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Tc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case N:return Lc(n.children,i,o,t);case _:a=8,i|=8;break;case j:return(e=Ic(12,n,t,2|i)).elementType=j,e.lanes=o,e;case E:return(e=Ic(13,n,t,i)).elementType=E,e.lanes=o,e;case T:return(e=Ic(19,n,t,i)).elementType=T,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case C:a=9;break e;case S:a=11;break e;case I:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ic(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Uc(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Vc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Uc(null),n=e.current,(s=Bs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,o))&&(nc(e,i,o,s),zs(e,i,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Ea(t),ps();break;case 5:Js(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(ks,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oa(e,t,n):(Ai($s,1&$s.current),null!==(e=qa(e,t,n))?e.sibling:null);Ai($s,1&$s.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai($s,$s.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return qa(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,is&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ii(t,Si.current);Es(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Sa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===I)return 14}return 2}(r),e=na(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ea(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Vs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ta(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ta(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=qa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ja(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Oa(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ai(ks,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ei.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Bs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Ts(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),ka(e,t,r,i=na(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Es(t,n),oa(t,r,i),la(t,r,i,n),Sa(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return _a(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function $c(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=qc(o);a.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(o);s.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[mi]=o.current,Vr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[mi]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return qc(o)}Qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[mi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Sl)&&(Vl=Je()+500,Vi()))}break;case 13:uc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},kt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},_t=function(){return xt},jt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[xi,bi,wi,Ae,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>Kn,Encoder:()=>qn,PacketType:()=>Hn,protocol:()=>Vn});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>Bi,hasStandardBrowserEnv:()=>zi,hasStandardBrowserWebWorkerEnv:()=>Ui,navigator:()=>Fi,origin:()=>Vi});var r=n(43);function i(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function y(){return _(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return w("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(el){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?N(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function N(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function _(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=d();function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:a,location:m.location,delta:t})}function p(e){return j(e)}null==u&&(u=0,o.replaceState(c(c({},o.state),{},{idx:u}),""));let m={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g,h),l=e,()=>{i.removeEventListener(g,h),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=w(m.location,e,t);n&&n(r,e),u=d()+1;let c=b(r,u),h=m.createHref(r);try{o.pushState(c,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}s&&l&&l({action:a,location:m.location,delta:1})},replace:function(e,t){a="REPLACE";let r=w(m.location,e,t);n&&n(r,e),u=d();let i=b(r,u),c=m.createHref(r);o.replaceState(i,"",c),s&&l&&l({action:a,location:m.location,delta:0})},go:e=>o.go(e)};return m}function j(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function A(e,t){return C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function C(e,t,n,r){let i=V(("string"===typeof t?N(t):t).pathname||"/",n);if(null==i)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=U(i);o=B(s[a],e,r)}return o}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;v(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Y([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:O(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of E(e.path))s(e,t,!0,r);else s(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=E(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var T=/^:[\w-]+$/,I=3,P=2,R=1,D=10,L=-2,M=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(M)&&(r+=L),t&&(r+=P),n.filter(e=>!M(e)).reduce((e,t)=>e+(T.test(t)?I:""===t?R:D),r)}function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Y([s,u.pathname]),pathnameBase:J(Y([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Y([s,u.pathnameBase]))}return o}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=z(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var H=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q=e=>H.test(e);function W(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function K(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Z(e){let t=G(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=N(e):(r=c({},e),v(!r.pathname||!r.pathname.includes("?"),K("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),K("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),K("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:i="",hash:s=""}="string"===typeof e?N(e):e;if(r)if(q(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),x(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?W(r.substring(1),"/"):W(r,n)}else t=n;return{pathname:t,search:X(i),hash:$(s)}}(r,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var te=["POST","PUT","PATCH","DELETE"],ne=(new Set(te),["GET",...te]);new Set(ne),Symbol("ResetLoaderData");var re=r.createContext(null);re.displayName="DataRouter";var ie=r.createContext(null);ie.displayName="DataRouterState";var se=r.createContext(!1);var oe=r.createContext({isTransitioning:!1});oe.displayName="ViewTransition";var ae=r.createContext(new Map);ae.displayName="Fetchers";var le=r.createContext(null);le.displayName="Await";var ce=r.createContext(null);ce.displayName="Navigation";var ue=r.createContext(null);ue.displayName="Location";var de=r.createContext({outlet:null,matches:[],isDataRoute:!1});de.displayName="Route";var he=r.createContext(null);he.displayName="RouteError";function pe(){return null!=r.useContext(ue)}function me(){return v(pe(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ue).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ge(e){r.useContext(ce).static||r.useLayoutEffect(e)}function ye(){let{isDataRoute:e}=r.useContext(de);return e?function(){let{router:e}=Ce("useNavigate"),t=Ee("useNavigate"),n=r.useRef(!1);ge(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,c({fromRouteId:t},i)))},[e,t]);return i}():function(){v(pe(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(re),{basename:t,navigator:n}=r.useContext(ce),{matches:i}=r.useContext(de),{pathname:s}=me(),o=JSON.stringify(Z(i)),a=r.useRef(!1);ge(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(a.current,fe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=Q(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Y([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,o,s,e]);return l}()}r.createContext(null);function ve(){let{matches:e}=r.useContext(de),t=e[e.length-1];return t?t.params:{}}function xe(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(de),{pathname:i}=me(),s=JSON.stringify(Z(n));return r.useMemo(()=>Q(e,JSON.parse(s),i,"path"===t),[e,s,i,t])}function be(e,t,n,i,s){v(pe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(ce),{matches:a}=r.useContext(de),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Pe(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,f=me();if(t){var g;let e="string"===typeof t?N(t):t;v("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=f;let y=m.pathname||"/",b=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=A(e,{pathname:b});x(p||null!=w,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),x(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let k=je(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Y([h,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Y([h,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,i,s);return t&&k?r.createElement(ue.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},k):k}function we(){let e=Te(),t=ee(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,a)}var ke=r.createElement(we,null),Ne=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(de.Provider,{value:this.props.routeContext},r.createElement(he.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _e(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(re);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(de.Provider,{value:t},i)}function je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}let c=n&&i?(e,t)=>{var r,s;i(e,{location:n.location,params:null!==(r=null===(s=n.matches)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.params)&&void 0!==r?r:{},errorInfo:t})}:void 0;return s.reduceRight((e,i,u)=>{let d,h=!1,p=null,m=null;n&&(d=o&&i.route.id?o[i.route.id]:void 0,p=i.route.errorElement||ke,a&&(l<0&&0===u?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=i.route.hydrateFallbackElement||null)));let f=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=d?p:h?m:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(_e,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?r.createElement(Ne,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):g()},null)}function Ae(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=r.useContext(re);return v(t,Ae(e)),t}function Se(e){let t=r.useContext(ie);return v(t,Ae(e)),t}function Ee(e){let t=function(e){let t=r.useContext(de);return v(t,Ae(e)),t}(e),n=t.matches[t.matches.length-1];return v(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Te(){var e;let t=r.useContext(he),n=Se("useRouteError"),i=Ee("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ie={};function Pe(e,t,n){t||Ie[e]||(Ie[e]=!0,x(!1,n))}var Re={};function De(e,t){e||Re[t]||(Re[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return be(t,void 0,r,i,n)});function Le(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Me(e){let{basename:t="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:a=!1}=e;v(!pe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:o,static:a,future:{}}),[l,o,a]);"string"===typeof i&&(i=N(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=i,f=r.useMemo(()=>{let e=V(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:m},navigationType:s}},[l,u,d,h,p,m,s]);return x(null!=f,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:r.createElement(ce.Provider,{value:c},r.createElement(ue.Provider,{children:n,value:f}))}function Oe(e){let{children:t,location:n}=e;return be(Be(t),n)}r.Component;function Be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Be(e.props.children,s));v(e.type===Le,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Be(e.props.children,s)),n.push(o)}),n}var Fe="get",ze="application/x-www-form-urlencoded";function Ue(e){return null!=e&&"string"===typeof e.tagName}function Ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var He=null;var qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||qe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function Ke(e,t){let n,r,i,s,o;if(Ue(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?V(o,t):null,n=e.getAttribute("method")||Fe,i=We(e.getAttribute("enctype"))||ze,s=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?V(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Fe,i=We(e.getAttribute("formenctype"))||We(o.getAttribute("enctype"))||ze,s=new FormData(o,e),!function(){if(null===He)try{new FormData(document.createElement("form"),0),He=!1}catch(el){He=!0}return He}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fe,r=null,i=ze,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ge(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ze(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===V(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ye(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Xe(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function $e(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function et(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ye(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function tt(e,t){return"lazy"===e.mode&&!0===t}function nt(){let e=r.useContext(re);return Ge(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rt(){let e=r.useContext(ie);return Ge(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var it=r.createContext(void 0);function st(){let e=r.useContext(it);return Ge(e,"You must render this element inside a <HydratedRouter> element"),e}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!dt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}it.displayName="FrameworkContext";function lt(e){let{page:t}=e,n=i(e,d),{router:s}=nt(),o=r.useMemo(()=>A(s.routes,t,s.basename),[s.routes,t,s.basename]);return o?r.createElement(ut,c({page:t,matches:o},n)):null}function ct(e){let{manifest:t,routeModules:n}=st(),[i,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return et((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Je).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),i}function ut(e){let{page:t,matches:n}=e,s=i(e,h),o=me(),{manifest:a,routeModules:l}=st(),{basename:u}=nt(),{loaderData:d,matches:p}=rt(),m=r.useMemo(()=>Xe(t,n,p,a,o,"data"),[t,n,p,a,o]),f=r.useMemo(()=>Xe(t,n,p,a,o,"assets"),[t,n,p,a,o]),g=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ze(t,u,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[u,d,o,a,m,n,t,l]),y=r.useMemo(()=>$e(f,a),[f,a]),v=ct(f);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},s))),y.map(e=>r.createElement("link",c({key:e,rel:"modulepreload",href:e},s))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",c({key:t,nonce:s.nonce},n))}))}var dt=!1;function ht(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:o,routeDiscovery:a,ssr:l}=st(),{router:d,static:h,staticContext:p}=nt(),{matches:m}=rt(),f=r.useContext(se),g=tt(a,l);o&&(o.didRenderScripts=!0);let y=at(m,null,s);r.useEffect(()=>{0},[]);let v=r.useMemo(()=>{var s;if(f)return null;let o=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=h?"".concat(null!==t.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Ge(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,u),s=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(o.pop();o.length>0;)a.push("/".concat(o.join("/"))),o.pop();a.forEach(e=>{let n=A(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),x=dt||f?[]:(t.entry.imports.concat($e(y,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return De(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),dt||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),x.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function mt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(t))return r.createElement(ft,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)0;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);new Error(e)}return r.createElement(ft,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function ft(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=st();return null!==a.root&&void 0!==t&&t.Layout&&!s?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,i?r.createElement(ht,null):null)))}var gt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{gt&&(window.__reactRouterVersion="7.9.6")}catch(el){}function yt(e){let{basename:t,children:n,window:i}=e,s=r.useRef();null==s.current&&(s.current=y({window:i,v5Compat:!0}));let o=s.current,[a,l]=r.useState({action:o.action,location:o.location}),c=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>o.listen(c),[o,c]),r.createElement(Me,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var vt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=r.forwardRef(function(e,t){let n,{onClick:s,discover:o="render",prefetch:a="none",relative:l,reloadDocument:u,replace:d,state:h,target:m,to:f,preventScrollReset:g,viewTransition:y}=e,b=i(e,p),{basename:w}=r.useContext(ce),N="string"===typeof f&&vt.test(f),_=!1;if("string"===typeof f&&N&&(n=f,gt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=V(t.pathname,w);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:_=!0}catch(el){x(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let j=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(pe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(ce),{hash:s,pathname:o,search:a}=xe(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:Y([n,o])),i.createHref({pathname:l,search:a,hash:s})}(f,{relative:l}),[A,C,S]=function(e,t){let n=r.useContext(it),[i,s]=r.useState(!1),[o,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let m=()=>{s(!0)},f=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,p,{}]:[o,p,{onFocus:ot(l,m),onBlur:ot(c,f),onMouseEnter:ot(u,m),onMouseLeave:ot(d,f),onTouchStart:ot(h,m)}]:[!1,p,{}]}(a,b),E=function(e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ye(),c=me(),u=xe(e,{relative:o});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:k(c)===k(u);l(e,{replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,n,i,t,e,s,o,a])}(f,{replace:d,state:h,target:m,preventScrollReset:g,relative:l,viewTransition:y});let T=r.createElement("a",c(c(c({},b),S),{},{href:n||j,onClick:_||u?s:function(e){s&&s(e),e.defaultPrevented||E(e)},ref:pt(t,C),target:m,"data-discover":N||"render"!==o?void 0:"true"}));return A&&!N?r.createElement(r.Fragment,null,T,r.createElement(lt,{page:j})):T});xt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:a=!1,style:l,to:u,viewTransition:d,children:h}=e,p=i(e,m),f=xe(u,{relative:p.relative}),g=me(),y=r.useContext(ie),{navigator:x,basename:b}=r.useContext(ce),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(oe);v(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=kt("useViewTransitionState"),s=xe(e,{relative:t});if(!n.isTransitioning)return!1;let o=V(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=V(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=F(s.pathname,a)||null!=F(s.pathname,o)}(f)&&!0===d,k=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,N=g.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(N=N.toLowerCase(),_=_?_.toLowerCase():null,k=k.toLowerCase()),_&&b&&(_=V(_,b)||_);const j="/"!==k&&k.endsWith("/")?k.length-1:k.length;let A,C=N===k||!a&&N.startsWith(k)&&"/"===N.charAt(j),S=null!=_&&(_===k||!a&&_.startsWith(k)&&"/"===_.charAt(k.length)),E={isActive:C,isPending:S,isTransitioning:w},T=C?n:void 0;A="function"===typeof o?o(E):[o,C?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof l?l(E):l;return r.createElement(xt,c(c({},p),{},{"aria-current":T,className:A,ref:t,style:I,to:u,viewTransition:d}),"function"===typeof h?h(E):h)}).displayName="NavLink";var bt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:o,reloadDocument:a,replace:l,state:u,method:d=Fe,action:h,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:y}=e,x=i(e,f),b=At(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ce),i=r.useContext(de);v(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o=c({},xe(e||".",{relative:t})),a=me();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:Y([n,o.pathname]));return k(o)}(h,{relative:m}),N="get"===d.toLowerCase()?"get":"post",_="string"===typeof h&&vt.test(h);return r.createElement("form",c(c({ref:t,method:N,action:w,onSubmit:a?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:s,method:n,navigate:o,replace:l,state:u,relative:m,preventScrollReset:g,viewTransition:y})}},x),{},{"data-discover":_||"render"!==n?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function kt(e){let t=r.useContext(re);return v(t,wt(e)),t}function Nt(e){x("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=r.useRef(Ve(e)),n=r.useRef(!1),i=me(),s=r.useMemo(()=>function(e,t){let n=Ve(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(i.search,n.current?null:t.current),[i.search]),o=ye(),a=r.useCallback((e,t)=>{const r=Ve("function"===typeof e?e(new URLSearchParams(s)):e);n.current=!0,o("?"+r,t)},[o,s]);return[s,a]}bt.displayName="Form";var _t=0,jt=()=>"__".concat(String(++_t),"__");function At(){let{router:e}=kt("useSubmit"),{basename:t}=r.useContext(ce),n=Ee("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=Ke(r,t);if(!1===i.navigate){let t=i.fetcherKey||jt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}const Ct=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,s);return s},St=e=>e;const Et=e=>{const t=(e=>e?Ct(e):Ct)(e),n=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;const n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},Tt=e=>e?Et(e):Et,It=Object.create(null);It.open="0",It.close="1",It.ping="2",It.pong="3",It.message="4",It.upgrade="5",It.noop="6";const Pt=Object.create(null);Object.keys(It).forEach(e=>{Pt[It[e]]=e});const Rt={type:"error",data:"parser error"},Dt="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Lt="function"===typeof ArrayBuffer,Mt=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ot=(e,t,n)=>{let{type:r,data:i}=e;return Dt&&i instanceof Blob?t?n(i):Bt(i,n):Lt&&(i instanceof ArrayBuffer||Mt(i))?t?n(i):Bt(new Blob([i]),n):n(It[r]+(i||""))},Bt=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Ft(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let zt;const Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vt="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Vt[Ut.charCodeAt(n)]=n;const Ht="function"===typeof ArrayBuffer,qt=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Kt(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Wt(e.substring(1),t)};return Pt[n]?e.length>1?{type:Pt[n],data:e.substring(1)}:{type:Pt[n]}:Rt},Wt=(e,t)=>{if(Ht){const n=(e=>{let t,n,r,i,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=Vt[e.charCodeAt(t)],r=Vt[e.charCodeAt(t+1)],i=Vt[e.charCodeAt(t+2)],s=Vt[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return c})(e);return Kt(n,t)}return{base64:!0,data:e}},Kt=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Gt=String.fromCharCode(30);function Zt(){return new TransformStream({transform(e,t){!function(e,t){Dt&&e.data instanceof Blob?e.data.arrayBuffer().then(Ft).then(t):Lt&&(e.data instanceof ArrayBuffer||Mt(e.data))?t(Ft(e.data)):Ot(e,!1,e=>{zt||(zt=new TextEncoder),t(zt.encode(e))})}(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Qt;function Yt(e){return e.reduce((e,t)=>e+t.length,0)}function Jt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Xt(e){if(e)return function(e){for(var t in Xt.prototype)e[t]=Xt.prototype[t];return e}(e)}Xt.prototype.on=Xt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Xt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Xt.prototype.off=Xt.prototype.removeListener=Xt.prototype.removeAllListeners=Xt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Xt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},Xt.prototype.emitReserved=Xt.prototype.emit,Xt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Xt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const $t="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),en="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const nn=en.setTimeout,rn=en.clearTimeout;function sn(e,t){t.useNativeTimers?(e.setTimeoutFn=nn.bind(en),e.clearTimeoutFn=rn.bind(en)):(e.setTimeoutFn=en.setTimeout.bind(en),e.clearTimeoutFn=en.clearTimeout.bind(en))}function on(e){return"string"===typeof e?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function an(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class ln extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cn extends Xt{constructor(e){super(),this.writable=!1,sn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new ln(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class un extends cn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Gt),r=[];for(let i=0;i<n.length;i++){const e=qt(n[i],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((e,s)=>{Ot(e,!1,e=>{r[s]=e,++i===n&&t(r.join(Gt))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=an()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let dn=!1;try{dn="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(GN){}const hn=dn;function pn(){}class mn extends un{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class fn extends Xt{constructor(e,t,n){super(),this.createRequest=e,sn(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=tn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(el){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(el){}try{n.setRequestHeader("Accept","*/*")}catch(el){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof n.status?n.status:0)},0))},n.send(this._data)}catch(el){return void this.setTimeoutFn(()=>{this._onError(el)},0)}"undefined"!==typeof document&&(this._index=fn.requestsCount++,fn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=pn,e)try{this._xhr.abort()}catch(el){}"undefined"!==typeof document&&delete fn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(fn.requestsCount=0,fn.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",gn);else if("function"===typeof addEventListener){addEventListener("onpagehide"in en?"pagehide":"unload",gn,!1)}function gn(){for(let e in fn.requests)fn.requests.hasOwnProperty(e)&&fn.requests[e].abort()}const yn=function(){const e=vn({xdomain:!1});return e&&null!==e.responseType}();function vn(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||hn))return new XMLHttpRequest}catch(el){}if(!t)try{return new(en[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(el){}}const xn="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class bn extends cn{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=xn?{}:tn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(GN){return this.emitReserved("error",GN)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Ot(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(el){}r&&$t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=an()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const wn=en.WebSocket||en.MozWebSocket;const kn={websocket:class extends bn{createSocket(e,t,n){return xn?new wn(e,t,n):t?new wn(e,t):new wn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends cn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(GN){return this.emitReserved("error",GN)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Qt||(Qt=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===r){if(Yt(n)<1)break;const e=Jt(n,1);s=128===(128&e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(Yt(n)<2)break;const e=Jt(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Yt(n)<8)break;const e=Jt(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){a.enqueue(Rt);break}i=s*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Yt(n)<i)break;const e=Jt(n,i);a.enqueue(qt(s?e:Qt.decode(e),t)),r=0}if(0===i||i>e){a.enqueue(Rt);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Zt();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(e=>{let{done:t,value:n}=e;t||(this.onPacket(n),i())}).catch(e=>{})};i();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&$t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends mn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=yn&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new fn(vn,this.uri(),e)}}},Nn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jn(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=Nn.exec(e||""),s={},o=14;for(;o--;)s[_n[o]]=i[o]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,s.query),s}const An="function"===typeof addEventListener&&"function"===typeof removeEventListener,Cn=[];An&&addEventListener("offline",()=>{Cn.forEach(e=>e())},!1);class Sn extends Xt{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=jn(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=jn(t.host).host);sn(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),An&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Sn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Sn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=on(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,$t(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Sn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),An&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Cn.indexOf(this._offlineEventListener);-1!==e&&Cn.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Sn.protocol=4;class En extends Sn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Sn.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Sn.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){n||(n=!0,c(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function o(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",r),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class Tn extends En{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>kn[e]).filter(e=>!!e)),super(e,t)}}const In="function"===typeof ArrayBuffer,Pn=Object.prototype.toString,Rn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Pn.call(Blob),Dn="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Pn.call(File);function Ln(e){return In&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Rn&&e instanceof Blob||Dn&&e instanceof File}function Mn(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Mn(e[t]))return!0;return!1}if(Ln(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Mn(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Mn(e[n]))return!0;return!1}function On(e){const t=[],n=e.data,r=e;return r.data=Bn(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Bn(e,t){if(!e)return e;if(Ln(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Bn(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Bn(e[r],t));return n}return e}function Fn(e,t){return e.data=zn(e.data,t),delete e.attachments,e}function zn(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=zn(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=zn(e[n],t));return e}const Un=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Vn=5;var Hn;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Hn||(Hn={}));class qn{constructor(e){this.replacer=e}encode(e){return e.type!==Hn.EVENT&&e.type!==Hn.ACK||!Mn(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Hn.EVENT?Hn.BINARY_EVENT:Hn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Hn.BINARY_EVENT&&e.type!==Hn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=On(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Wn(e){return"[object Object]"===Object.prototype.toString.call(e)}class Kn extends Xt{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Hn.BINARY_EVENT;n||t.type===Hn.BINARY_ACK?(t.type=n?Hn.EVENT:Hn.ACK,this.reconstructor=new Gn(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Ln(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Hn[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Hn.BINARY_EVENT||n.type===Hn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Kn.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(el){return!1}}static isPayloadValid(e,t){switch(e){case Hn.CONNECT:return Wn(t);case Hn.DISCONNECT:return void 0===t;case Hn.CONNECT_ERROR:return"string"===typeof t||Wn(t);case Hn.EVENT:case Hn.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Un.indexOf(t[0]));case Hn.ACK:case Hn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Gn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Fn(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Zn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Qn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Yn extends Xt{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Zn(e,"open",this.onopen.bind(this)),Zn(e,"packet",this.onpacket.bind(this)),Zn(e,"error",this.onerror.bind(this)),Zn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(Qn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:Hn.EVENT,data:s,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof s[s.length-1]){const e=this.ids++,t=s.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},i),o=function(){r.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,n)};o.withError=!0,this.acks[e]=o}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t,r)=>{const i=(e,n)=>e?r(e):t(n);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];n(null,...s)}return r.pending=!1,t._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Hn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Hn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Hn.EVENT:case Hn.BINARY_EVENT:this.onevent(e);break;case Hn.ACK:case Hn.BINARY_ACK:this.onack(e);break;case Hn.DISCONNECT:this.ondisconnect();break;case Hn.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.packet({type:Hn.ACK,id:e,data:i})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Hn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Jn(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Jn.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Jn.prototype.reset=function(){this.attempts=0},Jn.prototype.setMin=function(e){this.ms=e},Jn.prototype.setMax=function(e){this.max=e},Jn.prototype.setJitter=function(e){this.jitter=e};class Xn extends Xt{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,sn(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Jn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||e;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Tn(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Zn(t,"open",function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=Zn(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Zn(e,"ping",this.onping.bind(this)),Zn(e,"data",this.ondata.bind(this)),Zn(e,"error",this.onerror.bind(this)),Zn(e,"close",this.onclose.bind(this)),Zn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(el){this.onclose("parse error",el)}}ondecoded(e){$t(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Yn(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $n={};function er(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=jn(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=$n[i]&&s in $n[i].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Xn(r,t):($n[i]||($n[i]=new Xn(r,t)),a=$n[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(er,{Manager:Xn,Socket:Yn,io:er,connect:er});const tr="http://3.110.122.127:3000";let nr=null;const rr=Tt((e,t)=>({notifications:[],unreadCount:0,isLoading:!1,error:null,socketConnected:!1,addNotification:n=>{const r=c(c({},n),{},{id:n._id||Date.now().toString()+Math.random().toString(36),timestamp:new Date,read:!1}),i=t().notifications.some(e=>e.id===r.id||e._id===n._id);if(!i){e(e=>({notifications:[r,...e.notifications],unreadCount:e.unreadCount+1}));const t=n.userId||localStorage.getItem("userId");t&&fetch("".concat(tr,"/createNotification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,type:n.type||"general",title:n.title,message:n.message,vehicleId:n.vehicleId,vehicleName:n.vehicleName,bookingId:n.bookingId,requiresFeedback:n.requiresFeedback})}).then(e=>{e.ok&&console.log("\ud83d\udd14 Notification saved to backend")}).catch(e=>{console.log("\ud83d\udd14 Could not save notification to backend (API may not exist):",e.message)})}},updateNotificationStatus:(t,n)=>{console.log("\ud83d\udd14 Updating notification status for booking:",t,"to:",n),e(e=>({notifications:e.notifications.map(e=>e.bookingId===t?c(c({},e),{},{bookingStatus:n}):e)}))},setNotifications:t=>{const n=t.filter(e=>!e.read).length;e({notifications:t,unreadCount:n})},fetchNotifications:async n=>{if(n){e({isLoading:!0,error:null});try{console.log("\ud83d\udd14 Fetching notifications for user:",n);const r=await fetch("".concat(tr,"/getNotifications/").concat(n));if(404===r.status)return console.log("\ud83d\udd14 Notifications API not available, using local notifications only"),void e({isLoading:!1,error:null});if(!r.ok)throw new Error("Failed to fetch notifications");const i=await r.json();console.log("\ud83d\udd14 Notifications response:",i);let s=[];Array.isArray(i)?s=i:i.notifications?s=i.notifications:i.data&&(s=i.data);const o=s.map(e=>({id:e._id||e.id||Date.now().toString(),_id:e._id,type:e.type||"general",title:e.title||"Notification",message:e.message||e.body||"",timestamp:new Date(e.createdAt||e.timestamp||Date.now()),read:e.read||e.isRead||!1,vehicleId:e.vehicleId||e.VechileId,vehicleName:e.vehicleName||e.VehicleName,bookingId:e.bookingId,requiresFeedback:e.requiresFeedback,userId:e.userId,createdAt:e.createdAt})),a=t().notifications,l=new Set(o.map(e=>e._id||e.id)),c=a.filter(e=>!l.has(e._id||e.id)&&!l.has(e.id)),u=[...o,...c];u.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());const d=u.filter(e=>!e.read).length;e({notifications:u,unreadCount:d,isLoading:!1}),console.log("\ud83d\udd14 Loaded",u.length,"notifications,",d,"unread")}catch(r){console.log("\ud83d\udd14 Notifications API not available, using local notifications only:",r.message),e({isLoading:!1,error:null})}}},markAsRead:async t=>{e(e=>{const n=e.notifications.find(e=>e.id===t||e._id===t);return n&&!n.read?{notifications:e.notifications.map(e=>e.id===t||e._id===t?c(c({},e),{},{read:!0}):e),unreadCount:Math.max(0,e.unreadCount-1)}:e});try{await fetch("".concat(tr,"/markNotificationRead/").concat(t),{method:"PUT"}),console.log("\ud83d\udd14 Marked notification as read:",t)}catch(n){console.error("\ud83d\udd14 Error marking notification as read:",n)}},markAllAsRead:async t=>{e(e=>({notifications:e.notifications.map(e=>c(c({},e),{},{read:!0})),unreadCount:0}));try{await fetch("".concat(tr,"/markAllNotificationsRead/").concat(t),{method:"PUT"}),console.log("\ud83d\udd14 Marked all notifications as read")}catch(n){console.error("\ud83d\udd14 Error marking all notifications as read:",n)}},deleteNotification:async t=>{e(e=>{const n=e.notifications.find(e=>e.id===t||e._id===t);return{notifications:e.notifications.filter(e=>e.id!==t&&e._id!==t),unreadCount:n&&!n.read?e.unreadCount-1:e.unreadCount}});try{await fetch("".concat(tr,"/deleteNotification/").concat(t),{method:"DELETE"}),console.log("\ud83d\udd14 Deleted notification:",t)}catch(n){console.error("\ud83d\udd14 Error deleting notification:",n)}},clearAllNotifications:async t=>{e({notifications:[],unreadCount:0});try{await fetch("".concat(tr,"/clearAllNotifications/").concat(t),{method:"DELETE"}),console.log("\ud83d\udd14 Cleared all notifications")}catch(n){console.error("\ud83d\udd14 Error clearing all notifications:",n)}},initializeSocket:n=>{n?(nr&&nr.disconnect(),console.log("\ud83d\udd14 Initializing notification socket for user:",n),nr=er("http://3.110.122.127:3001",{query:{userId:n},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3}),nr.on("connect",()=>{console.log("\ud83d\udd14 Notification socket connected"),e({socketConnected:!0}),t().fetchNotifications(n)}),nr.on("disconnect",()=>{console.log("\ud83d\udd14 Notification socket disconnected"),e({socketConnected:!1})}),nr.on("new-notification",e=>{console.log("\ud83d\udd14 New notification received via socket:",e);const n={_id:e._id||e.id,type:e.type||"general",title:e.title||"New Notification",message:e.message||e.body||"",vehicleId:e.vehicleId,vehicleName:e.vehicleName,bookingId:e.bookingId,requiresFeedback:e.requiresFeedback};t().addNotification(n)}),nr.on("booking-status-update",e=>{console.log("\ud83d\udd14 Booking status update received:",e);let n="general",r="Booking Update",i="";"accepted"===e.status||"confirmed"===e.status?(n="booking_confirmed",r="Booking Confirmed!",i="Your booking for ".concat(e.vehicleName||"the vehicle"," has been accepted.")):"rejected"===e.status||"cancelled"===e.status?(n="booking_declined",r="Booking Declined",i="Your booking for ".concat(e.vehicleName||"the vehicle"," was declined.")):"timeout"===e.status&&(n="booking_timeout",r="Booking Timed Out",i="Your booking for ".concat(e.vehicleName||"the vehicle"," was auto-cancelled due to no response.")),t().addNotification({type:n,title:r,message:i,vehicleName:e.vehicleName,bookingId:e.bookingId})}),nr.on("new-booking-request",e=>{console.log("\ud83d\udd14 New booking request received:",e),t().addNotification({type:"new_booking",title:"New Booking Request!",message:"You have a new booking request for ".concat(e.vehicleName||e.VehicleName||"your vehicle","."),vehicleName:e.vehicleName||e.VehicleName,vehicleId:e.vehicleId||e.VechileId,bookingId:e._id||e.id})})):console.log("\ud83d\udd14 No userId provided for socket initialization")},disconnectSocket:()=>{nr&&(console.log("\ud83d\udd14 Disconnecting notification socket"),nr.disconnect(),nr=null,e({socketConnected:!1}))}})),ir=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},sr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var or={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ar=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],lr=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:u,iconNode:d}=e,h=i(e,ar);return(0,r.createElement)("svg",c(c(c({ref:t},or),{},{width:s,height:s,stroke:n,strokeWidth:a?24*Number(o)/Number(s):o,className:sr("lucide",l)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),cr=["className"],ur=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{className:o}=n,a=i(n,cr);return(0,r.createElement)(lr,c({ref:s,iconNode:t,className:sr("lucide-".concat((l=ir(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),o)},a));var l});return n.displayName=ir(e),n},dr=ur("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),hr=ur("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pr=ur("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var mr=n(579);const fr=(0,r.createContext)(void 0),gr={latitude:16.9891,longitude:82.2475},yr=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(()=>localStorage.getItem("currentCity")||"Kakinada"),[s,o]=(0,r.useState)(()=>localStorage.getItem("currentCountry")||"India"),[a,l]=(0,r.useState)(()=>{const e=localStorage.getItem("coordinates");return e?JSON.parse(e):gr});(0,r.useEffect)(()=>{localStorage.setItem("currentCity",n),localStorage.setItem("currentCountry",s),localStorage.setItem("coordinates",JSON.stringify(a))},[n,s,a]);return(0,mr.jsx)(fr.Provider,{value:{currentCity:n,currentCountry:s,coordinates:a,setLocation:(e,t)=>{i(e),o(t||"India")},setCoordinates:e=>{l(e)},setLocationWithCoordinates:(e,t,n)=>{i(e),o(n||"India"),l(t)}},children:t})},vr=()=>{const e=(0,r.useContext)(fr);if(void 0===e)throw new Error("useLocation must be used within a LocationProvider");return e},xr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAJ70lEQVR4AeycjZnUOAyGByqADqCCgwqACg4qACqAq4ClAqAClgqACuAqYK8C6ACugvC92ThMJrZi59czYx4LZ/wjS/osxU6cvbkr/7KyQAEkKzh2uwJIASQzC2QmTvGQAkhmFshMnOIhBZDMLJCZOMVDCiCZWSAzcZbxkMyUPCZxsgCkqqo7oseiZ6IL0VvR+4a+KB9LjofL4Q29EE/Ge6j8nuhWLqCtDoiUxwAYBCN91+9Kxvgu+ih6L3oleiF61tBD5WPJ8XA5vKG34sl4X5R/E/2UHBDAIxfyMaaq1k2rACJlmYnM+p9SDwNgEIx0R79zSXgJICAX8gEOIH2U/E9Fq8i6KCBSAiCYhRCzHqVzASBGDuR9rIaXIrwZ71kUmEUAERDcEwABYtZJn5NIeA/AvJGOgDW7UrMDIkHvSUrC0ikBIZU66aV+fZOus3vLrIA0AuIVY2fPLyn6I5Joq6abJcDgPkM+mxCzAiKpYsHAmMTl5+pzX3T3xvW/28q4jiHaqnl80ji3RXcbYtxHun4iYsa/U/5VlJIAg9VaSh+z7WyAyDuIrwhoDcjsfyYTYsznyi9FVyLKrX6z1GmcX6IfDTHuV11/Er0TvRQ9Et3QYID0SXlMYhl/EdMwps1sgGgw1vfKgumDau5LYXJdJqfVOkhGQAIUKGaysIKcRb5ZAInwDmYgnkGomkXwNZgAjMYhrF0pt9It2WCWRcwsgEjSp6JQIjQQo0P1WZcLFDwkBpShCBGl52RANDO4b4RmBx6B20cJk2sjgeL0IA+JySY4ZIdQn175ZEDE0bqhEaqYYWp23EmgoMfrAS3Y1Q80sasnAdJ4RyhcsZqxwLIly7BWoPCMy1oa88xr7B6s1ngSIOJguehJgSFdXbK8BDAm3S+nAhK6keHe/zoNTimXl+AhUEitUMQIte+UjwZE4Yp4yQ29w7D5wYYLUJqfJ5dZXsKDVStymMYYDYi4WpshS2B1Pe4U4SWhyDGo+ChA5B14RmgWHJd3DJoo2MCadCyBeeod7ByqGAWImFk3bB4aqslpp8ZLrLDMs71kIyQD0njH38ZIJ3kzD+hrPZcbtQROBkSCEapY3umylz5r5lizptdhqwJNLJ4/8aSW8AKFdLJEZF8S2r3DL3kJPAYQ64Y167sByxJj6gQChue9OIctIN5s8g4H4kADr2epZ9INDqHJBxjWEtiKJF7+SYCgkLhwQ1fWS7xrsFy412GtAuQWYXSI2M7s9Q2PbtTzJhBwYvYUvNjy8aKs9kAuYikJEDG1lrqxL3TEZp0kEAhLbzQaQETNerV1CXAuxYP+rqyXy0vwEDylV9cUWBGlafIn6wCiwXHp+pCYrjuzSL8RkM3gn97dq6wAkbzIDxDJcbyr1u6leHGgAX4HVe1Py0uwKbZrG4sfE4VyTmp2JkoLiBq9Ug8U4EZFTkzFdVktwNBa6hKuPqt/TgkdQnsBZjQTiL2EI35T7tMBPvDz1VGGzchDhOEBgckOH05qknNSExtj+7pvDYjACBkc9NhX0PlB3cP/H8r4azYolT6EGYx4ODoG5x7BIYonCjcXe8RvDkFw8MK3UuR+AN9DnjvxgC+hq1fXFBDqWUAAHDY99DbOG9dlNSDqRCNlwQRgUKhBNoAIDIDwhSkMBhAfGgN6dVEdEzD0hpDwFbLV/oLmkDfGtuxHeyZK+1l08vIMDnuES7rT5DxcQ4C96lUvfbOY18icKGEmDwojUPCQECh1eBHwhCB05V7AvfWvQcZ2gxqDWA+xWe12CMQehNBGfOT+I5krlo7cEImTHFrmwDXuSSwFRJSBCAdDM2g39K+qKmYvtN8U45qvkdUPw0LIwsRitrLk/W+fUXNNm0rX7GPQFZ3R3eeVahadsMGtmxIGBZaa0RiZEMIYgEYsZYYRS+sbmsRFIeIr4EmcOnENAaQjNmyQAxVgOyRe8FbWSXjFK3F1fJgg8IZUXGFcDAshC8ZFNmQElA6zBX+AwT08BEMtOM4o1gAJAaQjZi3kQMX4h0TbwwGZEPSjDuI3vKHDtlv/fgwg1uppawHPbfwHAMKMGVKcODzUptRPt0AdslgODrHK0b2HZD7G+is85B9Jzo1PWUkbWgAMnt/UmptzqxzNZ4fKBo+KDeU6q6GxNTZnycymtfYQtv4cauPTAPf4wHpYdlYWW1BZTnXyWQY25xpw2p364bj1rvOwsPye1QJeG3MP8Y3Cet1X7spYdbEYINy5spJfW8DZhvy6xP9/vTM/rOoBoq2rBQYP3vjohnjHsyHuPTwh5bkPYe4cAUJndMcGhCBnG/fpXOihIzvz3uq1B8ghYnu/X2sBwGdoCNAWq4x3IZzF4pMwAEIQFgh4UNvuhC6I9ejGjRgAmKDojg2oa1WVbbg385QAwNryvQtA2fu5C95DOo2aH6wGmstw1gjBAqGeMWoJOMySjrAqP6aE7EQHdHEe0N6IIxSJsh18UjwEoegTTQIH7wEcPmcjtPHUFXCieWzcEE9gYgEC0QFdku2QokMKICl8vW0FEB9T4sLHAArG5z7ZC0Ve5WYqXBWQPZmJv4vOtL2xxlwiG+/ax/Sd1GcTQOQpKJyzl+DJQ8vWSYYPdd4EkEaYzmqtKcsl2+x88gaAtDbvLfnamjO+SAHE2jAmmVCbT8DgzV9SvxUb884fGecasrcBDDFOAYT30tGMfQMChAggeIc+iZeP/4xlvLTj3TuHBCcBI33Rk1fNUeKlAAJjDga4wwLknCTh4AF0ocF9RB3tOETASQ0OD8ArSsANGyEjm0FO0AAOOqCLT0cOXlDnCNtATDz0hleUKimAOIaELkcckGBfATELfEQd7aKFcgNllOMx6IAuPh3xeuocOfvQL0mNMYAkDVAap1mgAJJmr8VbF0AWN3HaAAWQNHst3roAsriJ0wY4GUDS1M63dQEkM2wKIAWQzCyQmTjFQwogmVkgM3F8HsLbvMzEPB9xeoDo9Spv8kLniM7HMstryjEiTrV0RuoB0tTyiLy5nJxxakM4H3+SJXoGVNmoJGtw0KPXNwRIr2EpWMcCBRDTzutXFkDWt7k5YgHENM/6lQWQ9W1ej1hVlffwhBcQrQA4tTfXfuT/WoLT+G8um/AZoZeXF5DGduxHmstJGX+qYhKDjDrP9TfBOM3iVcsChG8h8BRvx8hC/hRSzmd4I9W4bqbIgSGn6oNNgwe5g4BocDrybQS7djZEKcQHKnwTwrGYa21O5H/ZBZ2YrCn2cG0Bgi+usK3XIkFAaK3B+SSLz7X4TiKF+NR36kxChCxJdnHfjqTYhLb8BTvvvcMpagLiGpV8PQsUQNazdTuSdVEAsayzQV0BZAOjW0MWQCzrbFBXANnA6NaQBRDLOhvUFUA2MLo1ZAHEss4GdQWQDYxuDfkbAAD//xqRU5kAAAAGSURBVAMAIRdFBUrhWQ8AAAAASUVORK5CYII=",br=n.p+"static/media/sportbike.95e6262a7998f4c98fe8.png",wr=e=>{let{isOpen:t,onClose:n,onSelect:r}=e;return t?(0,mr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("h2",{className:"text-lg font-bold",children:"Select Vehicle"}),(0,mr.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:"\xd7"})]}),(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsxs)("div",{className:"flex items-center p-4 border rounded cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>r("car"),children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] p-3 rounded mr-4 flex items-center justify-center w-14 h-14",children:(0,mr.jsx)("img",{src:xr,alt:"Car",className:"w-8 h-8 object-contain filter brightness-0 invert"})}),(0,mr.jsx)("span",{className:"text-lg font-medium",children:"Car"}),(0,mr.jsx)("span",{className:"ml-auto text-gray-400",children:"\u203a"})]}),(0,mr.jsxs)("div",{className:"flex items-center p-4 border rounded cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>r("bike"),children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] p-3 rounded mr-4 flex items-center justify-center w-14 h-14",children:(0,mr.jsx)("img",{src:br,alt:"Bike",className:"w-8 h-8 object-contain filter brightness-0 invert"})}),(0,mr.jsx)("span",{className:"text-lg font-medium",children:"Bike"}),(0,mr.jsx)("span",{className:"ml-auto text-gray-400",children:"\u203a"})]})]})]})}):null},kr=n.p+"static/media/RentOnGoLogo.b0a8236f05965481c4d1.png",Nr=()=>{const e=ye(),t=me(),{currentCity:n}=vr(),{unreadCount:i}=rr(),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),c=[{name:"Rental",path:"/rental"},{name:"Listed",path:"/listed"},{name:"MyBookings",path:"/mybookings"},{name:"Profile",path:"/profile"},{name:"Notifications",path:"/notifications"}],u=t=>{e(t),o(!1)};return(0,mr.jsxs)("nav",{className:"w-full bg-white shadow-sm border-b border-gray-100",children:[(0,mr.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-3 flex justify-between items-center",children:[(0,mr.jsx)("div",{className:"flex items-center cursor-pointer",onClick:()=>u("/rental"),children:(0,mr.jsx)("img",{src:kr,alt:"RentOnGo Logo",className:"object-contain w-[180px] sm:w-[214px] h-[48px] sm:h-[64px]"})}),(0,mr.jsxs)("div",{className:"hidden lg:flex items-center gap-6",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-1 text-gray-700 cursor-pointer hover:text-blue-600",onClick:()=>u("/change-location"),children:[(0,mr.jsx)(dr,{size:18}),(0,mr.jsx)("span",{className:"text-sm font-medium",children:n})]}),c.map(e=>(0,mr.jsxs)("button",{onClick:()=>u(e.path),className:"relative text-sm font-medium transition-all flex items-center gap-1 ".concat(t.pathname===e.path?"text-blue-600":"text-gray-700 hover:text-blue-600"),children:[e.name,"Notifications"===e.name&&i>0&&(0,mr.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:i>9?"9+":i}),t.pathname===e.path&&(0,mr.jsx)("span",{className:"absolute -bottom-1 left-0 w-full h-[2px] bg-blue-600 rounded-full"})]},e.name)),(0,mr.jsx)("button",{onClick:()=>l(!0),className:"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white text-sm font-semibold px-4 py-2 rounded-md hover:opacity-90 transition-all",children:"Listing +"})]}),(0,mr.jsx)("button",{className:"lg:hidden flex items-center text-gray-700 hover:text-blue-600 transition",onClick:()=>o(!s),children:s?(0,mr.jsx)(hr,{size:24}):(0,mr.jsx)(pr,{size:24})})]}),s&&(0,mr.jsxs)("div",{className:"lg:hidden bg-white shadow-md border-t border-gray-100 px-6 py-4 animate-slide-down",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-gray-700 cursor-pointer",onClick:()=>u("/change-location"),children:[(0,mr.jsx)(dr,{size:18}),(0,mr.jsx)("span",{className:"text-sm font-medium",children:n})]}),(0,mr.jsxs)("div",{className:"flex flex-col space-y-3",children:[c.map(e=>(0,mr.jsxs)("button",{onClick:()=>u(e.path),className:"text-left text-sm font-medium flex items-center gap-2 ".concat(t.pathname===e.path?"text-blue-600":"text-gray-700 hover:text-blue-600"),children:[e.name,"Notifications"===e.name&&i>0&&(0,mr.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:i>9?"9+":i})]},e.name)),(0,mr.jsx)("button",{onClick:()=>{o(!1),l(!0)},className:"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white text-sm font-semibold px-4 py-2 rounded-md hover:opacity-90 transition-all w-fit",children:"Listing +"})]})]}),(0,mr.jsx)(wr,{isOpen:a,onClose:()=>l(!1),onSelect:t=>{l(!1),"car"===t?e("/list-car"):"bike"===t&&e("/list-bike")}})]})},_r=ur("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),jr=ur("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ar=ur("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Cr=ur("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Sr=e=>{let{value:t,onChange:n,minDate:i}=e;const[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(t?new Date(t):new Date),c=e=>{if(!t)return!1;const[n,r,i]=t.split("-");return parseInt(i)===e&&parseInt(r)-1===a.getMonth()&&parseInt(n)===a.getFullYear()},u=e=>{const t=new Date;return e===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()},d=e=>{if(!i)return!1;const t=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)<i};return(0,mr.jsx)("div",{className:"flex gap-4 mb-6",children:(0,mr.jsxs)("div",{className:"relative flex-1",children:[(0,mr.jsxs)("button",{onClick:()=>o(!s),className:"border rounded px-3 py-2 bg-white hover:border-blue-500 transition flex items-center gap-2 min-w-[150px]",children:[(0,mr.jsx)(jr,{className:"w-4 h-4 text-gray-500"}),(0,mr.jsx)("span",{className:"text-sm",children:t?(e=>{if(!e)return"Select";const[t,n,r]=e.split("-");return"".concat(r,"-").concat(n,"-").concat(t)})(t):"Select"})]}),s&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),(0,mr.jsxs)("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl p-4 z-50 w-80",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mr.jsx)("button",{onClick:()=>{l(new Date(a.getFullYear(),a.getMonth()-1))},className:"p-1 hover:bg-gray-100 rounded",children:(0,mr.jsx)(Ar,{className:"w-5 h-5"})}),(0,mr.jsxs)("h3",{className:"font-semibold text-gray-900",children:[["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]," ",a.getFullYear()]}),(0,mr.jsx)("button",{onClick:()=>{l(new Date(a.getFullYear(),a.getMonth()+1))},className:"p-1 hover:bg-gray-100 rounded",children:(0,mr.jsx)(Cr,{className:"w-5 h-5"})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,mr.jsx)("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(e=>{const t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n,1),i=new Date(t,n+1,0).getDate(),s=0===r.getDay()?6:r.getDay()-1,o=[],a=new Date(t,n,0).getDate();for(let c=s-1;c>=0;c--)o.push({day:a-c,isCurrentMonth:!1});for(let c=1;c<=i;c++)o.push({day:c,isCurrentMonth:!0});const l=42-o.length;for(let c=1;c<=l;c++)o.push({day:c,isCurrentMonth:!1});return o})(a).map((e,t)=>{const r=!e.isCurrentMonth||d(e.day);return(0,mr.jsx)("button",{onClick:()=>e.isCurrentMonth&&!d(e.day)&&(e=>{const t=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),i=String(e).padStart(2,"0"),s="".concat(t,"-").concat(r,"-").concat(i);n(s),o(!1)})(e.day),disabled:r,className:"\n                        aspect-square flex items-center justify-center text-sm rounded-lg transition\n                        ".concat(r?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:bg-gray-100","\n                        ").concat(c(e.day)&&e.isCurrentMonth?"bg-blue-600 text-white hover:bg-blue-700":"","\n                        ").concat(u(e.day)&&e.isCurrentMonth&&!c(e.day)?"bg-blue-50 font-semibold":"","\n                      "),children:e.day},t)})})]})]})]})})},Er=e=>{let{onApply:t,onClose:n,initialFilters:i={}}=e;const[s,o]=(0,r.useState)(c({vehicleType:"cars",priceRange:[500,5e3],distance:10,selectedVehicles:[],fuelType:"All",transmission:"All"},i)),[a,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(null),h={cars:["Honda City","Toyota Innova","BMW X5","Maruti Swift","Hyundai Creta","Tata Nexon"],bikes:["Royal Enfield","Honda CB","Yamaha R15","KTM Duke","Bajaj Pulsar","TVS Apache"]},p=(e,t)=>{o(n=>c(c({},n),{},{[e]:t}))},m=()=>{n&&n()};return(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:m}),(0,mr.jsxs)("div",{className:"fixed bg-white shadow-lg rounded-xl z-50 overflow-y-auto p-6 border",style:{top:"80px",right:"20px",width:"375px",height:"655px"},children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter"}),(0,mr.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 text-xl font-bold transition-colors",children:"\u2715"})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("p",{className:"font-medium mb-2",children:"Vehicle Type"}),(0,mr.jsx)("div",{className:"flex gap-3",children:["cars","bikes"].map(e=>(0,mr.jsxs)("label",{className:"flex items-center text-sm",children:[(0,mr.jsx)("input",{type:"radio",name:"vehicleType",checked:s.vehicleType===e,onChange:()=>(e=>{o(t=>c(c({},t),{},{vehicleType:e,selectedVehicles:[]})),l("")})(e),className:"mr-2"}),e.toUpperCase()]},e))})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("p",{className:"font-medium mb-2",children:"Price Range"}),(0,mr.jsx)("input",{type:"range",min:50,max:5e3,value:s.priceRange[1],onChange:e=>p("priceRange",[50,Number(e.target.value)]),className:"w-full accent-blue-600"}),(0,mr.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[(0,mr.jsx)("span",{children:"\u20b950"}),(0,mr.jsxs)("span",{children:["\u20b9",s.priceRange[1]]})]})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("p",{className:"font-medium mb-2",children:"Distance"}),(0,mr.jsx)("input",{type:"range",min:1,max:50,value:s.distance,onChange:e=>p("distance",Number(e.target.value)),className:"w-full accent-blue-600"}),(0,mr.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[(0,mr.jsx)("span",{children:"1 km"}),(0,mr.jsxs)("span",{children:[s.distance," km"]})]})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Vehicle Name"}),(0,mr.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:a,onChange:e=>{l(e.target.value),p("selectedVehicles",[e.target.value])},children:[(0,mr.jsx)("option",{value:"",children:"Select"}),(h[s.vehicleType]||[]).map(e=>(0,mr.jsx)("option",{children:e},e))]})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Fuel"}),(0,mr.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:s.fuelType,onChange:e=>p("fuelType",e.target.value),children:[(0,mr.jsx)("option",{children:"All"}),(0,mr.jsx)("option",{children:"Petrol"}),(0,mr.jsx)("option",{children:"Diesel"}),(0,mr.jsx)("option",{children:"Electric"}),(0,mr.jsx)("option",{children:"CNG"}),(0,mr.jsx)("option",{children:"Hybrid"})]})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Transmission"}),(0,mr.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:s.transmission,onChange:e=>p("transmission",e.target.value),children:[(0,mr.jsx)("option",{children:"All"}),(0,mr.jsx)("option",{children:"Manual"}),(0,mr.jsx)("option",{children:"Automatic"})]})]}),u&&(0,mr.jsx)("div",{className:"mb-4 text-red-600 text-sm",children:u}),(0,mr.jsx)("button",{onClick:()=>{(s.priceRange[0]>=s.priceRange[1]?(d("Invalid price range"),0):(d(null),1))&&(t(s),n&&n())},className:"w-full bg-gradient-to-r from-blue-900 to-blue-400 text-white py-2 rounded-md font-medium hover:opacity-90 transition",children:"Apply"}),(0,mr.jsx)("button",{onClick:()=>{o({vehicleType:"cars",priceRange:[500,5e3],distance:10,selectedVehicles:[],fuelType:"All",transmission:"All"}),l(""),d(null)},className:"w-full mt-3 text-blue-600 font-medium hover:underline",children:"Reset Filters"}),(0,mr.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded text-xs",children:[(0,mr.jsx)("p",{className:"font-semibold mb-2",children:"Current Filters:"}),(0,mr.jsxs)("p",{children:["Type: ",s.vehicleType.toUpperCase()]}),(0,mr.jsxs)("p",{children:["Price: \u20b9",s.priceRange[0]," - \u20b9",s.priceRange[1]]}),(0,mr.jsxs)("p",{children:["Distance: ",s.distance," km"]}),(0,mr.jsxs)("p",{children:["Vehicle: ",a||"None"]}),(0,mr.jsxs)("p",{children:["Fuel: ",s.fuelType]}),(0,mr.jsxs)("p",{children:["Transmission: ",s.transmission]})]})]})]})},Tr=e=>{let{children:t,autoplay:n=!1,autoplayDelay:i=3e3,showDots:s=!0,showArrows:o=!0,className:a=""}=e;const[l,c]=(0,r.useState)(0),u=t.length,d=()=>{c(e=>(e+1)%u)};return(0,r.useEffect)(()=>{if(n){const e=setInterval(d,i);return()=>clearInterval(e)}},[n,i,l]),0===u?null:(0,mr.jsxs)("div",{className:"relative overflow-hidden ".concat(a),children:[(0,mr.jsx)("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:"translateX(-".concat(100*l,"%)")},children:t.map((e,t)=>(0,mr.jsx)("div",{className:"w-full flex-shrink-0",children:e},t))}),o&&u>1&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("button",{onClick:()=>{c(e=>(e-1+u)%u)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-all duration-200 z-10","aria-label":"Previous slide",children:(0,mr.jsx)(Ar,{className:"w-5 h-5 text-gray-700"})}),(0,mr.jsx)("button",{onClick:d,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white rounded-full p-2 shadow-lg transition-all duration-200 z-10","aria-label":"Next slide",children:(0,mr.jsx)(Cr,{className:"w-5 h-5 text-gray-700"})})]}),s&&u>1&&(0,mr.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:t.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>(e=>{c(e)})(t),className:"w-3 h-3 rounded-full transition-all duration-200 ".concat(t===l?"bg-white scale-110":"bg-white/60 hover:bg-white/80"),"aria-label":"Go to slide ".concat(t+1)},t))})]})},Ir=n.p+"static/media/slides.7eb28c21979282e7e1b9.png",Pr=e=>{let{className:t=""}=e;const n=[{id:"1",title:"\ud83d\ude97 Premium Cars",subtitle:"Luxury at Your Fingertips",description:"Experience premium vehicles with comfort and style. Book now and get 20% off your first ride!",buttonText:"Book Premium Cars",backgroundImage:Ir,textColor:"text-white",onButtonClick:()=>window.location.href="/listed"},{id:"2",title:"\ud83d\udefa Quick Autos",subtitle:"Fast & Affordable",description:"Need a quick ride around the city? Our autos are perfect for short distances and budget-friendly trips.",buttonText:"Find Autos",backgroundImage:Ir,textColor:"text-white",onButtonClick:()=>window.location.href="/auto"},{id:"3",title:"\u23f0 24/7 Service",subtitle:"Always Available",description:"Round-the-clock service with instant booking. Your ride is just a tap away, anytime, anywhere.",buttonText:"Book Now",backgroundImage:Ir,textColor:"text-white",onButtonClick:()=>window.location.href="/rental"},{id:"4",title:"\ud83c\udfaf Special Offers",subtitle:"Limited Time Deals",description:"Get amazing discounts on weekend bookings. Save up to 30% on your next adventure!",buttonText:"View Offers",backgroundImage:Ir,textColor:"text-white",onButtonClick:()=>alert("Special offers coming soon!")}];return(0,mr.jsx)("div",{className:"w-full ".concat(t),children:(0,mr.jsx)(Tr,{autoplay:!0,autoplayDelay:4e3,showDots:!0,showArrows:!0,className:"h-80 rounded-xl shadow-lg",children:n.map(e=>(0,mr.jsxs)("div",{className:"relative h-80 flex items-center justify-center overflow-hidden rounded-xl",children:[e.backgroundImage&&(0,mr.jsx)("div",{className:"absolute inset-0 bg-cover bg-center ",style:{backgroundImage:"url(".concat(e.backgroundImage,")"),backgroundBlendMode:"overlay"}}),(0,mr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-transparent"}),(0,mr.jsx)("div",{className:"relative z-10 text-center px-8 max-w-2xl",children:(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 ".concat(e.textColor," tracking-wide"),children:"RENTONGOVEHICLE \u2013 Smart"}),(0,mr.jsx)("h2",{className:"text-3xl md:text-4xl font-bold ".concat(e.textColor," tracking-wide"),children:"Car Rentals & Listings"}),(0,mr.jsx)("h6",{className:"text-sm  ".concat(e.textColor," tracking-wide"),children:"Rent or List Vehicles Effortlessly. Anywhere, Anytime."}),(0,mr.jsxs)("h6",{className:"text-sm ".concat(e.textColor," tracking-wide flex items-center justify-center gap-2"),children:[(0,mr.jsx)("img",{src:xr,alt:"Car",className:"w-6 h-6"}),"Car\u2019s Bookings & Listings",(0,mr.jsx)("span",{className:"mx-1",children:"|"}),(0,mr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAL0klEQVR4AeycjZnUNhCGfVQAFQQq4KggUAFQAVABUAFQQaACSAVABZAKoANIBZAKnO8VlpHlsSz/7Xr3dI/nJOt3NJ9mNJLXvlaVv11JoACyKziqqgBSANmZBHbGTtGQAsjOJLAzdoqGFEB2JoGdsVM0pACyMwnsjJ1tNGRngxxjp67ru6K3om+iHyLCTwqfim6O1V8z/0oDImFfir5IoJ9Ej0UI/3oT3lX4WgQ4LxQe5LqygAiIR5IwYFwqHLteqvwXEWCNlV2UfyUBkWDRhHcTJQdwbyfWmVz8SgIiKWGiFEy+HghMNGtyxdwKVw4QCdSvFbGMvirhnuiG6I7olci6nlmJa6U5QMTkTdFr0XsR3gY2Ew/jse7xQCDKbG5D1xpYop37Rt53pd27uLj4LPop+ip6qbQnovjCEcB8xemr3F+TwLGnqPBTtfhAxAzCq8DDwGaSB31THi6hqtR4HixyuIanBiLek4bSuZ4IgJ+dFN0ojXXms6LxtR0g6onGAUXR7Ivy1GNwpwZiT8sleEvoXhj/+EgQMv7gdr0oJqs3M9ZrvtMSgzhVEDsD2fLmWjM73mzZyYK2QxBX0cQFvBykKhpSCRQ8BzyMh+qVOB7G34qf4jUGYm9MdV0ProkqfFt0sMsBQm8CBQ/jg8I3IjwMiKyQvivvQgm3RLiGMYhoml8Isct4Lyq6+ysFIpoZD+BFnQBRebQX18m6bwHJKt0UEigAg2vYAVHpz0R4LLiQ0C3du0tVrxKIaJwFpMSQvmYBkm7SzhUqk0BUK5Z2YUqhU9BEthEaxrTrYIBMY2uw9DsB+1J0CprYc68HRxVknBogAet2VGBN0kSVz1kT52wN2FjbTCZSzw6QxFgHswRKEkRVxEQq6FycfVmODSaV9XOWl1oA6ch48AbPMc5kk3tdYMaODSYVDzMun3VfAMkQk4SOg2EJmaOjjBbyixRA8mX10Sg6y5My2mmTCiCtKEYjmK14cb+uTeCqWlIAGcXhVwGZLcBgIf+V8Pv/qk8QCyC/BZsTw4OKy/FYd9aeI26I+wIIUsgnNARNCWsAxqxjkrARHy+AeElkhI3ZsvYXq5mtAkgGEFGRD9E9t/zmAE0hvogKIBPFJy1hP8K+JK7Jc6Q4bfJ9AWSyyFwFy2z96XIW/iuAzBMge5K4JmZr8Z6kABKLNeNeZguThemKS3tvK07Pvi+AZIuqV9A6SlnsbRVAenLOTsBs9fYkS49SCiDZ8u8WlNkCDDaK3YyqWqQlZwWIZieHffwmmd8pz/7lRyzhxP3qRylnBYgExws4PDrlWJzfHvMQScnbXNISFnY0JeyADSK/jw7TsuNnA4i0Aw8n1IpFgsmWYFVZexLrF/ZZTZ4NIAOjXWWzNtC2T171KOWcALEW2FBjvABXDRuzxb4kbnfWUcrZACLBIJSePZcp23QdaVCwzNYs7TwbQBrBsMg20TY4BCCW2WINa5nIjSQByW1kR+X+NXg5BCCW8GNtNVjrJ50bIJaGzDIdfVElUyzQMaHJSlbmZEBkk92p5tahmLVmnZKT11EWdnFk8fpfIyNeEs12LqYCQsO8AHoIsgapsQ9fR1zYkUvMGJtT5MRmldcThE/NZpWXZDlNsLTqLD+CaZktc/CxBBfc/5FZFz4eqCynCYADUI/qum4BnaohauuoF7NujIFjLOyTtbkZBEBwagwwvIp+chryTLNp7KmcpSFbL+zM/EbGswM+1nB3joYw4EOR5Tq6mZQY9kEXdk2QIe3Ay0JO8EM8wXKbdXMqILxHwbsPByGxaR1vOy9PeeZ1hIUdsxPzwvuXvF+JnO6IJ+K8GMRLshypAFRch/vPUwGh0sFIA2Hxs2YX32MZmpnwZw2YRVQTuibE01n0IIlOGrL4sDS70nh4l4S3nAGGl2A5ckGDoIfK/34EQJph5AfWB2CYlcy0oVashd2Xxd7j6byrf73aTNznzQlpL65nTaJOGYQveixCgyB3/LJ7QMQwsx3qDEg3+PLW7FRWZZWvjD+ARVvG1iWjaptk8ZCaEG1FK7J7QBqmLS1BEEOCBBDTbDTtxQEezlxNAdS4vVENiSv4+5MARFrCAK0XL003WOUBAxCp58c6Fo6tS0P1rU3hlH477Z4EIA3HfOoDQTe3bWBqiUDhMyHOu1HcXarB1+JYUJ291n14oXGpdSksG8apF94Tt/gkfZQ2B0QLJ1+iw96/VpxZiM0mJM1aEE2mJVEGOdkNDhujDRGeDh/ZsUCZs4G0xsDYGCMfeCN0JlHjt8ALWdxup67O2S9wuMaX6HBfOfbg1xjYakLScEE5NshyQSVM6ljmgEGPDrYz8qrCpEVJFTxnt6MxDpVlfBCnCoQv1NF7EWOFV2vdUXa1PiAwKaJzwIAh11HiH8x5F5R4oqjLsgRJvUnmRuCicRa4Q0J2nUf/6DdKSt7SNgAxEU1+VzVZAgIGOW5GC5KcGZmurtq4NPLaJAkSDwpq05oIZoIBN7cHCeb2R72/NFY0p8PoaoCocQSKVhB2OplwA6PY3SQoas/SEur2BqiyW15jfI71zdrS4Xk1QNQzXtAQGMxoFmQEyYKKupKmar0LwbLwE/YySZCWYGo6bjDpItMNVvpWl8UjphDe/FgJOSKBZ4sPQGlN+1RALAYqaQd20VqYYY4zGg7Z+AYIn1fCHQ3PcyxGARbQrAH4NCYA7ft7H3ZmnE/cKLxttPtcE4bPR/mxEiIf3G2AMqpULPROtoOAqFEEFQ+YHzO3aAYt40EFty5K/faMxqVE/5o++KIOh2tRbpVcE1QX3tC6uB6eksVjXG6Ne8tkMe5e2+KXk3ImmcUzExDQRr0sS1CgSQOuU2kHcYsxNMJkzlVs/olRBIsZI2xSXcCMcUy6O+Of6q7pBhs9DCdp3HxkmrHHhSyZtWXEM5ptmWv3e+BBDWlawPY10TaACRZebB8Co4M2s4nwPMCq22R3AzEJcJY687yZz50PklqyNnjwiBczWE8ChXdAVxOd6z55CUJzcV6o36moG8xTPLGU3LssLUGzrycBkaB43mshzoCx1cwSa+3IBiNg1Zo1aB59pAgzEDTTRhFYqh55FiBoHXlDRP6QSbQE3TLkI5IrY2US+iQfZj0xtMyJb2AotEAcKuvT59TxdfcQsphbQh7izfqE+WVSQ2hJaNIJHgIhSZuQ+slR9U36XqHRV+IfzVnc1Cgg9KDOmL2AkmuKMGlUzSbZbMxTdvkdFWS9tNbRMRbNY/ssQGhZoOC2YZd5Fsxmh0V4aI1xHgP1JpAFCFpJH3sh04HQZLLWosGhqzwT1lqHfmYD4ltvgMGbYPMDMM99XhDyDSk6DZJGozgJcaGP6o8vZR+JLuJ+rfUUMIYci3g8/t5yhJjwXycD4lv04cXFBR6DZf/xUnyxZKgZAxgWgKvY5WTn0zOxDHEtXGFLw+NylcZKOcvEIcfRjWGvwYEEi0n8as6kLEG3zYhBwDAZFNiYrLbsTiKYz5gVtISxWmaoLauxks8epk0LIs5lXqwhTYPMZEt4HMOziWSDx8xwxcUYRzDMKo7qLTAohzkk3BU1k8QJL2KMicdYOclA8C67GSuTEyABA/BcXvAPL83JbxVAxCQma0iAMAozPJQRf3UtRn6IALEFSffh1TIYJu4oDu94nhZLOD4AE44VIKx1g/qsHe2kXAUQWhUo2MAhUCiSS4DRMphb6ZDlNFYmIAu8m9UL+qY+24m2idUAoUUxiiYsYXT3YDBOSGP1wmQikjSVqMdjCdpp664KCK2KUXx1UM/dRFLNM7drzYDRkDRWzA1jxTJ0BBuWi+JoF8csPTAotzogNNowii1lE4mPjsBhhGyIODYY7wzGIMqQd3Kk8bIvY6wAw4RkbOE4AMtbD34rxhoU5rfxTQDxrYtRZpB7Oqj4DZG/iPPwis3lyQLhx+lDDQ5geELK2HTbXoDwRHc8LWUy+iq9cFNAer2VBCeB1L8CSEo6R8grgBxB6KkuCyAp6RwhrwByBKGnuiyApKRzhLwCyBGEnuqyAJKSzhHyCiBHEHqqy/8BAAD//3oOXtEAAAAGSURBVAMAgi6RFLFhERIAAAAASUVORK5CYII=",alt:"Auto",className:"w-6 h-6"}),"Auto Bookings"]})]})})]},e.id))})})},Rr=n.p+"static/media/FilterLogo.044b4ac9de2c0548133d.png";function Dr(e,t){return function(){return e.apply(t,arguments)}}const{toString:Lr}=Object.prototype,{getPrototypeOf:Mr}=Object,{iterator:Or,toStringTag:Br}=Symbol,Fr=(e=>t=>{const n=Lr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zr=e=>(e=e.toLowerCase(),t=>Fr(t)===e),Ur=e=>t=>typeof t===e,{isArray:Vr}=Array,Hr=Ur("undefined");function qr(e){return null!==e&&!Hr(e)&&null!==e.constructor&&!Hr(e.constructor)&&Gr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wr=zr("ArrayBuffer");const Kr=Ur("string"),Gr=Ur("function"),Zr=Ur("number"),Qr=e=>null!==e&&"object"===typeof e,Yr=e=>{if("object"!==Fr(e))return!1;const t=Mr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Br in e)&&!(Or in e)},Jr=zr("Date"),Xr=zr("File"),$r=zr("Blob"),ei=zr("FileList"),ti=zr("URLSearchParams"),[ni,ri,ii,si]=["ReadableStream","Request","Response","Headers"].map(zr);function oi(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Vr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(qr(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function ai(e,t){if(qr(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const li="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,ci=e=>!Hr(e)&&e!==li;const ui=(di="undefined"!==typeof Uint8Array&&Mr(Uint8Array),e=>di&&e instanceof di);var di;const hi=zr("HTMLFormElement"),pi=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),mi=zr("RegExp"),fi=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};oi(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)};const gi=zr("AsyncFunction"),yi=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],li.addEventListener("message",e=>{let{source:t,data:i}=e;t===li&&i===n&&r.length&&r.shift()()},!1),e=>{r.push(e),li.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Gr(li.postMessage)),vi="undefined"!==typeof queueMicrotask?queueMicrotask.bind(li):"undefined"!==typeof process&&process.nextTick||yi,xi={isArray:Vr,isArrayBuffer:Wr,isBuffer:qr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Gr(e.append)&&("formdata"===(t=Fr(e))||"object"===t&&Gr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wr(e.buffer),t},isString:Kr,isNumber:Zr,isBoolean:e=>!0===e||!1===e,isObject:Qr,isPlainObject:Yr,isEmptyObject:e=>{if(!Qr(e)||qr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(el){return!1}},isReadableStream:ni,isRequest:ri,isResponse:ii,isHeaders:si,isUndefined:Hr,isDate:Jr,isFile:Xr,isBlob:$r,isRegExp:mi,isFunction:Gr,isStream:e=>Qr(e)&&Gr(e.pipe),isURLSearchParams:ti,isTypedArray:ui,isFileList:ei,forEach:oi,merge:function e(){const{caseless:t,skipUndefined:n}=ci(this)&&this||{},r={},i=(i,s)=>{const o=t&&ai(r,s)||s;Yr(r[o])&&Yr(i)?r[o]=e(r[o],i):Yr(i)?r[o]=e({},i):Vr(i)?r[o]=i.slice():n&&Hr(i)||(r[o]=i)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&oi(arguments[s],i);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return oi(t,(t,r)=>{n&&Gr(t)?e[r]=Dr(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Mr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Fr,kindOfTest:zr,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Vr(e))return e;let t=e.length;if(!Zr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Or]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:hi,hasOwnProperty:pi,hasOwnProp:pi,reduceDescriptors:fi,freezeMethods:e=>{fi(e,(t,n)=>{if(Gr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Gr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Vr(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ai,global:li,isContextDefined:ci,isSpecCompliantForm:function(e){return!!(e&&Gr(e.append)&&"FormData"===e[Br]&&e[Or])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Qr(e)){if(t.indexOf(e)>=0)return;if(qr(e))return e;if(!("toJSON"in e)){t[r]=e;const i=Vr(e)?[]:{};return oi(e,(e,t)=>{const s=n(e,r+1);!Hr(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:gi,isThenable:e=>e&&(Qr(e)||Gr(e))&&Gr(e.then)&&Gr(e.catch),setImmediate:yi,asap:vi,isIterable:e=>null!=e&&Gr(e[Or])};function bi(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}xi.inherits(bi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xi.toJSONObject(this.config),code:this.code,status:this.status}}});const wi=bi.prototype,ki={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ki[e]={value:e}}),Object.defineProperties(bi,ki),Object.defineProperty(wi,"isAxiosError",{value:!0}),bi.from=(e,t,n,r,i,s)=>{const o=Object.create(wi);xi.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return bi.call(o,a,l,n,r,i),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const Ni=bi;function _i(e){return xi.isPlainObject(e)||xi.isArray(e)}function ji(e){return xi.endsWith(e,"[]")?e.slice(0,-2):e}function Ai(e,t,n){return e?e.concat(t).map(function(e,t){return e=ji(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Ci=xi.toFlatObject(xi,{},null,function(e){return/^is[A-Z]/.test(e)});const Si=function(e,t,n){if(!xi.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=xi.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!xi.isUndefined(t[e])})).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&xi.isSpecCompliantForm(t);if(!xi.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(xi.isDate(e))return e.toISOString();if(xi.isBoolean(e))return e.toString();if(!a&&xi.isBlob(e))throw new Ni("Blob is not supported. Use a Buffer instead.");return xi.isArrayBuffer(e)||xi.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(xi.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(xi.isArray(e)&&function(e){return xi.isArray(e)&&!e.some(_i)}(e)||(xi.isFileList(e)||xi.endsWith(n,"[]"))&&(a=xi.toArray(e)))return n=ji(n),a.forEach(function(e,r){!xi.isUndefined(e)&&null!==e&&t.append(!0===o?Ai([n],r,s):null===o?n:n+"[]",l(e))}),!1;return!!_i(e)||(t.append(Ai(i,n,s),l(e)),!1)}const u=[],d=Object.assign(Ci,{defaultVisitor:c,convertValue:l,isVisitable:_i});if(!xi.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!xi.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),xi.forEach(n,function(n,s){!0===(!(xi.isUndefined(n)||null===n)&&i.call(t,n,xi.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])}),u.pop()}}(e),t};function Ei(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ti(e,t){this._pairs=[],e&&Si(e,this,t)}const Ii=Ti.prototype;Ii.append=function(e,t){this._pairs.push([e,t])},Ii.toString=function(e){const t=e?function(t){return e.call(this,t,Ei)}:Ei;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Pi=Ti;function Ri(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Di(e,t,n){if(!t)return e;const r=n&&n.encode||Ri;xi.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):xi.isURLSearchParams(t)?t.toString():new Pi(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Li=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xi.forEach(this.handlers,function(t){null!==t&&e(t)})}},Mi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oi={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pi,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Bi="undefined"!==typeof window&&"undefined"!==typeof document,Fi="object"===typeof navigator&&navigator||void 0,zi=Bi&&(!Fi||["ReactNative","NativeScript","NS"].indexOf(Fi.product)<0),Ui="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Vi=Bi&&window.location.href||"http://localhost",Hi=c(c({},t),Oi);const qi=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&xi.isArray(r)?r.length:s,a)return xi.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&xi.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&xi.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(xi.isFormData(e)&&xi.isFunction(e.entries)){const n={};return xi.forEachEntry(e,(e,r)=>{t(function(e){return xi.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const Wi={transitional:Mi,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=xi.isObject(e);i&&xi.isHTMLForm(e)&&(e=new FormData(e));if(xi.isFormData(e))return r?JSON.stringify(qi(e)):e;if(xi.isArrayBuffer(e)||xi.isBuffer(e)||xi.isStream(e)||xi.isFile(e)||xi.isBlob(e)||xi.isReadableStream(e))return e;if(xi.isArrayBufferView(e))return e.buffer;if(xi.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Si(e,new Hi.classes.URLSearchParams,c({visitor:function(e,t,n,r){return Hi.isNode&&xi.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=xi.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Si(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(xi.isString(e))try{return(t||JSON.parse)(e),xi.trim(e)}catch(el){if("SyntaxError"!==el.name)throw el}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Wi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(xi.isResponse(e)||xi.isReadableStream(e))return e;if(e&&xi.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(el){if(n){if("SyntaxError"===el.name)throw Ni.from(el,Ni.ERR_BAD_RESPONSE,this,null,this.response);throw el}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hi.classes.FormData,Blob:Hi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xi.forEach(["delete","get","head","post","put","patch"],e=>{Wi.headers[e]={}});const Ki=Wi,Gi=xi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zi=Symbol("internals");function Qi(e){return e&&String(e).trim().toLowerCase()}function Yi(e){return!1===e||null==e?e:xi.isArray(e)?e.map(Yi):String(e)}function Ji(e,t,n,r,i){return xi.isFunction(r)?r.call(this,t,n):(i&&(t=n),xi.isString(t)?xi.isString(r)?-1!==t.indexOf(r):xi.isRegExp(r)?r.test(t):void 0:void 0)}class Xi{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Qi(t);if(!i)throw new Error("header name must be a non-empty string");const s=xi.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Yi(e))}const s=(e,t)=>xi.forEach(e,(e,n)=>i(e,n,t));if(xi.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(xi.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Gi[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(xi.isObject(e)&&xi.isIterable(e)){let n,r,i={};for(const t of e){if(!xi.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?xi.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=Qi(e)){const n=xi.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(xi.isFunction(t))return t.call(this,e,n);if(xi.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Qi(e)){const n=xi.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ji(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Qi(e)){const i=xi.findKey(n,e);!i||t&&!Ji(0,n[i],i,t)||(delete n[i],r=!0)}}return xi.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ji(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return xi.forEach(this,(r,i)=>{const s=xi.findKey(n,i);if(s)return t[s]=Yi(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();o!==i&&delete t[i],t[o]=Yi(r),n[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return xi.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&xi.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Zi]=this[Zi]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Qi(e);t[r]||(!function(e,t){const n=xi.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return xi.isArray(e)?e.forEach(r):r(e),this}}Xi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xi.reduceDescriptors(Xi.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),xi.freezeMethods(Xi);const $i=Xi;function es(e,t){const n=this||Ki,r=t||n,i=$i.from(r.headers);let s=r.data;return xi.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function ts(e){return!(!e||!e.__CANCEL__)}function ns(e,t,n){Ni.call(this,null==e?"canceled":e,Ni.ERR_CANCELED,t,n),this.name="CanceledError"}xi.inherits(ns,Ni,{__CANCEL__:!0});const rs=ns;function is(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ni("Request failed with status code "+n.status,[Ni.ERR_BAD_REQUEST,Ni.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ss=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const os=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout(()=>{r=null,o(n)},s-t)))},()=>n&&o(n)]},as=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=ss(50,250);return os(n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},ls=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},cs=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xi.asap(()=>e(...n))},us=Hi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Hi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Hi.origin),Hi.navigator&&/(msie|trident)/i.test(Hi.navigator.userAgent)):()=>!0,ds=Hi.hasStandardBrowserEnv?{write(e,t,n,r,i,s,o){if("undefined"===typeof document)return;const a=["".concat(e,"=").concat(encodeURIComponent(t))];xi.isNumber(n)&&a.push("expires=".concat(new Date(n).toUTCString())),xi.isString(r)&&a.push("path=".concat(r)),xi.isString(i)&&a.push("domain=".concat(i)),!0===s&&a.push("secure"),xi.isString(o)&&a.push("SameSite=".concat(o)),document.cookie=a.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function hs(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ps=e=>e instanceof $i?c({},e):e;function ms(e,t){t=t||{};const n={};function r(e,t,n,r){return xi.isPlainObject(e)&&xi.isPlainObject(t)?xi.merge.call({caseless:r},e,t):xi.isPlainObject(t)?xi.merge({},t):xi.isArray(t)?t.slice():t}function i(e,t,n,i){return xi.isUndefined(t)?xi.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!xi.isUndefined(t))return r(void 0,t)}function o(e,t){return xi.isUndefined(t)?xi.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(ps(e),ps(t),0,!0)};return xi.forEach(Object.keys(c(c({},e),t)),function(r){const s=l[r]||i,o=s(e[r],t[r],r);xi.isUndefined(o)&&s!==a||(n[r]=o)}),n}const fs=e=>{const t=ms({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;if(t.headers=o=$i.from(o),t.url=Di(hs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),xi.isFormData(n))if(Hi.hasStandardBrowserEnv||Hi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(xi.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&o.set(n,r)})}if(Hi.hasStandardBrowserEnv&&(r&&xi.isFunction(r)&&(r=r(t)),r||!1!==r&&us(t.url))){const e=i&&s&&ds.read(s);e&&o.set(i,e)}return t},gs="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=fs(e);let i=r.data;const s=$i.from(r.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=$i.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());is(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Ni("Request aborted",Ni.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const r=t&&t.message?t.message:"Network Error",i=new Ni(r,Ni.ERR_NETWORK,e,f);i.event=t||null,n(i),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Mi;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Ni(t,i.clarifyTimeoutError?Ni.ETIMEDOUT:Ni.ECONNABORTED,e,f)),f=null},void 0===i&&s.setContentType(null),"setRequestHeader"in f&&xi.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),xi.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([l,u]=as(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([a,c]=as(h),f.upload.addEventListener("progress",a),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{f&&(n(!t||t.type?new rs(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Hi.protocols.indexOf(y)?n(new Ni("Unsupported protocol "+y+":",Ni.ERR_BAD_REQUEST,e)):f.send(i||null)})},ys=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Ni?t:new rs(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new Ni("timeout ".concat(t," of ms exceeded"),Ni.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=r;return a.unsubscribe=()=>xi.asap(o),a}};function vs(e,t){this.v=e,this.k=t}function xs(e){return function(){return new bs(e.apply(this,arguments))}}function bs(e){var t,n;function r(t,n){try{var s=e[t](n),o=s.value,a=o instanceof vs;Promise.resolve(a?o.v:o).then(function(n){if(a){var l="return"===t?"return":"next";if(!o.k||n.done)return r(l,n);n=e[l](n).value}i(s.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(s,o){var a={key:e,arg:i,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}function ws(e){return new vs(e,0)}function ks(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new vs(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Ns(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new _s(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function _s(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return _s=function(e){this.s=e,this.n=e.next},_s.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new _s(e)}bs.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},bs.prototype.next=function(e){return this._invoke("next",e)},bs.prototype.throw=function(e){return this._invoke("throw",e)},bs.prototype.return=function(e){return this._invoke("return",e)};const js=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},As=function(){var e=xs(function*(e,t){var n,r=!1,i=!1;try{for(var s,o=Ns(Cs(e));r=!(s=yield ws(o.next())).done;r=!1){const e=s.value;yield*ks(Ns(js(e,t)))}}catch(GN){i=!0,n=GN}finally{try{r&&null!=o.return&&(yield ws(o.return()))}finally{if(i)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Cs=function(){var e=xs(function*(e){if(e[Symbol.asyncIterator])return void(yield*ks(Ns(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield ws(t.read());if(e)break;yield n}}finally{yield ws(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Ss=(e,t,n,r)=>{const i=As(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(GN){throw a(GN),GN}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},{isFunction:Es}=xi,Ts=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(xi.global),{ReadableStream:Is,TextEncoder:Ps}=xi.global,Rs=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(el){return!1}},Ds=e=>{e=xi.merge.call({skipUndefined:!0},Ts,e);const{fetch:t,Request:n,Response:r}=e,i=t?Es(t):"function"===typeof fetch,s=Es(n),o=Es(r);if(!i)return!1;const a=i&&Es(Is),l=i&&("function"===typeof Ps?(u=new Ps,e=>u.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var u;const d=s&&a&&Rs(()=>{let e=!1;const t=new n(Hi.origin,{body:new Is,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=o&&a&&Rs(()=>xi.isReadableStream(new r("").body)),p={stream:h&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new Ni("Response type '".concat(e,"' is not supported"),Ni.ERR_NOT_SUPPORT,n)})});const m=async(e,t)=>{const r=xi.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(xi.isBlob(e))return e.size;if(xi.isSpecCompliantForm(e)){const t=new n(Hi.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return xi.isArrayBufferView(e)||xi.isArrayBuffer(e)?e.byteLength:(xi.isURLSearchParams(e)&&(e+=""),xi.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:i,method:o,data:a,signal:l,cancelToken:u,timeout:f,onDownloadProgress:g,onUploadProgress:y,responseType:v,headers:x,withCredentials:b="same-origin",fetchOptions:w}=fs(e),k=t||fetch;v=v?(v+"").toLowerCase():"text";let N=ys([l,u&&u.toAbortSignal()],f),_=null;const j=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let A;try{if(y&&d&&"get"!==o&&"head"!==o&&0!==(A=await m(x,a))){let e,t=new n(i,{method:"POST",body:a,duplex:"half"});if(xi.isFormData(a)&&(e=t.headers.get("content-type"))&&x.setContentType(e),t.body){const[e,n]=ls(A,as(cs(y)));a=Ss(t.body,65536,e,n)}}xi.isString(b)||(b=b?"include":"omit");const t=s&&"credentials"in n.prototype,l=c(c({},w),{},{signal:N,method:o.toUpperCase(),headers:x.normalize().toJSON(),body:a,duplex:"half",credentials:t?b:void 0});_=s&&new n(i,l);let u=await(s?k(_,w):k(i,l));const f=h&&("stream"===v||"response"===v);if(h&&(g||f&&j)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=u[t]});const t=xi.toFiniteNumber(u.headers.get("content-length")),[n,i]=g&&ls(t,as(cs(g),!0))||[];u=new r(Ss(u.body,65536,n,()=>{i&&i(),j&&j()}),e)}v=v||"text";let C=await p[xi.findKey(p,v)||"text"](u,e);return!f&&j&&j(),await new Promise((t,n)=>{is(t,n,{data:C,headers:$i.from(u.headers),status:u.status,statusText:u.statusText,config:e,request:_})})}catch(GN){if(j&&j(),GN&&"TypeError"===GN.name&&/Load failed|fetch/i.test(GN.message))throw Object.assign(new Ni("Network Error",Ni.ERR_NETWORK,e,_),{cause:GN.cause||GN});throw Ni.from(GN,GN&&GN.code,e,_)}}},Ls=new Map,Ms=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let o,a,l=s.length,c=Ls;for(;l--;)o=s[l],a=c.get(o),void 0===a&&c.set(o,a=l?new Map:Ds(t)),c=a;return a},Os=(Ms(),{http:null,xhr:gs,fetch:{get:Ms}});xi.forEach(Os,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(el){}Object.defineProperty(e,"adapterName",{value:t})}});const Bs=e=>"- ".concat(e),Fs=e=>xi.isFunction(e)||null===e||!1===e;const zs={getAdapter:function(e,t){e=xi.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let o=0;o<n;o++){let n;if(r=e[o],i=r,!Fs(r)&&(i=Os[(n=String(r)).toLowerCase()],void 0===i))throw new Ni("Unknown adapter '".concat(n,"'"));if(i&&(xi.isFunction(i)||(i=i.get(t))))break;s[n||"#"+o]=i}if(!i){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(Bs).join("\n"):" "+Bs(e[0]):"as no adapter specified";throw new Ni("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return i},adapters:Os};function Us(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rs(null,e)}function Vs(e){Us(e),e.headers=$i.from(e.headers),e.data=es.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return zs.getAdapter(e.adapter||Ki.adapter,e)(e).then(function(t){return Us(e),t.data=es.call(e,e.transformResponse,t),t.headers=$i.from(t.headers),t},function(t){return ts(t)||(Us(e),t&&t.response&&(t.response.data=es.call(e,e.transformResponse,t.response),t.response.headers=$i.from(t.response.headers))),Promise.reject(t)})}const Hs="1.13.2",qs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qs[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ws={};qs.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Hs+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Ni(r(i," has been removed"+(t?" in "+t:"")),Ni.ERR_DEPRECATED);return t&&!Ws[i]&&(Ws[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},qs.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ks={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Ni("options must be an object",Ni.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Ni("option "+s+" must be "+n,Ni.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Ni("Unknown option "+s,Ni.ERR_BAD_OPTION)}},validators:qs},Gs=Ks.validators;class Zs{constructor(e){this.defaults=e||{},this.interceptors={request:new Li,response:new Li}}async request(e,t){try{return await this._request(e,t)}catch(GN){if(GN instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{GN.stack?n&&!String(GN.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(GN.stack+="\n"+n):GN.stack=n}catch(el){}}throw GN}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ms(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Ks.assertOptions(n,{silentJSONParsing:Gs.transitional(Gs.boolean),forcedJSONParsing:Gs.transitional(Gs.boolean),clarifyTimeoutError:Gs.transitional(Gs.boolean)},!1),null!=r&&(xi.isFunction(r)?t.paramsSerializer={serialize:r}:Ks.assertOptions(r,{encode:Gs.function,serialize:Gs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ks.assertOptions(t,{baseUrl:Gs.spelling("baseURL"),withXsrfToken:Gs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&xi.merge(i.common,i[t.method]);i&&xi.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=$i.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[Vs.bind(this),void 0];for(e.unshift(...o),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=Vs.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Di(hs((e=ms(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}xi.forEach(["delete","get","head","options"],function(e){Zs.prototype[e]=function(t,n){return this.request(ms(n||{},{method:e,url:t,data:(n||{}).data}))}}),xi.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(ms(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Zs.prototype[e]=t(),Zs.prototype[e+"Form"]=t(!0)});const Qs=Zs;class Ys{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new rs(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ys(function(t){e=t});return{token:t,cancel:e}}}const Js=Ys;const Xs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xs).forEach(e=>{let[t,n]=e;Xs[n]=t});const $s=Xs;const eo=function e(t){const n=new Qs(t),r=Dr(Qs.prototype.request,n);return xi.extend(r,Qs.prototype,n,{allOwnKeys:!0}),xi.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ms(t,n))},r}(Ki);eo.Axios=Qs,eo.CanceledError=rs,eo.CancelToken=Js,eo.isCancel=ts,eo.VERSION=Hs,eo.toFormData=Si,eo.AxiosError=Ni,eo.Cancel=eo.CanceledError,eo.all=function(e){return Promise.all(e)},eo.spread=function(e){return function(t){return e.apply(null,t)}},eo.isAxiosError=function(e){return xi.isObject(e)&&!0===e.isAxiosError},eo.mergeConfig=ms,eo.AxiosHeaders=$i,eo.formToJSON=e=>qi(xi.isHTMLForm(e)?new FormData(e):e),eo.getAdapter=zs.getAdapter,eo.HttpStatusCode=$s,eo.default=eo;const to="http://3.110.122.127:3000",no=eo.create({baseURL:to,timeout:3e4,headers:{"Content-Type":"application/json"}});no.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),no.interceptors.response.use(e=>e.data,e=>{var t,n;return console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject((null===(n=e.response)||void 0===n?void 0:n.data)||e)});const ro={createCar:async e=>no.post("/createCar",e,{headers:{"Content-Type":"multipart/form-data"}}),getCarById:async e=>no.get("/getCarById/".concat(e)),updateCarById:async(e,t)=>{console.log("\ud83d\ude80 API Service - Update Car Request"),console.log("  Car ID:",e),console.log("  Endpoint:","/updateCar/".concat(e)),console.log("\ud83d\udce6 FormData being sent:");for(const[i,s]of t.entries())s instanceof File?console.log("  ".concat(i,":"),{name:s.name,size:s.size,type:s.type}):console.log("  ".concat(i,":"),s);try{const n=await no.put("/updateCar/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("\u2705 Update Car Success:",n),n}catch(r){var n;throw console.error("\u274c Update Car Failed:",r),console.error("\u274c Error Details:",null===(n=r.response)||void 0===n?void 0:n.data),r}},deleteCarById:async e=>no.delete("/deleteCar/".concat(e)),getNearbyCars:async(e,t)=>no.get("/getNearbyCars",{params:{latitude:e,longitude:t}}),getMyVehicles:async e=>no.get("/myVehicles/".concat(e))},io={createBike:async e=>no.post("/createBike",e,{headers:{"Content-Type":"multipart/form-data"}}),getBikeById:async e=>no.get("/getBikeById/".concat(e)),updateBikeById:async(e,t)=>{console.log("\ud83d\ude80 API Service - Update Bike Request"),console.log("  Bike ID:",e),console.log("  Endpoint:","/updateBike/".concat(e)),console.log("\ud83d\udce6 FormData being sent:");for(const[i,s]of t.entries())s instanceof File?console.log("  ".concat(i,":"),{name:s.name,size:s.size,type:s.type}):console.log("  ".concat(i,":"),s);try{const n=await no.put("/updateBike/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("\u2705 Update Bike Success:",n),n}catch(r){var n;throw console.error("\u274c Update Bike Failed:",r),console.error("\u274c Error Details:",null===(n=r.response)||void 0===n?void 0:n.data),r}},deleteBikeById:async e=>no.delete("/deleteBike/".concat(e)),getNearbyBikes:async(e,t,n)=>no.get("/getNearbyBikes",{params:{latitude:e,longitude:t,range:n||5}}),getMyVehicles:async e=>no.get("/myVehicles/".concat(e))},so={createReview:async e=>no.post("/addReview",e),getReviewsByCarId:async e=>no.get("/getReviewById/".concat(e)),getReviewsByBikeId:async e=>no.get("/getReviewById/".concat(e)),updateReviewById:async(e,t)=>no.put("/updateReview/".concat(e),t),getAverageRating:async(e,t)=>{const n=t.charAt(0).toUpperCase()+t.slice(1);return no.get("/getAverageRating",{params:{vechileType:n,vechileId:e}})},getUserRating:async(e,t)=>no.get("/reviews/user/".concat(e,"/vehicle/").concat(t)),deleteReview:async e=>no.delete("/reviews/".concat(e))},oo={createBooking:async e=>{console.log("\ud83d\udce6 API Service - Input bookingData:",e);const t=e.VechileId?e:{VechileId:e.vehicleId,vechileType:e.vehicleType,userId:e.userId,contactNumber:e.contactNumber||"",contactName:e.contactName||"",latitude:e.latitude||"",longitude:e.longitude||"",FromDate:e.startDate,ToDate:e.endDate,FromTime:e.startTime||"",ToTime:e.endTime||"",totalPrice:String(e.totalPrice),totalHours:e.totalHours||"",pricePerDay:e.pricePerDay||"",pricePerHour:e.pricePerHour||"",pricePerKm:e.pricePerKm||"",carName:e.carName||"",carModel:e.carModel||"",carBrand:e.carBrand||"",CarNumber:e.CarNumber||"",fuelType:e.fuelType||"",transmissionType:e.transmissionType||"",seatingCapacity:e.seatingCapacity||"",pickupAddress:e.pickupLocation||e.pickupAddress||"",dropoffAddress:e.dropoffLocation||e.dropoffAddress||""};console.log("\ud83d\udce6 API Service - Transformed payload:",t),console.log("\ud83d\udce6 API Service - vechileType value:",t.vechileType);const n=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,r]=e;null!==r&&void 0!==r&&""!==r&&n.append(t,String(r))}),console.log("\ud83d\udce6 API Service - URL Encoded body:",n.toString()),console.log("\ud83d\udce6 API Service - vechileType in URLSearchParams:",n.get("vechileType")),console.log("\ud83d\udce6 API Service - VechileId in URLSearchParams:",n.get("VechileId")),no.post("/createBooking",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getAllBookings:async e=>{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce5 GET ALL BOOKINGS - START"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("User ID:",e);const t="/getAllBookings?userId=".concat(e),n="".concat(to).concat(t);try{console.log("\ud83c\udfaf Strategy 1: Direct fetch to API"),console.log("URL:",n);const e=await Promise.race([fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}),new Promise((e,t)=>setTimeout(()=>t(new Error("Request timeout")),15e3))]);if(e.ok){const t=await e.json();return console.log("\u2705 Direct fetch Success:",t),t}throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText))}catch(i){console.warn("\u26a0\ufe0f Direct fetch failed:",i.message)}try{console.log("\ud83c\udfaf Strategy 2: Axios GET with credentials");const e=await no.get(t,{withCredentials:!1,timeout:15e3});return console.log("\u2705 Axios Success:",e),e}catch(s){console.warn("\u26a0\ufe0f Axios failed:",s.message)}const r=["https://api.allorigins.win/get?url="];for(let a=0;a<r.length;a++)try{console.log("\ud83c\udfaf Strategy 3.".concat(a+1,": CORS Proxy ").concat(a+1));const e="".concat(r[a]).concat(encodeURIComponent(n));console.log("Proxied URL:",e);const t=await Promise.race([fetch(e,{method:"GET"}),new Promise((e,t)=>setTimeout(()=>t(new Error("Proxy timeout")),15e3))]);if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));const i=await t.json(),s=i.contents?JSON.parse(i.contents):i;return console.log("\u2705 CORS Proxy Success:",s),s}catch(o){console.warn("\u26a0\ufe0f Proxy ".concat(a+1," failed:"),o.message)}throw console.error("\u274c All strategies failed"),new Error("Unable to fetch bookings. Please check your connection and try again.")},getBookingById:async e=>no.get("/getBookingById/".concat(e)),updateBooking:async(e,t)=>no.put("/bookings/".concat(e),t),getPendingBookingsOfOwner:async e=>no.get("/getPendingBookingsOfOwner/".concat(e)),confirmBooking:async e=>no.post("/confirmBooking/".concat(e,"/conform")),deleteBooking:async e=>no.delete("/deleteBooking/".concat(e)),getMyListingBookings:async e=>no.get("/bookings/owner/".concat(e))},ao={createUnavailability:async e=>{var t;console.log("\ud83d\udeab Create Unavailability - Input data:",e);const n=new URLSearchParams;return e.userId&&n.append("userId",e.userId),n.append("VechileId",e.VechileId),n.append("vechileType",e.vechileType),n.append("fromDate",e.fromDate),n.append("toDate",e.toDate),n.append("fromTime",e.fromTime||"00:00"),n.append("toTime",e.toTime||"23:59"),n.append("isNotAvailable",String(null===(t=e.isNotAvailable)||void 0===t||t)),console.log("\ud83d\udeab Create Unavailability - Encoded Body:",n.toString()),no.post("/createNotAvailability",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getVehicleAvailability:async(e,t,n,r)=>(console.log("\ud83d\udcc5 Get Vehicle Availability:",{VechileId:e,vechileType:t,startDate:n,endDate:r}),no.get("/getVehicleAvailability",{params:{VechileId:e,vechileType:t,startDate:n,endDate:r}})),getUnavailabilityById:async e=>(console.log("\ud83d\udcc4 Get Unavailability By ID:",e),no.get("/getNotAvailabilityById/".concat(e))),updateUnavailability:async(e,t)=>{var n;console.log("\ud83d\udd04 Update Unavailability - Input data:",t);const r=new URLSearchParams;return r.append("VechileId",t.VechileId),r.append("vechileType",t.vechileType),r.append("fromDate",t.fromDate),r.append("toDate",t.toDate),r.append("fromTime",t.fromTime||"00:00"),r.append("toTime",t.toTime||"23:59"),r.append("isNotAvailable",String(null===(n=t.isNotAvailable)||void 0===n||n)),console.log("\ud83d\udd04 Update Unavailability - Encoded Body:",r.toString()),no.put("/updateNotAvailability/".concat(e),r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},deleteUnavailability:async e=>(console.log("\ud83d\uddd1\ufe0f Delete Unavailability - ID:",e),no.delete("/deleteNotAvailability/".concat(e)))},lo={register:async e=>{console.log("\ud83d\udcdd User Register API - Input data:",e);const t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,r]=e;null!==r&&void 0!==r&&""!==r&&t.append(n,String(r))}),console.log("\ud83d\udcdd User Register API - URL Encoded:",t.toString()),no.post("/register",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getUserProfile:async e=>no.get("/users/".concat(e)),updateUserProfile:async(e,t)=>no.put("/users/".concat(e),t)},co={getNotifications:async e=>(console.log("\ud83d\udd14 Get Notifications for user:",e),no.get("/getNotifications/".concat(e))),getUnreadCount:async e=>(console.log("\ud83d\udd14 Get Unread Count for user:",e),no.get("/getUnreadNotificationsCount/".concat(e))),markAsRead:async e=>(console.log("\ud83d\udd14 Mark notification as read:",e),no.put("/markNotificationRead/".concat(e))),markAllAsRead:async e=>(console.log("\ud83d\udd14 Mark all notifications as read for user:",e),no.put("/markAllNotificationsRead/".concat(e))),deleteNotification:async e=>(console.log("\ud83d\udd14 Delete notification:",e),no.delete("/deleteNotification/".concat(e))),clearAllNotifications:async e=>(console.log("\ud83d\udd14 Clear all notifications for user:",e),no.delete("/clearAllNotifications/".concat(e)))};class uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to;this.apiUrl=void 0,this.apiUrl=e}async getMessages(e){try{console.log("\ud83d\udce5 ApiService.getMessages - bookingId:",e);const t=await fetch("".concat(this.apiUrl,"/getMessages/").concat(e),{method:"GET",redirect:"follow"});if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));const n=await t.json();return console.log("\u2705 ApiService.getMessages - Response:",n),Array.isArray(n)?n:n.messages||[]}catch(GN){throw console.error("\u274c ApiService.getMessages - Error:",GN),GN}}async sendMessage(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];try{console.log("\ud83d\udce4 ApiService.sendMessage - Params:",{bookingId:e,senderId:t,receiverId:n,message:r,filesCount:i.length});const s=new FormData;s.append("bookingId",e),s.append("senderId",t),s.append("receiverId",n),s.append("message",r),i.forEach(e=>s.append("files",e));const o=await fetch("".concat(this.apiUrl,"/sendMessage"),{method:"POST",body:s,redirect:"follow"});if(!o.ok)throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));const a=await o.json();if(console.log("\u2705 ApiService.sendMessage - Response:",a),!a.success)throw new Error(a.message||"Failed to send message");return a.message}catch(GN){throw console.error("\u274c ApiService.sendMessage - Error:",GN),GN}}async getMyVehicleBookings(e,t,n){try{console.log("\ud83d\udce5 ApiService.getMyVehicleBookings - Params:",{userId:e,vehicleType:t,vehicleId:n});const r=await fetch("".concat(this.apiUrl,"/myVehicleBookings/").concat(e,"?vechileType=").concat(t,"&VechileId=").concat(n),{method:"GET",redirect:"follow"});if(!r.ok)throw new Error("HTTP ".concat(r.status,": ").concat(r.statusText));const i=await r.json();return console.log("\u2705 ApiService.getMyVehicleBookings - Response:",i),i||[]}catch(GN){throw console.error("\u274c ApiService.getMyVehicleBookings - Error:",GN),GN}}}const ho={car:ro,bike:io,review:so,booking:oo,availability:ao,user:lo,notification:co,chat:new uo(to),utils:{validateDateFormat:e=>/^\d{4}-\d{2}-\d{2}$/.test(e),validateTimeFormat:e=>/^\d{2}\.\d{2}$/.test(e),extractResponseData:e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data?e.data.data:null!==e&&void 0!==e&&e.data?e.data:e},formatDateForBackend:e=>"string"===typeof e?e:e.toISOString().split("T")[0],formatTimeForBackend:e=>e.replace(":",".")}};function po(e,t){let n;try{n=e()}catch(el){return}const r={getItem:e=>{var r;const i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(r=n.getItem(e))?r:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)};return r}const mo=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>mo(e)(n),catch(e){return this}}}catch(el){return{then(e){return this},catch:t=>mo(t)(el)}}},fo=(e,t)=>(n,r,i)=>{let s=c({storage:po(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>c(c({},t),e)},t),o=!1;const a=new Set,l=new Set;let u=s.storage;if(!u)return e(function(){console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),n(...arguments)},r,i);const d=()=>{const e=s.partialize(c({},r()));return u.setItem(s.name,{state:e,version:s.version})},h=i.setState;i.setState=(e,t)=>(h(e,t),d());const p=e(function(){return n(...arguments),d()},r,i);let m;i.getInitialState=()=>p;const f=()=>{var e,t;if(!u)return;o=!1,a.forEach(e=>{var t;return e(null!=(t=r())?t:p)});const i=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=r())?e:p))||void 0;return mo(u.getItem.bind(u))(s.name).then(e=>{if(e){if("number"!==typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate){const t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[i,o]=e;if(m=s.merge(o,null!=(t=r())?t:p),n(m,!0),i)return d()}).then(()=>{null==i||i(m,void 0),m=r(),o=!0,l.forEach(e=>e(m))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{s=c(c({},s),e),e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},s.skipHydration||f(),m||p},go=Tt()(fo((e,t)=>({reviews:[],addReview:t=>{const n=c(c({},t),{},{id:Date.now().toString()+Math.random().toString(36),timestamp:new Date});e(e=>({reviews:[n,...e.reviews]}))},getReviewsByVehicleId:e=>t().reviews.filter(t=>t.vehicleId===e),getAverageRating:e=>{const n=t().reviews.filter(t=>t.vehicleId===e);if(0===n.length)return 0;const r=n.reduce((e,t)=>e+t.rating,0);return Number((r/n.length).toFixed(1))},getTotalReviewCount:e=>t().reviews.filter(t=>t.vehicleId===e).length,getRatingDistribution:e=>{const n=t().reviews.filter(t=>t.vehicleId===e),r=n.length;if(0===r)return[5,4,3,2,1].map(e=>({stars:e,count:0,percentage:0}));const i=[5,4,3,2,1].map(e=>{const t=n.filter(t=>t.rating===e).length,i=Math.round(t/r*100);return{stars:e,count:t,percentage:i}});return i}}),{name:"review-storage"})),yo=n.p+"static/media/automatic.986f8de89251967c2454.jpeg",vo=n.p+"static/media/seats.497bea1fb906edf3f96d.jpeg",xo="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAA4ADgDASIAAhEBAxEB/8QAHQAAAgICAwEAAAAAAAAAAAAAAAcGCAIDAQQFCf/EAEAQAAEDAwMCAgQJCQkAAAAAAAECAwQFBhEAByEIEhMxFUFRlRkiMlVhcZGx0QkYNEJWc3Wy0xQjNzhSgaKz8P/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD6e6iV67r7f7eKbZu25GIT7qe9EdKFuvKT7exAKgPpIA4OpaSEgqUQAOST6tVs6dLRoe6Eu592b3pjFYmzasuPGRNR4rbCEpSs9qFZB4cQkZB7QjAxzoJavq22cSogVCpqHtEBWD9us2erPZp1fauqVFkf6lwHCP8Ajk6ZqbRtRCQlFsUlKR5AQmwP5dYv2ZZ8lHhybUozqD+quC0ofYU6DTaF92jfsBVStGux6kw2rtc8PuSts+oKQoBSf9wNe9quFbt2l7RdR9oy7QjCnU27G3IcyEz8VkrJ7T2p8gnuU0oJHAKePPGmNuXvjR9ra7DpdftutPQpTKXVVGMyFMNErKe0kkZUMZIHOCMZzoGTo11KRVqbXqXFrVHmNyoU1pLzDyPJaFDIPPI+o8jyOjQbpZAivEnADavu1UbpR6h9pLc22mQKvczjL6qw+4EiDIWCktNAHKUEeo6tzK/RXv3avu1XHpDsSx6lthNk1GzaHKeNafHiP05laseEzxkpz6zoJ5+dLsh+1rvu2T/T0fnS7Ifta77tk/09e1d9B2dsa3plz3DZVtsQ4aO5WKVHK3FfqoQCkZUo8AfcMnRZlvbVXvbFPuumbb0WPFqTXitNyaPHQ4kZI5ASR6sggnIwdAh90d7Ntr23s2hh2zX1SJHpkNHuiPNZKn4/anK0jzwf/HVqazR6bcFKl0SsRESYU1pTL7SxwpChg/UfYfMHnVbt/aLt7Zu7u0FRRSbdoafTClF8MMRR8V6Pz3YHkCftOrHUi4aBcDa3aDXKfUkNkBaoklDwSfpKScaBJ9Pkqp2VfN3bHzZqpsOhn+3051XykNLKSUn6w62rHqV3+3RosP8Aza3/APwhr+WJo0D2lfor37tX3aR3Rt/hVN/jb/8A0s6c9YqtLpkVfpKpRYniNr7PHeS33YHOMkZ0gOkK8bRp218xioXVR4rprL6gh6c0hRHhM84KvLg6D0OrS07grFAp1yx6xT26LQSt+ZAmPKbTIcJT2YCflqI7kgZB+Me08nE22Bvyubh7ftVuu0KPTFsvqiMCM2pDLzSEpwtCVE4AJKeCRlBx7B0tyqRtPuk5Rm7h3Hp6IVJkqkLhMVZhLUrIAw58bPGMAgggKUB55Exh3rtxT4jMGDd1tx40dCWmmmqgwlCEAYCQArAAHq0CM6qbKtu9d1Nn4Nx08ymfSjrWA6ts9q3owUMpIPOBrmj2lQdruqeg23ZzTtPptUojq32FSFuBxRS+cZWSSMsoOM+Y1t30u21J+7m0jsG56TJQzV1FxTU1tYQPHjfKIVx5Hz9mmXuNtPZW8jESpGquMT6eSiNU6a+krQM5KFEZChk5xwQTwRk5CEWAtLvVluA42oKSKU2gkcgKAigj68g/Zo0wtrNnrZ2pjTPRD8ubPqSgqXOlqCnHMEkAYAAGVE+0k8k8YNBjuLslYe6M+NU7riy1yIrBjIWxJU3/AHZUVYI8vMnn6dKH4Ozps+bK/wC9l/ho0aA+Ds6bPmyv+9l/ho+Ds6bPmyv+9l/ho0aDsQPyfPTnTZrFQjU2vB6M4l1sqqqiO5JyOMadO3u2lqbY02RSrUjPtMy3vHdLzynFKV2gDk+QwPVo0aCVaNGjQf/Z",bo=e=>{let{vehicle:t,onBook:n}=e;const r=ye(),{getAverageRating:i}=go();i(t.id);return(0,mr.jsxs)("div",{onClick:()=>{n?n(t):r("/book-now/".concat(t.id),{state:{vehicleType:t.type||"car"}})},className:"w-full border-b pb-5 cursor-pointer p-2 hover:bg-gray-50 transition",children:[(0,mr.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover rounded-xl"}),(0,mr.jsxs)("div",{className:"mt-3",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold",children:t.name}),(0,mr.jsxs)("div",{className:"flex items-center gap-1 border border-yellow-400 px-2 py-1 rounded-lg text-yellow-500 text-sm",children:["\u2b50 ",t.rating]})]}),(0,mr.jsxs)("p",{className:"text-2xl font-bold mt-1",children:["\u20b9",t.price,(0,mr.jsx)("span",{className:"text-gray-500 text-base font-normal",children:"/hr"})]}),(0,mr.jsxs)("div",{className:"mt-2 text-gray-700 space-y-1 text-sm",children:[(0,mr.jsxs)("p",{className:"flex items-center gap-2",children:[" ",(0,mr.jsx)("img",{src:yo,alt:"Transmission",className:"w-4 h-4 sm:w-5 sm:h-5"})," ",t.transmission]}),(0,mr.jsxs)("p",{className:"flex items-center gap-2",children:[" ",(0,mr.jsx)("img",{src:vo,alt:"Seats",className:"w-4 h-4 sm:w-5 sm:h-5"})," ",t.seats," Seaters"]}),(0,mr.jsxs)("p",{className:"flex items-center gap-2",children:[" ",(0,mr.jsx)("img",{src:xo,alt:"Fuel",className:"w-4 h-4 sm:w-5 sm:h-5"})," ",t.fuel]})]}),(0,mr.jsxs)("p",{className:"flex items-center gap-2 mt-2 text-gray-500 text-sm",children:[(0,mr.jsx)(dr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 mt-0.5 flex-shrink-0"}),t.location]}),(0,mr.jsxs)("p",{children:[t.distance,"km away"]})]})]})},wo=e=>{let{limit:t,filters:n,searchText:i,onResultsChange:s}=e;ye();const{coordinates:o,currentCity:a}=vr(),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[m]=(0,r.useState)(5);(0,r.useEffect)(()=>{(async()=>{try{d(!0),p("");const{latitude:e,longitude:t}=o,n=await ho.car.getNearbyCars(e,t),r=n.data||n,i=(Array.isArray(r)?r:Array.isArray(r.data)?r.data:r.cars||[]).map(e=>({_id:e._id,CarName:e.CarName||"Unknown Car",CarModel:e.CarModel||"N/A",Carseater:e.Carseater||"4",fuelType:e.fuelType||"N/A",transmissionType:e.transmissionType||"N/A",kmDriven:e.kmDriven||0,description:e.description||"No description available",RentPerDay:e.RentPerDay||0,pickupArea:e.pickupArea||"Unknown",pickupCity:e.pickupCity||a,pickupCityState:e.pickupCityState||"",pickupCityCountry:e.pickupCityCountry||"",carImages:Array.isArray(e.carImages)&&e.carImages.length>0?e.carImages:["https://via.placeholder.com/400x250?text=No+Image"],distance:e.distance||"0",averageRating:e.averageRating||"0.0",totalReviews:e.totalReviews||0}));c(i)}catch(GN){console.error("Error fetching nearby cars:",GN),p(GN.message||"Failed to fetch nearby cars.")}finally{d(!1)}})()},[o,a,m]);const f=r.useMemo(()=>{let e=l;const r=i||(null===n||void 0===n?void 0:n.searchText);if(r&&r.trim()){const t=r.toLowerCase().trim();e=e.filter(e=>{var n,r,i;return e.CarName.toLowerCase().includes(t)||(null===(n=e.CarModel)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.pickupArea)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(i=e.pickupCity)||void 0===i?void 0:i.toLowerCase().includes(t))})}if(n&&(n.priceRange&&(e=e.filter(e=>e.RentPerDay>=n.priceRange[0]&&e.RentPerDay<=n.priceRange[1])),n.fuelType&&"All"!==n.fuelType&&(e=e.filter(e=>e.fuelType.toLowerCase().includes(n.fuelType.toLowerCase()))),n.transmission&&"All"!==n.transmission&&(e=e.filter(e=>e.transmissionType.toLowerCase().includes(n.transmission.toLowerCase()))),n.carName&&n.carName.trim())){const t=n.carName.toLowerCase().trim();e=e.filter(e=>e.CarName.toLowerCase().includes(t))}return t?e.slice(0,t):e},[l,n,t,i]);(0,r.useEffect)(()=>{s&&i&&s(f.length>0)},[f.length,i,s]);const g=f;return(0,mr.jsxs)("div",{className:t?"w-full":"bg-gray-50 min-h-screen p-6 flex flex-col",children:[!t&&(0,mr.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Nearby Cars"}),(0,mr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u?(0,mr.jsx)("p",{className:"text-gray-500 col-span-full text-center",children:"Loading..."}):h?(0,mr.jsx)("p",{className:"text-red-500 col-span-full text-center",children:h}):g.length>0?g.map(e=>{var t;return(0,mr.jsx)(bo,{vehicle:{id:e._id,name:e.CarName,price:e.RentPerDay,transmission:e.transmissionType,fuel:e.fuelType,seats:Number(e.Carseater)||0,location:"".concat(e.pickupArea||"",", ").concat(e.pickupCity||""),rating:Number(e.averageRating)||0,distance:String(e.distance),image:(null===(t=e.carImages)||void 0===t?void 0:t[0])||"https://via.placeholder.com/400x250?text=No+Image"}},e._id)}):(0,mr.jsx)("p",{className:"text-gray-500 col-span-full text-center",children:i||null!==n&&void 0!==n&&n.searchText?'No cars found matching "'.concat(i||(null===n||void 0===n?void 0:n.searchText),'"'):"No cars available nearby."})})]})},ko=e=>{let{vehicle:t,onBook:n}=e;const r=ye(),{getAverageRating:i}=go();i(t.id);return(0,mr.jsxs)("div",{onClick:()=>{n?n(t):r("/book-now/".concat(t.id),{state:{vehicleType:t.type||"bike"}})},className:"w-full border-b pb-5 cursor-pointer p-2 hover:bg-gray-50 transition",children:[(0,mr.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover rounded-xl"}),(0,mr.jsxs)("div",{className:"mt-3",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold",children:t.name}),(0,mr.jsxs)("div",{className:"flex items-center gap-1 border border-yellow-400 px-2 py-1 rounded-lg text-yellow-500 text-sm",children:["\u2b50 ",t.rating]})]}),(0,mr.jsxs)("p",{className:"text-2xl font-bold mt-1",children:["\u20b9",t.price,(0,mr.jsx)("span",{className:"text-gray-500 text-base font-normal",children:"/hr"})]}),(0,mr.jsx)("div",{className:"mt-2 text-gray-700 space-y-1 text-sm",children:(0,mr.jsxs)("p",{className:"flex items-center gap-2",children:[" ",(0,mr.jsx)("img",{src:xo,alt:"Fuel",className:"w-4 h-4 sm:w-5 sm:h-5"})," ",t.fuel]})}),(0,mr.jsxs)("p",{className:"flex items-center gap-2 mt-2 text-gray-500 text-sm",children:[(0,mr.jsx)(dr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 mt-0.5 flex-shrink-0"}),t.location]}),(0,mr.jsxs)("p",{children:[t.distance,"km away"]})]})]})},No=e=>{let{limit:t,filters:n,searchText:i,onResultsChange:s}=e;ye();const{coordinates:o,currentCity:a}=vr(),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[m]=(0,r.useState)(5);(0,r.useEffect)(()=>{(async()=>{try{d(!0),p("");const{latitude:e,longitude:t}=o;console.log("Fetching bikes for ".concat(a,":"),e,t);const n=await ho.bike.getNearbyBikes(e,t,m),r=n.data||n,i=(Array.isArray(r)?r:Array.isArray(r.data)?r.data:r.bikes||[]).map(e=>({_id:e._id,bikeName:e.bikeName||"Unknown Bike",bikeModel:e.bikeModel||"N/A",bikeNumber:e.bikeNumber||"N/A",description:e.description||"No description available",pricePerKm:e.pricePerKm||0,contactName:e.contactName||"N/A",contactNumber:e.contactNumber||"N/A",pickupArea:e.pickupArea||"Unknown",pickupCity:e.pickupCity||a,pickupCityState:e.pickupCityState||"",pickupCityCountry:e.pickupCityCountry||"",bikeImages:Array.isArray(e.bikeImages)&&e.bikeImages.length>0?e.bikeImages:["https://via.placeholder.com/400x250?text=No+Image"],distance:e.distance||"0",averageRating:e.averageRating||"0.0",totalReviews:e.totalReviews||0}));c(i)}catch(GN){console.error("Error fetching nearby bikes:",GN),p(GN.message||"Failed to fetch nearby bikes. Please try again.")}finally{d(!1)}})()},[o,a,m]);const f=r.useMemo(()=>{let e=l;const r=i||(null===n||void 0===n?void 0:n.searchText);if(r&&r.trim()){const t=r.toLowerCase().trim();e=e.filter(e=>{var n,r,i;return e.bikeName.toLowerCase().includes(t)||(null===(n=e.bikeModel)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.pickupArea)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(i=e.pickupCity)||void 0===i?void 0:i.toLowerCase().includes(t))})}if(n&&(n.priceRange&&(e=e.filter(e=>e.pricePerKm>=n.priceRange[0]&&e.pricePerKm<=n.priceRange[1])),n.bikeName&&n.bikeName.trim())){const t=n.bikeName.toLowerCase().trim();e=e.filter(e=>e.bikeName.toLowerCase().includes(t))}return t?e.slice(0,t):e},[l,n,t,i]);(0,r.useEffect)(()=>{s&&i&&s(f.length>0)},[f.length,i,s]);const g=f;return(0,mr.jsxs)("div",{className:t?"w-full":"bg-gray-50 min-h-screen p-6 flex flex-col",children:[!t&&(0,mr.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Nearby Bikes"}),(0,mr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u?(0,mr.jsx)("p",{className:"text-gray-500 col-span-full text-center",children:"Loading..."}):h?(0,mr.jsx)("p",{className:"text-red-500 col-span-full text-center",children:h}):g.length>0?g.map(e=>{var t;return(0,mr.jsx)(ko,{vehicle:{id:e._id,name:e.bikeName,model:e.bikeModel,price:e.pricePerKm,transmission:"Manual",fuel:"Petrol",seats:2,location:"".concat(e.pickupArea||"",", ").concat(e.pickupCity||""),rating:Number(e.averageRating)||0,distance:String(e.distance||0),image:(null===(t=e.bikeImages)||void 0===t?void 0:t[0])||"https://via.placeholder.com/400x250?text=No+Image"}},e._id)}):(0,mr.jsx)("p",{className:"text-gray-500 col-span-full text-center",children:i||null!==n&&void 0!==n&&n.searchText?'No bikes found matching "'.concat(i||(null===n||void 0===n?void 0:n.searchText),'"'):"No bikes available nearby."})})]})},_o=()=>{var e,t;const[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),a=ye(),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)((new Date).toISOString().split("T")[0]),[m,f]=(0,r.useState)((new Date).toISOString().split("T")[0]);return(0,mr.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[(0,mr.jsx)("div",{className:"px-6 py-4",children:(0,mr.jsx)(Pr,{})}),(0,mr.jsxs)("div",{className:"px-6 py-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-800",children:"Select Date & Time"}),(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,mr.jsx)(Sr,{value:h,onChange:p,minDate:(new Date).toISOString().split("T")[0]}),(0,mr.jsx)(Sr,{value:m,onChange:f,minDate:h})]})]}),(0,mr.jsxs)("div",{className:"flex gap-2 w-full md:w-auto",children:[(0,mr.jsxs)("div",{className:"flex items-center bg-white border rounded-full relative flex-1 md:w-[300px] h-[40px]",children:[(0,mr.jsx)(_r,{className:"w-6 h-6 text-gray-500 mr-4 ml-2"}),(0,mr.jsx)("input",{type:"text",placeholder:"Search by name or location...",className:"flex-1 outline-none text-gray-700 text-sm",value:l,onChange:e=>c(e.target.value)})]}),(0,mr.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white text-lm font-semibold px-4 py-1 rounded-md hover:opacity-100 transition-all",children:[(0,mr.jsx)("img",{src:Rr,alt:"Filter",className:"w-6 h-6"}),"Filter"]})]})]}),s&&(0,mr.jsx)("div",{className:"px-6 py-2",children:(0,mr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,mr.jsx)("h4",{className:"text-sm font-semibold text-blue-800",children:"Active Filters:"}),(0,mr.jsx)("button",{onClick:()=>o(null),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Clear All"})]}),(0,mr.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[s.priceRange&&(0,mr.jsxs)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded",children:["\u20b9",s.priceRange[0]," - \u20b9",s.priceRange[1]]}),s.fuelType&&"All"!==s.fuelType&&(0,mr.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded",children:s.fuelType}),s.transmission&&"All"!==s.transmission&&(0,mr.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded",children:s.transmission}),s.distance&&(0,mr.jsxs)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded",children:["Within ",s.distance,"km"]})]})]})}),(!s||"cars"===s.vehicleType)&&(0,mr.jsxs)("div",{className:"px-6",children:[(0,mr.jsxs)("div",{className:"flex w-full items-center justify-between mb-6 mt-2",children:[(0,mr.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Nearby Cars"}),(0,mr.jsx)("button",{onClick:()=>a("/nearby-cars"),className:"text-black font-semibold hover:underline",children:"View More \u2192"})]}),(0,mr.jsx)(wo,{limit:4,searchText:l,filters:s&&"cars"===s.vehicleType?{priceRange:s.priceRange,fuelType:s.fuelType,transmission:s.transmission,distance:s.distance,carName:null===(e=s.selectedVehicles)||void 0===e?void 0:e[0]}:void 0})]}),(!s||"bikes"===s.vehicleType)&&(0,mr.jsxs)("div",{className:"px-6 mt-2",children:[(0,mr.jsxs)("div",{className:"flex w-full items-center justify-between mb-6 mt-2",children:[(0,mr.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Nearby Bikes"}),(0,mr.jsx)("button",{onClick:()=>a("/nearby-bikes"),className:"text-black font-semibold hover:underline",children:"View More \u2192"})]}),(0,mr.jsx)(No,{limit:4,searchText:l,filters:s&&"bikes"===s.vehicleType?{priceRange:s.priceRange,distance:s.distance,bikeName:null===(t=s.selectedVehicles)||void 0===t?void 0:t[0]}:void 0})]}),n&&(0,mr.jsx)(Er,{onApply:e=>{o(e),i(!1)},onClose:()=>i(!1),initialFilters:s||{}})]})};const jo=(0,r.createContext)(null),Ao=jo.Provider;function Co(){const e=(0,r.useContext)(jo);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function So(){return Co().map}function Eo(e){const t=So();return(0,r.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}var To=n(228),Io=n.n(To);const Po=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function Ro(){return Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ro.apply(this,arguments)}function Do(e,t){let{bounds:n,boundsOptions:s,center:o,children:a,className:l,id:c,placeholder:u,style:d,whenReady:h,zoom:p}=e,m=i(e,Po);const[f]=(0,r.useState)({className:l,id:c,style:d}),[g,y]=(0,r.useState)(null);(0,r.useImperativeHandle)(t,()=>{var e;return null!==(e=null===g||void 0===g?void 0:g.map)&&void 0!==e?e:null},[g]);const v=(0,r.useCallback)(e=>{if(null!==e&&null===g){const t=new To.Map(e,m);null!=o&&null!=p?t.setView(o,p):null!=n&&t.fitBounds(n,s),null!=h&&t.whenReady(h),y(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,r.useEffect)(()=>()=>{null===g||void 0===g||g.map.remove()},[g]);const x=g?r.createElement(Ao,{value:g},a):null!==u&&void 0!==u?u:null;return r.createElement("div",Ro({},f,{ref:v}),x)}const Lo=(0,r.forwardRef)(Do);var Mo=n(950);function Oo(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Bo(e,t){return null==t?function(t,n){const i=(0,r.useRef)();return i.current||(i.current=e(t,n)),i}:function(n,i){const s=(0,r.useRef)();s.current||(s.current=e(n,i));const o=(0,r.useRef)(n),{instance:a}=s.current;return(0,r.useEffect)(function(){o.current!==n&&(t(a,n,o.current),o.current=n)},[a,n,i]),s}}function Fo(e,t){const n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function zo(e,t){const n=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function Uo(e,t){var n;const r=null!==(n=e.pane)&&void 0!==n?n:t.pane;return r?c(c({},e),{},{pane:r}):e}function Vo(e){return function(t){const n=Co(),i=e(Uo(t,n),n);return Fo(n.map,t.attribution),zo(i.current,t.eventHandlers),function(e,t){(0,r.useEffect)(function(){var n;return(null!==(n=t.layerContainer)&&void 0!==n?n:t.map).addLayer(e.instance),function(){var n;null===(n=t.layerContainer)||void 0===n||n.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}(i.current,n),i}}const Ho=["url"],qo=(Wo=function(e,t){let{url:n}=e,r=i(e,Ho);return Oo(new To.TileLayer(n,Uo(r,t)),t)},Ko=function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:i}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=i&&i!==n.zIndex&&e.setZIndex(i)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)},function(e){function t(t,n){const{instance:i}=e(t).current;return(0,r.useImperativeHandle)(n,()=>i),null}return(0,r.forwardRef)(t)}(Vo(Bo(Wo,Ko))));var Wo,Ko;const Go=["position"],Zo=function(e,t){return function(e){function t(t,n){const{instance:i,context:s}=e(t).current;return(0,r.useImperativeHandle)(n,()=>i),null==t.children?null:r.createElement(Ao,{value:s},t.children)}return(0,r.forwardRef)(t)}(Vo(Bo(e,t)))}(function(e,t){let{position:n}=e,r=i(e,Go);const s=new To.Marker(n,r);return Oo(s,(o=t,a={overlayContainer:s},Object.freeze(c(c({},o),a))));var o,a},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),Qo=function(e,t){const n=function(e,t){return function(n,r){const i=Co(),s=e(Uo(n,i),i);return Fo(i.map,n.attribution),zo(s.current,n.eventHandlers),t(s.current,i,n,r),s}}(Bo(e),t);return function(e){function t(t,n){const[i,s]=(0,r.useState)(!1),{instance:o}=e(t,s).current;(0,r.useImperativeHandle)(n,()=>o),(0,r.useEffect)(function(){i&&o.update()},[o,i,t.children]);const a=o._contentNode;return a?(0,Mo.createPortal)(t.children,a):null}return(0,r.forwardRef)(t)}(n)}(function(e,t){return Oo(new To.Popup(e,t.overlayContainer),t)},function(e,t,n,i){let{position:s}=n;(0,r.useEffect)(function(){const{instance:n}=e;function r(e){e.popup===n&&(n.update(),i(!0))}function o(e){e.popup===n&&i(!1)}return t.map.on({popupopen:r,popupclose:o}),null==t.overlayContainer?(null!=s&&n.setLatLng(s),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){var e;t.map.off({popupopen:r,popupclose:o}),null===(e=t.overlayContainer)||void 0===e||e.unbindPopup(),t.map.removeLayer(n)}},[e,t,i,s])}),Yo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAFz0lEQVR4AezZK5QsNRAG4DkoJBKJRCKRSCQSiUQikUgkEolEIpFIJBKJRCKR5Ju7WWprqpN+rrjn7umaVCr1+pNKOjP73u0t/3sH8OACf9jsP2n0WaMvEpF93GR0WnPNc8UKftRSBebb1n7dCA8MoJHIvmzjdL5pLT22jT3vOROg5CX6VUsP/35r1z4fNEU2bPnAN9Hx5wyAZl1SVkCiR7Pigy8++T7k7yjAz1t0sy6pxp768Mm3Ut7teC9A5Sf4p4PI/7axPxr90ujHRt83+u6J8GTG6PzT5EsPgGKJuaSzKN8DUCABl8rnrxbt50Y/NOoA/m48wK25P3gy4Oh03SWgYokp9t3B2o89AAWqjnZJ/9oC/9Toz0b6rVn9ADsCKqbYm0BuBWjPCZSzthpK7vc8sKMPqEmqVlNsJbva7RaAju5qz40SWp1IUgTOhKmENHSTgwtClpf9tQCdaNXMWTl7aGs5lskkIZ/2shhp6OY1sqpU1wIEDshb+DPLEgiiS9iqXIGzktOAawACpjyzMwcKkFme+05AM+7F3V8TrmeuaWtKzUqqkuwXQECz/EV/DUAJvjBqHfuu2h9t6PlhB4iTzwSZqD7osAAOSMDjWNeJrVcPijLggIyyB34NQOWZDX/LgtQHCDBA0tBDFzgg2TwMBkEVc2ZzmwGUoARCnJuZHJWmlVGSt41/bKz6kpm4KI7LTY5R9oKfAXwZ8I2p8nzDPX4K6F35OHK72UvKWpJLE6RklV5lT8ZeG6nK8Xl8D0AJPjtIjJIBMooBcyC5fzp1nYpuLGRRDw/caF9VAA+tYJXs0uxLEEBtJECqGw4ZwFEXPwIotgmj1+lUgNVLNwbKE2LGRyVtPFeEVcx+egwtkNpO9Dv/0M5KNBvn2YsOs66xnDxZJiCzbLQqGeBoMqanaA48AlgFGul335VONVkj/T720M5WMBuMAueZZVuBJo9U6VS+uk2l38ce2hnAHGjkvNqf1aGTk6h0Kl/dLk9yzrHr3dsZwFw+I4B0856jv/RelIBbEh18Jz746v3cZv1DAAWLAcze6ACoTkzHvhd4fyHzgXeVAzD6x1c+yJHY7PGdRqs9PWQqY8l157mVXJ4UOq5vAPk24QdhfOVHPD7YVLRkU+neZbMSXUr2brzw4avNsGwW7NhUL/6obqJiH1/lSH6nGUBBswOzqFTuDooPNq5j2mK4FNGd2dh7YkcHVpxtlL3gZwApZ4Bk1UySdxLUfdNXHHyX59ZhQsfvLyM9dtV+dd0ztkhrAFZOHBx5s1dBJA+o0uPH/kJ4MmN0AK3su8zqVa+TavK7zb1dA1BwSd0Nnj6Aq2b0afihcR1z6bY/EZ6M7wflQlDFktNs1aenaI/FWed7axXNbO9f1YpRrZ6Vn8Zcs4KcKIUKpG/hxq+kKoZcpqsnqbUA6ZqxXFJONStpPNMZfb7FyL7kkmVlfwtAM+ZwyI7sD2WU5Uf7fFbXPODkssr/FoAccu7dg+/kwHEz0XbZ0ZYvPrMfwOSQ5Yv9rQA5cgpqI5ntaq9EnS08X3xmG5eBLBv29wC0go757NjLX7lm+dY+H3xlOytnBbN82N8DkEN70UmGjyQ5FGVbeLYo24gFYJZP+3sBcmwVqxmVoNOPzhZiwzbbiCFWlq/qHwHolWFPSCAHc/pVL+es1/t02fR+b/kWQ6wu29QeASiQBNwpqwQcFNWKsItEh26U4fkETgz9XXQUoKAOHYlISD+S5FGURd4YijI8X3weAsfRGQD5mYGsyo9sBI5Pvg/RWQAlISGzbvb1IzlA/K/Qu62/xMmiDp4tH3zpH6YzAUpGYhKsSsuvAG4ngFb3y9PBSehsgHyOQFpBRC+SCfGtnm2UH+avACgpCVvJNQnTocuG7al0FUBJStiquPXoV2SMDt1q/LDsSoA9ObcQ1Pta+40M6V9GrwFQ8lbKD0xWSklaNTJjl9JrAQQCOCCBw5P9TxdxrwnwIghjt/8BAAD//yZk9F4AAAAGSURBVAMAOCwYgN0JH90AAAAASUVORK5CYII=",Jo=[17.4894387,78.4602418],Xo=Io().icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41]});function $o(e){let{initialLat:t,initialLng:n,onSaveLocation:i}=e;const s=ye(),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(t&&n?[t,n]:Jo),[h,p]=(0,r.useState)(t&&n?[t,n]:null),[m,f]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,x]=(0,r.useState)(!1);function b(e){let{position:t}=e;const n=So();return(0,r.useEffect)(()=>{t&&n.setView(t,15,{animate:!0})},[t,n]),null}const{setLocationWithCoordinates:w}=vr(),k=(0,r.useCallback)(function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout(()=>e(...i),n)}}(async e=>{if(!e.trim())return c([]);x(!0);const t=new URL("https://nominatim.openstreetmap.org/search");t.searchParams.set("q",e),t.searchParams.set("format","json"),t.searchParams.set("addressdetails","1"),t.searchParams.set("limit","6");const n=await fetch(t.toString(),{headers:{"User-Agent":"CarRentalApp/1.0"}}),r=await n.json();c(r),x(!1)},300),[]);(0,r.useEffect)(()=>{k(o)},[o,k]);const N=async(e,t)=>{var n,r,i;const s=new URL("https://nominatim.openstreetmap.org/reverse");s.searchParams.set("lat",String(e)),s.searchParams.set("lon",String(t)),s.searchParams.set("format","json"),s.searchParams.set("addressdetails","1");const o=await fetch(s.toString()),a=await o.json(),l=a.display_name;f(l),y((null===(n=a.address)||void 0===n?void 0:n.city)||(null===(r=a.address)||void 0===r?void 0:r.state)||(null===(i=a.address)||void 0===i?void 0:i.country)||"")};function _(){return Eo({click(e){p([e.latlng.lat,e.latlng.lng]),N(e.latlng.lat,e.latlng.lng)}}),null}return(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-10 p-4 ml-10",children:[(0,mr.jsx)("div",{className:"border rounded-lg overflow-hidden shadow",style:{width:50,height:50,minWidth:700,minHeight:500},children:(0,mr.jsxs)(Lo,{center:u,zoom:14,scrollWheelZoom:!0,style:{width:50,height:50,minWidth:700,minHeight:500},children:[(0,mr.jsx)(qo,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap"}),(0,mr.jsx)(_,{}),(0,mr.jsx)(b,{position:u}),h&&(0,mr.jsx)(Zo,{position:h,draggable:!0,eventHandlers:{dragend:e=>{const t=e.target.getLatLng();p([t.lat,t.lng]),N(t.lat,t.lng)}},children:(0,mr.jsx)(Qo,{children:m||"Selected location"})})]})}),(0,mr.jsxs)("div",{className:"w-full md:w-1/3 space-y-4",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Location"}),(0,mr.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Enter place, city, or address",className:"w-full border rounded-md px-3 py-2 focus:ring focus:ring-blue-300"}),v&&(0,mr.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Searching\u2026"}),l.length>0&&(0,mr.jsx)("ul",{className:"border rounded-md mt-1 max-h-48 overflow-auto bg-white shadow z-50",children:l.map((e,t)=>(0,mr.jsx)("li",{onClick:()=>(e=>{var t,n,r;const i=[Number(e.lat),Number(e.lon)];p(i),d(i),a(e.display_name),f(e.display_name),y((null===(t=e.address)||void 0===t?void 0:t.city)||(null===(n=e.address)||void 0===n?void 0:n.state)||(null===(r=e.address)||void 0===r?void 0:r.country)||""),c([])})(e),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",children:e.display_name},t))})]}),(0,mr.jsx)("button",{onClick:()=>{if(!navigator.geolocation)return alert("Geolocation not supported");x(!0),navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,n=e.coords.longitude;p([t,n]),d([t,n]);try{var r,i,s;const e=new URL("https://nominatim.openstreetmap.org/reverse");e.searchParams.set("lat",String(t)),e.searchParams.set("lon",String(n)),e.searchParams.set("format","json"),e.searchParams.set("addressdetails","1");const o=await fetch(e.toString(),{headers:{"User-Agent":"CarRentalApp/1.0"}}),l=await o.json(),u=l.display_name;f(u),a(u),y((null===(r=l.address)||void 0===r?void 0:r.city)||(null===(i=l.address)||void 0===i?void 0:i.state)||(null===(s=l.address)||void 0===s?void 0:s.country)||""),c([])}catch(o){console.error("Reverse geocoding failed:",o),a("".concat(t.toFixed(6),", ").concat(n.toFixed(6)))}finally{x(!1)}},e=>{alert(e.message),x(!1)},{enableHighAccuracy:!0})},children:(0,mr.jsx)("img",{src:Yo,alt:"Use Current Location",className:"w-10 h-10"})}),(0,mr.jsx)("button",{onClick:()=>{if(!h||!g)return void alert("Please select a valid location first.");const[e,t]=h;w(g,{latitude:e,longitude:t},"India"),null===i||void 0===i||i(g,e,t),s("/rental",{replace:!0})},className:"w-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-2 rounded hover:bg-blue-700 transition",children:"Save"})]})]})}Io().Marker.prototype.options.icon=Xo;const ea=ur("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ta=ur("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),na=ur("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),ra=ur("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ia=JSON.parse('{"carBrands":["Maruti Suzuki","Hyundai","Tata","Mahindra","Kia","Honda","Toyota","Ford","Renault","Nissan","Volkswagen","Skoda","MG","Jeep","BMW","Mercedes-Benz","Audi"],"carModels":{"Maruti Suzuki":["Alto","Swift","Baleno","Dzire","Wagon R","Ertiga","Brezza","Ciaz","S-Cross","XL6"],"Hyundai":["i10","i20","Verna","Venue","Creta","Alcazar","Tucson","Elantra"],"Tata":["Tiago","Tigor","Altroz","Nexon","Harrier","Safari","Punch"],"Mahindra":["XUV300","XUV500","XUV700","Scorpio","Thar","Bolero"],"Kia":["Seltos","Sonet","Carens","Carnival"],"Honda":["Amaze","City","Jazz","WR-V","Civic"],"Toyota":["Fortuner","Innova Crysta","Glanza","Urban Cruiser","Camry"]},"fuelTypes":["Petrol","Diesel","CNG","Electric","Hybrid","Petrol + CNG"],"transmissionTypes":["Manual","Automatic","AMT","CVT","DCT","iMT"],"years":["2024","2023","2022","2021","2020","2019","2018","2017","2016","2015"],"colors":["White","Black","Silver","Grey","Red","Blue","Brown","Beige","Orange","Yellow","Green"],"seatingCapacity":["2","4","5","7","8"],"vehicleTypes":["Sedan","Hatchback","SUV","MUV","Coupe","Convertible","Pickup Truck","Van"],"states":["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],"cities":{"Andhra Pradesh":["Visakhapatnam","Vijayawada","Guntur","Nellore","Kurnool","Rajahmundry","Tirupati","Kadapa","Kakinada","Anantapur","Eluru","Ongole","Chittoor","Srikakulam","Vizianagaram","Proddatur","Tenali","Adoni","Machilipatnam"],"Arunachal Pradesh":["Itanagar","Naharlagun","Pasighat","Tawang","Ziro","Bomdila","Tezu","Seppa","Aalo","Daporijo","Roing","Changlang","Namsai"],"Assam":["Guwahati","Silchar","Dibrugarh","Jorhat","Nagaon","Tinsukia","Tezpur","Bongaigaon","Karimganj","Dhubri","Goalpara","Hailakandi","Barpeta","Lakhimpur"],"Bihar":["Patna","Gaya","Bhagalpur","Muzaffarpur","Purnia","Darbhanga","Bihar Sharif","Arrah","Begusarai","Katihar","Chapra","Sasaram","Sitamarhi","Motihari","Samastipur"],"Chhattisgarh":["Raipur","Bhilai","Bilaspur","Korba","Durg","Rajnandgaon","Jagdalpur","Raigarh","Ambikapur","Dhamtari","Kanker","Mahasamund"],"Goa":["Panaji","Margao","Vasco da Gama","Mapusa","Ponda","Bicholim","Curchorem","Sanquelim","Cuncolim","Quepem"],"Gujarat":["Ahmedabad","Surat","Vadodara","Rajkot","Bhavnagar","Jamnagar","Junagadh","Gandhinagar","Anand","Nadiad","Morbi","Mehsana","Bharuch","Navsari","Valsad"],"Haryana":["Faridabad","Gurgaon","Panipat","Ambala","Yamunanagar","Rohtak","Hisar","Karnal","Sonipat","Panchkula","Kurukshetra","Jhajjar","Bhiwani"],"Himachal Pradesh":["Shimla","Dharamshala","Solan","Mandi","Palampur","Kullu","Hamirpur","Bilaspur","Nahan","Una","Chamba","Kangra"],"Jharkhand":["Ranchi","Jamshedpur","Dhanbad","Bokaro","Deoghar","Hazaribagh","Giridih","Ramgarh","Medininagar","Chirkunda","Chaibasa","Gumla"],"Karnataka":["Bangalore","Mysore","Hubli","Mangalore","Belgaum","Gulbarga","Davanagere","Bellary","Bijapur","Shimoga","Tumkur","Raichur","Udupi","Hassan"],"Kerala":["Thiruvananthapuram","Kochi","Kozhikode","Kollam","Thrissur","Palakkad","Alappuzha","Malappuram","Kannur","Kottayam","Idukki","Pathanamthitta","Kasargod"],"Madhya Pradesh":["Indore","Bhopal","Jabalpur","Gwalior","Ujjain","Sagar","Dewas","Satna","Ratlam","Rewa","Chhindwara","Khargone","Morena"],"Maharashtra":["Mumbai","Pune","Nagpur","Thane","Nashik","Aurangabad","Solapur","Kolhapur","Amravati","Nanded","Akola","Jalgaon","Latur","Sangli"],"Manipur":["Imphal","Thoubal","Bishnupur","Churachandpur","Kakching","Ukhrul","Senapati","Tamenglong","Jiribam","Moirang"],"Meghalaya":["Shillong","Tura","Nongstoin","Jowai","Baghmara","Williamnagar","Nongpoh","Resubelpara","Mairang","Cherrapunji"],"Mizoram":["Aizawl","Lunglei","Champhai","Serchhip","Kolasib","Lawngtlai","Saiha","Mamit","Khawzawl","Zawlnuam"],"Nagaland":["Kohima","Dimapur","Mokokchung","Tuensang","Wokha","Zunheboto","Phek","Mon","Longleng","Kiphire"],"Odisha":["Bhubaneswar","Cuttack","Rourkela","Brahmapur","Sambalpur","Puri","Balasore","Bhadrak","Baripada","Jharsuguda","Kendrapara","Angul"],"Punjab":["Ludhiana","Amritsar","Jalandhar","Patiala","Bathinda","Mohali","Pathankot","Hoshiarpur","Moga","Batala","Firozpur","Sangrur"],"Rajasthan":["Jaipur","Jodhpur","Kota","Bikaner","Ajmer","Udaipur","Bhilwara","Alwar","Bharatpur","Sikar","Tonk","Pali","Jhunjhunu"],"Sikkim":["Gangtok","Namchi","Gyalshing","Mangan","Rangpo","Jorethang","Singtam","Pelling","Ravangla","Yuksom"],"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Erode","Vellore","Thoothukudi","Nagercoil","Dindigul","Karur","Kanchipuram"],"Telangana":["Hyderabad","Warangal","Nizamabad","Khammam","Karimnagar","Ramagundam","Mahbubnagar","Nalgonda","Adilabad","Suryapet","Sangareddy","Jagtial","Mancherial"],"Tripura":["Agartala","Udaipur","Dharmanagar","Kailasahar","Belonia","Khowai","Ambassa","Teliamura","Sabroom","Amarpur"],"Uttar Pradesh":["Lucknow","Kanpur","Ghaziabad","Agra","Varanasi","Meerut","Prayagraj","Bareilly","Aligarh","Moradabad","Noida","Gorakhpur","Firozabad","Jhansi"],"Uttarakhand":["Dehradun","Haridwar","Roorkee","Haldwani","Rudrapur","Kashipur","Rishikesh","Pithoragarh","Nainital","Almora","Tehri","Mussoorie"],"West Bengal":["Kolkata","Howrah","Durgapur","Asansol","Siliguri","Bardhaman","Malda","Baharampur","Habra","Kharagpur","Jalpaiguri","Haldia"],"Andaman and Nicobar Islands":["Port Blair","Car Nicobar","Diglipur","Mayabunder","Rangat","Hut Bay","Nancowry","Campbell Bay"],"Chandigarh":["Chandigarh"],"Dadra and Nagar Haveli and Daman and Diu":["Daman","Diu","Silvassa"],"Delhi":["New Delhi","Delhi","North Delhi","South Delhi","East Delhi","West Delhi","Central Delhi","Dwarka","Rohini","Shahdara"],"Jammu and Kashmir":["Srinagar","Jammu","Anantnag","Baramulla","Udhampur","Kathua","Pulwama","Rajouri","Sopore","Kupwara"],"Ladakh":["Leh","Kargil","Nubra","Zanskar","Drass","Nyoma","Khalsi","Khaltse"],"Lakshadweep":["Kavaratti","Agatti","Amini","Andrott","Minicoy","Kalpeni"],"Puducherry":["Puducherry","Karaikal","Mahe","Yanam"]}}'),sa=e=>{let{options:t,value:n,onChange:i,placeholder:s,disabled:o=!1,required:a=!1}=e;const[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(n),h=(0,r.useRef)(null),p=(0,r.useRef)(null),m=t.filter(e=>e.toLowerCase().includes(u.toLowerCase()));(0,r.useEffect)(()=>{d(n)},[n]),(0,r.useEffect)(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&(c(!1),t.includes(u)||d(n))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[u,n,t]);return(0,mr.jsxs)("div",{className:"relative",ref:h,children:[(0,mr.jsxs)("div",{className:"w-full flex items-center border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition ".concat(o?"bg-gray-100 cursor-not-allowed":"bg-white cursor-text"),children:[(0,mr.jsx)("input",{ref:p,type:"text",value:u,onChange:e=>{const n=e.target.value;d(n),c(!0);const r=t.find(e=>e.toLowerCase()===n.toLowerCase());r&&i(r)},onFocus:()=>{o||c(!0)},placeholder:s,disabled:o,className:"flex-1 px-4 py-3 outline-none rounded-lg ".concat(o?"bg-gray-100 cursor-not-allowed":"bg-white")}),(0,mr.jsx)("button",{type:"button",onClick:()=>{var e;o||(c(!l),null===(e=p.current)||void 0===e||e.focus())},disabled:o,className:"px-3 py-3",children:(0,mr.jsx)(ea,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(l?"rotate-180":"")})})]}),l&&!o&&(0,mr.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden top-full",children:(0,mr.jsx)("div",{className:"max-h-60 overflow-y-auto",children:m.length>0?m.map(e=>(0,mr.jsx)("div",{onClick:()=>(e=>{i(e),d(e),c(!1)})(e),className:"px-4 py-3 cursor-pointer transition ".concat(e===n?"bg-blue-50 text-blue-700 font-medium":"hover:bg-gray-50"),children:e},e)):(0,mr.jsx)("div",{className:"px-4 py-3 text-gray-500 text-center",children:"No results found"})})})]})},oa={async getCoordinates(e){const t=Object.values(e).filter(Boolean).join(", ");if(!t)return null;try{const e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(t),"&limit=1")),n=await e.json();return n&&n.length>0?{latitude:n[0].lat,longitude:n[0].lon,displayName:n[0].display_name}:null}catch(n){return console.error("Geocoding error:",n),null}},async reverseGeocode(e,t){try{const n=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&addressdetails=1")),r=await n.json();return r.address?{street:r.address.road||r.address.suburb||"",city:r.address.city||r.address.town||r.address.village||"",state:r.address.state||"",pincode:r.address.postcode||"",country:r.address.country||""}:null}catch(n){return console.error("Reverse geocoding error:",n),null}}};function aa(e){let{onClick:t}=e;return Eo({click(e){t(e.latlng.lat,e.latlng.lng)}}),null}const la=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)([17.4889,78.4603]),[g,y]=(0,r.useState)(null),[v,x]=(0,r.useState)([]),b=/^[A-Z]{2}[0-9]{2}[A-Z]{1,2}[0-9]{4}$/i,[w,k]=(0,r.useState)(""),[N,_]=(0,r.useState)({userId:(()=>{const e=localStorage.getItem("userId");return e&&24===e.length&&/^[a-f0-9]{24}$/i.test(e)?e:"68f32259cea8a9fa88029262"})(),CarName:"",CarBrand:"",CarModel:"",CarNumber:"",Carseater:"",CarYear:"",CarColor:"",fuelType:"",transmissionType:"",kmDriven:"",Ac_available:!1,description:"",RentPerHour:"",RentPerDay:"",contactName:"",contactNumber:"",DepositAmount:"0",drivingLicenseRequired:!1,AadharCardRequired:!1,DepositVehicle:!1,photoFront:null,photoBack:null,photoLeft:null,photoRight:null,photoInterior:null,pickupArea:"",pickupCity:"",pickupCityState:"",pickupCityPinCode:"",pickupCityCountry:"",pickupLatitude:"17.4889",pickupLongitude:"78.4603",gps:!1}),[j,A]=(0,r.useState)({});(0,r.useEffect)(()=>{N.CarBrand&&ia.carModels[N.CarBrand]?(x(ia.carModels[N.CarBrand]),_(e=>c(c({},e),{},{CarModel:""}))):x([])},[N.CarBrand]);const C=ia.states,[S,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(N.pickupCityState){const e=ia.cities[N.pickupCityState]||[];E(e),_(e=>c(c({},e),{},{pickupCity:""}))}else E([])},[N.pickupCityState]),(0,r.useEffect)(()=>{if(N.pickupCityState){const e=ia.cities[N.pickupCityState]||[];E(e),_(e=>c(c({},e),{},{pickupCity:""}))}else E([])},[N.pickupCityState]);const T=[{name:"CarBrand",label:"Car Brand",options:(null===ia||void 0===ia?void 0:ia.carBrands)||[],placeholder:"Type brand name..."},{name:"CarModel",label:"Car Model",options:v,placeholder:"Type model name...",disabled:!N.CarBrand},{name:"CarYear",label:"Manufacturing Year",options:(null===ia||void 0===ia?void 0:ia.years)||[],placeholder:"Type year..."},{name:"Carseater",label:"Seating Capacity",options:(null===ia||void 0===ia?void 0:ia.seatingCapacity)||[],placeholder:"Type seats..."},{name:"CarColor",label:"Car Color",options:(null===ia||void 0===ia?void 0:ia.colors)||[],placeholder:"Type color..."},{name:"fuelType",label:"Fuel Type",options:(null===ia||void 0===ia?void 0:ia.fuelTypes)||[],placeholder:"Type fuel type..."},{name:"transmissionType",label:"Transmission",options:["Manual","Automatic","AMT","CVT","DCT","iMT"],placeholder:"Type transmission..."}],I=[{name:"pickupCityState",label:"State",options:C,placeholder:"Type state..."},{name:"pickupCity",label:"City",options:S,placeholder:"Type city...",disabled:!N.pickupCityState}];(0,r.useEffect)(()=>{N.pickupLatitude&&N.pickupLongitude&&(y([parseFloat(N.pickupLatitude),parseFloat(N.pickupLongitude)]),f([parseFloat(N.pickupLatitude),parseFloat(N.pickupLongitude)]))},[N.pickupLatitude,N.pickupLongitude]),(0,r.useEffect)(()=>{const e=setTimeout(async()=>{const e={pickupArea:N.pickupArea,pickupCity:N.pickupCity,pickupCityState:N.pickupCityState,pickupCityPinCode:N.pickupCityPinCode,pickupCityCountry:N.pickupCityCountry},t=await oa.getCoordinates(e);t&&(_(e=>c(c({},e),{},{pickupLatitude:t.latitude,pickupLongitude:t.longitude})),o(""))},1e3);return()=>clearTimeout(e)},[N.pickupArea,N.pickupCity,N.pickupCityState,N.pickupCityPinCode,N.pickupCityCountry]);const P=e=>{const{name:t,value:n,type:r,checked:i}=e.target;_(e=>c(c({},e),{},{[t]:"checkbox"===r?i:n}))},R=(e,t)=>{_(n=>c(c({},n),{},{[e]:t}))};return(0,mr.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[(0,mr.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[(0,mr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6",children:"List your Car"}),(0,mr.jsxs)("div",{className:"space-y-6",children:[(0,mr.jsx)("div",{className:"border-b pb-2",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Vehicle Details"})}),(0,mr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.map(e=>(0,mr.jsxs)("div",{"data-error":!!j[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ","CarModel"!==e.name&&(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("div",{className:j[e.name]?"ring-2 ring-red-500 rounded-lg":"",children:(0,mr.jsx)(sa,{options:e.options,value:N[e.name],onChange:t=>{R(e.name,t),A(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,disabled:e.disabled,required:"CarModel"!==e.name})}),j[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.name]})]},e.name)),[{name:"CarNumber",label:"Car Number",placeholder:"AP12AB1234"},{name:"kmDriven",label:"KM Driven",placeholder:"15000"},{name:"RentPerHour",label:"Rent Per Hour (\u20b9)",type:"number",placeholder:"500"},{name:"RentPerDay",label:"Rent Per Day (\u20b9)",type:"number",placeholder:"5000"}].map(e=>(0,mr.jsxs)("div",{"data-error":!!j[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:e.type||"text",name:e.name,value:N[e.name],onChange:t=>{"CarNumber"===e.name?(e=>{const t=e.target.value.toUpperCase();_(e=>c(c({},e),{},{CarNumber:t})),b.test(t)?k(""):k("Invalid format, e.g., AP12AB1234")})(t):P(t),A(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(j[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),j[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.name]})]},e.name))]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",(0,mr.jsx)("span",{className:"text-red-500"})]}),(0,mr.jsx)("textarea",{name:"description",value:N.description,onChange:P,placeholder:"Describe your car's condition, features, and any additional details...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition resize-none"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Car Photos ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Upload photos of your car from different angles (at least one photo required)"}),(0,mr.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[{key:"photoFront",label:"Front View"},{key:"photoBack",label:"Back View"},{key:"photoLeft",label:"Left Side"},{key:"photoRight",label:"Right Side"},{key:"photoInterior",label:"Interior"}].map(e=>(0,mr.jsxs)("div",{className:"flex flex-col",children:[(0,mr.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:e.label}),N[e.key]?(0,mr.jsxs)("div",{className:"relative group",children:[(0,mr.jsx)("img",{src:URL.createObjectURL(N[e.key]),alt:e.label,className:"w-full h-28 object-cover rounded-lg border-2 border-green-400"}),(0,mr.jsx)("button",{type:"button",onClick:()=>{return t=e.key,void _(e=>c(c({},e),{},{[t]:null}));var t},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:(0,mr.jsx)(hr,{className:"w-4 h-4"})})]}):(0,mr.jsxs)("label",{className:"cursor-pointer border-2 border-dashed rounded-lg h-28 flex flex-col items-center justify-center transition ".concat(j[e.key]?"border-red-400 bg-red-50":"border-blue-300 bg-blue-50 hover:bg-blue-100"),children:[(0,mr.jsx)(ta,{className:"w-6 h-6 ".concat(j[e.key]?"text-red-500":"text-blue-600")}),(0,mr.jsx)("span",{className:"text-xs mt-1 ".concat(j[e.key]?"text-red-500":"text-blue-600"),children:"Upload"}),(0,mr.jsx)("input",{type:"file",accept:"image/*",onChange:t=>((e,t)=>{e.target.files&&e.target.files[0]&&(_(n=>c(c({},n),{},{[t]:e.target.files[0]})),A(e=>c(c({},e),{},{[t]:""})))})(t,e.key),className:"hidden"})]}),j[e.key]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.key]})]},e.key))})]}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Your Contact Information"})}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"contactName",label:"Name",placeholder:"John Doe"},{name:"contactNumber",label:"Contact Number",placeholder:"9876543210",pattern:"[0-9]{10}"}].map(e=>(0,mr.jsxs)("div",{"data-error":!!j[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"contactNumber"===e.name?"tel":"text",name:e.name,value:N[e.name],onChange:t=>{P(t),A(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,pattern:e.pattern,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(j[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),j[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.name]})]},e.name))}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Additional Details"})}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Ac_available",label:"AC Available"},{name:"drivingLicenseRequired",label:"Driving License Required"},{name:"AadharCardRequired",label:"Aadhar Card Required"},{name:"DepositVehicle",label:"Deposit Vehicle Required"},{name:"gps",label:"GPS Tracking Available"}].map(e=>(0,mr.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",name:e.name,checked:N[e.name],onChange:P,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,mr.jsx)("span",{className:"ml-3 text-sm text-gray-700",children:e.label})]},e.name))}),N.DepositVehicle&&(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (\u20b9)"}),(0,mr.jsx)("input",{type:"number",name:"DepositAmount",value:N.DepositAmount,onChange:P,placeholder:"10,000",min:0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Vehicle Pickup Address"})}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.map(e=>(0,mr.jsxs)("div",{"data-error":!!j[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("div",{className:j[e.name]?"ring-2 ring-red-500 rounded-lg":"",children:(0,mr.jsx)(sa,{options:e.options,value:N[e.name],onChange:t=>{R(e.name,t),A(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,disabled:e.disabled})}),j[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.name]})]},e.name))}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"pickupArea",label:"Street/Area",placeholder:"Street name or area"},{name:"pickupCityPinCode",label:"Zip/Pincode",placeholder:"500001"},{name:"pickupCityCountry",label:"Country",placeholder:"India",fullWidth:!0}].map(e=>(0,mr.jsxs)("div",{className:e.fullWidth?"md:col-span-2":"","data-error":!!j[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"text",name:e.name,value:N[e.name],onChange:t=>{P(t),A(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(j[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),j[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:j[e.name]})]},e.name))}),(0,mr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[(0,mr.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,mr.jsx)(dr,{className:"w-5 h-5 text-blue-600"}),"GPS Location"]}),(0,mr.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,mr.jsxs)("button",{type:"button",onClick:()=>{if(i(!0),o(""),!navigator.geolocation)return o("Geolocation is not supported by your browser"),void i(!1);navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:n}=e.coords;_(e=>c(c({},e),{},{pickupLatitude:t.toString(),pickupLongitude:n.toString()}));const r=await oa.reverseGeocode(t,n);r&&_(e=>c(c({},e),{},{pickupArea:r.street,pickupCity:r.city,pickupCityState:r.state,pickupCityPinCode:r.pincode,pickupCityCountry:r.country})),i(!1)},e=>{o("Unable to retrieve location. Please enable GPS."),i(!1)})},disabled:n,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 text-sm",children:[n?(0,mr.jsx)(na,{className:"w-4 h-4 animate-spin"}):(0,mr.jsx)(ra,{className:"w-4 h-4"}),n?"Getting...":"Current Location"]}),(0,mr.jsxs)("button",{type:"button",onClick:()=>p(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm",children:[(0,mr.jsx)(dr,{className:"w-4 h-4"}),"Open Map Picker"]})]})]}),s&&(0,mr.jsx)("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded mb-4",children:s}),a&&(0,mr.jsx)("div",{className:"mt-4 border border-gray-300 rounded-lg overflow-hidden",children:(0,mr.jsx)("iframe",{src:"https://www.openstreetmap.org/export/embed.html?bbox=".concat(parseFloat(N.pickupLongitude)-.01,",").concat(parseFloat(N.pickupLatitude)-.01,",").concat(parseFloat(N.pickupLongitude)+.01,",").concat(parseFloat(N.pickupLatitude)+.01,"&layer=mapnik&marker=").concat(N.pickupLatitude,",").concat(N.pickupLongitude),width:"100%",height:"300",style:{border:0},title:"Location Map"})})]}),(0,mr.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault();const n={};N.CarBrand||(n.CarBrand="Car brand is required"),N.CarYear||(n.CarYear="Manufacturing year is required"),N.Carseater||(n.Carseater="Seating capacity is required"),N.CarColor||(n.CarColor="Car color is required"),N.fuelType||(n.fuelType="Fuel type is required"),N.transmissionType||(n.transmissionType="Transmission type is required"),N.CarNumber?b.test(N.CarNumber.toUpperCase())||(n.CarNumber="Invalid format, e.g., AP12AB1234"):n.CarNumber="Car number is required",N.kmDriven||(n.kmDriven="KM driven is required"),(!N.RentPerHour||parseFloat(N.RentPerHour)<=0)&&(n.RentPerHour="Valid rent per hour is required"),N.RentPerDay||(n.RentPerDay="Rent per day is required"),N.contactName||(n.contactName="Contact name is required"),N.contactNumber?10!==N.contactNumber.length&&(n.contactNumber="Enter a valid 10-digit number"):n.contactNumber="Contact number is required",N.pickupCityState||(n.pickupCityState="State is required"),N.pickupCity||(n.pickupCity="City is required"),N.pickupArea||(n.pickupArea="Street/Area is required"),N.pickupCityPinCode||(n.pickupCityPinCode="Pincode is required"),N.pickupCityCountry||(n.pickupCityCountry="Country is required");if(N.photoFront||N.photoBack||N.photoLeft||N.photoRight||N.photoInterior||(n.photoFront="At least one photo is required"),A(n),Object.keys(n).length>0){const e=document.querySelector('[data-error="true"]');return void(null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}))}if(!N.userId||24!==N.userId.length||!/^[a-f0-9]{24}$/i.test(N.userId))return void alert("Invalid user ID format. Please log in again.");if(!N.pickupLatitude||!N.pickupLongitude)return void alert("Please get your current location");d(!0);const r=new FormData,i="".concat(N.CarBrand," ").concat(N.CarModel);r.append("userId",N.userId.trim()),r.append("CarName",i.trim()),r.append("CarModel",N.CarYear),r.append("CarNumber",N.CarNumber.trim().toUpperCase()),r.append("Carseater",N.Carseater),r.append("fuelType",N.fuelType),r.append("transmissionType",N.transmissionType),r.append("kmDriven",N.kmDriven),r.append("Ac_available",N.Ac_available?"yes":"no"),r.append("description",N.description.trim()),r.append("RentPerHour",N.RentPerHour),r.append("RentPerDay",N.RentPerDay),r.append("contactName",N.contactName.trim()),r.append("contactNumber",N.contactNumber.trim()),r.append("DepositAmount",N.DepositAmount),r.append("drivingLicenseRequired",N.drivingLicenseRequired.toString()),r.append("AadharCardRequired",N.AadharCardRequired.toString()),r.append("DepositVehicle",N.DepositVehicle?"yes":"no"),r.append("pickupArea",N.pickupArea.trim()),r.append("pickupCity",N.pickupCity.trim()),r.append("pickupCityState",N.pickupCityState.trim()),r.append("pickupCityPinCode",N.pickupCityPinCode.trim()),r.append("pickupCityCountry",N.pickupCityCountry.trim()),r.append("pickupLatitude",N.pickupLatitude),r.append("pickupLongitude",N.pickupLongitude),r.append("gps",N.gps.toString()),N.photoFront&&r.append("carImages",N.photoFront),N.photoBack&&r.append("carImages",N.photoBack),N.photoLeft&&r.append("carImages",N.photoLeft),N.photoRight&&r.append("carImages",N.photoRight),N.photoInterior&&r.append("carImages",N.photoInterior);try{await ho.car.createCar(r);t(!0)}catch(c){var s,o,a,l;let e="Failed to post car. Please try again.";null!==c&&void 0!==c&&null!==(s=c.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?e=c.response.data.message:null!==c&&void 0!==c&&null!==(a=c.response)&&void 0!==a&&null!==(l=a.data)&&void 0!==l&&l.error?e=c.response.data.error:null!==c&&void 0!==c&&c.message&&(e=c.message),e.includes("userId")||e.includes("ObjectId")?e="Invalid user ID. Please log in again and try.":e.includes("CarNumber")?e="Invalid car number format. Please check and try again.":e.includes("duplicate")&&(e="This car is already listed. Please check the car number."),alert(e)}finally{d(!1)}},disabled:n||u,className:"w-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition-all shadow-md hover:shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:u?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(na,{className:"w-5 h-5 animate-spin"}),"Posting..."]}):"Post Now"})]})]})}),h&&(0,mr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,mr.jsxs)("div",{className:"w-full max-w-5xl h-[80vh] bg-white rounded-lg overflow-hidden shadow-lg flex flex-col",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Location on Map"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click anywhere on the map to set your location"})]}),(0,mr.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition text-sm font-medium",children:"Close"})]}),(0,mr.jsx)("div",{className:"flex-1",children:(0,mr.jsxs)(Lo,{center:m,zoom:14,style:{height:"100%",width:"100%"},children:[(0,mr.jsx)(qo,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,mr.jsx)(aa,{onClick:(e,t)=>{y([e,t]),i(!0),oa.reverseGeocode(e,t).then(n=>{n&&_(r=>c(c({},r),{},{pickupLatitude:e.toString(),pickupLongitude:t.toString(),pickupArea:n.street,pickupCity:n.city,pickupCityState:n.state,pickupCityPinCode:n.pincode,pickupCityCountry:n.country}))}).catch(e=>o(String(e))).finally(()=>i(!1))}}),g&&(0,mr.jsx)(Zo,{position:g})]})})]})}),e&&(0,mr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 bg-black/40",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full mx-auto text-center",children:[(0,mr.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,mr.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Posted Successfully! \ud83c\udf89"}),(0,mr.jsx)("p",{className:"text-gray-600 mb-6",children:"Your car is now listed and visible to all users."}),(0,mr.jsx)("button",{onClick:()=>{t(!1),window.location.href="/listed"},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition-all shadow-md",children:"View Listed Cars"})]})})]})},ca=JSON.parse('{"WP":["Royal Enfield","Hero","Honda","Bajaj","TVS","Yamaha","Suzuki","KTM","Husqvarna","Kawasaki","Harley-Davidson","Triumph","BMW","Ducati","Aprilia","Benelli","CFMoto","Jawa","Yezdi","Ather","Ola Electric","Revolt","Ultraviolette","Okinawa","Ampere","Pure EV","Tork","Oben","MV Agusta","Moto Guzzi","Can-Am","Savic","NIU","YADEA","SUNRA","QJMotor","Loncin","Zongshen","Lifan","Zero Motorcycles","Energica","Damon Motors","Lightning Motorcycles","Verge Motorcycles","Cake","Gogoro"],"a5":{"Royal Enfield":["Hunter 350","Classic 350","Meteor 350","Bullet 350","Goan Classic 350","Himalayan 450","Guerrilla 450","Interceptor 650","Continental GT 650","Super Meteor 650","Shotgun 650","Classic 650"],"Hero":["Splendor Plus","HF Deluxe","Passion Plus","Glamour X 125","Xtreme 125R","Xtreme 160R","XPulse 200 4V","Xtreme 250R","Karizma XMR","Pleasure +","Destini 125","Xoom 160"],"Honda":["Activa 6G","Activa 125","Dio","Activa e","CD 110 Dream","Shine 100","Shine","SP 125","Unicorn","Hornet 2.0","SP 160","CB 350","CB 350RS"],"Bajaj":["Platina 110","CT 100","Pulsar 125","Pulsar NS125","Pulsar N125","Pulsar 150","Pulsar NS160","Pulsar N160","Pulsar NS200","Pulsar RS200","Pulsar NS250","Pulsar N250","Pulsar NS400Z","Avenger 160 Street","Avenger 220 Cruise","Dominar 250","Dominar 400","Freedom 125","Chetak Electric"],"TVS":["Sport","Star City Plus","Radeon","Raider 125","Apache RTR 160","Apache RTR 160 4V","Ronin","Apache RTR 200 4V","Apache RR 310","Jupiter","Jupiter 125","Ntorq 125","iQube"],"Yamaha":["Fascino 125","Ray ZR 125","Aerox 155","FZ-S FI V4","FZ-X","MT-15 V2","R15 V4","R15M","FZ25","Fazer 25"],"Suzuki":["Access 125","Burgman Street 125","Avenis 125","Gixxer 155","Gixxer SF 155","Gixxer 250","Gixxer SF 250","V-Strom SX 250","Hayabusa"],"KTM":["125 Duke","200 Duke","250 Duke","390 Duke","RC 125","RC 200","RC 390","390 Adventure"],"Husqvarna":["Svartpilen 250","Svartpilen 401","Vitpilen 250","Vitpilen 401"],"Kawasaki":["Ninja 300","Ninja 400","Ninja 650","Z650","Z900","Versys 650"],"Ather":["450X Gen3","450 Apex","Rizta S","Rizta Z"],"Ola Electric":["S1 Pro","S1 X+","S1 X","S1 Air","S1 Z","Roadster X","Roadster Pro","Roadster"],"Revolt":["RV300","RV400","RV1","RV1+"],"Ultraviolette":["F77","F77 Mach 2","F77 SuperStreet"],"Jawa":["Classic 350","42 Bobber","Perak 350"]},"UC":["Petrol","Electric","Hybrid","CNG"],"ck":["Manual","Automatic","CVT","Semi-Automatic","4-speed manual","5-speed manual","6-speed manual"],"VS":["2025","2024","2023","2022","2021","2020","2019","2018","2017","2016","2015"],"Tj":["Black","White","Red","Blue","Silver","Grey","Orange","Yellow","Green","Brown","Matte Black","Glossy White","Racing Red","Midnight Blue"],"xP":["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],"E8":{"Andhra Pradesh":["Visakhapatnam","Vijayawada","Guntur","Nellore","Kurnool","Rajahmundry","Tirupati","Kadapa","Kakinada","Anantapur","Eluru","Ongole","Chittoor","Srikakulam","Vizianagaram","Proddatur","Tenali","Adoni","Machilipatnam"],"Arunachal Pradesh":["Itanagar","Naharlagun","Pasighat","Tawang","Ziro","Bomdila","Tezu","Seppa","Aalo","Daporijo","Roing","Changlang","Namsai"],"Assam":["Guwahati","Silchar","Dibrugarh","Jorhat","Nagaon","Tinsukia","Tezpur","Bongaigaon","Karimganj","Dhubri","Goalpara","Hailakandi","Barpeta","Lakhimpur"],"Bihar":["Patna","Gaya","Bhagalpur","Muzaffarpur","Purnia","Darbhanga","Bihar Sharif","Arrah","Begusarai","Katihar","Chapra","Sasaram","Sitamarhi","Motihari","Samastipur"],"Chhattisgarh":["Raipur","Bhilai","Bilaspur","Korba","Durg","Rajnandgaon","Jagdalpur","Raigarh","Ambikapur","Dhamtari","Kanker","Mahasamund"],"Goa":["Panaji","Margao","Vasco da Gama","Mapusa","Ponda","Bicholim","Curchorem","Sanquelim","Cuncolim","Quepem"],"Gujarat":["Ahmedabad","Surat","Vadodara","Rajkot","Bhavnagar","Jamnagar","Junagadh","Gandhinagar","Anand","Nadiad","Morbi","Mehsana","Bharuch","Navsari","Valsad"],"Haryana":["Faridabad","Gurgaon","Panipat","Ambala","Yamunanagar","Rohtak","Hisar","Karnal","Sonipat","Panchkula","Kurukshetra","Jhajjar","Bhiwani"],"Himachal Pradesh":["Shimla","Dharamshala","Solan","Mandi","Palampur","Kullu","Hamirpur","Bilaspur","Nahan","Una","Chamba","Kangra"],"Jharkhand":["Ranchi","Jamshedpur","Dhanbad","Bokaro","Deoghar","Hazaribagh","Giridih","Ramgarh","Medininagar","Chirkunda","Chaibasa","Gumla"],"Karnataka":["Bangalore","Mysore","Hubli","Mangalore","Belgaum","Gulbarga","Davanagere","Bellary","Bijapur","Shimoga","Tumkur","Raichur","Udupi","Hassan"],"Kerala":["Thiruvananthapuram","Kochi","Kozhikode","Kollam","Thrissur","Palakkad","Alappuzha","Malappuram","Kannur","Kottayam","Idukki","Pathanamthitta","Kasargod"],"Madhya Pradesh":["Indore","Bhopal","Jabalpur","Gwalior","Ujjain","Sagar","Dewas","Satna","Ratlam","Rewa","Chhindwara","Khargone","Morena"],"Maharashtra":["Mumbai","Pune","Nagpur","Thane","Nashik","Aurangabad","Solapur","Kolhapur","Amravati","Nanded","Akola","Jalgaon","Latur","Sangli"],"Manipur":["Imphal","Thoubal","Bishnupur","Churachandpur","Kakching","Ukhrul","Senapati","Tamenglong","Jiribam","Moirang"],"Meghalaya":["Shillong","Tura","Nongstoin","Jowai","Baghmara","Williamnagar","Nongpoh","Resubelpara","Mairang","Cherrapunji"],"Mizoram":["Aizawl","Lunglei","Champhai","Serchhip","Kolasib","Lawngtlai","Saiha","Mamit","Khawzawl","Zawlnuam"],"Nagaland":["Kohima","Dimapur","Mokokchung","Tuensang","Wokha","Zunheboto","Phek","Mon","Longleng","Kiphire"],"Odisha":["Bhubaneswar","Cuttack","Rourkela","Brahmapur","Sambalpur","Puri","Balasore","Bhadrak","Baripada","Jharsuguda","Kendrapara","Angul"],"Punjab":["Ludhiana","Amritsar","Jalandhar","Patiala","Bathinda","Mohali","Pathankot","Hoshiarpur","Moga","Batala","Firozpur","Sangrur"],"Rajasthan":["Jaipur","Jodhpur","Kota","Bikaner","Ajmer","Udaipur","Bhilwara","Alwar","Bharatpur","Sikar","Tonk","Pali","Jhunjhunu"],"Sikkim":["Gangtok","Namchi","Gyalshing","Mangan","Rangpo","Jorethang","Singtam","Pelling","Ravangla","Yuksom"],"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Erode","Vellore","Thoothukudi","Nagercoil","Dindigul","Karur","Kanchipuram"],"Telangana":["Hyderabad","Warangal","Nizamabad","Khammam","Karimnagar","Ramagundam","Mahbubnagar","Nalgonda","Adilabad","Suryapet","Sangareddy","Jagtial","Mancherial"],"Tripura":["Agartala","Udaipur","Dharmanagar","Kailasahar","Belonia","Khowai","Ambassa","Teliamura","Sabroom","Amarpur"],"Uttar Pradesh":["Lucknow","Kanpur","Ghaziabad","Agra","Varanasi","Meerut","Prayagraj","Bareilly","Aligarh","Moradabad","Noida","Gorakhpur","Firozabad","Jhansi"],"Uttarakhand":["Dehradun","Haridwar","Roorkee","Haldwani","Rudrapur","Kashipur","Rishikesh","Pithoragarh","Nainital","Almora","Tehri","Mussoorie"],"West Bengal":["Kolkata","Howrah","Durgapur","Asansol","Siliguri","Bardhaman","Malda","Baharampur","Habra","Kharagpur","Jalpaiguri","Haldia"],"Andaman and Nicobar Islands":["Port Blair","Car Nicobar","Diglipur","Mayabunder","Rangat","Hut Bay","Nancowry","Campbell Bay"],"Chandigarh":["Chandigarh"],"Dadra and Nagar Haveli and Daman and Diu":["Daman","Diu","Silvassa"],"Delhi":["New Delhi","Delhi","North Delhi","South Delhi","East Delhi","West Delhi","Central Delhi","Dwarka","Rohini","Shahdara"],"Jammu and Kashmir":["Srinagar","Jammu","Anantnag","Baramulla","Udhampur","Kathua","Pulwama","Rajouri","Sopore","Kupwara"],"Ladakh":["Leh","Kargil","Nubra","Zanskar","Drass","Nyoma","Khalsi","Khaltse"],"Lakshadweep":["Kavaratti","Agatti","Amini","Andrott","Minicoy","Kalpeni"],"Puducherry":["Puducherry","Karaikal","Mahe","Yanam"]}}'),ua=e=>{let{options:t,value:n,onChange:i,placeholder:s,disabled:o=!1}=e;const[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(n),d=(0,r.useRef)(null),h=(0,r.useRef)(null),p=t.filter(e=>e.toLowerCase().includes(c.toLowerCase()));(0,r.useEffect)(()=>{u(n)},[n]),(0,r.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&(l(!1),t.includes(c)||u(n))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c,n,t]);return(0,mr.jsxs)("div",{className:"relative",ref:d,children:[(0,mr.jsxs)("div",{className:"w-full flex items-center border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-transparent transition ".concat(o?"bg-gray-100 cursor-not-allowed":"bg-white cursor-text"),children:[(0,mr.jsx)("input",{ref:h,type:"text",value:c,onChange:e=>{const n=e.target.value;u(n),l(!0);const r=t.find(e=>e.toLowerCase()===n.toLowerCase());r&&i(r)},onFocus:()=>{o||l(!0)},placeholder:s,disabled:o,className:"flex-1 px-4 py-3 outline-none rounded-lg ".concat(o?"bg-gray-100 cursor-not-allowed":"bg-white")}),(0,mr.jsx)("button",{type:"button",onClick:()=>{var e;o||(l(!a),null===(e=h.current)||void 0===e||e.focus())},disabled:o,className:"px-3 py-3",children:(0,mr.jsx)(ea,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(a?"rotate-180":"")})})]}),a&&!o&&(0,mr.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden top-full",children:(0,mr.jsx)("div",{className:"max-h-60 overflow-y-auto",children:p.length>0?p.map(e=>(0,mr.jsx)("div",{onClick:()=>(e=>{i(e),u(e),l(!1)})(e),className:"px-4 py-3 cursor-pointer transition ".concat(e===n?"bg-blue-50 text-blue-700 font-medium":"hover:bg-gray-50"),children:e},e)):(0,mr.jsx)("div",{className:"px-4 py-3 text-gray-500 text-center",children:"No results found"})})})]})},da={async getCoordinates(e){const t=Object.values(e).filter(Boolean).join(", ");if(!t)return null;try{const e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(t),"&limit=1")),n=await e.json();return n&&n.length>0?{latitude:n[0].lat,longitude:n[0].lon,displayName:n[0].display_name}:null}catch(n){return console.error("Geocoding error:",n),null}},async reverseGeocode(e,t){try{const n=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&addressdetails=1")),r=await n.json();return r.address?{street:r.address.road||r.address.suburb||"",city:r.address.city||r.address.town||r.address.village||"",state:r.address.state||"",pincode:r.address.postcode||"",country:r.address.country||""}:null}catch(n){return console.error("Reverse geocoding error:",n),null}}};function ha(e){let{onClick:t}=e;return Eo({click(e){t(e.latlng.lat,e.latlng.lng)}}),null}const pa=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)([17.4889,78.4603]),[g,y]=(0,r.useState)(null),[v,x]=(0,r.useState)([]),[b,w]=(0,r.useState)({userId:(()=>{const e=localStorage.getItem("userId");return e&&24===e.length&&/^[a-f0-9]{24}$/i.test(e)?e:"68f32259cea8a9fa88029262"})(),bikeBrand:"",bikeModel:"",bikeNumber:"",bikeEngine:"",bikeYear:"",bikeColor:"",fuel:"",transmission:"",pricePerKm:"",kmDriven:"",description:"",photoFront:null,photoBack:null,photoLeft:null,photoRight:null,photoInterior:null,contactName:"",contactNumber:"",insuranceNo:"",pickupArea:"",pickupCity:"",pickupCityState:"",pickupCityPinCode:"",pickupCityCountry:"",latitude:"17.4889",longitude:"78.4603",drivingLicense:!1,aadharCard:!1,depositVehicle:!1,depositMoney:"0",gps:!1}),[k,N]=(0,r.useState)({}),_=ca.WP.sort(),j=ca.VS,A=ca.Tj,C=ca.UC,S=ca.ck,E=ca.xP,[T,I]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(b.bikeBrand){const e=ca.a5[b.bikeBrand]||[];x(e),w(e=>c(c({},e),{},{bikeModel:""}))}else x([])},[b.bikeBrand]),(0,r.useEffect)(()=>{if(b.pickupCityState){const e=ca.E8[b.pickupCityState]||[];I(e),w(e=>c(c({},e),{},{pickupCity:""}))}else I([])},[b.pickupCityState]),(0,r.useEffect)(()=>{if(b.pickupCityState){const e=ca.E8[b.pickupCityState]||[];I(e),w(e=>c(c({},e),{},{pickupCity:""}))}else I([])},[b.pickupCityState]);const P=[{name:"bikeBrand",label:"Bike Brand",options:_,placeholder:"Type brand name..."},{name:"bikeModel",label:"Bike Model",options:v,placeholder:"Type model name...",disabled:!b.bikeBrand},{name:"bikeYear",label:"Manufacturing Year",options:j,placeholder:"Type year..."},{name:"bikeColor",label:"Bike Color",options:A,placeholder:"Type color..."},{name:"fuel",label:"Fuel Type",options:C,placeholder:"Type fuel type..."},{name:"transmission",label:"Transmission",options:S,placeholder:"Type transmission..."}],R=[{name:"pickupCityState",label:"State",options:E,placeholder:"Type state..."},{name:"pickupCity",label:"City",options:T,placeholder:"Type city...",disabled:!b.pickupCityState}];(0,r.useEffect)(()=>{b.latitude&&b.longitude&&(y([parseFloat(b.latitude),parseFloat(b.longitude)]),f([parseFloat(b.latitude),parseFloat(b.longitude)]))},[b.latitude,b.longitude]),(0,r.useEffect)(()=>{const e=setTimeout(async()=>{const e={pickupArea:b.pickupArea,pickupCity:b.pickupCity,pickupCityState:b.pickupCityState,pickupCityPinCode:b.pickupCityPinCode,pickupCityCountry:b.pickupCityCountry},t=await da.getCoordinates(e);t&&(w(e=>c(c({},e),{},{latitude:t.latitude,longitude:t.longitude})),o(""))},1e3);return()=>clearTimeout(e)},[b.pickupArea,b.pickupCity,b.pickupCityState,b.pickupCityPinCode,b.pickupCityCountry]);const D=e=>{const{name:t,value:n,type:r,checked:i}=e.target;w(e=>c(c({},e),{},{[t]:"checkbox"===r?i:n}))},L=(e,t)=>{w(n=>c(c({},n),{},{[e]:t}))};return(0,mr.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[(0,mr.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[(0,mr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6",children:"List your Bike"}),(0,mr.jsxs)("div",{className:"space-y-6",children:[(0,mr.jsx)("div",{className:"border-b pb-2",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Vehicle Details"})}),(0,mr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[P.map(e=>(0,mr.jsxs)("div",{"data-error":!!k[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ","bikeModel"!==e.name&&(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("div",{className:k[e.name]?"ring-2 ring-red-500 rounded-lg":"",children:(0,mr.jsx)(ua,{options:e.options,value:b[e.name],onChange:t=>{L(e.name,t),N(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,disabled:e.disabled})}),k[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.name]})]},e.name)),[{name:"bikeNumber",label:"Bike Number",placeholder:"AP12AB1234"},{name:"bikeEngine",label:"Engine Capacity (CC)",placeholder:"350"},{name:"kmDriven",label:"KM Driven",placeholder:"15000"},{name:"pricePerKm",label:"Price (per km) (\u20b9)",type:"number",placeholder:"250"}].map(e=>(0,mr.jsxs)("div",{"data-error":!!k[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:e.type||"text",name:e.name,value:b[e.name],onChange:t=>{D(t),N(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(k[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),k[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.name]})]},e.name))]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",(0,mr.jsx)("span",{className:"text-red-500"})]}),(0,mr.jsx)("textarea",{name:"description",value:b.description,onChange:D,placeholder:"Describe your bike's condition, features, and any additional details...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition resize-none"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Bike Photos ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Upload photos of your bike from different angles (at least one photo required)"}),(0,mr.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[{key:"photoFront",label:"Front View"},{key:"photoBack",label:"Back View"},{key:"photoLeft",label:"Left Side"},{key:"photoRight",label:"Right Side"},{key:"photoInterior",label:"Interior/Dashboard"}].map(e=>(0,mr.jsxs)("div",{className:"flex flex-col",children:[(0,mr.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:e.label}),b[e.key]?(0,mr.jsxs)("div",{className:"relative group",children:[(0,mr.jsx)("img",{src:URL.createObjectURL(b[e.key]),alt:e.label,className:"w-full h-28 object-cover rounded-lg border-2 border-green-400"}),(0,mr.jsx)("button",{type:"button",onClick:()=>{return t=e.key,void w(e=>c(c({},e),{},{[t]:null}));var t},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition",children:(0,mr.jsx)(hr,{className:"w-4 h-4"})})]}):(0,mr.jsxs)("label",{className:"cursor-pointer border-2 border-dashed rounded-lg h-28 flex flex-col items-center justify-center transition ".concat(k[e.key]?"border-red-400 bg-red-50":"border-blue-300 bg-blue-50 hover:bg-blue-100"),children:[(0,mr.jsx)(ta,{className:"w-6 h-6 ".concat(k[e.key]?"text-red-500":"text-blue-600")}),(0,mr.jsx)("span",{className:"text-xs mt-1 ".concat(k[e.key]?"text-red-500":"text-blue-600"),children:"Upload"}),(0,mr.jsx)("input",{type:"file",accept:"image/*",onChange:t=>((e,t)=>{e.target.files&&e.target.files[0]&&(w(n=>c(c({},n),{},{[t]:e.target.files[0]})),N(e=>c(c({},e),{},{[t]:""})))})(t,e.key),className:"hidden"})]}),k[e.key]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.key]})]},e.key))})]}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Your Contact Information"})}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"contactName",label:"Name",placeholder:"John Doe"},{name:"contactNumber",label:"Contact Number",placeholder:"9876543210",pattern:"[0-9]{10}"}].map(e=>(0,mr.jsxs)("div",{"data-error":!!k[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"contactNumber"===e.name?"tel":"text",name:e.name,value:b[e.name],onChange:t=>{D(t),N(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,pattern:e.pattern,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(k[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),k[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.name]})]},e.name))}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Additional Details"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Insurance Number ",(0,mr.jsx)("span",{className:"text-red-500"})]}),(0,mr.jsx)("input",{type:"text",name:"insuranceNo",value:b.insuranceNo,onChange:D,placeholder:"1234567890",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"drivingLicense",label:"Driving License Required"},{name:"aadharCard",label:"Aadhar Card Required"},{name:"depositVehicle",label:"Deposit Vehicle Required"},{name:"gps",label:"GPS Tracking Available"}].map(e=>(0,mr.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",name:e.name,checked:b[e.name],onChange:D,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,mr.jsx)("span",{className:"ml-3 text-sm text-gray-700",children:e.label})]},e.name))}),b.depositVehicle&&(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (\u20b9)"}),(0,mr.jsx)("input",{type:"number",name:"depositMoney",value:b.depositMoney,onChange:D,placeholder:"10,000",min:0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,mr.jsx)("div",{className:"border-b pb-2 pt-4",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Vehicle Pickup Address"})}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:R.map(e=>(0,mr.jsxs)("div",{"data-error":!!k[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("div",{className:k[e.name]?"ring-2 ring-red-500 rounded-lg":"",children:(0,mr.jsx)(ua,{options:e.options,value:b[e.name],onChange:t=>{L(e.name,t),N(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,disabled:e.disabled})}),k[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.name]})]},e.name))}),(0,mr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"pickupArea",label:"Street/Area",placeholder:"Street name or area"},{name:"pickupCityPinCode",label:"Zip/Pincode",placeholder:"500001"},{name:"pickupCityCountry",label:"Country",placeholder:"India",fullWidth:!0}].map(e=>(0,mr.jsxs)("div",{className:e.fullWidth?"md:col-span-2":"","data-error":!!k[e.name],children:[(0,mr.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"text",name:e.name,value:b[e.name],onChange:t=>{D(t),N(t=>c(c({},t),{},{[e.name]:""}))},placeholder:e.placeholder,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition ".concat(k[e.name]?"border-red-500 ring-2 ring-red-500":"border-gray-300"),required:!0}),k[e.name]&&(0,mr.jsx)("span",{className:"text-red-500 text-xs mt-1",children:k[e.name]})]},e.name))}),(0,mr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-2",children:[(0,mr.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,mr.jsx)(dr,{className:"w-5 h-5 text-blue-600"}),"GPS Location"]}),(0,mr.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,mr.jsxs)("button",{type:"button",onClick:()=>{if(i(!0),o(""),!navigator.geolocation)return o("Geolocation is not supported by your browser"),void i(!1);navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:n}=e.coords;w(e=>c(c({},e),{},{latitude:t.toString(),longitude:n.toString()}));const r=await da.reverseGeocode(t,n);r&&w(e=>c(c({},e),{},{pickupArea:r.street,pickupCity:r.city,pickupCityState:r.state,pickupCityPinCode:r.pincode,pickupCityCountry:r.country})),i(!1)},e=>{o("Unable to retrieve location. Please enable GPS."),i(!1)})},disabled:n,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 text-sm",children:[n?(0,mr.jsx)(na,{className:"w-4 h-4 animate-spin"}):(0,mr.jsx)(ra,{className:"w-4 h-4"}),n?"Getting...":"Current Location"]}),(0,mr.jsxs)("button",{type:"button",onClick:()=>p(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm",children:[(0,mr.jsx)(dr,{className:"w-4 h-4"}),"Open Map Picker"]})]})]}),s&&(0,mr.jsx)("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded mb-4",children:s}),a&&(0,mr.jsx)("div",{className:"mt-4 border border-gray-300 rounded-lg overflow-hidden",children:(0,mr.jsx)("iframe",{src:"https://www.openstreetmap.org/export/embed.html?bbox=".concat(parseFloat(b.longitude)-.01,",").concat(parseFloat(b.latitude)-.01,",").concat(parseFloat(b.longitude)+.01,",").concat(parseFloat(b.latitude)+.01,"&layer=mapnik&marker=").concat(b.latitude,",").concat(b.longitude),width:"100%",height:"300",style:{border:0},title:"Location Map"})})]}),(0,mr.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault();const n={};b.bikeBrand||(n.bikeBrand="Bike brand is required"),b.bikeYear||(n.bikeYear="Manufacturing year is required"),b.bikeColor||(n.bikeColor="Bike color is required"),b.fuel||(n.fuel="Fuel type is required"),b.transmission||(n.transmission="Transmission type is required"),b.bikeNumber||(n.bikeNumber="Bike number is required"),b.bikeEngine||(n.bikeEngine="Engine capacity is required"),b.kmDriven||(n.kmDriven="KM driven is required"),(!b.pricePerKm||parseFloat(b.pricePerKm)<=0)&&(n.pricePerKm="Valid price per km is required"),b.contactName||(n.contactName="Contact name is required"),b.contactNumber?10!==b.contactNumber.length&&(n.contactNumber="Enter a valid 10-digit number"):n.contactNumber="Contact number is required",b.pickupCityState||(n.pickupCityState="State is required"),b.pickupCity||(n.pickupCity="City is required"),b.pickupArea||(n.pickupArea="Street/Area is required"),b.pickupCityPinCode||(n.pickupCityPinCode="Pincode is required"),b.pickupCityCountry||(n.pickupCityCountry="Country is required");if(b.photoFront||b.photoBack||b.photoLeft||b.photoRight||b.photoInterior||(n.photoFront="At least one photo is required"),N(n),Object.keys(n).length>0){const e=document.querySelector('[data-error="true"]');return void(null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}))}if(!b.userId||24!==b.userId.length||!/^[a-f0-9]{24}$/i.test(b.userId))return void alert("Invalid user ID format. Please log in again.");if(!b.latitude||!b.longitude)return void alert("Please get your current location");d(!0);const r=new FormData,i="".concat(b.bikeBrand," ").concat(b.bikeModel);r.append("userId",b.userId.trim()),r.append("bikeName",i.trim()),r.append("bikeModel",b.bikeYear),r.append("bikeNumber",b.bikeNumber.trim().toUpperCase()),r.append("bikeEngine",b.bikeEngine.trim()),r.append("fuel",b.fuel),r.append("transmission",b.transmission),r.append("pricePerKm",b.pricePerKm),r.append("description",b.description.trim()),r.append("contactName",b.contactName.trim()),r.append("contactNumber",b.contactNumber.trim()),r.append("InsuranceNo",b.insuranceNo.trim()),r.append("pickupArea",b.pickupArea.trim()),r.append("pickupCity",b.pickupCity.trim()),r.append("pickupCityState",b.pickupCityState.trim()),r.append("pickupCityPinCode",b.pickupCityPinCode.trim()),r.append("pickupCityCountry",b.pickupCityCountry.trim()),r.append("latitude",b.latitude),r.append("longitude",b.longitude),r.append("gps",b.gps.toString()),r.append("drivingLicense",b.drivingLicense.toString()),r.append("aadharCard",b.aadharCard.toString()),r.append("depositVehicle",b.depositVehicle.toString()),r.append("depositMoney",b.depositMoney),b.photoFront&&r.append("bikeImages",b.photoFront),b.photoBack&&r.append("bikeImages",b.photoBack),b.photoLeft&&r.append("bikeImages",b.photoLeft),b.photoRight&&r.append("bikeImages",b.photoRight),b.photoInterior&&r.append("bikeImages",b.photoInterior);try{await ho.bike.createBike(r);t(!0)}catch(c){var s,o,a,l;let e="Failed to post bike. Please try again.";null!==c&&void 0!==c&&null!==(s=c.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?e=c.response.data.message:null!==c&&void 0!==c&&null!==(a=c.response)&&void 0!==a&&null!==(l=a.data)&&void 0!==l&&l.error?e=c.response.data.error:null!==c&&void 0!==c&&c.message&&(e=c.message),e.includes("userId")||e.includes("ObjectId")?e="Invalid user ID. Please log in again and try.":e.includes("bikeNumber")?e="Invalid bike number format. Please check and try again.":e.includes("duplicate")&&(e="This bike is already listed. Please check the bike number."),alert(e)}finally{d(!1)}},disabled:n||u,className:"w-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition-all shadow-md hover:shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:u?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(na,{className:"w-5 h-5 animate-spin"}),"Posting..."]}):"Post Now"})]})]})}),h&&(0,mr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,mr.jsxs)("div",{className:"w-full max-w-5xl h-[80vh] bg-white rounded-lg overflow-hidden shadow-lg flex flex-col",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Location on Map"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click anywhere on the map to set your location"})]}),(0,mr.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition text-sm font-medium",children:"Close"})]}),(0,mr.jsx)("div",{className:"flex-1",children:(0,mr.jsxs)(Lo,{center:m,zoom:14,style:{height:"100%",width:"100%"},children:[(0,mr.jsx)(qo,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,mr.jsx)(ha,{onClick:(e,t)=>{y([e,t]),i(!0),da.reverseGeocode(e,t).then(n=>{n&&w(r=>c(c({},r),{},{latitude:e.toString(),longitude:t.toString(),pickupArea:n.street,pickupCity:n.city,pickupCityState:n.state,pickupCityPinCode:n.pincode,pickupCityCountry:n.country}))}).catch(e=>o(String(e))).finally(()=>i(!1))}}),g&&(0,mr.jsx)(Zo,{position:g})]})})]})}),e&&(0,mr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 bg-black/40",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full mx-auto text-center",children:[(0,mr.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,mr.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Posted Successfully! \ud83c\udf89"}),(0,mr.jsx)("p",{className:"text-gray-600 mb-6",children:"Your bike is now listed and visible to all users."}),(0,mr.jsx)("button",{onClick:()=>{t(!1),window.location.href="/listed-bike"},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition-all shadow-md",children:"View Listed Bikes"})]})})]})},ma=ur("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),fa=e=>{let{rating:t,maxStars:n=5,size:r="md",showNumber:i=!1,className:s=""}=e;const o=[],a=Math.floor(t),l=t%1!==0,c={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[r];for(let d=0;d<a;d++)o.push((0,mr.jsx)(ma,{className:"".concat(c," fill-yellow-400 text-yellow-400")},"full-".concat(d)));l&&o.push((0,mr.jsx)(ma,{className:"".concat(c," fill-yellow-400 text-yellow-400"),style:{clipPath:"inset(0 50% 0 0)"}},"half"));const u=n-Math.ceil(t);for(let d=0;d<u;d++)o.push((0,mr.jsx)(ma,{className:"".concat(c," text-gray-300")},"empty-".concat(d)));return(0,mr.jsxs)("div",{className:"flex items-center gap-1 ".concat(s),children:[o,i&&(0,mr.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-700",children:t.toFixed(1)})]})},ga=e=>{let{label:t}=e;return(0,mr.jsx)("div",{className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg",children:(0,mr.jsx)("span",{className:"text-sm text-gray-600",children:t})})},ya=()=>{const{id:e}=ve(),t=me(),n=ye(),[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(0),[h,p]=(0,r.useState)([]),[m,f]=(0,r.useState)({averageRating:0,totalReviews:0,distribution:{5:0,4:0,3:0,2:0,1:0}}),[g,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=new URLSearchParams(t.search).get("type");a(e)},[t.search]),(0,r.useEffect)(()=>{(async()=>{if(e&&o)try{let t;c(!0),t="bike"===o?await ho.bike.getBikeById(e):await ho.car.getCarById(e);const n=ho.utils.extractResponseData(t);s(n)}catch(t){console.error("\u274c Error fetching vehicle details:",t)}finally{c(!1)}})()},[e,o]),(0,r.useEffect)(()=>{(async()=>{if(e&&o)try{y(!0);const n=await ho.review.getReviewsByCarId(e),r=ho.utils.extractResponseData(n);console.log("\ud83d\udcca Reviews fetched:",r);const i=Array.isArray(r)?r.map(e=>({_id:e._id,userId:e.userId,userName:e.userName||"Anonymous",rating:e.rating||0,comment:e.comment||"",createdAt:e.createdAt||(new Date).toISOString(),location:e.location||"Unknown"})):[];p(i);try{const t=await ho.review.getAverageRating(e,o),n=ho.utils.extractResponseData(t);console.log("\u2b50 Rating data:",n);const r={5:0,4:0,3:0,2:0,1:0};i.forEach(e=>{const t=Math.round(e.rating);t>=1&&t<=5&&r[t]++}),f({averageRating:(null===n||void 0===n?void 0:n.averageRating)||0,totalReviews:i.length,distribution:r})}catch(t){console.warn("\u26a0\ufe0f Could not fetch average rating:",t);const e=i.length>0?i.reduce((e,t)=>e+t.rating,0)/i.length:0,n={5:0,4:0,3:0,2:0,1:0};i.forEach(e=>{const t=Math.round(e.rating);t>=1&&t<=5&&n[t]++}),f({averageRating:e,totalReviews:i.length,distribution:n})}}catch(n){console.error("\u274c Error fetching reviews:",n)}finally{y(!1)}})()},[e,o]);if(l)return(0,mr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-600 text-lg",children:"Loading vehicle details..."});if(!i)return(0,mr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-600 text-lg",children:"Vehicle not found."});const v=i.carName||i.bikeName||"Vehicle",x=i.carModel||i.bikeModel||"",b=i.price||0;return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,mr.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,mr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,mr.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,mr.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,mr.jsxs)("div",{className:"relative",children:[i.images&&i.images.length>0?(0,mr.jsx)("img",{src:i.images[u],alt:v,className:"w-full h-[400px] object-cover"}):(0,mr.jsx)("div",{className:"w-full h-[400px] flex items-center justify-center bg-gray-100 text-gray-500",children:"No Image Available"}),i.images&&i.images.length>1&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("button",{onClick:()=>{var e;null!==i&&void 0!==i&&null!==(e=i.images)&&void 0!==e&&e.length&&d(e=>(e-1+i.images.length)%i.images.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg transition",children:(0,mr.jsx)(Ar,{className:"w-6 h-6"})}),(0,mr.jsx)("button",{onClick:()=>{var e;null!==i&&void 0!==i&&null!==(e=i.images)&&void 0!==e&&e.length&&d(e=>(e+1)%i.images.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg transition",children:(0,mr.jsx)(Cr,{className:"w-6 h-6"})})]}),i.images&&i.images.length>1&&(0,mr.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:i.images.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>d(t),className:"w-2 h-2 rounded-full transition ".concat(t===u?"bg-white":"bg-white/50")},t))})]})}),(0,mr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,mr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:v}),(0,mr.jsx)("p",{className:"text-gray-500 mb-4",children:x}),(0,mr.jsxs)("div",{className:"flex items-baseline mb-6",children:[(0,mr.jsxs)("span",{className:"text-4xl font-bold text-gray-900",children:["\u20b9",b]}),(0,mr.jsxs)("span",{className:"text-gray-600 ml-2",children:["/",i.priceType||"hr"]})]}),(0,mr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,mr.jsx)(ga,{label:i.transmission||"Manual"}),(0,mr.jsx)(ga,{label:"".concat(i.seats||4," Seaters")}),(0,mr.jsx)(ga,{label:i.fuel||"Petrol"}),(0,mr.jsx)(ga,{label:"AC"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Description"}),(0,mr.jsx)("p",{className:"text-gray-600 leading-relaxed",children:i.description||"No description available."})]}),(0,mr.jsx)("button",{onClick:()=>n("/book-now/".concat(i._id,"?type=").concat(o)),className:"w-full mt-6 bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white font-semibold py-4 px-6 rounded-lg hover:opacity-90 transition-all shadow-md hover:shadow-lg",children:"Book Now"})]})]}),(0,mr.jsx)("div",{className:"lg:col-span-1",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-8",children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Reviews"}),g?(0,mr.jsx)("div",{className:"text-center py-8",children:(0,mr.jsx)("p",{className:"text-gray-500",children:"Loading reviews..."})}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,mr.jsx)(ma,{className:"w-5 h-5 text-gray-400"}),(0,mr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Ratings & Reviews"})]}),(0,mr.jsxs)("div",{className:"flex items-end gap-4 mb-4",children:[(0,mr.jsx)("span",{className:"text-5xl font-bold text-gray-900",children:m.averageRating.toFixed(1)}),(0,mr.jsxs)("div",{className:"pb-2",children:[(0,mr.jsx)(fa,{rating:m.averageRating}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:[m.totalReviews," reviews"]})]})]}),(0,mr.jsx)("div",{className:"flex flex-col gap-2",children:(()=>{const e=m.totalReviews;return 0===e?[{stars:5,count:0,percentage:0},{stars:4,count:0,percentage:0},{stars:3,count:0,percentage:0},{stars:2,count:0,percentage:0},{stars:1,count:0,percentage:0}]:[5,4,3,2,1].map(t=>({stars:t,count:m.distribution[t],percentage:Math.round(m.distribution[t]/e*100)}))})().map(e=>(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"text-sm font-medium w-3",children:e.stars}),(0,mr.jsx)(ma,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,mr.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,mr.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:"".concat(e.percentage,"%")}})}),(0,mr.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-right",children:[e.percentage,"%"]})]},e.stars))})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Customer Reviews"}),(0,mr.jsx)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:0===h.length?(0,mr.jsxs)("div",{className:"text-center py-8",children:[(0,mr.jsx)("p",{className:"text-gray-500 text-sm",children:"No reviews yet"}),(0,mr.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Be the first to review this vehicle!"})]}):h.map(e=>(0,mr.jsx)("div",{className:"border-b border-gray-100 pb-4 last:border-0",children:(0,mr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,mr.jsx)("img",{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.userName||"User"),"&background=0B0E92&color=fff"),alt:e.userName,className:"w-10 h-10 rounded-full"}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,mr.jsx)("h4",{className:"font-semibold text-gray-900",children:e.userName}),(0,mr.jsx)(fa,{rating:e.rating,size:"sm"})]}),(0,mr.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.location||"Unknown location"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:e.comment})]})]})},e._id))})]})]})]})})]})})})},va=ur("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),xa=ur("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ba=n.p+"static/media/AutomaticLogo.fae40ab9dc540ec388f6.png",wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAELklEQVR4AezZoZcTMRAG8D4eAolEIBAIJAKBQCCRSORJJBLJn4BEIhBIJAKBRCCQSCQCgUAgEMyv76Yv3bbX7G1ybe/al+kk2STffJnZzG57bXbJP0eCh+7gowevsgdvBPlbIfdP5XHoGnkY48y5F9r8UP3K2BBFConnYdLLEPppaKK/Rp6cjn8W2vxXoU9CkA7VtowhaLcZhIR6S0vuxGI2idjEaLYptQRvBpxdpqM6L3/j+2fIt1P5HLpGvsQ4c36ENj/UovAinEXH1EotQaC5s4h9CODXIW9C1EkNOWM+ns55G9p86yAczXkRHaJk3pj6VUNQ+JSeYxSDEJ2Kb/7v+MoNiuq8OIjmlalfNQSFTeIgxqBst9S8m5smWmzs5PVrCAqZBEIw6z10uX6Jm1hIC18ppoyqvL6iawiWCw0PhZUFJ3aU0TEkyKvOAgSlmBeBJeWE2lxqCFo4V8gQynZrXRIscRNniO9eRTqvr+htBEvvleArCzXqKAkMCbrm5HWvSjEJKWwRzfaS3kZwafAeNNwiCCbRNEnYls7I/tm+ESyjZK3BC8tnM0TTk7ztKWg2/IwjOJy9+7b8KXRZsjZUD50gj/MkgkSo8qb6XA6dIBKebctQXTpwaghej1XsCnFf9BY4JGCrC5I5eCl/1hB8EDPtCvdLrj3F6xgscjtwa4vTNceOImgnSU6+SL1k6HmBt3nQCSW+/wSAupu6t8AhcAN2WtlG0OqAvkbFaeXdrad4FXM/kV+BObnUEJwMsssFjgQb7L600mCZ8y3R24OOfWll7XPi+UweN6snQS+jedSnHmddg9G9CErUJE0sf4rIvk1agjd3+GBxEhP0jcrLPQi65xgS9syLI5/MG1u+GH83xtDEWineFqwr7F2LYdtLa4KA7TQN3UOB/KleI/9ikCQfamNBmIc3DigvtCY4/LWL5xhUYp5VR9AcYmPKhwo/GOdcOFk/U7cmmJ5LUAeNkHKSVhsVk3mRiICU79GfZYiT/Su6NUGHCYMAlcKLUkW1YeXkKfXWBO26sMofhbTTPuRIti9EtyaYRntA58mSkHc2fTmmpS5xltbtRdD9JiQTDLH32TinLqNByJNcSgrJOqysd/nZ0FPLkJyQXQJeWFBfQVBk5AzpyCEGi85+50DWuxD0v0GGDFItyKXBUgWi2jwoH5b/fsHrShAxwgBgLclZ0328aU3edc24hbS+B+2ut3JJGhiSC7BGFSSd1O5pOLwKi6zgtSaIAxDAtHYvkfjheOrhvbU4PQiuBdpV55Uj6IBwMnktIY9i5+UYIrc5mnuKExgW8drEhpTytAyz6srQgwDklFx0nwjKd6NJDgnWbcsBjRoS9H+bkynlU3Bx/O5C3gV22kGzbSmJx/WtZUjQ0W6xlH0iOJoc9kOC+i6VHAlemDs7AV16D/4HAAD//3NRpXMAAAAGSURBVAMA5LAsgP6oq58AAAAASUVORK5CYII=",ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAPpklEQVR4Aeycy44TxxfGK5N7lEj+K1JIokQYRYoSBBqPuIkVw4ol8ARMViwhTwA8AcySFfAE/FmyGlghrjMRiJtAYwTiJlBGAnG/5PvV9DHtcttu291tezCqmrp01Tmnvq/Pqeq2zZgb8H+zs7Olc+fObTt79uzu8+fP71f9qPKs8rzyv8rvg0wf12bUP8Mc5ipPImvAl+sGjpBTp06VBR7gHxKg82/fvv1XIB795JNP9r9//3636tuUK8pl5ZJymOjj2qQuTDKHucozyEKm8tEzZ85MKSNHwwYnDQQhImCSO1lAzX/++efzAg/wpwRT+bPPPnPfffed++GHH9yvv/7qfvvtN/fnn3+6VatWuUql4tasWVOX6ePa77//7scyh7nIQBYylbeNjY0dUvaeJt2HsEH9fU9j/bKA8CEg9oiEWREww50sWzwB33//vSuXyx708fFxB7gGbKlUct9884378ssv3aeffqop9Yk+rkEAYyGDuchAFmQiGx2M0+yydE9hg2yZl9dM4aXq70sqnBAtuCIi9it8zAuIvVp1hTsX4Ay0ADANyS5BJmSgwzyJtpEjrzmEl8rGQ/0gpjBCWJzuwBkteFZEsBeUuIuNBO5i2tlBn04SOo0cwiFexUzZONUPYnInJApN+1mcFjpp3rB69WofigBE/QORIANSsA2vwaiiicmVEHnErig04RF+YyZM4A1ffPEF6x3IjG14TQIxMwq5HDZyszsXQiw8yeoDyj40sTiIYNNV31CkBGLKCrkcx2dYYx6LyJwQvELhaVbGTrJREgLYJ1ic+oYyYTseQ2ZNWsQka9RR2Xu+2pmlzAixvUKWHXDOlYjBHDGJy+pbEok1cXNRakElHZX36zS2X/XMUiaE4L7aK/yzBJv2L7/84ribhik8pUXUvMXCrzb93YoK82CQVkarcT0TgiFy3xkpqeDOeMWyZcvUXNqJ56aVK1c61qyVlsEALFTvKfVEiE4cFRnCflHmgQsyuIN6smiIJrNWQhhrl9mQMgsmqneduiYExTpx4Bm1/WIphqh2yEIKN6LtK2ACNu3mNbveFSEoRLGElnBd9gvVP+oEBmAhEEpgA0aqd5w6JoQ4iUJp8mSwuak+SkIALOKkgJW6O0odEYIC7Rm1MIUBHWn7CAaDiYUvsAKzTpbdESEokHC/geOiqo9SAgJgE9voj/KMljAssSs1IdEDUJljHk/fidJGnTUEOH2BlToq796926MyVUpFiB58dvEAxEMfijhZpJKe7aChksaJE6wowS7ta5a2hEQxkA+S3I8//uhGZKS/L8Dq559/9hP0mmVPhKVvN/vTlhDtG4c02T9rLPsInsC11kwTp67YJg+WLeW3JET7Bu/+/VtbY7qltNHFRAQ4eUX7yWS70NWUENxLsc9vRj/99NMoVCVCna6TfYQXrowmdLU6dTUlRKEKMsq4Gxlho9w9AnwMEX1cXWp16kokBO+QasKVG+RQ9eLFC7ewsFCX6ZPtA5l4PsEwRZ7dEcY063IiIZF3ODyDk0LdjAFq3L9/301PT9flq1evDpCF9aaAJZs8vcI4cYNvICRibuC9g0UNYybisKfI9smkF5ANhIg59o6B8I65uTl37Ngx2Z5NQhYys5HWnRTIIPIwWy9p/Y1P3XIdIYPkHQBnAFKawd2WyIjLrMnpQyX2PLcjPHHVEaIYxzfGHScC1ftg6qJKA26x5VzYtv60pZFh48O29RdVgq2duN68eVP3zZU6QrT718JVUcYl6Tl9+nRDd7ekNAM/SUeD0hw7eLZDvJ5LtlJarhGiJ0i8w7/NxUNsQD/KHTt2+Pdmoe5OSWlGBu/k0BHKL7KNh7CfSGclwl5V9+EHO2JqBz3ffvstRV/zV1995QAM4EJD0pLSjgx0hLKLbtvmLuz5EZJXX/MQtfAQf7pSve8JwLolZRjIAGCLRCKkFrY8IdF52IcrXInBg5DbkXL8+PEGM0+ePOkPAeEFvA2CkRle61cbrAlb2rvLFy5cWI4dnhB1VmgUHa4IPwcPHnStXncAIEACKDbGM0/q8Tb1Bb1KoYxn5iIDWfH+eB0bsAWb4v15181L3r59ux1dnhAx5F0GxugsIrNwQgugHjlypGtS2tmalgxswBZswrZ2crO6bpjrIXEcmZ4QVbyHRB/Mq5lvYsEs3LQABIBwl1pfWHJ3c5cDcHitWZuxzGFuszHoRDc22Bhsw0Zr51kaIdLh9/Cx6EmxrLDlvv76a/Xnn27dutWgBEAABoAaLkYdAAvAAB11NS0Yw1jmNBuELnSiOxyTZGM4pkU79SUeEsFeUaoMF2N6UizUO7B069atjp8vU49ngAEggIr3x+sADNAAHu+P17nGGMbG++N1dKALnfF+6tiGjdSLyBaZtI9MErI8IUV5hy2QBbNwa1sJQAAFYNYXlgAN4AAfXqOPa4wJr1kb2ehAl/VZiU3YZu0iSsMeLxnTGbiMUlyHssjMwgEg1AlQAAZw4TVrA/iWLVusWSs3bNjguFbrCCrIRDY6gkvea7Ep7M+7bdjDBR7id/foQ/i8dTfIB4BuSWkQ1qZjEMnAZMPeewgdZDYWyn7kIkgZVDLA2wiRhyzHQ/oWsjDGcp6kDDIZrN+cQYSUIKREJ18TpcwrAwpn+1Z5+fLl/rOY0AbiPXE/nFutVsOhjuNqOI65yAgHl0olh85wfNjG9nBulm0jRCHrAyHWmaWiuCwWxQNXu5z06gM5ABrOPan3VlyLZ8AMxzE3Psbq6ArHJrWx3ebkUcaw94TkoWMks0sECFldTh1NywOBloTkoXAkszUCELLAED22U+SWeVjjJNUus9EmGcETeDiXh8Bw7Pj4uAvHMTccRxtd4dikNrYzPq8cw36hRojeaeWlz8tlUTwAtsqckNho/YTYHwDldUg4948//oiNWqyWy2VXqVTqMnORsTjiw190obMSjA/b2P5hVvY1I0TH3g+EvHv3LntNHUjkdMMJKZwCkADaCyjMRQayQvnoRHfYX2T75cuXXp2OvVU8xB/mrdNfKfgPgABMqBYAARJAw2udtpGBLGSGc9GNDWF/UW3zEPRBiP9wol+EAASAYEw8AxwAAmS8v5c6spCJ7FAONmBL2F9EO4b9P2O4CUpfvXpFUWgGAIAIlQIYwAFgeM3aPKw1+5IDe4ONC0tkIhsd4TVswaawP++2YQ8XvH73Iev58+d5662Tz8IBoK5TDYACMIBTMzFBRrPXIZDBNcrEyepENjrQpWZdwiZsq+vMuRHDfm5Mj+0n0Pfs2TOKQjILZuGhMgACKAALr1m7FRk2BjKGiRTDXu8T58YmJiZ4DqmyscRima0tl5IXeqHgrMgwub2SkmSjyc6yxDvAXjKrcMGmrro7yZ+nT59S5Jyd45zPA5gpypoMk9stKdiGjSYnz9K8Q/vHP+jxhKgxR+PJkycUhWQWzMLzIsMW0Skp2IRtNj/v0jAXB/9HlydET+m+gfF0FpVZ+M6dO7v+DBwyQ1tL+owj7GNdafYUbMGmcH6ebSNEOrxTeEI2btzIScvvI7EBGtPf1GoDB7ikLzls2rTJcS20PA0p4Zy822AdHXmr69ev/0BIpNj/mA/Do3Zfi3ZkEFqaGci1YSDl8ePHfgl6h+VPujS8h1CxGGaD6OtX7oUMs3kYSMFDsFfvEY9QkmuErFu3DpbmOILZQAb0IxPvkz525a4H6LQ2MZY54XiiADrC/iLb2GDhKsLeq68RQkte4sPWvXv3aPYtJ33OAbAA3KlRzGFuOI+9Juwrsm2RSN6xL663jhA9KR7QxQU8JGJPzeITAAKkaQ7b1p+2RBYybHzYtv6iSrDFQ9CniERkoupzHSE8KarXx7MHDx6o2r8EgAYcZa+WICMus1d5vcy/e/eun67N/HB0wvVt/tQRQodc6DAlLiX2qPYtG4BpDEgzxkhJMzavMXgH2CJf9bpwRV8DIdF5+ARkGJMMHOVsEDBMk7wDDQ2E0Pn69eu/KB8+fOjEItWBzGV9fr5r1y4Xz0mfsw+K8WDZyjuwM5GQKK5NM6BarVIMbC7pVUk8t3p13+9FtPMO7EskhAv6nGSvSn/ishOB2qPUJQJ4BlnTq/KUhr1D/T41JYQTl55L/MTbt2879hQ/Y/SnYwREgDPv0KFpXxSBEuU0JYTReoI8oPIEAiFF9VHqAgHIAENNPaFDkz/Fqp6YWhLCjGiDX8Dd2OTpG+X0CIAZ2GnGQoSlqs1TW0JwLwtdMaabSxxdqSGAV4AZHWAIltRb5baEMDkKXdPsI9euXRvtJ4DSJkNGDKvpCMM2s2L/PVO7kdGpaw5F169fbzd8iVzvfhk3btywZ7jq2rVr6/7XuFZSU3kIAjh1KQbyH6RU+WC+Wq3SPcoJCPAFbr5NoktVYbZZZeqUmhAkEgMjBX6TH528QKU+37lzxz169IhONvHNYEYjbe6IEISiQGdpWF/gBDEiBVQWM2Q8WHxLvgBGYLV4Jf3fjglBtM7ScyhU3ZMyCl/O//o3TgYYCZ+OU1eEoAWFRgrn7CtXrtgmxuWPJnPyvHz5ci1MgQnYdAtA14SgEMXaUyZU9xs9xzxOYWp/FIm1QkZsA58Ak14W3xMhKCZOihT2FF6aOQxkb+HaUs6skbVCitY5BwZgoXpPqWdC0I4hOmuvUN0/PLLRs69Exqp76SRCFMda1khdK5vWM1rHpynNS0yZEGKSRcpuvSL4W21/LCaEsb+ovSQSH0PgFXasZa2smWe0rBaYKSEYxSsCuS/7in9LjKeQh9lbsJ23Ezdv3rSDywnWyFpZc6e51fjMCUFZFMI263NjPgqu4iUXL150w0YMIYlnC2znq1Fa20LkFZmFKMmsS7kQYhrWrFlzWHfSZh0Fj9A3LMTgEewREBE9W2A+e8WKPLwC4ZZzJQQleIuOglMiZkVIDCGAuMy4Qch4AaEJIjhF4SGyi/C0Iuu9QnITU+6EmNYkYiADUgCAcAYgNr6oEp14A795hAza0s3P/KZ1A02IiNzCk/Q0pMIIMc1xYmyPIUQQzgDEyKHNW2Wbl1XJ7yiRzQ1gJMS8YU57xD4dY71HyLP9bzay0p1GTuGEmFEQwx6jO3CFQLB9xj9cGmC8jjHQuIsBDq/iLgbYKKSYSF/SxzXIZCxzmAvZyLp06ZI/XKCDsZrE5wjT2CBbJrRH7M3yGCv5HaW+ERK3UiDw4f+UAGGfmYg8h5/Z1X7VZcAS4gAXYAH4/PnzLp7p4xpkMhYymAuJRoDkHxYBf7OvoVN5NzbEbepXfSAIiS+eMBF5znYBtULh438Cb7MyD5x8eY9vi5O5s4n18enU6eMa4QZSufuZux1ZyJT8v0TAAbyUCYOU/wMAAP//0ZoVKwAAAAZJREFUAwAb11NtGymLNwAAAABJRU5ErkJggg==",Na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAARNJREFUWAntltENwjAMRDMCIzAKIzACIzACo1N/RHp2ZTl1U8iHI1W9OPH5coZAazXKgXJgHQcem5TPgUf2XzpKUMZetjCTPz2nBHVLb6219zahIxnc+U69Z4mRA3DIt5bPnYseninGCrIOq3uLdwwXGBcCrnmHsHEW5hrjO24WZlHGn2Q7gFmYaYynBFEoiSPMwtzL+N8EWRGcqwOzNS98+gX3JJXAowa450dvxU9BXqJKCERw2eOzccW/tKDlWkbr6BzjbEmEbWu8ueL3CjNOIvldk1t8ZDCP+xkXfEqQEIyKYuFLBY2KSgmi8gh7bWRhD5Pb7lEt48YRnBVFbuHgM/T3gwQWZ0RZjpqXA+XAzx34AlLsslHradz/AAAAAElFTkSuQmCC",_a=ur("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),ja=ur("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Aa=ur("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ca=e=>{let{isOpen:t,onClose:n,pageRole:i,currentUserId:s,currentUserName:o,ownerId:a,ownerName:l,ownerAvatar:c,customerId:u,customerName:d,customerAvatar:h,bookingId:p,vehicleId:m,apiUrl:f,useRealtime:g=!0}=e;const[y,v]=(0,r.useState)([]),[x,b]=(0,r.useState)(""),[w,k]=(0,r.useState)([]),[N,_]=(0,r.useState)(!1),[j,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),E=(0,r.useRef)(null),T=(0,r.useRef)(null),I=(0,r.useRef)(null),P=s===a,R=P?u:a,D=P?d:l,L=P?c:h,M=(P?h:c)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(D),O=L||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(o||"You");(0,r.useEffect)(()=>{t&&g&&(console.log("\ud83d\udd0d ========= POPUP CHAT INITIALIZED ========="),console.log("\ud83d\udcc4 Page Role:",i),console.log("\ud83d\udc64 Current User ID:",s),console.log("\ud83c\udfad Is Owner?:",P),console.log("\ud83c\udfe2 Owner ID:",a,"| Name:",l),console.log("\ud83d\udc65 Customer ID:",u,"| Name:",d),console.log("\ud83d\udcac Other User ID:",R,"| Name:",D),console.log("\ud83d\udcac Booking ID:",p),console.log("\ud83d\ude97 Vehicle ID:",m),console.log("==========================================="))},[t,i,s,a,u,p,m,g,P,R,D,l,d]);(0,r.useEffect)(()=>{setTimeout(()=>{var e;null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)},[y]),(0,r.useEffect)(()=>{if(!t)return;let e=null,n=!0;return(async()=>{try{S(!0),console.log("\ud83d\udce5 Fetching messages for bookingId:",p);const e=new uo(f),t=await e.getMessages(p);n&&(console.log("\u2705 Loaded ".concat(t.length," messages")),v(t))}catch(GN){console.error("\u274c Failed to fetch messages:",GN)}finally{n&&S(!1)}if(g&&n)try{console.log("\ud83d\udd0c Connecting to Socket.IO...",f),e=er(f,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),I.current=e,e.on("connect",()=>{var t,r;console.log("\u2705 Socket connected, ID:",null===(t=e)||void 0===t?void 0:t.id),n&&A(!0),null===(r=e)||void 0===r||r.emit("join",s),console.log("\ud83d\udc4b Joined room with userId:",s)}),e.on("disconnect",()=>{console.log("\u274c Socket disconnected"),n&&A(!1)}),e.on("receiveMessage",e=>{console.log("\ud83d\udce8 Received message via Socket:",e),n&&v(t=>{const n=t.some(t=>{if(t._id&&e._id&&t._id===e._id)return!0;if(t.message===e.message&&t.senderId===e.senderId){return Math.abs(new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())<1e3}return!1});return n?(console.log("\u26a0\ufe0f Duplicate message ignored"),t):(console.log("\u2705 New message added to state"),[...t,e])})}),e.on("error",e=>{console.error("\u274c Socket error:",e)})}catch(GN){console.error("\u274c Socket connection error:",GN)}})(),()=>{n=!1,e&&(console.log("\ud83d\udd0c Disconnecting socket..."),e.disconnect(),e=null),I.current&&(I.current=null),A(!1)}},[t,p,f,g,s]);const B=async()=>{if(!x.trim()&&0===w.length)return void console.warn("\u26a0\ufe0f Empty message, not sending");if(!s||!R||!p)return console.error("\u274c Missing required IDs:",{currentUserId:s,otherUserId:R,bookingId:p}),void alert("Error: Cannot send message. Missing user or booking information.");console.log("\ud83d\udce4 ========= SENDING MESSAGE ========="),console.log("  Message:",x),console.log("  From (senderId):",s),console.log("  To (receiverId):",R),console.log("  Booking ID:",p),console.log("  Files:",w.length),console.log("=====================================");const e={_id:"temp-".concat(Date.now(),"-").concat(Math.random()),senderId:s,receiverId:R,message:x,files:w.map(e=>URL.createObjectURL(e)),timestamp:(new Date).toISOString(),seen:!1};v(t=>[...t,e]);const t=x,n=[...w];b(""),k([]);try{var r;g&&null!==(r=I.current)&&void 0!==r&&r.connected&&(I.current.emit("sendMessage",{senderId:s,receiverId:R,message:t,bookingId:p}),console.log("\ud83d\udd0c Sent via Socket.IO")),console.log("\ud83d\udce6 Sending to /sendMessage endpoint");const i=new uo(f),o=await i.sendMessage(p,s,R,t,n);console.log("\u2705 Message saved to database:",o),v(t=>t.map(t=>t._id===e._id?o:t))}catch(GN){console.error("\u274c Failed to send message:",GN),v(t=>t.filter(t=>t._id!==e._id)),alert("Failed to send message: ".concat(GN.message||"Unknown error"))}},F=e=>{try{return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch(t){return""}};return t?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:n}),(0,mr.jsxs)("div",{className:"fixed right-6 bottom-6 bg-white rounded-2xl shadow-2xl z-50 flex flex-col transition-all duration-300 ".concat(N?"h-16":"h-[600px]"),style:{width:"400px"},children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white rounded-t-2xl",children:[(0,mr.jsx)("img",{src:M,alt:D,className:"w-10 h-10 rounded-full ring-2 ring-blue-100"}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900",children:D}),(0,mr.jsxs)("p",{className:"text-xs flex items-center gap-1",children:[(0,mr.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(g?j?"bg-green-500":"bg-gray-400":"bg-blue-500")}),(0,mr.jsx)("span",{className:g?j?"text-green-600":"text-gray-500":"text-blue-600",children:g?j?"Online":"Connecting...":"Chat Mode"})]})]}),(0,mr.jsx)("button",{onClick:()=>_(!N),className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Minimize",children:(0,mr.jsx)(_a,{className:"w-4 h-4 text-gray-600"})}),(0,mr.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:(0,mr.jsx)(hr,{className:"w-5 h-5 text-gray-600"})})]}),!N&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[C?(0,mr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,mr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===y.length?(0,mr.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No messages yet. Start the conversation!"}):y.map(e=>{const t=(e=>{var t;return("string"===typeof e.senderId?e.senderId:null===(t=e.senderId)||void 0===t?void 0:t._id)===s})(e);return(0,mr.jsx)("div",{className:"flex ".concat(t?"justify-end":"justify-start"),children:(0,mr.jsxs)("div",{className:"flex items-end gap-2 max-w-[75%] ".concat(t?"flex-row-reverse":"flex-row"),children:[(0,mr.jsx)("img",{src:t?O:M,alt:t?"You":D,className:"w-7 h-7 rounded-full flex-shrink-0 self-end"}),(0,mr.jsxs)("div",{className:"flex flex-col ".concat(t?"items-end":"items-start"),children:[!t&&(0,mr.jsx)("p",{className:"text-xs text-gray-600 mb-1 px-2",children:D}),(0,mr.jsxs)("div",{className:"rounded-2xl px-4 py-2 shadow-sm ".concat(t?"bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-br-sm":"bg-white text-gray-900 rounded-bl-sm border border-gray-200"),children:[e.message&&(0,mr.jsx)("p",{className:"text-sm break-words whitespace-pre-wrap",children:e.message}),e.files&&e.files.map((t,n)=>(0,mr.jsx)("img",{src:t,alt:"attachment",className:"max-w-full h-auto rounded-lg max-h-64 cursor-pointer ".concat(e.message?"mt-2":""),onClick:()=>window.open(t,"_blank"),onError:e=>e.currentTarget.style.display="none"},n))]}),(0,mr.jsx)("p",{className:"text-xs text-gray-400 mt-1 px-2",children:F(e.timestamp)})]})]})},e._id)}),(0,mr.jsx)("div",{ref:T})]}),(0,mr.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-white rounded-b-2xl",children:[w.length>0&&(0,mr.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:w.map((e,t)=>(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-16 h-16 object-cover rounded-lg border border-gray-300"}),(0,mr.jsx)("button",{onClick:()=>k(e=>e.filter((e,n)=>n!==t)),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600","aria-label":"Remove file",children:"\xd7"})]},t))}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("input",{type:"file",ref:E,onChange:e=>{if(e.target.files){const t=Array.from(e.target.files);k(t),console.log("\ud83d\udcf8 Selected files:",t.map(e=>e.name))}E.current&&(E.current.value="")},accept:"image/*",multiple:!0,className:"hidden"}),(0,mr.jsx)("button",{onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},className:"p-2.5 bg-gray-100 text-gray-600 rounded-full hover:bg-gray-200 transition-all shadow-sm hover:shadow-md flex-shrink-0","aria-label":"Attach image",children:(0,mr.jsx)(ja,{className:"w-5 h-5"})}),(0,mr.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},placeholder:"Write your message...",className:"flex-1 px-4 py-2.5 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all"}),(0,mr.jsx)("button",{onClick:B,disabled:!x.trim()&&0===w.length,className:"p-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg flex-shrink-0","aria-label":"Send message",children:(0,mr.jsx)(Aa,{className:"w-5 h-5"})})]})]})]})]})]}):null},Sa=()=>{var e,t;const n=ye(),i=me(),{vehicleId:s}=ve(),o=(0,r.useRef)(!1),a=(0,r.useRef)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[m,f]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[v,x]=(0,r.useState)(""),[b,w]=(0,r.useState)(0),[k,N]=(0,r.useState)(!1),[_,j]=(0,r.useState)(null),A=null===(e=i.state)||void 0===e?void 0:e.vehicleData,C=(null===(t=i.state)||void 0===t?void 0:t.vehicleType)||(null!==A&&void 0!==A&&A.CarName||null!==A&&void 0!==A&&A.carImages?"car":"bike"),S=s||(null===A||void 0===A?void 0:A._id)||(null===A||void 0===A?void 0:A.id),E=localStorage.getItem("userId")||(null===l||void 0===l?void 0:l.userId)||"";(0,r.useEffect)(()=>{if(!S)return y("No vehicle ID provided"),void p(!1);if(o.current)return;(async()=>{try{var e;o.current=!0,p(!0);const t="car"===C?await ho.car.getCarById(S):await ho.bike.getBikeById(S),n=null!==(e=null===t||void 0===t?void 0:t.data)&&void 0!==e?e:t,r=(null===n||void 0===n?void 0:n.car)||(null===n||void 0===n?void 0:n.bike)||(null===n||void 0===n?void 0:n.data)||(null===n||void 0===n?void 0:n.vehicle)||n;if(!r||"object"!==typeof r)throw new Error("Invalid vehicle response format");c(r),y("")}catch(GN){var t,n;o.current=!1;const r=(null===GN||void 0===GN||null===(t=GN.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||(null===GN||void 0===GN?void 0:GN.message)||"Failed to load vehicle details";y(r)}finally{p(!1)}})()},[S,C]),(0,r.useEffect)(()=>{if(!S||!l)return void f(!1);if(a.current)return void f(!1);(async()=>{try{a.current=!0,f(!0);const e=l.userId;if(!e)return console.warn("No ownerId found for vehicle"),void d([]);const t="car"===C?"car":"bike",n=(await ho.chat.getMyVehicleBookings(e,t,S)).map(e=>{var t,n;return{_id:e._id,customerName:e.contactName||e.customerName||"Unknown Customer",contactName:e.contactName,startDate:e.FromDate?new Date(e.FromDate).toLocaleDateString("en-GB"):e.startDate,FromDate:e.FromDate,startTime:(null===(t=e.FromTime)||void 0===t?void 0:t.replace(".",":"))||e.startTime||"N/A",FromTime:e.FromTime,endDate:e.ToDate?new Date(e.ToDate).toLocaleDateString("en-GB"):e.endDate,ToDate:e.ToDate,endTime:(null===(n=e.ToTime)||void 0===n?void 0:n.replace(".",":"))||e.endTime||"N/A",ToTime:e.ToTime,mobile:e.contactNumber||e.mobile||"N/A",contactNumber:e.contactNumber,status:e.status,userId:e.userId,VechileId:e.VechileId,totalPrice:e.totalPrice}});d(n),x("")}catch(GN){a.current=!1;const t=(null===GN||void 0===GN?void 0:GN.message)||"Failed to load booking history";x(t),d([])}finally{f(!1)}})()},[S,l,C]);const T=e=>{if(!e)return"N/A";const t=e.replace(/\D/g,"");if(t.length>=3){const e=t.slice(-3),n=t.length-3;return"X".repeat(n)+e}return e};if(h)return(0,mr.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,mr.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-700 font-medium",children:"Loading vehicle details..."})]})});if(g||!l)return(0,mr.jsxs)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center",children:[(0,mr.jsx)("p",{className:"text-red-600 text-lg mb-4",children:g||"Vehicle not found"}),(0,mr.jsx)("button",{onClick:()=>n(-1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]});const I=!!l.CarName||!!l.carImages||"car"===C;let P=(I?l.carImages:l.bikeImages)||[];P=P.filter(e=>e&&""!==e.trim()&&"undefined"!==e);const R=I?["https://e7.pngegg.com/pngimages/768/421/png-clipart-car-computer-icons-sedan-auto-detailing-auto-driving-rectangle-thumbnail.png","https://png.pngtree.com/png-vector/20191201/ourmid/pngtree-car-vector-logo-design-png-image_2066853.jpg"]:["https://w7.pngwing.com/pngs/579/51/png-transparent-computer-icons-motorcycle-bicycle-motorcycle-logo-black-silhouette.png","https://w1.pngwing.com/pngs/381/835/png-transparent-yamaha-logo-car-decal-motorcycle-sticker-sport-bike-yamaha-yzfr1-bicycle-thumbnail.png"];0===P.length&&(P=R);const D=[...P];for(;D.length<3;)D.push(R[D.length%R.length]);const L=I?"".concat(l.CarName||"Unknown"," ").concat(l.CarModel||"").trim():"".concat(l.bikeName||"Unknown"," ").concat(l.bikeModel||"").trim(),M=I?l.RentPerHour||0:l.pricePerKm||0;return(0,mr.jsxs)("div",{className:"min-h-screen bg-white px-3 sm:px-6 py-4 sm:py-10",children:[(0,mr.jsxs)("div",{className:"max-w-[1400px] mx-auto flex flex-col lg:flex-row gap-4 lg:gap-8",children:[(0,mr.jsx)("div",{className:"flex-1 bg-white",children:(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[(0,mr.jsxs)("div",{className:"relative w-full md:w-[420px] h-[250px] sm:h-[300px] flex-shrink-0 rounded-[10px] border-2 border-transparent hover:border-[#0066FF] transition-all duration-200",children:[(0,mr.jsx)("img",{src:D[b],alt:L,className:"w-full h-full object-cover transition-all duration-500 rounded-[10px]"}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),w(e=>0===e?D.length-1:e-1)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20",children:(0,mr.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),w(e=>e===D.length-1?0:e+1)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20",children:(0,mr.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),(0,mr.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5",children:D.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>w(t),className:"h-2 rounded-full transition-all ".concat(t===b?"bg-[#0066FF] w-6":"bg-gray-700 w-2")},t))})]}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("h1",{className:"text-[32px] font-bold mb-1",children:L}),(0,mr.jsxs)("div",{className:"flex items-baseline gap-1 mb-3",children:[(0,mr.jsxs)("span",{className:"text-[32px] font-bold",children:["\u20b9",M]}),(0,mr.jsxs)("span",{className:"text-base text-gray-600",children:["/",I?"hr":"km"]})]}),(0,mr.jsx)("div",{className:"border rounded-[10px] mb-4",children:(0,mr.jsx)("div",{className:"flex",children:I?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6 mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.transmissionType||"Manual"})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:vo,className:"w-6 h-6 mb-1.5",alt:"seats"}),(0,mr.jsxs)("span",{className:"text-[13px]",children:[l.Carseater||"5"," Seaters"]})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:wa,className:"w-6 h-6 mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.fuelType||"Petrol"})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:ka,className:"w-6 h-6 mb-1.5",alt:"ac"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.Ac_available?"AC":"Non-AC"})]})]}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:Na,className:"w-6 h-6 mb-1.5",alt:"engine"}),(0,mr.jsxs)("span",{className:"text-[13px]",children:[l.engineCapacity||"350"," CC"]})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6 mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.transmission||"Manual"})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:wa,className:"w-6 h-6 mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.fuel||"Petrol"})]}),(0,mr.jsx)("div",{className:"w-[1px] bg-gray-200"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center py-3",children:[(0,mr.jsx)("img",{src:Yo,className:"w-6 h-6 mb-1.5",alt:"location"}),(0,mr.jsx)("span",{className:"text-[13px]",children:l.pickupCity||"N/A"})]})]})})}),(0,mr.jsxs)("div",{className:"border rounded-[10px] p-4",children:[(0,mr.jsx)("h2",{className:"text-[18px] font-bold mb-2",children:"Description"}),(0,mr.jsx)("p",{className:"text-gray-600 text-[14px]",children:l.description||"No description available"})]})]})]})}),(0,mr.jsx)("aside",{className:"w-full lg:w-[380px]",children:(0,mr.jsxs)("div",{className:"sticky top-6 bg-white p-6 rounded-[12px] shadow-lg border",children:[(0,mr.jsx)("h2",{className:"text-[20px] font-semibold mb-6",children:"Booking History"}),m?(0,mr.jsxs)("div",{className:"flex flex-col items-center py-8",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,mr.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:"Loading bookings..."})]}):0===u.length?(0,mr.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,mr.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udccb"}),(0,mr.jsx)("p",{className:"font-medium",children:"No bookings yet"})]}):(0,mr.jsx)("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:u.map(e=>(0,mr.jsxs)("div",{onClick:()=>(e=>{n("/booking-details/".concat(e._id),{state:{booking:e,vehicleData:l}})})(e),className:"border rounded-lg p-4 hover:border-blue-500 cursor-pointer transition-all",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,mr.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:(0,mr.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,mr.jsx)("path",{d:"M8 8C9.65685 8 11 6.65685 11 5C11 3.34315 9.65685 2 8 2C6.34315 2 5 3.34315 5 5C5 6.65685 6.34315 8 8 8Z",fill:"#666"}),(0,mr.jsx)("path",{d:"M8 9C5.33333 9 2 10.3333 2 13V14H14V13C14 10.3333 10.6667 9 8 9Z",fill:"#666"})]})}),(0,mr.jsx)("h3",{className:"font-semibold",children:e.customerName})]}),(0,mr.jsxs)("div",{className:"space-y-1 text-sm mb-2",children:[(0,mr.jsxs)("div",{className:"flex gap-2",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"From:"}),(0,mr.jsxs)("span",{children:[e.startDate," ",e.startTime]})]}),(0,mr.jsxs)("div",{className:"flex gap-2",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"To:"}),(0,mr.jsxs)("span",{children:[e.endDate," ",e.endTime]})]}),(0,mr.jsxs)("div",{className:"flex gap-2",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Mobile:"}),(0,mr.jsx)("span",{children:T(e.mobile)})]})]}),(0,mr.jsx)("span",{className:"inline-block px-2.5 py-0.5 rounded text-xs font-medium ".concat("Confirmed"===e.status?"bg-blue-100 text-blue-700":"Completed"===e.status?"bg-green-100 text-green-700":"Cancelled"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:e.status}),"Confirmed"===e.status&&(0,mr.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,mr.jsxs)("button",{onClick:t=>((e,t)=>{t.stopPropagation(),null!==l&&void 0!==l&&l.userId&&e.userId&&e._id?(j(e),N(!0)):alert("Error: Unable to start chat. Missing required information.")})(e,t),className:"flex-1 flex items-center justify-center gap-2 py-2 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white rounded-full font-semibold",children:[(0,mr.jsx)(va,{size:18}),(0,mr.jsx)("span",{children:"Chat"})]}),(0,mr.jsxs)("button",{onClick:t=>((e,t)=>{t.stopPropagation();const n=e.mobile||e.contactNumber;n&&(window.location.href="tel:".concat(n))})(e,t),className:"flex-1 flex items-center justify-center gap-2 py-2 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white rounded-full font-semibold",children:[(0,mr.jsx)(xa,{size:18}),(0,mr.jsx)("span",{children:"Call"})]})]})]},e._id))})]})})]}),k&&_&&l&&(0,mr.jsx)(Ca,{isOpen:k,onClose:()=>N(!1),pageRole:"ownerView",currentUserId:l.userId||E,currentUserName:l.contactName||"Owner",ownerId:l.userId||"",ownerName:l.contactName||"Owner",ownerAvatar:"",customerId:_.userId||"",customerName:_.customerName||"Customer",customerAvatar:"",bookingId:_._id||"",vehicleId:_.VechileId,apiUrl:ho.chat.apiUrl,useRealtime:!0})]})},Ea=n.p+"static/media/BlackCar.78dc2ce6a1e75a410875.png",Ta=Tt()(fo((e,t)=>({vehicles:[],addVehicle:t=>{const n=c(c({},t),{},{id:Date.now().toString()+Math.random().toString(36),createdAt:Date.now()});e(e=>({vehicles:[...e.vehicles,n]}))},updateVehicle:(t,n)=>{e(e=>({vehicles:e.vehicles.map(e=>e.id===t?c(c({},e),n):e)}))},deleteVehicle:t=>{e(e=>({vehicles:e.vehicles.filter(e=>e.id!==t)}))},getVehicleById:e=>t().vehicles.find(t=>t.id===e),getVehicleByName:e=>t().vehicles.find(t=>t.name===e)}),{name:"vehicle-storage"})),Ia=Tt()(fo((e,t)=>({cars:[],addCar:t=>{const n=c(c({},t),{},{id:Date.now().toString()+Math.random().toString(36),rating:0,createdAt:new Date});e(e=>({cars:[n,...e.cars]}))},updateCar:(t,n)=>{e(e=>({cars:e.cars.map(e=>e.id===t?c(c({},e),n):e)}))},deleteCar:t=>{e(e=>({cars:e.cars.filter(e=>e.id!==t)}))},getCarById:e=>t().cars.find(t=>t.id===e)}),{name:"listed-cars-storage"})),Pa=Tt()(fo((e,t)=>({bikes:[],addBike:t=>{var n,r,i,s;const o=c(c({},t),{},{id:Date.now().toString()+Math.random().toString(36),rating:0,createdAt:new Date,drivingLicense:null!==(n=t.drivingLicense)&&void 0!==n&&n,aadharCard:null!==(r=t.aadharCard)&&void 0!==r&&r,depositVehicle:null!==(i=t.depositVehicle)&&void 0!==i&&i,depositMoney:t.depositMoney||"0",transmission:t.transmission||"Manual",fuel:t.fuel||"Petrol",engineCapacity:t.engineCapacity||"",photos:null!==(s=t.photos)&&void 0!==s&&s.length?t.photos:[]});e(e=>({bikes:[o,...e.bikes]}))},updateBike:(t,n)=>{e(e=>({bikes:e.bikes.map(e=>{var r,i,s,o,a,l,u,d;return e.id===t?c(c(c({},e),n),{},{drivingLicense:null!==(r=n.drivingLicense)&&void 0!==r?r:e.drivingLicense,aadharCard:null!==(i=n.aadharCard)&&void 0!==i?i:e.aadharCard,depositVehicle:null!==(s=n.depositVehicle)&&void 0!==s?s:e.depositVehicle,depositMoney:null!==(o=n.depositMoney)&&void 0!==o?o:e.depositMoney,transmission:null!==(a=n.transmission)&&void 0!==a?a:e.transmission,fuel:null!==(l=n.fuel)&&void 0!==l?l:e.fuel,engineCapacity:null!==(u=n.engineCapacity)&&void 0!==u?u:e.engineCapacity,photos:null!==(d=n.photos)&&void 0!==d&&d.length?n.photos:e.photos}):e})}))},deleteBike:t=>{e(e=>({bikes:e.bikes.filter(e=>e.id!==t)}))},getBikeById:e=>t().bikes.find(t=>t.id===e)}),{name:"listed-bikes-storage"})),Ra={id:void 0,name:"Hyundai Verna",number:"Ap234",price:"250",transmission:"Automatic",seats:"5 Seaters",fuel:"Petrol",ac:!0,rating:"4.2",image:Ea,description:"Lorem ipsum is simply dummy text of the printing and typesetting industry.",location:{state:"Andhra Pradesh",district:"East Godavari",city:"Kakinada",pincode:"533001",street:"Gandhi Nagar"},documents:{drivingLicense:!0,aadharCard:!0,depositVehicle:!0,depositMoney:"10000"},createdAt:Date.now()},Da=()=>{var e;const{vehicleName:t}=ve(),n=ye(),i=me(),{getVehicleByName:s,updateVehicle:o,deleteVehicle:a,addVehicle:l}=Ta(),{cars:u,updateCar:d,deleteCar:h}=Ia(),{bikes:p,updateBike:m,deleteBike:f}=Pa(),g=null===(e=i.state)||void 0===e?void 0:e.carData,[y,v]=(0,r.useState)(()=>{if(g)return g;const e=s(t||"");if(e)return e;const n=u.find(e=>e.carName===t);var r;if(n)return{id:n.id,name:n.carName,number:n.carNumber,price:n.rentPrice,transmission:n.transmission,seats:"5 Seaters",fuel:n.fuel,ac:n.acAvailable,rating:(null===(r=n.rating)||void 0===r?void 0:r.toString())||"4.0",image:n.photos[0]||Ea,description:n.description,location:{state:n.state,district:n.state,city:n.city,pincode:n.pincode,street:n.street},documents:{drivingLicense:n.drivingLicense,aadharCard:n.aadharCard,depositVehicle:n.depositVehicle,depositMoney:n.depositMoney},createdAt:Date.now()};const i=p.find(e=>e.vehicleName===t);var o,a,l,c;return i?{id:i.id,name:i.vehicleName,price:i.farePrice,transmission:i.transmission||"Manual",seats:"2 Seaters",fuel:i.fuel||"Petrol",ac:!1,rating:(null===(o=i.rating)||void 0===o?void 0:o.toString())||"4.0",image:i.photos[0]||Ea,description:i.description||"",location:{state:i.state||"",district:i.state||"",city:i.city||"",pincode:i.pincode||"",street:i.street||""},documents:{drivingLicense:null!==(a=i.drivingLicense)&&void 0!==a&&a,aadharCard:null!==(l=i.aadharCard)&&void 0!==l&&l,depositVehicle:null!==(c=i.depositVehicle)&&void 0!==c&&c,depositMoney:i.depositMoney||"0"},createdAt:i.createdAt?new Date(i.createdAt).getTime():Date.now()}:Ra}),x=(e,t)=>v(n=>c(c({},n),{},{[e]:t})),b=(e,t)=>v(n=>c(c({},n),{},{location:c(c({},n.location),{},{[e]:t})}));return(0,mr.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,mr.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Edit Vehicle Details"}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("label",{className:"block text-gray-700",children:"Name"}),(0,mr.jsx)("input",{className:"border p-2 w-full",value:y.name,onChange:e=>x("name",e.target.value)})]}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("label",{className:"block text-gray-700",children:"Price"}),(0,mr.jsx)("input",{className:"border p-2 w-full",value:y.price,onChange:e=>x("price",e.target.value)})]}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("label",{className:"block text-gray-700",children:"Description"}),(0,mr.jsx)("textarea",{className:"border p-2 w-full",value:y.description,onChange:e=>x("description",e.target.value)})]}),(0,mr.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-2",children:[(0,mr.jsx)("input",{className:"border p-2",placeholder:"State",value:y.location.state,onChange:e=>b("state",e.target.value)}),(0,mr.jsx)("input",{className:"border p-2",placeholder:"City",value:y.location.city,onChange:e=>b("city",e.target.value)}),(0,mr.jsx)("input",{className:"border p-2",placeholder:"District",value:y.location.district,onChange:e=>b("district",e.target.value)}),(0,mr.jsx)("input",{className:"border p-2",placeholder:"Pincode",value:y.location.pincode,onChange:e=>b("pincode",e.target.value)})]}),(0,mr.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,mr.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:()=>{const e=y.id;if(!e)return l(c(c({},y),{},{type:"car"})),alert("Vehicle added successfully!"),void n("/listed");u.find(t=>t.id===e)?d(e,{carName:y.name,rentPrice:y.price,transmission:y.transmission,fuel:y.fuel,acAvailable:y.ac,description:y.description,state:y.location.state,city:y.location.city,pincode:y.location.pincode,street:y.location.street,drivingLicense:y.documents.drivingLicense,aadharCard:y.documents.aadharCard,depositVehicle:y.documents.depositVehicle,depositMoney:y.documents.depositMoney}):p.find(t=>t.id===e)?m(e,{vehicleName:y.name,farePrice:y.price,transmission:y.transmission,fuel:y.fuel,description:y.description,state:y.location.state,city:y.location.city,pincode:y.location.pincode,street:y.location.street,drivingLicense:y.documents.drivingLicense,aadharCard:y.documents.aadharCard,depositVehicle:y.documents.depositVehicle,depositMoney:y.documents.depositMoney}):o(e,y),alert("Vehicle details saved successfully!"),n(-1)},children:"Save"}),(0,mr.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:()=>{if(!window.confirm("Are you sure you want to delete this vehicle?"))return;const e=y.id;e&&(u.find(t=>t.id===e)?h(e):p.find(t=>t.id===e)?f(e):a(e),alert("Vehicle deleted successfully!"),n("/listed"))},children:"Delete"}),(0,mr.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:()=>{alert("Add photo functionality \u2014 file picker would open here.")},children:"Add Photo"})]})]})},La=n.p+"static/media/Enfield.a77020728524aa250a79.png",Ma=n.p+"static/media/yamaha.def6b4dd57774038e0a6.png",Oa=n.p+"static/media/tvs-ntorq.84019c2cf51275ac9fc6.png",Ba=n.p+"static/media/Activa.ec7e19c03e3daa6759d1.png",Fa=[{id:"1",name:"Hyundai Verna",price:250,seats:5,transmission:"Automatic",fuel:"Petrol",rating:4.2,image:Ea,type:"Car",location:"Kakinada",available:!0,description:"Compact hatchback perfect for city rides."},{id:"2",name:"Maruti Swift",price:180,seats:5,transmission:"Manual",fuel:"Petrol",rating:4,image:Ea,type:"Car",location:"Hyderabad",available:!0,description:"Compact hatchback perfect for city rides."},{id:"5",name:"Honda City",price:300,seats:5,transmission:"Automatic",fuel:"Petrol",rating:4.5,image:Ea,type:"Car",location:"Hyderabad",available:!0,description:"Compact hatchback perfect for city rides."},{id:"6",name:"Toyota Innova",price:450,seats:7,transmission:"Manual",fuel:"Diesel",rating:4.7,image:Ea,type:"Car",location:"Bangalore",available:!0,description:"Compact hatchback perfect for city rides."},{id:"7",name:"Mahindra XUV500",price:400,seats:7,transmission:"Automatic",fuel:"Diesel",rating:4.4,image:Ea,type:"Car",location:"kakinada",available:!0,description:"Compact hatchback perfect for city rides."},{id:"8",name:"Tata Nexon",price:220,seats:5,transmission:"Manual",fuel:"Petrol",rating:4.3,image:Ea,description:"Compact hatchback perfect for city rides",location:"Hyderabad",available:!0,type:"Car"},{id:"13",name:"Royal Enfield ",price:120,transmission:"Manual",fuel:"Petrol",seats:2,location:"Kakinada",rating:4.6,available:!0,image:La,type:"Bike",description:"Compact hatchback perfect for city rides."},{id:"14",name:"Yamaha FZ-S",price:100,transmission:"Manual",fuel:"Petrol",seats:2,location:"Rajahmundry",rating:4.4,available:!0,image:Ma,type:"Bike",description:"Compact hatchback perfect for city rides."},{id:"15",name:"TVS Ntorq",price:90,transmission:"Automatic",fuel:"Petrol",seats:2,location:"Kakinada",rating:4.3,available:!0,image:Oa,type:"Bike",description:"Compact hatchback perfect for city rides."},{id:"16",name:"Honda Activa 6G",price:80,transmission:"Automatic",fuel:"Petrol",seats:2,location:"Vijayawada",rating:4.6,available:!0,image:Ba,type:"Bike",description:"Compact hatchback perfect for city rides."}],za=ur("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ua=ur("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Va=ur("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ha=ur("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),qa=ur("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Wa=ur("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ka=ur("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ga=ur("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Za=e=>{var t;let{isOpen:n,bookingId:i,bookingStatus:s="Waiting for response...",timer:o,timerSeconds:a,onClose:l,onTimerComplete:c,onAccepted:u,onRejected:d,onTimeout:h}=e;const p=null!==(t=null!==a&&void 0!==a?a:o)&&void 0!==t?t:120,[m,f]=(0,r.useState)(p),g=(0,r.useRef)(null),y=(0,r.useRef)(!1);if((0,r.useEffect)(()=>{n?(console.log("\ud83d\udfe2 WaitingPopup OPENED - Timer set to:",p,"seconds"),f(p),y.current=!1):(console.log("\ud83d\udd34 WaitingPopup CLOSED"),g.current&&(clearInterval(g.current),g.current=null))},[n,p]),(0,r.useEffect)(()=>{if(n)return console.log("\u23f1 Starting countdown from",m),g.current&&clearInterval(g.current),g.current=setInterval(()=>{f(e=>{const t=e-1;return t%10===0&&t>0&&console.log("\u23f1 Timer:",t,"seconds remaining"),t<=0?(console.log("\u23f0 TIMER REACHED 0 - Closing popup and calling callbacks"),g.current&&(clearInterval(g.current),g.current=null),y.current||(y.current=!0,setTimeout(()=>{null===h||void 0===h||h(),null===c||void 0===c||c(),l()},100)),0):t})},1e3),()=>{console.log("\ud83e\uddf9 Cleaning up timer interval"),g.current&&(clearInterval(g.current),g.current=null)}},[n,h,c,l]),!n)return null;console.log("\ud83c\udfa8 WaitingPopup RENDERING - Time remaining:",m);const v=2*Math.PI*45,x=p>0?p:120,b=Math.max(0,Math.min(1,m/x)),w=v*(1-b);return(0,mr.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-end justify-center",children:[(0,mr.jsx)("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(12px)"}}),(0,mr.jsxs)("div",{className:"relative w-full bg-white rounded-t-3xl shadow-2xl pb-8 pt-6 px-6",style:{animation:"slideUp 0.28s ease-out",maxWidth:"600px"},role:"dialog","aria-modal":"true",children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-1",children:"Waiting for response!"}),s&&(0,mr.jsx)("p",{className:"text-center text-sm text-gray-600 mb-2",children:s}),i&&(0,mr.jsxs)("p",{className:"text-center text-xs text-gray-400 mb-2",children:["Booking: ",i.substring(0,8),"..."]}),(0,mr.jsx)("div",{className:"w-full h-px bg-gray-300 my-5"}),(0,mr.jsx)("div",{className:"flex justify-center gap-3 mb-8 px-8",children:[0,1,2,3].map(e=>(0,mr.jsx)("div",{className:"flex-1 h-1.5 rounded-full transition-opacity duration-300",style:{background:"linear-gradient(to right, #1A2980, #26D0CE)",opacity:e<Math.floor(4*b)?1:.28}},e))}),(0,mr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,mr.jsxs)("div",{className:"relative w-32 h-32 mb-3",children:[(0,mr.jsxs)("svg",{width:"128",height:"128",viewBox:"0 0 128 128",style:{transform:"rotate(-90deg)"},children:[(0,mr.jsx)("defs",{children:(0,mr.jsxs)("linearGradient",{id:"grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,mr.jsx)("stop",{offset:"0%",stopColor:"#1A2980"}),(0,mr.jsx)("stop",{offset:"100%",stopColor:"#26D0CE"})]})}),(0,mr.jsx)("circle",{cx:"64",cy:"64",r:45,stroke:"#E5E7EB",strokeWidth:10,fill:"none"}),(0,mr.jsx)("circle",{cx:"64",cy:"64",r:45,stroke:"url(#grad)",strokeWidth:10,strokeDasharray:v,strokeDashoffset:w,strokeLinecap:"round",fill:"none",style:{transition:"stroke-dashoffset 0.45s ease"}})]}),(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,mr.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",children:[(0,mr.jsx)("defs",{children:(0,mr.jsxs)("linearGradient",{id:"clockGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,mr.jsx)("stop",{offset:"0%",stopColor:"#1A2980"}),(0,mr.jsx)("stop",{offset:"100%",stopColor:"#26D0CE"})]})}),(0,mr.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"url(#clockGrad)",strokeWidth:"2",fill:"none"}),(0,mr.jsx)("path",{d:"M12 6V12L16 14",stroke:"url(#clockGrad)",strokeWidth:"2",strokeLinecap:"round"})]})})]}),(0,mr.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[m," sec",0===m&&(0,mr.jsx)("span",{className:"text-sm text-red-500 ml-2",children:"(Closing...)"})]})]}),(0,mr.jsx)("div",{className:"mt-6 px-4",children:(0,mr.jsx)("button",{onClick:()=>{console.log("\ud83d\udd34 User manually closed waiting popup"),g.current&&(clearInterval(g.current),g.current=null),l()},className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-lg transition font-medium",children:"Cancel Waiting"})})]}),(0,mr.jsx)("style",{children:"\n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n      "})]})},Qa=e=>{let{isOpen:t=!0,onAccept:n,onReject:i,onClose:s}=e;return(0,r.useEffect)(()=>{if(!t)return;const e=e=>{"Escape"===e.key&&s&&s()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,s]),t?(0,mr.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Booking acceptance dialog",children:[(0,mr.jsx)("div",{className:"absolute inset-0 bg-black/50",style:{backdropFilter:"blur(8px)"},onClick:s}),(0,mr.jsxs)("div",{className:"relative bg-white rounded-3xl shadow-2xl p-12 mx-4 w-full",style:{animation:"fadeIn 0.28s ease-out",maxWidth:"650px",minHeight:"400px"},onClick:e=>e.stopPropagation(),children:[(0,mr.jsx)("div",{className:"flex justify-center mb-8",children:(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[0,1,2].map(e=>(0,mr.jsx)("div",{className:"absolute rounded-full border-2 border-blue-500",style:{width:"".concat(120+36*e,"px"),height:"".concat(120+36*e,"px"),opacity:.3-.07*e,animation:"pulse 2s infinite ".concat(.2*e,"s")}},e))}),(0,mr.jsx)("div",{className:"relative w-36 h-36 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",boxShadow:"0 10px 40px rgba(59, 130, 246, 0.4)"},children:(0,mr.jsxs)("svg",{width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,mr.jsx)("rect",{x:"1",y:"3",width:"15",height:"13"}),(0,mr.jsx)("polygon",{points:"16 8 20 8 23 11 23 16 16 16 16 8"}),(0,mr.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),(0,mr.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5"})]})})]})}),(0,mr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-8 leading-tight",children:"You've got a new booking!"}),(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsx)("button",{onClick:n,className:"w-full text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 text-lg",style:{background:"linear-gradient(to right, #0B0E92, #69A6F0)"},children:"Accept"}),(0,mr.jsx)("button",{onClick:i,className:"w-full bg-white text-red-600 font-bold py-4 px-6 rounded-xl border-2 border-red-600 hover:bg-red-50 transition-all duration-200 text-lg",children:"Reject"})]}),s&&(0,mr.jsx)("button",{onClick:s,className:"mt-6 w-full text-sm text-gray-500 hover:text-gray-700","aria-label":"Close booking dialog",children:"Close"}),(0,mr.jsx)("style",{children:"\n          @keyframes fadeIn {\n            from { opacity: 0; transform: scale(0.96); }\n            to { opacity: 1; transform: scale(1); }\n          }\n          @keyframes pulse {\n            0%,100% { transform: scale(0.9); opacity: 0.32; }\n            50% { transform: scale(1.06); opacity: 0; }\n          }\n        "})]})]}):null},Ya=Qa,Ja=e=>{let{isOpen:t,onClose:n,onReject:r}=e;const i=ye();if(!t)return null;return(0,mr.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-[90%] max-w-md p-8 text-center transform transition-all duration-300",children:[(0,mr.jsx)("div",{className:"flex justify-center mb-6",children:(0,mr.jsx)("div",{className:"w-28 h-28 bg-gradient-to-b from-[#0B0E92] to-[#69A6F0] rounded-full flex items-center justify-center",children:(0,mr.jsx)("span",{className:"text-white text-6xl",children:"\u2639\ufe0f"})})}),(0,mr.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8 leading-snug",children:"Sorry! your request was not accepted"}),(0,mr.jsx)("button",{onClick:()=>{i("/rental")},className:"w-full bg-gradient-to-r from-blue-700 to-blue-600 hover:from-blue-800 hover:to-blue-700 text-white font-semibold text-lg py-4 rounded-xl shadow-lg transition-all duration-200 active:scale-95",children:"Okay"})]})})},Xa=Tt()(fo((e,t)=>({bookings:[],addBooking:t=>e(e=>{const n=e.bookings.some(e=>e.id===t.id);return n?(console.log("\u26a0\ufe0f Booking already exists, skipping:",t.id),e):(console.log("\u2705 Adding new booking:",t.id),{bookings:[...e.bookings,t]})}),updateBooking:(t,n)=>e(e=>({bookings:e.bookings.map(e=>e.id===t?c(c({},e),n):e)})),updateBookingStatus:(t,n)=>e(e=>(console.log("\ud83d\udcdd Updating booking ".concat(t," status to: ").concat(n)),{bookings:e.bookings.map(e=>e.id===t?c(c({},e),{},{status:n}):e)})),deleteBooking:t=>e(e=>({bookings:e.bookings.filter(e=>e.id!==t)})),getBookingById:e=>t().bookings.find(t=>t.id===e),clearAllBookings:()=>e(()=>({bookings:[]})),setBookings:t=>e(()=>(console.log("\ud83d\udce6 Syncing ".concat(t.length," bookings from API")),{bookings:t}))}),{name:"booking-storage",version:1}));function $a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let el={data:""},tl=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||el},nl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,rl=/\/\*[^]*?\*\/|  +/g,il=/\n+/g,sl=(e,t)=>{let n="",r="",i="";for(let s in e){let o=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+o+";":r+="f"==s[1]?sl(o,s):s+"{"+sl(o,"k"==s[1]?"":t)+"}":"object"==typeof o?r+=sl(o,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=o&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=sl.p?sl.p(s,o):s+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},ol={},al=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+al(e[n]);return t}return e},ll=(e,t,n,r,i)=>{let s=al(e),o=ol[s]||(ol[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!ol[o]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=nl.exec(e.replace(rl,""));)t[4]?r.shift():t[3]?(n=t[3].replace(il," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(il," ").trim();return r[0]})(e);ol[o]=sl(i?{["@keyframes "+o]:t}:t,n?"":"."+o)}let a=n&&ol.g?ol.g:null;return n&&(ol.g=ol[o]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(ol[o],t,r,a),o};function cl(e){let t=this||{},n=e.call?e(t.p):e;return ll(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":sl(e,""):!1===e?"":e}return e+r+(null==s?"":s)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,tl(t.target),t.g,t.o,t.k)}cl.bind({g:1});let ul,dl,hl,pl=cl.bind({k:1});function ml(e,t){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:dl&&dl()},a),n.o=/ *go\d+/.test(l),a.className=cl.apply(n,r)+(l?" "+l:""),t&&(a.ref=o);let c=e;return e[0]&&(c=a.as||e,delete a.as),hl&&c[0]&&hl(a),ul(c,a)}return t?t(i):i}}var fl,gl,yl,vl,xl,bl,wl,kl,Nl,_l,jl,Al,Cl,Sl,El,Tl,Il=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Pl=(()=>{let e=0;return()=>(++e).toString()})(),Rl=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Dl="default",Ll=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return c(c({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return c(c({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?c(c({},e),t.toast):e)});case 2:let{toast:r}=t;return Ll(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return c(c({},e),{},{toasts:e.toasts.map(e=>e.id===i||void 0===i?c(c({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?c(c({},e),{},{toasts:[]}):c(c({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return c(c({},e),{},{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return c(c({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>c(c({},e),{},{pauseDuration:e.pauseDuration+s}))})}},Ml=[],Ol={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Bl={},Fl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dl;Bl[t]=Ll(Bl[t]||Ol,e),Ml.forEach(e=>{let[n,r]=e;n===t&&r(Bl[t])})},zl=e=>Object.keys(Bl).forEach(t=>Fl(e,t)),Ul=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dl;return t=>{Fl(t,e)}},Vl=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return c(c({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||Pl()})}(t,e,n);return Ul(r.toasterId||(e=>Object.keys(Bl).find(t=>Bl[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},Hl=(e,t)=>Vl("blank")(e,t);Hl.error=Vl("error"),Hl.success=Vl("success"),Hl.loading=Vl("loading"),Hl.custom=Vl("custom"),Hl.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Ul(t)(n):zl(n)},Hl.dismissAll=e=>Hl.dismiss(void 0,e),Hl.remove=(e,t)=>{let n={type:4,toastId:e};t?Ul(t)(n):zl(n)},Hl.removeAll=e=>Hl.remove(void 0,e),Hl.promise=(e,t,n)=>{let r=Hl.loading(t.loading,c(c({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let i=t.success?Il(t.success,e):void 0;return i?Hl.success(i,c(c({id:r},n),null==n?void 0:n.success)):Hl.dismiss(r),e}).catch(e=>{let i=t.error?Il(t.error,e):void 0;i?Hl.error(i,c(c({id:r},n),null==n?void 0:n.error)):Hl.dismiss(r)}),e};var ql=pl(fl||(fl=$a(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Wl=pl(gl||(gl=$a(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Kl=pl(yl||(yl=$a(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Gl=ml("div")(vl||(vl=$a(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",ql,Wl,e=>e.secondary||"#fff",Kl),Zl=pl(xl||(xl=$a(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Ql=ml("div")(bl||(bl=$a(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Zl),Yl=pl(wl||(wl=$a(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Jl=pl(kl||(kl=$a(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Xl=ml("div")(Nl||(Nl=$a(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Yl,Jl,e=>e.secondary||"#fff"),$l=ml("div")(_l||(_l=$a(["\n  position: absolute;\n"]))),ec=ml("div")(jl||(jl=$a(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),tc=pl(Al||(Al=$a(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),nc=ml("div")(Cl||(Cl=$a(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),tc),rc=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:s}=t;return void 0!==n?"string"==typeof n?r.createElement(nc,null,n):n:"blank"===i?null:r.createElement(ec,null,r.createElement(Ql,c({},s)),"loading"!==i&&r.createElement($l,null,"error"===i?r.createElement(Gl,c({},s)):r.createElement(Xl,c({},s))))},ic=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),sc=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),oc=ml("div")(Sl||(Sl=$a(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),ac=ml("div")(El||(El=$a(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"])));r.memo(e=>{let{toast:t,position:n,style:i,children:s}=e,o=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=Rl()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ic(n),sc(n)];return{animation:t?"".concat(pl(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(pl(i)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},a=r.createElement(rc,{toast:t}),l=r.createElement(ac,c({},t.ariaProps),Il(t.message,t));return r.createElement(oc,{className:t.className,style:c(c(c({},o),i),t.style)},"function"==typeof s?s({icon:a,message:l}):r.createElement(r.Fragment,null,a,l))});!function(e,t,n,r){sl.p=t,ul=e,dl=n,hl=r}(r.createElement);cl(Tl||(Tl=$a(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"])));var lc=Hl;const cc=ur("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),uc=12e4,dc=Tt((e,t)=>({showOwnerModal:!1,currentBooking:null,bookingQueue:[],modalState:"confirm",actionLoading:!1,showCustomerModal:!1,customerModalType:null,customerBookingInfo:null,showWaitingPopup:!1,waitingBookingInfo:null,setShowOwnerModal:t=>e({showOwnerModal:t}),setCurrentBooking:t=>e({currentBooking:t}),setBookingQueue:t=>e({bookingQueue:t}),addBookingToQueue:t=>{const n=c(c({},t),{},{receivedAt:Date.now(),expiresAt:Date.now()+uc});e(e=>({bookingQueue:[...e.bookingQueue,n].sort((e,t)=>(e.receivedAt||0)-(t.receivedAt||0))}))},removeBookingFromQueue:t=>{e(e=>({bookingQueue:e.bookingQueue.filter(e=>(e._id||e.id)!==t),currentBooking:e.currentBooking&&(e.currentBooking._id||e.currentBooking.id)===t?null:e.currentBooking}))},setModalState:t=>e({modalState:t}),setActionLoading:t=>e({actionLoading:t}),showCustomerAcceptedModal:(t,n)=>e({showCustomerModal:!0,customerModalType:"accepted",customerBookingInfo:{vehicleName:t,ownerName:n},showWaitingPopup:!1,waitingBookingInfo:null}),showCustomerRejectedModal:(t,n)=>e({showCustomerModal:!0,customerModalType:"rejected",customerBookingInfo:{vehicleName:t,ownerName:n},showWaitingPopup:!1,waitingBookingInfo:null}),showCustomerTimeoutModal:t=>e({showCustomerModal:!0,customerModalType:"timeout",customerBookingInfo:{vehicleName:t},showWaitingPopup:!1,waitingBookingInfo:null}),closeCustomerModal:()=>e({showCustomerModal:!1,customerModalType:null,customerBookingInfo:null}),showCustomerWaitingPopup:(t,n)=>e({showWaitingPopup:!0,waitingBookingInfo:{bookingId:t,vehicleName:n,expiresAt:Date.now()+uc}}),closeWaitingPopup:()=>e({showWaitingPopup:!1,waitingBookingInfo:null})})),hc="http://3.110.122.127:3000";function pc(e){let{isOpen:t,onClose:n,userRole:i,VechileId:s,vechileType:o,userId:a,latitude:l="17.438095",longitude:c="78.4485",ownerId:u,pricePerDay:d=0,pricePerKm:h=0,pricePerHour:p=0,vehicleName:m="Vehicle",contactNumber:f,contactName:g,onBookingComplete:y}=e;const[v,x]=(0,r.useState)(new Date),[b,w]=(0,r.useState)(null),[k,N]=(0,r.useState)(null),[_,j]=(0,r.useState)("06:00"),[A,C]=(0,r.useState)("18:00"),[S,E]=(0,r.useState)({type:"",text:""}),[T,I]=(0,r.useState)(!1),[P,R]=(0,r.useState)(!1),[D,L]=(0,r.useState)(!1),[M,O]=(0,r.useState)([]),[B,F]=(0,r.useState)([]),[z,U]=(0,r.useState)([]),[V,H]=(0,r.useState)([]),[q,W]=(0,r.useState)(null),K=(0,r.useRef)(null),{addNotification:G}=rr(),Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"general";console.log("\ud83d\udd14 Adding notification to store:",e,t),G({type:n,title:e,message:t,vehicleId:s,vehicleName:m,bookingId:q||void 0})};(0,r.useEffect)(()=>()=>{K.current&&(clearInterval(K.current),K.current=null)},[]),(0,r.useEffect)(()=>{t&&s&&o&&(Q(),Y())},[t,s,o]);const Q=async()=>{try{L(!0);const e=J(new Date(v.getFullYear(),v.getMonth(),1)),t=J(new Date(v.getFullYear(),v.getMonth()+1,0)),n=await fetch("".concat(hc,"/getVehicleAvailability?VechileId=").concat(s,"&vechileType=").concat(o,"&startDate=").concat(e,"&endDate=").concat(t)),r=await n.json();if(console.log("=== OWNER BLOCKS API Response ===",JSON.stringify(r,null,2)),r&&Array.isArray(r.availability)){const e=[];r.availability.forEach(t=>{"Available"!==t.status&&(e.push(t.date),console.log("\ud83d\udd34 Owner blocked: ".concat(t.date)))}),O(e),console.log("Total owner blocked dates:",e.length)}}catch(e){console.error("Error fetching availability:",e),ae("error","Failed to load availability")}finally{L(!1)}},Y=async()=>{try{L(!0);const e=localStorage.getItem("activeBookingId")||"";if(!e)return console.log("\u26a0 No active booking ID in localStorage"),F([]),U([]),void H([]);const t=await fetch("".concat(hc,"/getBookingById/").concat(e)),n=await t.json();if(console.log("=== BOOKINGS API Response ===",JSON.stringify(n,null,2)),!n||!n.booking)return console.warn("\u26a0 No booking data returned from server."),F([]),U([]),void H([]);const r=Array.isArray(n.booking)?n.booking:[n.booking],i=[],s=[],o=[];r.forEach(e=>{var t,n,r,a;const l=new Date(e.from||e.FromDate),c=new Date(e.to||e.ToDate),u=new Date(l),d="confirmed"===(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())||"confirmed"===(null===(n=e.bookingStatus)||void 0===n?void 0:n.toLowerCase());e.customerId||e.userId;for(o.push({id:e._id,from:null===(r=e.FromDate||e.from)||void 0===r?void 0:r.split("T")[0],to:null===(a=e.ToDate||e.to)||void 0===a?void 0:a.split("T")[0],fromTime:e.FromTime||e.fromTime||"06:00",toTime:e.ToTime||e.toTime||"18:00",customerId:e.customerId||e.userId,status:e.status||e.bookingStatus,isConfirmed:d});u<=c;){const e=J(u);i.push(e),d&&s.push(e),u.setDate(u.getDate()+1)}}),F(i),U(s),H(o.filter(e=>e.customerId===a))}catch(e){console.error("Error fetching bookings:",e),ae("error","Failed to load bookings")}finally{L(!1)}},J=e=>{if(!e)return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},X=e=>{const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return"".concat(t,"-").concat(n,"-").concat(r)},$=e=>{const[t,n]=e.split(":");return"".concat(parseInt(t),".").concat(n)},ee=e=>e?e.toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Select",te=e=>{const t=new Date;return t.setHours(0,0,0,0),e<t},ne=e=>M.includes(J(e)),re=e=>B.includes(J(e)),ie=e=>z.includes(J(e)),se=e=>V.some(t=>{const n=J(e);return n>=t.from&&n<=t.to}),oe=e=>ne(e)||re(e),ae=(e,t)=>{E({type:e,text:t}),setTimeout(()=>E({type:"",text:""}),3e3)},le=e=>{if(!te(e))if(oe(e))ne(e)?ae("error","Owner has blocked this date"):ae("error","This date is already booked");else if(b)if(k)w(e),N(null);else{if(e<b)return void ae("error","End date must be after start");const t=new Date(b);for(;t<=e;){if(oe(t))return void ae("error","Some dates in range are unavailable");t.setDate(t.getDate()+1)}N(e)}else w(e),N(null)},ce=()=>{if(!b||!k)return 0;const[e,t]=_.split(":").map(Number),[n,r]=A.split(":").map(Number),i=new Date(b);i.setHours(e,t,0,0);const s=new Date(k);s.setHours(n,r,0,0);const o=s.getTime()-i.getTime(),a=Math.ceil(o/36e5);return a>0?a:1},ue=()=>{if(!b||!k)return 0;const e=ce();if(p>0)return e*p;const t=Math.abs(k.getTime()-b.getTime());return(Math.ceil(t/864e5)+1)*d},de=()=>{if(console.log("\ud83d\udd35 handleCustomerBook called"),console.log("\ud83d\udd35 selectedStart:",b),console.log("\ud83d\udd35 selectedEnd:",k),!b||!k)return console.log("\u274c No dates selected - returning early"),void alert("Please select start and end dates first!");console.log("\ud83d\udd35 Creating booking..."),I(!1),setTimeout(()=>{he()},100)},he=async()=>{if(b&&k)try{L(!0);let t=f||localStorage.getItem("contactNumber")||"";if(!t)try{const e=localStorage.getItem("userProfile");if(e){const n=JSON.parse(e);t=n.phone||n.contactNumber||n.mobileNumber||""}}catch(el){console.log("Could not parse userProfile")}if(!t)try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);t=n.phone||n.contactNumber||n.mobileNumber||""}}catch(el){console.log("Could not parse user")}if(!t){console.warn("\u26a0 No contact number found - will prompt user");const e=prompt("Please enter your contact number to complete the booking:");e&&e.trim()&&(t=e.trim(),localStorage.setItem("contactNumber",t))}const n=g||localStorage.getItem("userName")||localStorage.getItem("contactName")||"",r=u||localStorage.getItem("vehicleOwnerId")||"";console.log("\ud83d\udccb Booking Details:",{userId:a,ownerId:r,VechileId:s,vechileType:o,contactNumber:t,contactName:n,hasOwnerId:!!r});const i=ce(),p=ue(),v=new URLSearchParams;v.append("userId",a),v.append("vechileType",o),v.append("VechileId",s),r?(v.append("ownerId",r),console.log("\u2705 Including ownerId in booking request")):console.warn("\u26a0 No ownerId available - booking may fail if API requires it"),v.append("pricePerKm",String(h||d||0)),v.append("contactNumber",t),v.append("contactName",n),v.append("latitude",l),v.append("longitude",c),v.append("FromDate",X(b)),v.append("ToDate",X(k)),v.append("FromTime",$(_)),v.append("ToTime",$(A)),v.append("totalHours",String(i)),v.append("totalPrice",String(p)),console.log("\ud83d\udce4 Creating booking...");const x=await fetch("".concat(hc,"/createBooking"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v}),j=await x.json();if(console.log("\ud83d\udce5 Booking created:",j),x.ok){var e;const t=(null===(e=j.booking)||void 0===e?void 0:e._id)||j._id||j.bookingId;if(console.log("\u2705 Booking ID:",t),!t)return console.error("\u274c No booking ID received"),void ae("error","Booking created but no ID received");localStorage.setItem("activeBookingId",t),W(t),dc.getState().showCustomerWaitingPopup(t,m),Z("Booking Request Sent!","Your booking request for ".concat(m," has been sent to the owner. Waiting for response...")),console.log("\u23f1 Will start polling in 10 seconds..."),setTimeout(()=>{pe(t)},1e4),console.log("\u23f1 Global waiting popup will stay open for 120 seconds"),ae("success","Booking request sent!"),await fe(),w(null),N(null),y&&y(j)}else{console.error("\u274c Booking API failed:",j.message);const e=j.message||"Please try again";Z("Booking Failed",e),ae("error",e)}}catch(t){console.error("\u274c Booking network error:",t),Z("Booking Failed","Network error - Please check your connection"),ae("error","Network error - Please try again")}finally{L(!1)}},pe=e=>{console.log("\u23f1 Starting polling NOW for booking ID:",e),K.current&&clearInterval(K.current),K.current=setInterval(async()=>{try{var t;console.log("\u23f1 Polling for booking:",e);const n=await fetch("".concat(hc,"/getBookingById/").concat(e));if(!n.ok)return void console.log("\u23f1 API returned error - continuing to wait...");const r=await n.json();console.log("\u23f1 Polling response:",JSON.stringify(r));const i=(null===(t=r.booking)||void 0===t?void 0:t.status)||r.status||"";console.log("\u23f1 Current status:",i),"confirmed"===i.toLowerCase()?(console.log("\u2705 OWNER ACCEPTED - Closing popup"),K.current&&(clearInterval(K.current),K.current=null),dc.getState().showCustomerAcceptedModal(m),Z("Booking Confirmed!","Your booking for ".concat(m," has been accepted by the owner."),"booking_confirmed"),await Y(),await Q(),setTimeout(()=>{W(null)},1500)):"cancelled"===i.toLowerCase()||"autocancelled"===i.toLowerCase()||"rejected"===i.toLowerCase()?(console.log("\u274c OWNER REJECTED - Closing popup"),K.current&&(clearInterval(K.current),K.current=null),"autocancelled"===i.toLowerCase()?dc.getState().showCustomerTimeoutModal(m):dc.getState().showCustomerRejectedModal(m),Z("Booking Rejected","Your booking for ".concat(m," was declined by the owner."),"booking_declined"),await me(e),await Y(),await Q(),setTimeout(()=>{W(null)},1500)):console.log("\u23f1 POLLING: Status is '"+i+"' - popup stays open, continuing to wait...")}catch(n){console.error("\u274c Polling error:",n),console.log("\u23f1 Polling error - continuing to wait...")}},5e3)},me=async e=>{try{console.log("\ud83d\udd13 Attempting to unblock dates for booking:",e);(await fetch("".concat(hc,"/removeNotAvailability/").concat(e),{method:"DELETE"})).ok?console.log("\u2705 Dates unblocked successfully"):console.warn("\u26a0 Could not unblock dates - endpoint may not exist")}catch(t){console.error("\u274c Error unblocking dates:",t)}},fe=async()=>{if(b&&k)try{const e=new URLSearchParams;e.append("userId",a),e.append("vechileType",o),e.append("VechileId",s),e.append("fromDate",X(b)),e.append("toDate",X(k)),e.append("fromTime",$(_)),e.append("toTime",$(A)),e.append("isNotAvailable","true"),e.append("bikeImages",""),e.append("isCustomerBooking","true"),await fetch("".concat(hc,"/createNotAvailability"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),console.log("\u2705 Dates blocked successfully")}catch(e){console.error("\u274c Error blocking dates:",e)}};return t?(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl overflow-hidden relative max-h-[90vh] overflow-y-auto",children:[(0,mr.jsx)("button",{onClick:n,className:"absolute top-3 right-3 p-2 rounded-lg hover:bg-gray-200 z-10",children:(0,mr.jsx)(hr,{size:20})}),D&&(0,mr.jsxs)("div",{className:"absolute top-3 left-3 bg-white rounded-lg shadow-lg p-2 flex items-center gap-2 z-10",children:[(0,mr.jsx)(za,{className:"animate-spin",size:16}),(0,mr.jsx)("span",{className:"text-sm",children:"Loading..."})]}),(0,mr.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsx)(jr,{className:"text-blue-600",size:24}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("h2",{className:"font-bold text-lg",children:["Book ",m]}),(0,mr.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 text-green-700",children:"Customer"})]})]}),V.length>0&&(0,mr.jsxs)("button",{onClick:()=>R(!0),className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:["My Bookings (",V.length,")"]})]}),S.text&&(0,mr.jsx)("div",{className:"mx-4 mt-4 p-3 rounded-lg text-sm ".concat("error"===S.type?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:S.text}),(0,mr.jsxs)("div",{className:"p-4",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("button",{onClick:()=>x(new Date(v.getFullYear(),v.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,mr.jsx)(Ar,{size:20})}),(0,mr.jsx)("h3",{className:"font-semibold",children:v.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,mr.jsx)("button",{onClick:()=>x(new Date(v.getFullYear(),v.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,mr.jsx)(Cr,{size:20})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map(e=>(0,mr.jsx)("div",{className:"text-center font-medium text-gray-500 text-xs py-1",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:(()=>{const e=[],t=v.getFullYear(),n=v.getMonth(),r=new Date(t,n+1,0).getDate(),i=new Date(t,n,1).getDay(),s=0===i?6:i-1;for(let o=0;o<s;o++)e.push((0,mr.jsx)("div",{},"e".concat(o)));for(let o=1;o<=r;o++){const r=new Date(t,n,o),i=te(r),s=ne(r),a=re(r),l=ie(r),c=(se(r),oe(r)),u=b&&J(b)===J(r),d=k&&J(k)===J(r);let h="h-10 sm:h-12 rounded-lg font-medium flex items-center justify-center relative transition text-sm ";h+=i?"bg-gray-100 text-gray-400 cursor-not-allowed":s?"bg-red-100 border-2 border-red-400 text-red-700 cursor-not-allowed":l?"bg-green-100 border-2 border-green-400 text-green-700 cursor-not-allowed":a?"bg-orange-100 border-2 border-orange-400 text-orange-700 cursor-not-allowed":u||d?"bg-blue-600 text-white border-2 border-blue-700":b&&k&&r>b&&r<k?"bg-blue-200 text-blue-800":"bg-gradient-to-br from-blue-500 to-indigo-500 text-white hover:opacity-90 cursor-pointer",e.push((0,mr.jsxs)("button",{className:h,disabled:i||c,onClick:()=>le(r),children:[o,s&&(0,mr.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"}),l&&(0,mr.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full"}),a&&!l&&(0,mr.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-500 rounded-full"})]},o))}return e})()}),(0,mr.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-500 rounded"}),(0,mr.jsx)("span",{children:"Available"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-400 rounded"}),(0,mr.jsx)("span",{children:"Owner Blocked"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-400 rounded"}),(0,mr.jsx)("span",{children:"Confirmed"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-400 rounded"}),(0,mr.jsx)("span",{children:"Pending"})]})]}),(0,mr.jsxs)("div",{className:"border-t pt-4",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Selected:"}),(0,mr.jsxs)("p",{className:"font-semibold",children:[ee(b)," \u2192 ",ee(k)]}),b&&k&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("p",{className:"text-xs text-gray-500",children:["Hours: ",ce()]}),(0,mr.jsxs)("p",{className:"text-blue-600 font-bold",children:["Total: \u20b9",ue()]})]})]}),(0,mr.jsxs)("div",{className:"flex gap-2",children:[(0,mr.jsx)("select",{className:"text-sm border rounded px-2 py-1",value:_,onChange:e=>j(e.target.value),children:["01:00","06:00","09:00","12:00","15:00","18:00","21:00"].map(e=>(0,mr.jsx)("option",{value:e,children:e},e))}),(0,mr.jsx)("span",{className:"text-gray-400",children:"-"}),(0,mr.jsx)("select",{className:"text-sm border rounded px-2 py-1",value:A,onChange:e=>C(e.target.value),children:["06:00","09:00","12:00","15:00","18:00","21:00","23:00"].map(e=>(0,mr.jsx)("option",{value:e,children:e},e))})]})]}),(0,mr.jsxs)("button",{onClick:de,disabled:!b||!k||D,className:"w-full bg-green-600 text-white py-3 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition flex items-center justify-center gap-2",children:[(0,mr.jsx)(cc,{size:18})," Book Now"]})]})]}),T&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full",children:[(0,mr.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Confirm Booking"}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-sm space-y-2",children:[(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Vehicle:"})," ",m]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Dates:"})," ",ee(b)," \u2192 ",ee(k)]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Time:"})," ",_," - ",A]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Total Hours:"})," ",ce()]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Total Price:"})," \u20b9",ue()]})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:de,disabled:D,className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50",children:D?"Booking...":"Confirm"}),(0,mr.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})}),P&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[70vh] overflow-y-auto",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("h3",{className:"font-bold text-lg",children:"My Bookings"}),(0,mr.jsx)("button",{onClick:()=>R(!1),children:(0,mr.jsx)(hr,{size:20})})]}),0===V.length?(0,mr.jsx)("p",{className:"text-gray-500",children:"No bookings yet"}):(0,mr.jsx)("div",{className:"space-y-3",children:V.map(e=>(0,mr.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("p",{className:"font-semibold",children:[e.from," \u2192 ",e.to]}),(0,mr.jsxs)("p",{className:"text-sm text-gray-500",children:[e.fromTime," - ",e.toTime]})]}),(0,mr.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.isConfirmed?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:e.status||"Pending"})]}),(0,mr.jsx)("button",{onClick:()=>(async e=>{try{L(!0),(await fetch("".concat(hc,"/deleteBooking/").concat(e.id),{method:"DELETE"})).ok?(ae("success","Booking cancelled"),await me(e.id),await Y(),await Q()):ae("error","Failed to cancel booking")}catch(t){console.error("Error cancelling booking:",t),ae("error","Failed to cancel booking")}finally{L(!1)}})(e),disabled:D,className:"w-full px-3 py-1 bg-red-100 text-red-700 rounded text-sm font-medium hover:bg-red-200 disabled:opacity-50",children:"Cancel Booking"})]},e.id))})]})})]})})}):null}const mc=()=>{var e;const t=ye(),n=me(),{id:i}=ve(),s=Fa.find(e=>e.id===i),{getReviewsByVehicleId:o,getAverageRating:a,getTotalReviewCount:l,getRatingDistribution:c}=go(),{addNotification:u}=rr(),{addBooking:d}=Xa(),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[v,x]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!1),[_,j]=(0,r.useState)(!1),[A,C]=(0,r.useState)(180),[S,E]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[P,R]=(0,r.useState)(null),[D,L]=(0,r.useState)(null),[M,O]=(0,r.useState)(!1),[B,F]=(0,r.useState)(""),[z,U]=(0,r.useState)(!1),[V,H]=(0,r.useState)([]),[q,W]=(0,r.useState)(!1),[K,G]=(0,r.useState)(""),[Z,Q]=(0,r.useState)(0),[Y,J]=(0,r.useState)(0),[X,$]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(null),[ie,se]=(0,r.useState)(null),[oe,ae]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(""),[ue,de]=(0,r.useState)("day"),[he,pe]=(0,r.useState)(0),fe=()=>{let e=localStorage.getItem("userId");const t=e=>e&&/^[a-f0-9]{24}$/i.test(e);if(t(e))return e;try{const e=localStorage.getItem("userProfile");if(e){const n=JSON.parse(e);if(t(n.userId))return n.userId;if(t(n._id))return n._id}}catch(el){console.log("Could not parse userProfile")}try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);if(t(n.userId))return n.userId;if(t(n._id))return n._id}}catch(el){console.log("Could not parse user")}return console.warn("\u26a0\ufe0f No valid userId found in localStorage"),e},ge=fe();(0,r.useEffect)(()=>{let e=null;return D&&oe&&(console.log("\ud83d\udd04 Starting booking status polling for:",D),e=setInterval(async()=>{try{console.log("\ud83d\udce1 Polling booking status...");const e=await fetch("http://3.110.122.127:3000/getBookingById/".concat(D));if(!e.ok)return void console.log("\u26a0\ufe0f Booking status API returned:",e.status);const t=await e.json();console.log("\ud83d\udce6 Booking status response:",t);const n=t.booking||t.data||t,r=((null===n||void 0===n?void 0:n.status)||(null===n||void 0===n?void 0:n.Status)||"pending").toLowerCase();console.log("\ud83d\udcca Current booking status:",r),"confirmed"===r?(console.log("\u2705 Booking CONFIRMED by owner!"),se("confirmed"),ae(!1),N(!1),ce("\u2705 Owner accepted your booking!"),lc.success("\ud83c\udf89 Booking Confirmed by Owner!",{duration:5e3,position:"top-center"}),setTimeout(()=>{w(!0),ce("")},2e3)):"rejected"!==r&&"cancelled"!==r&&"declined"!==r||(console.log("\u274c Booking REJECTED/CANCELLED by owner! Status:",r),se("rejected"),ae(!1),N(!1),ce("\u274c Owner rejected your booking"),lc.error("Booking was rejected by the owner",{duration:5e3,position:"top-center"}),setTimeout(()=>{ce(""),L(null),R(null)},3e3))}catch(e){console.error("\u274c Error polling booking status:",e)}},3e3),setTimeout(()=>{e&&(clearInterval(e),ae(!1),console.log("\u23f0 Polling timeout reached"))},18e4)),()=>{e&&(clearInterval(e),console.log("\ud83d\uded1 Stopped booking status polling"))}},[D,oe,ie]),(0,r.useEffect)(()=>{(async()=>{if(i)try{var e;f(!0),y("");const r=(null===(e=n.state)||void 0===e?void 0:e.vehicleType)||(null===s||void 0===s?void 0:s.type)||"car";let o;console.log("\ud83d\udce1 Fetching ".concat(r," details for ID: ").concat(i));let a=null,l=r;localStorage.setItem("vehicletype",l);try{"bike"===r.toLowerCase()?(o=await ho.bike.getBikeById(i),console.log("\u2705 Bike API response:",o),a=o.bike?o.bike:o.data?o.data:o):(o=await ho.car.getCarById(i),console.log("\u2705 Car API response:",o),a=o.car?o.car:o.data?o.data:o)}catch(B){console.warn("\u26a0\ufe0f ".concat(r," API failed (").concat(B.message,"), trying alternate type..."));try{"bike"===r.toLowerCase()?(console.log("\ud83d\udd04 Trying Car API as fallback..."),o=await ho.car.getCarById(i),l="car",a=o.car?o.car:o.data?o.data:o,console.log("\u2705 Car API (fallback) succeeded!")):(console.log("\ud83d\udd04 Trying Bike API as fallback..."),o=await ho.bike.getBikeById(i),l="bike",a=o.bike?o.bike:o.data?o.data:o,console.log("\u2705 Bike API (fallback) succeeded!"))}catch(t){throw console.error("\u274c Both APIs failed!"),new Error("Vehicle not found. This ".concat(r," (ID: ").concat(i,") may not exist in the database or has been removed."))}}if(!a)throw new Error("No vehicle data received from API");console.log("\ud83c\udfaf Final vehicle data to set:",a),console.log("\u2705 Successfully loaded as ".concat(l.toUpperCase())),p(a)}catch(GN){console.error("\u274c Error fetching vehicle details:",GN),y(GN.message||"Failed to load vehicle details"),lc.error(GN.message||"Failed to load vehicle details",{duration:5e3,position:"top-center"})}finally{f(!1)}})()},[i,n.state]),(0,r.useEffect)(()=>{const e=()=>{!document.hidden&&i&&(console.log("\ud83d\udc41\ufe0f Page became visible - Refreshing reviews"),setTimeout(()=>{be(i,!1),xe(i,!1)},300))},t=()=>{i&&(console.log("\ud83c\udfaf Window focused - Refreshing reviews"),setTimeout(()=>{be(i,!1),xe(i,!1)},300))};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}},[i]),(0,r.useEffect)(()=>{i&&(console.log("\ud83d\udd04 Initial review fetch triggered for vehicle:",i),be(i),xe(i))},[i]),(0,r.useEffect)(()=>{if(i){const e=setInterval(()=>{console.log("\ud83d\udd04 Auto-refreshing reviews..."),be(i,!0),xe(i,!0)},3e4);return()=>clearInterval(e)}},[i]),(0,r.useEffect)(()=>{let e=null;return k&&A>0&&(e=setInterval(()=>{C(e=>e<=1?0:e-1)},1e3)),()=>{e&&clearInterval(e)}},[k,A]),(0,r.useEffect)(()=>{k&&0===A&&_e()},[A,k]),(0,r.useEffect)(()=>{const e=()=>re(null);if(null!==ne)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[ne]),(0,r.useEffect)(()=>{const e=sessionStorage.getItem("editingReviewId"),t=sessionStorage.getItem("returnToVehicleId");if(e&&t===i&&V.length>0){const t=V.find(t=>t._id===e);t&&(console.log("\ud83c\udfaf UPDATED REVIEW CONFIRMED IN UI!"),console.log("\ud83d\udcca Review Data:",t))}},[V,i]);const xe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||$(!0),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u2b50 FETCHING AVERAGE RATING"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udccb Vehicle ID:",e);try{const t="Car",n=await ho.review.getAverageRating(e,t);if(console.log("\u2705 Average Rating Response:",n),n.success&&void 0!==n.averageRating){const e=parseFloat(n.averageRating);J(e),console.log("\u2b50 Average Rating Set:",e)}}catch(n){console.error("\u274c Failed to fetch average rating:",n.message)}finally{t||$(!1)}},be=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Date.now();if(n-Z<5e3&&t)console.log("\u23f3 Skipping fetch - too soon after last request");else{Q(n),t||(W(!0),G("")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udd0d FETCHING REVIEWS FOR VEHICLE"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udccb Vehicle ID:",e),localStorage.setItem("vehicleId",e);try{const n=await ho.review.getReviewsByCarId(e);if(console.log("\u2705 Reviews Response:",n),n.success&&Array.isArray(n.reviews)){const e=n.reviews;console.log("\ud83c\udf89 SUCCESS: Reviews found!",e.length),console.log("\ud83d\udcdd Full Review Data:",JSON.stringify(e,null,2)),H(e);const r=sessionStorage.getItem("editingReviewId");if(r){const t=e.find(e=>e._id===r);t&&(console.log("\u2728 Updated review detected!"),console.log("\u2b50 NEW Rating:",t.rating),console.log("\ud83d\udcac NEW Text:",t.review||t.reviewText),lc.success("\ud83c\udf89 Review updated! New rating: ".concat(t.rating,"\u2605"),{duration:3e3,position:"top-center"})),setTimeout(()=>{console.log("\ud83e\uddf9 Clearing editingReviewId from sessionStorage"),sessionStorage.removeItem("editingReviewId")},5e3)}return t||lc.success("\u2705 Loaded ".concat(e.length," review(s)"),{duration:2e3,position:"top-right"}),e}console.log("\u2139\ufe0f No reviews found"),H([]),t||lc("No reviews yet for this vehicle",{duration:2e3,position:"top-right"})}catch(r){console.error("\u274c Fetch reviews failed:",r.message),G("Unable to load reviews."),H([]),t||lc.error("Failed to load reviews",{duration:3e3,position:"top-right"})}finally{t||W(!1)}}},we=e=>{if(!e)return console.warn("\u26a0\ufe0f Vehicle type is undefined/null, defaulting to 'Car'"),"Car";return{car:"Car",auto:"Auto",bike:"Bike"}[e.toLowerCase()]||"Car"},ke=(e,t,n,r)=>{try{const i=e=>{var t;const n=e.match(/(\d{1,2}):?(\d{2})?\s*(AM|PM)?/i);if(!n)return{hours:0,minutes:0};let r=parseInt(n[1]);const i=parseInt(n[2]||"0"),s=null===(t=n[3])||void 0===t?void 0:t.toUpperCase();return"PM"===s&&12!==r&&(r+=12),"AM"===s&&12===r&&(r=0),{hours:r,minutes:i}},s=i(n),o=i(r),a=new Date(e);a.setHours(s.hours,s.minutes,0,0);const l=new Date(t);l.setHours(o.hours,o.minutes,0,0);const c=l.getTime()-a.getTime(),u=Math.ceil(c/36e5);return u>0?u:1}catch(i){return console.error("\u274c Error calculating hours:",i),1}},Ne=s||(h?{id:h._id||h.id||i||"",name:h.CarName||h.bikeName||"Unknown Vehicle",image:h.carImages&&h.carImages.length>0?h.carImages[0]:h.bikeImages&&h.bikeImages.length>0?h.bikeImages[0]:h.carImage||h.bikeImage||h.image||"https://via.placeholder.com/400",price:h.RentPerDay||h.RentPerHour||h.pricePerKm||h.pricePerHour||"0",type:h.bikeName?"bike":"car",transmission:h.transmissionType||"Manual",fuel:h.fuelType||"Petrol",seats:h.Carseater||h.seatingCapacity||"2",location:h.pickupArea||h.pickupCity||"Unknown Location",ownerId:h.ownerId||h.userId||""}:null),_e=()=>{console.log("\u23f0 Timer completed - Checking booking status"),"confirmed"===ie?(console.log("\u2705 Booking was confirmed - showing contact buttons"),N(!1),w(!0)):"rejected"===ie?(console.log("\u274c Booking was rejected"),N(!1),lc.error("Booking was rejected by owner")):(console.log("\u23f0 No response from owner - timeout"),N(!1),lc("Owner hasn't responded yet. Please try calling them.",{duration:5e3,position:"top-center"}),w(!0))},je=()=>{if(!Ne||!P)return void console.error("\u274c Cannot confirm booking");new Date;console.log("\ud83c\udf89 Confirming booking with ID:",D),U(!0)};if(m)return(0,mr.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50",children:(0,mr.jsxs)("div",{className:"text-center space-y-4 p-8",children:[(0,mr.jsx)(za,{className:"w-16 h-16 animate-spin text-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"text-xl text-gray-700 font-semibold",children:"Loading vehicle details..."}),(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Please wait while we fetch the car information"})]})});if(g&&!s)return(0,mr.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 to-pink-50",children:(0,mr.jsxs)("div",{className:"text-center space-y-4 p-8 bg-white rounded-2xl shadow-lg max-w-md",children:[(0,mr.jsx)("div",{className:"text-6xl",children:"\u274c"}),(0,mr.jsx)("p",{className:"text-xl text-red-600 font-bold",children:"Error Loading Vehicle"}),(0,mr.jsx)("p",{className:"text-gray-600",children:g}),(0,mr.jsx)("button",{onClick:()=>t(-1),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:opacity-90 transition font-semibold",children:"\u2190 Go Back"})]})});if(!s&&!h)return(0,mr.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:(0,mr.jsxs)("div",{className:"text-center space-y-4 p-8 bg-white rounded-2xl shadow-lg max-w-md",children:[(0,mr.jsx)("div",{className:"text-6xl",children:"\ud83d\ude97"}),(0,mr.jsx)("p",{className:"text-xl text-gray-700 font-bold",children:"Vehicle Not Found"}),(0,mr.jsx)("p",{className:"text-gray-600",children:"The vehicle you're looking for doesn't exist or has been removed."}),(0,mr.jsx)("button",{onClick:()=>t(-1),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg hover:opacity-90 transition font-semibold",children:"\u2190 Go Back"})]})});if(!Ne)return(0,mr.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,mr.jsxs)("div",{className:"text-center space-y-4 p-8",children:[(0,mr.jsx)("p",{className:"text-xl text-gray-700",children:"Vehicle data not available!"}),(0,mr.jsx)("button",{onClick:()=>t(-1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})});const Ae=o((null===Ne||void 0===Ne?void 0:Ne.id)||""),Ce=a((null===Ne||void 0===Ne?void 0:Ne.id)||""),Se=l((null===Ne||void 0===Ne?void 0:Ne.id)||""),Ee=c((null===Ne||void 0===Ne?void 0:Ne.id)||""),Te=V.length>0?V:Ae,Ie=Y>0?Y:V.length>0?(e=>{if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t.rating,0),n=t/e.length;return Number(n.toFixed(1))})(V):Ce,Pe=V.length>0?V.length:Se,Re=V.length>0?(e=>{const t=[5,4,3,2,1].map(t=>{const n=e.filter(e=>e.rating===t).length,r=e.length>0?Math.round(n/e.length*100):0;return{stars:t,count:n,percentage:r}});return t})(V):Ee;if(!Ne)return(0,mr.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,mr.jsxs)("div",{className:"text-center space-y-4 p-8",children:[(0,mr.jsx)("p",{className:"text-xl text-gray-700",children:"Vehicle data not available!"}),(0,mr.jsx)("button",{onClick:()=>t(-1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})});const De=h||{},Le=(null===(e=n.state)||void 0===e?void 0:e.vehicleType)||(null===s||void 0===s?void 0:s.type)||"car",Me=!!De.CarName||!!De.carImages||"car"===Le;let Oe=(Me?De.carImages:De.bikeImages)||[];Oe=Oe.filter(e=>e&&""!==e.trim()&&"undefined"!==e);const Be=Me?["https://e7.pngegg.com/pngimages/768/421/png-clipart-car-computer-icons-sedan-auto-detailing-auto-driving-rectangle-thumbnail.png","https://png.pngtree.com/png-vector/20191201/ourmid/pngtree-car-vector-logo-design-png-image_2066853.jpg"]:["https://w7.pngwing.com/pngs/579/51/png-transparent-computer-icons-motorcycle-bicycle-motorcycle-logo-black-silhouette.png","https://w1.pngwing.com/pngs/381/835/png-transparent-yamaha-logo-car-decal-motorcycle-sticker-sport-bike-yamaha-yzfr1-bicycle-thumbnail.png"];0===Oe.length&&(Oe=Be);const Fe=[...Oe];for(;Fe.length<3;)Fe.push(Be[Fe.length%Be.length]);const ze=Me?"".concat(De.CarName||"Unknown"," ").concat(De.CarModel||"").trim():"".concat(De.bikeName||"Unknown"," ").concat(De.bikeModel||"").trim();Me?De.RentPerHour:De.pricePerKm;return(0,mr.jsxs)("div",{className:"max-w-8xl mx-auto p-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,mr.jsx)("div",{className:"lg:col-span-1",children:(0,mr.jsxs)("div",{className:"relative w-full h-[200px] sm:h-[250px] md:h-[300px] rounded-[10px] border-2 border-transparent hover:border-[#0066FF] transition-all duration-200",children:[(0,mr.jsx)("img",{src:Fe[he],alt:ze,className:"w-full h-full object-cover transition-all duration-500 rounded-[10px]"}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),pe(e=>0===e?Fe.length-1:e-1)},className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Previous image",children:(0,mr.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),pe(e=>e===Fe.length-1?0:e+1)},className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Next image",children:(0,mr.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),(0,mr.jsx)("div",{className:"absolute bottom-3 sm:bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5",children:Fe.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>pe(t),className:"h-2 rounded-full transition-all ".concat(t===he?"bg-[#0066FF] w-6":"bg-gray-700 w-2")},t))})]})}),(0,mr.jsxs)("div",{className:"lg:col-span-1",children:[(0,mr.jsx)("h1",{className:"text-4xl font-bold mb-4",children:Ne.name}),(0,mr.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,mr.jsxs)("div",{onClick:()=>de("day"),className:"flex items-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all ".concat("day"===ue?"border-transparent bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white":"border-gray-300 bg-white hover:border-blue-300"),children:[(0,mr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAABmJLR0QA/wD/AP+gvaeTAAAKSElEQVR4nO3db2id5RnH8d99ksZaFXVrydrCXNlK/2zNevqcGpjTpjPS6VxhtWVudGwwqC8so+AUfGHZ6vpqW3C4wF5IKUOh4B/orCtDre2qlJpzTkpc202YTpDWLJtV12VNTnKuvWgrpTKN876f51zN9wN5e103B76cc5LneSIBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxQpFH6BVZVlmMefVarVp9Vrz+uWjVPQBAPz/CBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABx9xc3dLV1XVFe3v7VyVlIYRFkhZJ6pR0taQrJc0o8nxw54ykdyW9I+mkpFckDTWbzYHBwcEhSVGvJEulpQPu7u7ubDQa3wkhrJPULamj6DNhWnhT0tNm9kS9Xn9BLRxzSwZcqVR6zOweSV+X1F70eTCtHZf0cKPR+O3Q0NC/iz7MxVoq4HK5fHMIYVsI4StFnwW4yIkQwtYFCxbsfPzxxyeLPsx5LRFwuVyeF0L4ZQjhzqLPAnyEoWaz+cPBwcFq0QeRWiDgSqVyp5n9Rmd/GQV4MBFC2G5m22u1WqPIgxQWcE9Pz8zTp0//ysw2FXUG4JMwswMhhPW1Wu0fRZ2hkICzLLvazHaHEFYVsR+I6LVSqbR2YGDgaBHLcw+4u7u7c2JiYq+kct67gUT+GUK4pVqtDua9ONeAsyy7WtJ+Scvz3Avk4G1Jt9RqtXqeS3O7lLKnp2dmCOF3Il5cmj4l6ffLly//XJ5Lcwv4vffee8jMbsprH1CAzra2tmfOfdLMRS4BZ1m2IYRwVx67gIItDSHsyGtZW+oF5y7S+IOkmal3AS1iyfz58986ceJELfWi5O/AbW1tfeIiDUwzZtZ3/fXXL0i9J2nA5XL5ZjP7dsodQIuaNTEx8VDqJUkDLpVKP005H2hlIYS1lUrl1pQ7kgVcqVR6JN2Qaj7ggZn9TAmvt0gW8Ln7eYHpbkWWZbelGp4k4O7u7k6dvRkfgJTszSzJ0y4mJye/m2q2JHV0dKi3t1erV6/W4sWLNWfOHLW3x11XqVSizqtWW+L20dy0+us3Pj6uN954QwcPHtSTTz6p4eHhqPMv0pNl2edrtdpfYw9OEpmZfSvFXElas2aNtmzZojlz5qRagWmgo6NDCxcu1MKFC7Vx40bt3LlTO3bs0MTERIp1QdL3JW2NPTj6R+iurq4rdPYBdFGVSiXdf//92r59O/Eiqo6ODm3atEn9/f266qqrUq1Zm2Jo9IDPPfo1+tMj77vvPt1xxx2xxwLvy7JM/f39mjVrVorxXeVyeV7soSl+iZXFHrhmzRqtX78+9ljgA5YuXapt27YphOh/+QkhhK/FHho94HMPXY+mo6NDW7ZsiTkS+FA9PT1auzb+J95SqdQVfWbsgTr7HxOi6e3t5Tsvcrd58+YUH6WXxR6YIuDPxBy2evXqmOOAKbn22mt1++23R51pZtFvbkgR8JUxhy1ZsiTmOGDKent7Y4+MfldeioCj/h5+9uzZMccBU7Z48eLYI6+JPTDFhRxR/4QU+wqrqZpuV07Fdim8fgm+A0d/qAX/HxhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCsmH/99zFUKpWijwC0LN6BAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAccIGHCMgAHHCBhwjIABxwgYcIyAAcda/plY1Wq16CNgGmv1Z7LxDgw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDhGwIBjBAw4RsCAYwQMOEbAgGMEDDiWIuCxmMPOnDkTcxwwZY1GI/bIqG1IaQJ+N+aw48ePxxwHTNnIyEjskf+KPbDlA3722WdjjgOm7NixY7FHugj4tZjD9uzZo1OnTsUcCUzJ/v37o84LIbwVdaDSBPxKzGGjo6Pq7++PORL4SMPDw9q3b1/UmWb2l6gDlSDgEMJQ7Jm7d+/WgQMHYo8F/qe+vj6Nj4/HHtv6Abe1tb0gyWLONDM98MADKb6TAB+wa9cuPf/889HnlkqlavSZsQcePnz4TUl/ij13dHRUd999t6rV6K8B8L5du3apr68vxeix9vb2l2IPbYs9UJLmzp07P4RwU+y54+Pj2rt3r8xMy5YtU1tbkuNjGhoeHtaDDz6oxx57TGZRP0Ce9+LLL7/8SOyhIfZASVqxYsUXQgivppovSZ2dnVq3bp1uvPFGXXfddbrssstSrcIlqNFoaGRkRMeOHdP+/fu1b9++FN95L/SjWq32cOyhyQLLsmyfpNWp5gOONJrN5vzBwcHoV4YkuxbazJJ8kQC8MbO9KeKVEgZcr9f3hBD4jRMg/SLV4KR3I5nZT1LOB1qdmR2o1+sHU81PGnCtVnsmhPB0yh1ACzMz25pyQfL7gUMIWySNpt4DtBoze3RwcPCPKXckD3hgYOA1Sfek3gO0mFMzZsy4N/WSXK6EOHnyZHXevHlLJX0xj31A0cxsYzWHywZze6TO5OTkXZK4mBmXPDP7db1efyqPXbkFfOTIkXcmJye/IWk4r51A3szsubGxsdy+Mub6ULsjR478TdJtkt7Ocy+Qk9rll1++7ujRo0mvybxQskspP8zKlSuXN5vN5yR9uoj9QAL1RqNx69DQ0N/zXFrIY2UHBgaOlEqlVYr8+B2gCGb23MyZM3vyjlcq6B34vCzLZpvZEyGEVUWeA/gEHj5z5syP8/zYfKFCb6g9efLk6KJFix4dGxtrhhBuKPo8wMdwysw21uv1vpGRkcmiDlHoO/CFyuVypVQqPSLpy0WfBfgQZmaPzpgx497Dhw8X/heVlglYkjZs2ND2+uuv/8DMtkmaV/R5gAuZ2QEz25r68siPo6UCPi/LslkhhO+Z2WZJXyr6PJjWGma2N4Tw81qt9mLRh7lYSwZ8oZUrV64ysw1m9k1Jny36PJgWxiQdkvRUs9nclepm/BhaPuALrVixoqtUKlXMrEtSl6S5kq459zOz0MPBm3FJpyW9E0IYlvRnM3u1VCpV29vbXzp06NB/Cj4fAAAAAAAAAAAAAAAAACAX/wWVPWOuMBKlEAAAAABJRU5ErkJggg==",alt:"Calendar",className:"w-6 h-6"}),(0,mr.jsxs)("div",{className:"flex flex-col",children:[(0,mr.jsx)("span",{className:"text-xs ".concat("day"===ue?"text-white":"text-gray-500"),children:"Daily"}),(0,mr.jsxs)("span",{className:"text-lg font-bold ".concat("day"===ue?"text-white":"text-gray-900"),children:["\u20b9",Ne.price,"/day"]})]})]}),(0,mr.jsxs)("div",{onClick:()=>de("hour"),className:"flex items-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all ".concat("hour"===ue?"border-transparent bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white":"border-gray-300 bg-white hover:border-blue-300"),children:[(0,mr.jsx)("img",{src:"data:image/png;base64,UklGRugFAABXRUJQVlA4INwFAADwJQCdASq0ALQAPp1Oo0wlpKMiI5MJwLATiWlu3WBpBOP7l2sf7ThdspE+0/r30gfF3eXtc7p2AD8t/tPbHegvGT3lNAD88f8z+te6n/Jf+D/F+cT81/x/7MfAN/NP7l1ef279h39dR1JQR8C4TijRXBkWsp/O/t3UiqHLdcNFgxbLjVwE+w3aWn9WUx/JH2luGj8X0isvcwfRdw8Boy+nYgXxqzPbyHhHQdRMVw+v2XP7im7H2iyQYyAKs4gkpLK3/gl3eg8mNgqmdAdQ97l4qcb1O+Qxn7QsRA8RNKpSCmqnrNaFDfUHyv/ifYm1cLU0nhnJXb5H9N3FLl3tdJgip7wJYsG0/iDnVKQqJeZOUlUls0mXpvYx59T/KY1lPMVCuDIsHoQ0KOaCUEfAuE4o0VwZFrKggAAA/vikAABeXrVYf6BCkDnPYdxu3UXxeNPeEnX2mXRR9+kFyFJ9Hs/uUAA5mR4qzlixHvm8XZqKsZbGyyLSWs/T1e+fIMlRmkAetNezTHBT9g9DlKtpNKaB+RcisAJns9EFt5uAOUOzEZzZ1amwKzC3RM7UtFkSKHUFULNO85J3bVt6RT4Q1Ag/jhf1CTjxcObBJi/fyo8NXOlBo6+0GfaNX4N1Ig9H9JhP9QMDcqga3oZuzFGeBHWykxfGr2nq/0pBfAD8ANDOnD9y+0IqDuQVBmvwVM0oAV3L4iqJjWb1Z0HhTitDBaooXpZaoJw1R1dRane24qPFMTMhQsaFKnjsFhIDCGKnkd+ks9W111jZwVHXC8A75b6Frf7AsszaxtRXJ5EF12Zn6hiIOciJO44hpp9izBdlW/WGXMzpa51MiSy/0mgPxyIk8WTzMDplGWqPSvGTpzTAybJJUxbAY/uAmQnlvJx6fiiwL5WImkdXRFMXJxnjZXIynEYADUushNsFQxLdhgmoK4oeUxFF+hKGKqQb0QETqrBJdNsXgjAC+q0xzolRhmDhNrQkvtpUV+bz2jkXOPvOF8u6v9OGiMSv5q76WLj9YTpXpYo51/+4egIHt9B48ukqeciMLfWeNKDcQIGp1OBEzhz91vULCuAnsPcY4v6XjYW3vN+cbUzhCFiWf9NBzeky1tbPIylWMpGise20QXFEn1S0fbyUkbLyYsvA6qvaOUeOe7YQd7xVQeBAOhzhGtBNKuVAKtC0ZsZEzLevv1FY6y+4wea7t619QjpGUCmqU/6899Qpijr4z0QvPW4jwonQngNazURh6Dl3TPGpIo4GHrL2qx4E7IYyByKpdVp6unIHlwDh5GmiVuWnuOstdflgRMqtBbbv5VoWEpzfB9mIlI4ZUkAm9sLUU8vTVxOo1SgBtFdgRxPDZEbn77sE5XRvX3lUihWP6vzgWEeWcQHux5w+z+g0BSP/Xdie4xBGhxxog3lwKhyg7FL+l9tKRm2FLXmH/CXxh8C53AG6i2dQPN2AnugisNmL2vPP30ubI2yzaBB5ASuEUc+IwXXnXfQYgLMS+qWJcuU41MTWyP65Pwyrv6KjhPnXsxHo9pEJxIOyzLqUkj6X6y6vsx4UoCxUX8jAL/UbmsvVu6u3g0sajoF4DUSltUJG7vboS+fWdeiyB+Uf5ee2ufdm+LshDOfT2KY/dd782+Svk+iTABmpze2aPeXgtJDHoqJjptujcOKHg4SSww1ToUKPsC+IlHrrSv9IGjC+JvdRAAKp2nIBLGKvYUen1tmO6bghiGpnTsv1kqRxVvT1+b9PBT1M2HVZljIJl/2c8TwD/Y9VMNJRIEsRcCADIuQvwyOiyaPbR8sSHqkNETcrvvCGhu7cqTFUlAkfu343Q2/zUUwtvzcKXwvN17ScZ+zpNyXPYIQmkbFA4R3RAX90KEB+tQjcebBENK2grdFf4qtGe+4HWC9f5ltLskArnzA1ctvGQPxoG74ZhHayRvBf3KIlHZsAER+AQlEs+Ic8MnoidUXGxb3KvhdZ01u1JsrclYFPCmuB6ZVtPnyCQzx8U2wAAAA=",alt:"Clock",className:"w-6 h-6"}),(0,mr.jsxs)("div",{className:"flex flex-col",children:[(0,mr.jsx)("span",{className:"text-xs ".concat("hour"===ue?"text-white":"text-gray-500"),children:"Hourly"}),(0,mr.jsxs)("span",{className:"text-lg font-bold ".concat("hour"===ue?"text-white":"text-gray-900"),children:["\u20b9",Ne.price,"/hr"]})]})]})]}),(0,mr.jsxs)("div",{className:"flex items-center justify-between bg-white border-2 border-gray-200 rounded-lg p-4 mb-6",children:[(0,mr.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,mr.jsx)("div",{className:"w-[50px] h-[50px] flex items-center justify-center",children:(0,mr.jsx)("img",{src:yo,alt:"Transmission",className:"w-full h-full object-contain"})}),(0,mr.jsx)("span",{className:"text-sm text-gray-700",children:Ne.transmission})]}),(0,mr.jsx)("div",{className:"w-px h-16 bg-gray-300"}),(0,mr.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,mr.jsx)("div",{className:"w-[50px] h-[50px] flex items-center justify-center",children:(0,mr.jsx)("img",{src:vo,alt:"Seats",className:"w-full h-full object-contain"})}),(0,mr.jsxs)("span",{className:"text-sm text-gray-700",children:[Ne.seats," Seaters"]})]}),(0,mr.jsx)("div",{className:"w-px h-16 bg-gray-300"}),(0,mr.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,mr.jsx)("div",{className:"w-[50px] h-[50px] flex items-center justify-center",children:(0,mr.jsx)("img",{src:xo,alt:"Fuel",className:"w-full h-full object-contain"})}),(0,mr.jsx)("span",{className:"text-sm text-gray-700",children:Ne.fuel})]}),(0,mr.jsx)("div",{className:"w-px h-16 bg-gray-300"}),(0,mr.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,mr.jsx)("div",{className:"w-[50px] h-[50px] flex items-center justify-center",children:(0,mr.jsx)("img",{src:Yo,alt:"Location",className:"w-full h-full object-contain"})}),(0,mr.jsx)("span",{className:"text-sm text-gray-700",children:Ne.location})]})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("h3",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Description"}),(0,mr.jsx)("div",{className:"w-full min-h-[35px] border border-gray-300 rounded-lg p-3 text-sm text-gray-700",children:(null===h||void 0===h?void 0:h.description)||"Very good vehicle with excellent condition and comfortable seating."})]}),le&&(0,mr.jsx)("div",{className:"mb-4 p-4 rounded-lg border-2 flex items-center gap-3 animate-pulse ".concat("confirmed"===ie?"bg-green-50 border-green-400":"bg-red-50 border-red-400"),children:"confirmed"===ie?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(Ua,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"font-bold text-green-800",children:le}),(0,mr.jsx)("p",{className:"text-sm text-green-600",children:"You can now contact the owner"})]})]}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(Va,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"font-bold text-red-800",children:le}),(0,mr.jsx)("p",{className:"text-sm text-red-600",children:"Please try another vehicle"})]})]})}),oe&&!le&&(0,mr.jsxs)("div",{className:"mb-4 p-4 rounded-lg border-2 border-blue-400 bg-blue-50 flex items-center gap-3",children:[(0,mr.jsx)(Ha,{className:"w-6 h-6 text-blue-600 animate-spin flex-shrink-0"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"font-bold text-blue-800",children:"Waiting for owner's response..."}),(0,mr.jsx)("p",{className:"text-sm text-blue-600",children:"The owner will be notified shortly"})]})]}),b?(0,mr.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 p-4 rounded-lg",children:[(0,mr.jsx)("img",{src:"https://ui-avatars.com/api/?name=Manoj+Kumar&background=6B7280&color=fff&size=48",alt:"Manoj Kumar",className:"w-12 h-12 rounded-full"}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("h4",{className:"font-semibold text-gray-900",children:"Manoj Kumar"}),(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Vehicle Owner"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-2 bg-orange-50 border border-orange-200 rounded-lg p-3",children:[(0,mr.jsx)("svg",{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,mr.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,mr.jsx)("p",{className:"text-sm text-orange-700 flex-1",children:"Please call the owner to discuss booking details and confirm availability."})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:()=>I(!0),className:"flex-1 flex items-center justify-center gap-2 bg-white border-2 border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-lg hover:bg-gray-50 transition",children:"\ud83d\udcac Chat"}),(0,mr.jsx)("button",{onClick:()=>{console.log("\ud83d\udcde Customer calling owner..."),console.log("\ud83c\udf89 Call initiated - Opening success modal"),setTimeout(()=>{je()},1e3)},className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition shadow-md",children:"\ud83d\udcde Call Owner"})]})]}):(0,mr.jsx)("button",{onClick:()=>x(!0),disabled:M||"rejected"===ie,className:"w-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-3 px-6 rounded-lg\n                        font-semibold hover:opacity-90 transition-all shadow-md\n                        disabled:opacity-50 disabled:cursor-not-allowed mb-6",children:M?"Processing...":"rejected"===ie?"Booking Rejected":"Book Now"}),v&&(0,mr.jsx)(pc,{isOpen:v,onClose:()=>x(!1),userRole:"customer",VechileId:(null===Ne||void 0===Ne?void 0:Ne.id)||i||"",vechileType:we(null===Ne||void 0===Ne?void 0:Ne.type),userId:localStorage.getItem("userId")||ge,ownerId:(null===h||void 0===h?void 0:h.ownerId)||(null===h||void 0===h?void 0:h.userId)||"",pricePerDay:parseInt((null===Ne||void 0===Ne?void 0:Ne.price)||"0"),vehicleName:(null===Ne||void 0===Ne?void 0:Ne.name)||"Vehicle",latitude:localStorage.getItem("latitude"),longitude:localStorage.getItem("longitude"),onBookingComplete:e=>{console.log("Booking completed!",e),x(!1),lc.success("Booking confirmed!")}})]}),(0,mr.jsxs)("div",{className:"lg:col-span-1",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mr.jsx)("h3",{className:"text-3xl font-bold",children:"Rating & Reviews"}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(q||X)&&(0,mr.jsx)(za,{className:"w-4 h-4 animate-spin text-blue-500"}),(0,mr.jsx)("button",{onClick:()=>{i&&(console.log("\ud83d\udd04 Manual refresh triggered"),be(i,!1),xe(i,!1))},disabled:q||X,className:"p-2 hover:bg-gray-100 rounded-lg transition disabled:opacity-50",title:"Refresh reviews",children:(0,mr.jsx)(qa,{className:"w-4 h-4 text-gray-600 ".concat(q||X?"animate-spin":"")})})]})]}),V.length>0&&(0,mr.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"text-xs text-green-700 font-medium",children:"\u2713 Live reviews from API"}),(0,mr.jsxs)("span",{className:"text-xs text-gray-500",children:["(Updated ",new Date(Z).toLocaleTimeString(),")"]})]}),sessionStorage.getItem("editingReviewId")&&!q&&(0,mr.jsx)("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2 animate-pulse",children:(0,mr.jsx)("span",{className:"text-xs text-blue-700 font-medium",children:"\ud83d\udd04 Refreshing to show your updated review..."})}),(0,mr.jsxs)("div",{className:"flex items-center mt-2 mb-2 justify-between bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-xl border border-yellow-200",children:[(0,mr.jsxs)("div",{className:"flex flex-col",children:[(0,mr.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:Ie}),(0,mr.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"out of 5"})]}),(0,mr.jsxs)("div",{className:"flex flex-col items-end",children:[(0,mr.jsx)("div",{className:"flex gap-1",children:[...Array(5)].map((e,t)=>(0,mr.jsx)(ma,{className:t<Math.floor(Ie)?"text-yellow-400 fill-yellow-400":"text-gray-300",size:20},t))}),(0,mr.jsxs)("span",{className:"text-sm text-gray-600 mt-1",children:[Pe," Review",1!==Pe?"s":""]})]})]}),(0,mr.jsxs)("div",{className:"mt-4 space-y-2 bg-white p-4 rounded-lg border",children:[(0,mr.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Rating Breakdown"}),Re.map(e=>(0,mr.jsxs)("div",{className:"flex items-center text-sm",children:[(0,mr.jsxs)("span",{className:"w-8 text-gray-700 font-medium",children:[e.stars,(0,mr.jsx)("span",{className:"text-yellow-400 text-xl",children:"\u2605"})]}),(0,mr.jsx)("div",{className:"flex-1 bg-gray-200 h-3 rounded-full mx-3 overflow-hidden",children:(0,mr.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 h-3 rounded-full transition-all duration-500",style:{width:"".concat(e.percentage,"%")}})}),(0,mr.jsxs)("span",{className:"text-gray-500 text-xs min-w-[45px] text-right",children:[e.count," (",e.percentage,"%)"]})]},e.stars))]}),(0,mr.jsxs)("div",{className:"mt-6 space-y-3 max-h-[500px] overflow-y-auto pr-2",children:[(0,mr.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 sticky top-0 bg-white py-2 z-10",children:["Customer Reviews (",Pe,")"]}),Te.length>0?Te.map((e,n)=>{const r=(e=>{const t=fe();return e.userId===t})(e),o=sessionStorage.getItem("editingReviewId")===e._id,a=ne===e._id;return(0,mr.jsxs)("div",{className:"border rounded-xl p-4 transition-all duration-500 relative ".concat(o?"border-green-400 bg-gradient-to-br from-green-50 to-emerald-50 shadow-2xl ring-2 ring-green-400 ring-offset-2":r?"border-blue-200 bg-blue-50 hover:shadow-md":"border-gray-200 bg-white hover:shadow-md"),children:[o&&(0,mr.jsx)("div",{className:"absolute -top-3 -right-3 z-20 animate-bounce",children:(0,mr.jsxs)("div",{className:"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 text-white text-xs px-4 py-2 rounded-full font-bold shadow-xl flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"text-lg animate-spin",children:"\u2728"}),(0,mr.jsx)("span",{className:"font-extrabold",children:"JUST UPDATED!"})]})}),(0,mr.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,mr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm ".concat(o?"bg-gradient-to-br from-green-400 to-emerald-500 ring-2 ring-green-300":"bg-gradient-to-br from-blue-400 to-purple-400"),children:(e.userName||"User ".concat(n+1)).charAt(0).toUpperCase()}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"font-semibold text-gray-900 text-sm ".concat(o?"text-green-800":""),children:e.userName||"User ".concat(n+1)}),r&&(0,mr.jsx)("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full font-medium",children:"You"}),o&&(0,mr.jsx)("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full font-medium animate-pulse",children:"Updated"})]}),e.createdAt&&(0,mr.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"flex px-2 py-1 rounded-lg border ".concat(o?"bg-green-100 border-green-300 ring-2 ring-green-200":"bg-yellow-50 border-yellow-200"),children:[...Array(5)].map((t,n)=>(0,mr.jsx)(ma,{size:14,className:n<e.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"},n))}),(0,mr.jsxs)("div",{className:"relative",onClick:e=>e.stopPropagation(),children:[(0,mr.jsx)("button",{onClick:t=>{return n=e._id,t.stopPropagation(),void re(ne===n?null:n);var n},className:"p-1.5 rounded-full transition-all duration-200 ".concat(a?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"),"aria-label":"Review options",title:r?"Edit or delete review":"Review options",children:(0,mr.jsx)(Wa,{size:18})}),a&&(0,mr.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border-2 border-gray-200 z-30 overflow-hidden",onClick:e=>e.stopPropagation(),children:r?(0,mr.jsxs)("div",{className:"py-1",children:[(0,mr.jsxs)("button",{onClick:n=>{n.stopPropagation(),(e=>{console.log("\u270f\ufe0f Navigating to feedback page for review:",e._id);const n=s||(h?{name:h.CarName||"Unknown Vehicle"}:null);sessionStorage.setItem("editingReviewId",e._id),sessionStorage.setItem("returnToVehicleId",i||""),t("/feedback?vehicleId=".concat(i,"&vehicleName=").concat(encodeURIComponent((null===n||void 0===n?void 0:n.name)||""),"&reviewId=").concat(e._id)),re(null)})(e)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-blue-50 transition-colors group",children:[(0,mr.jsx)(Ka,{size:16,className:"text-blue-600 group-hover:scale-110 transition-transform"}),(0,mr.jsx)("span",{className:"font-medium text-gray-700 group-hover:text-blue-700",children:"Edit Review"})]}),(0,mr.jsx)("div",{className:"border-t border-gray-100"}),(0,mr.jsxs)("button",{onClick:t=>(async(e,t)=>{if(t.stopPropagation(),window.confirm("Are you sure you want to delete this review?")){te(!0),re(null);try{console.log("\ud83d\uddd1\ufe0f Deleting review:",e),await ho.review.deleteReview(e),lc.success("\u2705 Review deleted successfully",{duration:2e3,position:"top-right"}),i&&setTimeout(()=>{be(i,!1),xe(i,!1)},500)}catch(n){console.error("\u274c Error deleting review:",n),lc.error("Error: ".concat(n.message),{duration:3e3,position:"top-right"})}finally{te(!1)}}})(e._id,t),className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors group",children:[(0,mr.jsx)(Ga,{size:16,className:"group-hover:scale-110 transition-transform"}),(0,mr.jsx)("span",{className:"font-medium group-hover:text-red-700",children:"Delete Review"})]})]}):(0,mr.jsx)("div",{className:"py-3 px-4",children:(0,mr.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"You can only edit your own reviews"})})})]})]})]}),(0,mr.jsx)("p",{className:"text-sm leading-relaxed mt-2 mb-3 ".concat(o?"text-gray-900 font-medium":"text-gray-700"),children:e.review||e.reviewText||e.comment||e.feedback||"No comment provided"}),o&&(0,mr.jsxs)("div",{className:"mt-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 border-2 border-green-400 rounded-lg shadow-inner",children:[(0,mr.jsxs)("p",{className:"text-xs font-bold text-green-800 mb-2 flex items-center gap-1",children:[(0,mr.jsx)("span",{className:"text-base",children:"\u2705"}),(0,mr.jsx)("span",{children:"Review Successfully Updated!"})]}),(0,mr.jsxs)("div",{className:"space-y-1 text-xs text-green-700",children:[(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"New Rating:"})," ",e.rating," \u2b50"]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"New Review:"})," ",e.review||e.reviewText||"No comment"]}),(0,mr.jsxs)("p",{children:[(0,mr.jsx)("strong",{children:"Time:"})," ",(new Date).toLocaleTimeString()]})]})]})]},e._id||n)}):(0,mr.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[(0,mr.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udcdd"}),(0,mr.jsx)("p",{className:"text-gray-500 font-medium mb-1",children:"No reviews yet"}),(0,mr.jsx)("p",{className:"text-gray-400 text-sm",children:"Be the first to review this vehicle!"})]})]})]}),k&&(0,mr.jsx)(Za,{isOpen:k,bookingId:D||void 0,bookingStatus:le||"Waiting for owner response...",timer:A,onClose:()=>{console.log("\u274c WaitingPopup closed manually"),N(!1),C(180)},onTimerComplete:_e,onTimeout:()=>{console.log("\u23f0 WaitingPopup timeout"),N(!1),ae(!1),lc.error("Request timed out. Please try again.",{duration:5e3,position:"top-center"})}}),_&&D&&(0,mr.jsx)(Ya,{bookingId:D,onAccept:()=>{console.log("\u2705 Booking accepted by owner!"),j(!1),se("confirmed"),N(!1),ce("\u2705 Owner accepted your booking!"),lc.success("\ud83c\udf89 Booking Confirmed by Owner!",{duration:5e3,position:"top-center"}),setTimeout(()=>{w(!0),ce("")},2e3)},onReject:e=>{console.log("\u274c Booking rejected by owner. Reason:",e),j(!1),se("rejected"),N(!1),ce("\u274c Owner rejected your booking"),lc.error("Booking rejected".concat(e?": ".concat(e):""),{duration:5e3,position:"top-center"}),setTimeout(()=>{ce(""),L(null),R(null)},3e3)},onClose:()=>{console.log("\u274c Acceptance modal closed"),j(!1)}}),S&&(0,mr.jsx)(Ja,{isOpen:S,onClose:()=>E(!1),onReject:async e=>{console.log("\u274c Rejecting booking with reason:",e);try{D&&(se("rejected"),E(!1),N(!1),ce("\u274c Booking rejected"),lc.error("Booking rejected: ".concat(e),{duration:5e3,position:"top-center"}),setTimeout(()=>{ce(""),L(null),R(null)},3e3))}catch(t){console.error("\u274c Error rejecting booking:",t),lc.error("Failed to reject booking")}}}),z&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mr.jsx)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-fadeIn",children:(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsxs)("div",{className:"mb-6 relative",children:[(0,mr.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full mx-auto flex items-center justify-center animate-bounce",children:(0,mr.jsx)(Ua,{className:"w-12 h-12 text-green-500"})}),(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,mr.jsx)("div",{className:"w-20 h-20 border-4 border-green-500 rounded-full animate-ping opacity-20"})})]}),(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Confirmed! \ud83c\udf89"}),(0,mr.jsx)("p",{className:"text-gray-600 mb-6",children:"Your call with the owner was successful. Your booking has been confirmed!"}),P&&Ne&&(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-center",children:"Booking Summary"}),(0,mr.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,mr.jsxs)("div",{className:"flex justify-between",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Vehicle:"}),(0,mr.jsx)("span",{className:"font-medium text-gray-900",children:Ne.name})]}),(0,mr.jsxs)("div",{className:"flex justify-between",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"From:"}),(0,mr.jsxs)("span",{className:"font-medium text-gray-900",children:[new Date(P.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," at ",P.startTime]})]}),(0,mr.jsxs)("div",{className:"flex justify-between",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"To:"}),(0,mr.jsxs)("span",{className:"font-medium text-gray-900",children:[new Date(P.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," at ",P.endTime]})]}),(0,mr.jsxs)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[(0,mr.jsxs)("div",{className:"flex justify-between",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Total Duration:"}),(0,mr.jsxs)("span",{className:"font-medium text-gray-900",children:[ke(P.startDate,P.endDate,P.startTime,P.endTime)," hours"]})]}),(0,mr.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Price per hour:"}),(0,mr.jsxs)("span",{className:"font-medium text-gray-900",children:["\u20b9",Ne.price]})]}),(0,mr.jsxs)("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-300",children:[(0,mr.jsx)("span",{className:"font-semibold text-gray-900",children:"Total Price:"}),(0,mr.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:["\u20b9",ke(P.startDate,P.endDate,P.startTime,P.endTime)*parseInt(Ne.price)]})]})]})]})]}),D&&(0,mr.jsxs)("div",{className:"mb-6 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,mr.jsx)("p",{className:"text-xs text-blue-600 mb-1",children:"Booking ID"}),(0,mr.jsx)("p",{className:"text-sm font-mono font-semibold text-blue-900",children:D})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:()=>{U(!1),t("/mybookings")},className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg hover:opacity-90 transition shadow-md",children:"View My Bookings"}),(0,mr.jsx)("button",{onClick:()=>{U(!1),t("/rental")},className:"flex-1 bg-white border-2 border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-lg hover:bg-gray-50 transition",children:"Back to Home"})]})]})})}),(M||ee)&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-2xl",children:[(0,mr.jsx)(za,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,mr.jsx)("p",{className:"text-gray-700 font-semibold",children:M?"Processing your booking...":"Deleting review..."})]})})]})},fc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAYAAAAc0MJxAAAGbElEQVR4Aezaj5UbNRAG8IUGgAoIHUAFhAoSKoBUAFQAVABUQKggUAFQAVABUAFQAcxvn5Wn1Um21l47e5zu7Vj/Z775NNLK8r0+jb8uBgZRXTRN0yBqENXJQGe3EVGDqE4GOruNiBpEdTLQ2e3WEfVm4HoU8m7I44N8HGlNUnuZGksHXTH0Ns81ieLgp+HGtyG/hPx1kN8jVf4xUqK9JtpqYiwd9P0bOuT1exH5L0KehmxO4tZEIYfTnAD+qwAtWkTB5uBDt0d0sYugz6MCYewj1ERpj+rLnq2IQgRiCGKuRcoab2EyUSLO5F1E2BZEfRToEWRWI7vLx+TBKOrOAngpUQw/D8vHIujvaP855LuDfBlpKd9EXWrvSelL8meM7XgmEWVZnjWhlxIltKfKH3KQ8U60vRUCnFklNtxS7CXaeoW+JAh4LWy8F/JhCKIjaT6W4bGJrQ68hChOAVkq/jUqgEbGH5G/1cPu92EMLhOkHMU7D8z63Gk4VnEJUd4wpW7EfBCV0khe2cO+yWpF15O1yM4lStibmdIekiy7sv5VlS3pWmTBT7pxnUtULXTtSWay2/gNOpo0+1bNVG1F1PrNdecQJZIcCWYFhw8EefsdirtKYDOJJSgR1b2pn0OUTbo0ahMFqKzfS/nrACK6Ilk8luaiolU4h6j3K8qcgyrVu6lCUg3jJ4GwK6rWEmVvsvRC/8vnh8jtOZoC3vyIqjmTfSDJoTmrqmfXEmUGSk173ZtKnKLKpJb15X5bts/lNUTZ/HzRnAcePkSS/elQ3H1Siyp+kaPg1xBl2ZXKfiorblTmGKd9d/Nll/hqAmO5NeSQ4K2dq2orJR/X/bse47UQbZ18F0Y2LCDCXRNiOGd/QRrRhiz3UMfOSLXlR4/9qgm1N6KAKpVYdmaorL9GmRMvQjEi5CPbfLQ7wriHMsFlR5FY1ikfPSqURLkNSNerQGGakpTKJ7kVSeyJoBKDzdlVi6gWJSZO3yRIMk6a6qTG1bALBiSLTmQiGhc4WSw9QBKrlAtle4BQV2YkFwDz8rXygOYvEY46absh4BScsCs/CxA5YXDzIaoXj/GLiiggybJFLtKMjeoJJ4/ziGJsqvxRUKmeckDTlf6ABTSpZ9OtgKWFsFSfUkcV7fmGjeRch770SEthr6xTfpoTVTtx69QSoSnapGaBWK6cIGmmzTqwQLRIb9mgJ29zO1E6SSfdbLBlwstot7mLFlgT5lzvqfyTRBQjjJ0aULYnkAAS5ABFkCbsEZiDtO4TWPXakxiTS35vJIK0cZbQUdOlj+WaY4Uz+Sift/XkHyWiONkzYKs+wJoY4NlOguhc9Es25fUzjiintquniSiAr27sPhtIRNVel/fZr82xJ6K8LbxanUs2N3LPFeLkWSKKL8iyB/h5aUTYNPmyjwucPM+Jmg5/3i42y0PxwSb2bVzMBNSI8jYpiXJ2+SxGOP060Lmwd1ZRH9X36vHLsttOW03yR770BQdkdq5GFCbnxsMHVh30fP+hzKlXWHqNM0SQaC0fhuwugQ1GWDnvpG6rSf7I85GvOXh953KNqLkh+/gt8hRGUn20IdFaBsTsAFbpfNMqGJCT9hkYYW2B0PZPq7GHqNbYWj1jZgdpZqjW5xZ1tgcYkFNGyVn2tyYqB+HNaR/L626RN1G2h01tXZMoQIGW3lKuMjk9RL1xgZebhP0F9jcb2kOUnZ+sNeqY4Zv82nGX9ndzcA5eY95uGe8hisOuQdwNEccC4t7HhplEWb1Xr+sVVyHlUaOFY8t6NtmGIeFNGFMKZxJ9CB+bOHqIMhjb7piIKCGAUJ5EWb0ZRRqCjX1VAkPCmzCmFM4k+hA+NrH2EtVU8FAaBlGdMz2IGkR1MtDZbUTUIKqTgc5uqyOqU+//rtsgqnNKa0Rt/s27E8seu7k2mnHViPJF1lXv3GHlh5tPF3d7EphWujF3x8FRovRClnStuA11tbIngWmtH/ovOKhFlE5DCgYGUQUhreIgqsVMUd8i6uUmVvQ/VdzjG/NcTAsOjhFV+/e9Y0QBdO4b5pjeS9tggm2NHr53EUWpWz+vSINOid/P/ERk3B4FNkeWU35o9zMb3xd+tCIqdTIbBp0Sv5+lMXtNHVlO+aHdz2x3fDhF1J0BD7ViENWe+UXLIGpBR7swiGpzs2gZRC3oaBcGUW1uFi2DqAUd7cJ/AAAA///ljMMeAAAABklEQVQDAP36b6RJ40OLAAAAAElFTkSuQmCC",gc=n.p+"static/media/DriverLogo.b2be73915be78b92650b.png",yc=ur("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),vc=ur("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),xc=()=>{const e=ye(),t=localStorage.getItem("userId")||"",{notifications:n,unreadCount:i,isLoading:s,error:o,markAsRead:a,markAllAsRead:l,deleteNotification:c,clearAllNotifications:u,fetchNotifications:d}=rr(),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(console.log("\ud83d\udd14 Fetching notifications for user:",t),d(t))},[t,d]);const m=async()=>{t&&!h&&(p(!0),await d(t),p(!1))},f=e=>{const t="string"===typeof e?new Date(e):e,n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),i=Math.floor(r/60),s=Math.floor(i/24);return r<1?"Just now":r<60?"".concat(r," min ago"):i<24?"".concat(i," hour").concat(i>1?"s":""," ago"):"".concat(s," day").concat(s>1?"s":""," ago")};return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,mr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsx)(yc,{className:"w-6 h-6 sm:w-7 sm:h-7 text-blue-600"}),(0,mr.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Notifications"}),i>0&&(0,mr.jsx)("span",{className:"bg-red-500 text-white text-xs sm:text-sm font-semibold px-2 py-1 rounded-full",children:i})]}),(0,mr.jsxs)("div",{className:"flex gap-2",children:[(0,mr.jsxs)("button",{onClick:m,disabled:h||s,className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-gray-600 hover:text-gray-700 font-medium disabled:opacity-50",children:[(0,mr.jsx)(qa,{className:"w-3 h-3 sm:w-4 sm:h-4 ".concat(h?"animate-spin":"")}),(0,mr.jsx)("span",{className:"hidden sm:inline",children:"Refresh"})]}),n.length>0&&(0,mr.jsxs)(mr.Fragment,{children:[i>0&&(0,mr.jsxs)("button",{onClick:()=>l(t),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium",children:[(0,mr.jsx)(vc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,mr.jsx)("span",{className:"hidden sm:inline",children:"Mark all read"}),(0,mr.jsx)("span",{className:"sm:hidden",children:"Read all"})]}),(0,mr.jsxs)("button",{onClick:()=>u(t),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-red-600 hover:text-red-700 font-medium",children:[(0,mr.jsx)(Ga,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,mr.jsx)("span",{className:"hidden sm:inline",children:"Clear all"}),(0,mr.jsx)("span",{className:"sm:hidden",children:"Clear"})]})]})]})]}),(0,mr.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Stay updated with your ride completions and booking updates"}),o&&(0,mr.jsx)("div",{className:"mt-3 p-3 bg-red-50 text-red-600 rounded-lg text-sm",children:o})]}),(0,mr.jsx)("div",{className:"space-y-3 sm:space-y-4",children:s&&0===n.length?(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8 sm:p-12 text-center",children:[(0,mr.jsx)(za,{className:"w-12 h-12 sm:w-16 sm:h-16 text-blue-500 mx-auto mb-4 animate-spin"}),(0,mr.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Loading notifications..."}),(0,mr.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Please wait while we fetch your notifications"})]}):0===n.length?(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8 sm:p-12 text-center",children:[(0,mr.jsx)(yc,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),(0,mr.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"No notifications yet"}),(0,mr.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"You'll see ride completions and booking updates here"}),(0,mr.jsx)("button",{onClick:m,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition",children:"Refresh"})]}):n.map(t=>{const n=(e=>{if("booking_confirmed"===e.type)return{color:"bg-green-100 text-green-800 border-green-200",text:"Confirmed",icon:Ua};if("booking_declined"===e.type)return{color:"bg-red-100 text-red-800 border-red-200",text:"Cancelled",icon:Va};if("booking_timeout"===e.type)return{color:"bg-orange-100 text-orange-800 border-orange-200",text:"Expired",icon:Ha};if("ride_completed"===e.type)return{color:"bg-blue-100 text-blue-800 border-blue-200",text:"Completed",icon:Ua};if(e.bookingStatus)switch(e.bookingStatus){case"Pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",text:"Pending",icon:Ha};case"Confirmed":return{color:"bg-green-100 text-green-800 border-green-200",text:"Confirmed",icon:Ua};case"Rejected":return{color:"bg-red-100 text-red-800 border-red-200",text:"Rejected",icon:Va};case"Expired":return{color:"bg-orange-100 text-orange-800 border-orange-200",text:"Expired",icon:Ha};case"Completed":return{color:"bg-blue-100 text-blue-800 border-blue-200",text:"Completed",icon:Ua}}return null})(t),r=null===n||void 0===n?void 0:n.icon;return(0,mr.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-5 transition hover:shadow-md ".concat(t.read?"border border-gray-200":"border-l-4 border-blue-500"),children:(0,mr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,mr.jsx)("img",{src:fc,alt:"Vehicle Logo",className:"w-12 h-12 rounded-md object-cover flex-shrink-0"}),(0,mr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,mr.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,mr.jsx)("p",{className:"text-gray-800 font-medium",children:t.title}),n&&(0,mr.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ".concat(n.color),children:[r&&(0,mr.jsx)(r,{className:"w-3 h-3"}),n.text]})]}),(0,mr.jsx)("span",{className:"text-sm text-gray-400 whitespace-nowrap",children:f(t.timestamp)})]}),(0,mr.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:t.message}),t.vehicleName&&(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[(0,mr.jsx)("p",{className:"font-semibold text-gray-800 mb-2",children:t.vehicleName}),(t.customerName||t.fromDate||t.totalPrice)&&(0,mr.jsxs)("div",{className:"bg-white rounded-lg p-2 mb-2 border border-gray-200",children:[t.customerName&&(0,mr.jsxs)("p",{className:"text-sm",children:[(0,mr.jsx)("span",{className:"font-medium",children:"Customer:"})," ",t.customerName]}),t.fromDate&&(0,mr.jsxs)("p",{className:"text-sm",children:[(0,mr.jsx)("span",{className:"font-medium",children:"From:"})," ",t.fromDate]}),t.toDate&&(0,mr.jsxs)("p",{className:"text-sm",children:[(0,mr.jsx)("span",{className:"font-medium",children:"To:"})," ",t.toDate]}),t.totalPrice&&(0,mr.jsxs)("p",{className:"text-sm",children:[(0,mr.jsx)("span",{className:"font-medium",children:"Total:"})," \u20b9",t.totalPrice]})]}),(0,mr.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-gray-700",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:ba,alt:"Automatic",className:"w-5 h-5"}),(0,mr.jsx)("span",{children:localStorage.getItem("transmission")||"Automatic"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:gc,alt:"Driver",className:"w-5 h-5"}),(0,mr.jsx)("span",{children:localStorage.getItem("seaters")||"5 Seaters"})]}),(0,mr.jsx)("div",{className:"flex items-center gap-2",children:(0,mr.jsxs)("span",{children:["\u26fd ",localStorage.getItem("fuelType")||"Petrol"]})})]})]}),(0,mr.jsxs)("div",{className:"flex items-center justify-between gap-3 mt-4",children:[(0,mr.jsxs)("div",{className:"flex flex-wrap gap-3",children:[("ride_completed"===t.type||t.requiresFeedback||"Completed"===t.bookingStatus)&&(0,mr.jsx)("button",{onClick:()=>(t=>{a(t.id),e("/feedback?vehicleId=".concat(t.vehicleId,"&vehicleName=").concat(t.vehicleName,"&bookingId=").concat(t.bookingId))})(t),className:"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white text-sm font-semibold px-5 py-2 rounded-md hover:opacity-90 transition-all shadow-sm",children:"Give Feedback"}),("booking_confirmed"===t.type||"Confirmed"===t.bookingStatus)&&(0,mr.jsx)("button",{onClick:()=>e("/calendar"),className:"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white text-sm font-semibold px-5 py-2 rounded-md hover:opacity-90 transition-all shadow-sm",children:"View Calendar"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[!t.read&&(0,mr.jsx)("button",{onClick:()=>a(t.id),className:"text-blue-600 hover:text-blue-700 p-1",title:"Mark as read",children:(0,mr.jsx)(vc,{className:"w-5 h-5"})}),(0,mr.jsx)("button",{onClick:()=>c(t.id),className:"text-gray-400 hover:text-red-600 transition p-1",title:"Delete notification",children:(0,mr.jsx)(hr,{className:"w-5 h-5"})})]})]})]})]})},t.id)})})]})})},bc=ur("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),wc=ur("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),kc=ur("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Nc=ur("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),_c=ur("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),jc=ur("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Ac=ur("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Cc=ur("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),Sc=ur("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ec=e=>{let{icon:t,label:n,onClick:r,showDivider:i=!1}=e;return(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("button",{onClick:r,className:"w-full flex items-center justify-between px-4 py-3 hover:bg-gray-50 rounded-lg transition",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-blue-900 to-blue-400 p-2 rounded-lg text-white",children:(0,mr.jsx)(t,{className:"w-5 h-5"})}),(0,mr.jsx)("span",{className:"text-gray-800 font-medium text-sm",children:n})]}),(0,mr.jsx)("span",{className:"text-gray-400",children:">"})]}),i&&(0,mr.jsx)("hr",{className:"border-t border-gray-200 mt-1"})]})},Tc=ur("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ic=e=>{let{onClose:t}=e;const[n,i]=(0,r.useState)({name:"",phone:"",email:"",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=200&q=80",googleId:"",latitude:"",longitude:"",fcmToken:""}),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)("idle"),[u,d]=(0,r.useState)("");(0,r.useEffect)(()=>{h(),p()},[]);const h=()=>{try{const e=localStorage.getItem("userProfile");if(e){const t=JSON.parse(e);i(e=>c(c({},e),{},{name:t.name||"",phone:t.phone||"",email:t.email||"",image:t.image||e.image,googleId:t.googleId||"",latitude:t.latitude||"",longitude:t.longitude||"",fcmToken:t.fcmToken||""})),console.log("\u2705 Profile loaded from localStorage")}else{const e=localStorage.getItem("userName")||localStorage.getItem("contactName")||"",t=localStorage.getItem("contactNumber")||"",n=localStorage.getItem("userEmail")||"",r=localStorage.getItem("userId")||localStorage.getItem("googleId")||"";i(i=>c(c({},i),{},{name:e,phone:t,email:n,googleId:r}))}}catch(e){console.error("\u274c Error loading profile:",e)}},p=()=>{const e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude");e&&t?i(n=>c(c({},n),{},{latitude:e,longitude:t})):navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude.toString(),n=e.coords.longitude.toString();i(e=>c(c({},e),{},{latitude:t,longitude:n})),localStorage.setItem("latitude",t),localStorage.setItem("longitude",n)},e=>{i(e=>c(c({},e),{},{latitude:"17.512343",longitude:"78.500667"}))})},m=e=>{const{name:t,value:n}=e.target;i(e=>c(c({},e),{},{[t]:n})),l("idle"),d("")};return(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-[600px] max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,mr.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors p-1 rounded-full hover:bg-gray-100 z-10","aria-label":"Close",children:(0,mr.jsx)(hr,{size:22})}),(0,mr.jsx)("div",{className:"text-center mb-6",children:(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"})}),(0,mr.jsx)("div",{className:"flex flex-col items-center mb-6",children:(0,mr.jsxs)("div",{className:"relative group",children:[(0,mr.jsx)("img",{src:n.image,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-indigo-200 shadow-lg transition-transform group-hover:scale-105"}),(0,mr.jsxs)("label",{htmlFor:"profilePic",className:"absolute bottom-0 right-0 bg-gradient-to-r from-indigo-600 to-blue-500 rounded-full p-2.5 shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-110",children:[(0,mr.jsx)("input",{id:"profilePic",type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return d("Image size should be less than 5MB"),void l("error");if(!n.type.startsWith("image/"))return d("Please upload a valid image file"),void l("error");const e=URL.createObjectURL(n);i(t=>c(c({},t),{},{image:e})),localStorage.setItem("userProfileImage",e)}},className:"hidden",disabled:s}),(0,mr.jsxs)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})]})]})}),(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:"Full Name"}),(0,mr.jsx)("input",{type:"text",name:"name",value:n.name,onChange:m,placeholder:"Enter your full name",disabled:s,className:"w-full border-2 border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:"Phone Number"}),(0,mr.jsx)("input",{type:"tel",name:"phone",value:n.phone,onChange:m,placeholder:"+91 1234567890",disabled:s,className:"w-full border-2 border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:"Email Address"}),(0,mr.jsx)("input",{type:"email",name:"email",value:n.email,onChange:m,placeholder:"your.email@example.com",disabled:s,className:"w-full border-2 border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all disabled:bg-gray-50 disabled:cursor-not-allowed"})]}),u&&"error"===a&&(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-red-50 border-2 border-red-200 rounded-lg",children:[(0,mr.jsx)(Tc,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("p",{className:"text-sm font-bold text-red-900 mb-1",children:"Error"}),(0,mr.jsx)("p",{className:"text-xs text-red-700 whitespace-pre-wrap",children:u})]})]}),"success"===a&&(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:[(0,mr.jsx)(Ua,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm font-bold text-green-900 mb-1",children:"Success!"}),(0,mr.jsx)("p",{className:"text-xs text-green-700",children:"Profile saved successfully! Closing..."})]})]}),(0,mr.jsx)("button",{onClick:async()=>{if(!(n.name.trim()?n.phone.trim()?/^[+]?[\d\s-()]{10,}$/.test(n.phone)?n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(d("\u274c Invalid email format"),l("error"),0):(d("\u274c Email is required"),l("error"),0):(d("\u274c Invalid phone number (min 10 digits)"),l("error"),0):(d("\u274c Phone number is required"),l("error"),0):(d("\u274c Name is required"),l("error"),0)))return;o(!0),l("idle"),d("");const e=(()=>{let e=n.googleId||localStorage.getItem("googleId");return e?console.log("\u267b\ufe0f Using existing googleId:",e):(e="google_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),localStorage.setItem("googleId",e),console.log("\ud83c\udd95 Created new googleId:",e)),e})(),r=(()=>{let e=n.fcmToken||localStorage.getItem("fcmToken");return e||(e="fcm_web_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,25)),localStorage.setItem("fcmToken",e)),e})(),i=n.latitude||"17.512343",s=n.longitude||"78.500667";console.log("\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\ude80 SENDING TO BACKEND - POSTMAN FORMAT"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\nData being sent:"),console.log({googleId:e,name:n.name.trim(),mobilenumber:n.phone.trim(),latitude:i,longitude:s,email:n.email.trim(),fcmToken:r,platform:"web"});try{const a=await ho.user.register({googleId:e,name:n.name.trim(),mobilenumber:n.phone.trim(),latitude:i,longitude:s,email:n.email.trim(),fcmToken:r,platform:"web"});if(console.log("\u2705 Backend Response:",a),"User already exists"!==a.message&&"User registered successfully"!==a.message)throw new Error(a.message||"Unknown error occurred");{const a={name:n.name.trim(),phone:n.phone.trim(),email:n.email.trim(),image:n.image,googleId:e,fcmToken:r,latitude:i,longitude:s};localStorage.setItem("userProfile",JSON.stringify(a)),localStorage.setItem("userName",n.name.trim()),localStorage.setItem("userEmail",n.email.trim()),localStorage.setItem("contactNumber",n.phone.trim()),localStorage.setItem("contactName",n.name.trim()),localStorage.setItem("userId",e),localStorage.setItem("googleId",e),localStorage.setItem("fcmToken",r),localStorage.setItem("latitude",i),localStorage.setItem("longitude",s),console.log("\ud83d\udcbe Saved to localStorage"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n"),l("success"),o(!1),setTimeout(()=>{t()},2e3)}}catch(a){console.error("\u274c Error:",a),console.error("Full error object:",JSON.stringify(a,null,2)),console.error("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n");if(a.error&&"string"===typeof a.error&&a.error.includes("E11000")||a.message&&a.message.includes("E11000")||a.message&&a.message.includes("duplicate")){console.log("\u2705 User already exists in database - treating as successful update");const a={name:n.name.trim(),phone:n.phone.trim(),email:n.email.trim(),image:n.image,googleId:e,fcmToken:r,latitude:i,longitude:s};localStorage.setItem("userProfile",JSON.stringify(a)),localStorage.setItem("userName",n.name.trim()),localStorage.setItem("userEmail",n.email.trim()),localStorage.setItem("contactNumber",n.phone.trim()),localStorage.setItem("contactName",n.name.trim()),localStorage.setItem("userId",e),localStorage.setItem("googleId",e),console.log("\ud83d\udcbe Profile updated locally"),l("success"),o(!1),setTimeout(()=>{t()},2e3)}else d("Failed to save: ".concat(a.message||a.error||JSON.stringify(a))),l("error"),o(!1)}},disabled:s,className:"w-full mt-6 py-3.5 text-white font-bold rounded-lg bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(za,{className:"w-5 h-5 animate-spin"}),(0,mr.jsx)("span",{children:"Saving..."})]}):(0,mr.jsx)(mr.Fragment,{children:(0,mr.jsx)("span",{children:"Save"})})})]})]})})},Pc=Tt()(fo(e=>({currentLanguage:"en",setLanguage:t=>e({currentLanguage:t})}),{name:"language-storage"})),Rc=()=>{const e=ye(),{currentLanguage:t,setLanguage:n}=Pc(),[i,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),u=(0,r.useRef)(null),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(s(!1),a(!1),c(!1))};return(i||o||l)&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,o,l]),(0,r.useEffect)(()=>{!i&&d.current&&d.current.focus()},[i]);return(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"max-w-md mx-auto bg-white shadow-md rounded-xl mt-6 overflow-hidden",children:[(0,mr.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile"})}),(0,mr.jsxs)("div",{className:"divide-y divide-gray-100",children:[(0,mr.jsx)(Ec,{icon:bc,label:"My Profile",onClick:e=>{(e=>{e&&(d.current=e),s(!0)})(null===e||void 0===e?void 0:e.currentTarget)}}),(0,mr.jsx)(Ec,{icon:wc,label:"Change Language",onClick:()=>a(!0)}),(0,mr.jsx)(Ec,{icon:kc,label:"Download Our App",onClick:()=>{const e=navigator.userAgent||navigator.vendor;/iPad|iPhone|iPod/.test(e)?window.open("https://apps.apple.com/app/rentongo","_blank"):/android/i.test(e)?window.open("https://play.google.com/store/apps/details?id=com.rentongo","_blank"):alert("\ud83d\udcf1 Download our mobile app from:\n\n\ud83c\udf4e App Store (iOS)\n\ud83e\udd16 Google Play Store (Android)\n\nComing soon!")}}),(0,mr.jsx)("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 bg-gray-50",children:"Support & Settings"}),(0,mr.jsx)(Ec,{icon:Nc,label:"Privacy Policy",onClick:()=>e("/privacy-policy")}),(0,mr.jsx)(Ec,{icon:_c,label:"About Us",onClick:()=>e("/about-us")}),(0,mr.jsx)(Ec,{icon:jc,label:"Support",onClick:()=>e("/Support-Ticket")}),(0,mr.jsx)(Ec,{icon:Ac,label:"Help",onClick:()=>e("/help")}),(0,mr.jsx)(Ec,{icon:Cc,label:"LogOut",onClick:()=>c(!0)})]})]}),i&&(0,mr.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"profile-modal-title",className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>s(!1),"aria-hidden":"true"}),(0,mr.jsx)("div",{ref:u,className:"relative z-10 max-w-md w-full mx-auto",onClick:e=>e.stopPropagation(),children:(0,mr.jsx)(Ic,{onClose:()=>s(!1)})})]}),o&&(0,mr.jsxs)("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>a(!1),"aria-hidden":"true"}),(0,mr.jsxs)("div",{className:"relative z-10 w-full max-w-sm bg-white rounded-2xl shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)(Sc,{className:"w-6 h-6 text-blue-600"}),(0,mr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Change Language"})]}),(0,mr.jsx)("button",{onClick:()=>a(!1),className:"p-2 rounded-lg hover:bg-gray-100 transition",children:(0,mr.jsx)(hr,{className:"w-5 h-5"})})]}),(0,mr.jsx)("div",{className:"p-4 space-y-2",children:[{code:"en",name:"English"},{code:"es",name:"Espa\xf1ol"},{code:"fr",name:"Fran\xe7ais"},{code:"de",name:"Deutsch"}].map(e=>(0,mr.jsx)("button",{onClick:()=>(e=>{n(e),a(!1)})(e.code),className:"w-full text-left px-4 py-3 rounded-lg transition ".concat(t===e.code?"bg-blue-50 border-2 border-blue-500 text-blue-700 font-semibold":"bg-gray-50 border-2 border-transparent hover:bg-gray-100 text-gray-700"),children:(0,mr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mr.jsx)("span",{children:e.name}),t===e.code&&(0,mr.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,mr.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},e.code))})]})]}),l&&(0,mr.jsxs)("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>c(!1),"aria-hidden":"true"}),(0,mr.jsx)("div",{className:"relative z-10 w-full max-w-sm bg-white rounded-2xl shadow-xl",onClick:e=>e.stopPropagation(),children:(0,mr.jsxs)("div",{className:"p-6",children:[(0,mr.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Logout"}),(0,mr.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to logout?"}),(0,mr.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,mr.jsx)("button",{onClick:()=>c(!1),className:"px-6 py-2.5 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition",children:"CANCEL"}),(0,mr.jsx)("button",{onClick:()=>{c(!1),e("/")},className:"px-6 py-2.5 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition",children:"LOGOUT"})]})]})})]})]})},Dc=ur("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Lc=ur("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Mc=ur("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Oc=()=>{const e=ye(),[t,n]=(0,r.useState)({name:"",email:"",phone:"",image:"",latitude:"",longitude:"",googleId:""}),[i,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o()},[]);const o=()=>{try{const e=localStorage.getItem("userProfile");if(e){const t=JSON.parse(e);n({name:t.name||"",email:t.email||"",phone:t.phone||"",image:t.image||"",latitude:t.latitude||"",longitude:t.longitude||"",googleId:t.googleId||""})}else n({name:localStorage.getItem("userName")||localStorage.getItem("contactName")||"",email:localStorage.getItem("userEmail")||"",phone:localStorage.getItem("contactNumber")||"",image:localStorage.getItem("userProfileImage")||"",latitude:localStorage.getItem("latitude")||"",longitude:localStorage.getItem("longitude")||"",googleId:localStorage.getItem("googleId")||""})}catch(e){console.error("Error loading profile:",e)}},a=e=>{const{name:t,value:r}=e.target;n(e=>c(c({},e),{},{[t]:r}))};return(0,mr.jsx)("div",{className:"min-h-screen overflow-auto flex justify-center items-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-8",children:(0,mr.jsxs)("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-xl border border-gray-200 p-6 relative",children:[(0,mr.jsx)("button",{onClick:()=>e("/profile"),className:"absolute left-4 top-4 text-gray-500 hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:(0,mr.jsx)(Dc,{size:22})}),(0,mr.jsxs)("div",{className:"flex flex-col items-center mb-6 relative",children:[(0,mr.jsxs)("div",{className:"relative",children:[t.image?(0,mr.jsx)("img",{src:t.image,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4 border-indigo-200 shadow-lg"}):(0,mr.jsx)("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center border-4 border-indigo-200 shadow-lg",children:(0,mr.jsx)(bc,{size:48,className:"text-white"})}),(0,mr.jsxs)("label",{className:"absolute bottom-0 right-0 bg-gradient-to-r from-indigo-600 to-blue-500 rounded-full p-2.5 shadow-lg cursor-pointer hover:shadow-xl transition-all transform hover:scale-110",children:[(0,mr.jsx)(Lc,{size:16,className:"text-white"}),(0,mr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(r.size>5242880)return void alert("Image size should be less than 5MB");const e=new FileReader;e.onload=()=>{const t=e.result;n(e=>c(c({},e),{},{image:t})),localStorage.setItem("userProfileImage",t);const r=localStorage.getItem("userProfile");if(r){const e=JSON.parse(r);e.image=t,localStorage.setItem("userProfile",JSON.stringify(e))}},e.readAsDataURL(r)}},className:"hidden"})]})]}),(0,mr.jsx)("h3",{className:"mt-3 text-2xl font-bold text-gray-800",children:"My Profile"}),(0,mr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your personal information"})]}),i?(0,mr.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),t.name.trim())if(t.email.trim())if(t.phone.trim())try{const e={name:t.name.trim(),email:t.email.trim(),phone:t.phone.trim(),image:t.image,latitude:t.latitude,longitude:t.longitude,googleId:t.googleId};localStorage.setItem("userProfile",JSON.stringify(e)),localStorage.setItem("userName",t.name.trim()),localStorage.setItem("userEmail",t.email.trim()),localStorage.setItem("contactNumber",t.phone.trim()),localStorage.setItem("contactName",t.name.trim()),alert("Profile updated successfully!"),s(!1)}catch(n){console.error("Error saving profile:",n),alert("Failed to save profile. Please try again.")}else alert("Phone is required");else alert("Email is required");else alert("Name is required")},children:[(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:["Name ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"text",name:"name",value:t.name,onChange:a,placeholder:"Enter your name",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:["Email ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"email",name:"email",value:t.email,onChange:a,placeholder:"Enter your email",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"text-sm font-semibold text-gray-700 mb-1.5 block",children:["Phone ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"tel",name:"phone",value:t.phone,onChange:a,placeholder:"Enter your phone number",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"})]}),(0,mr.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,mr.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-indigo-600 to-blue-500 text-white py-3 rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-600 transition-all shadow-md hover:shadow-lg",children:"Save Changes"}),(0,mr.jsx)("button",{type:"button",onClick:()=>{s(!1),o()},className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-all",children:"Cancel"})]})]}):(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,mr.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,mr.jsx)(bc,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Name"}),(0,mr.jsx)("p",{className:"text-base text-gray-900 font-semibold",children:t.name||"Not set"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,mr.jsx)(Mc,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Email"}),(0,mr.jsx)("p",{className:"text-base text-gray-900",children:t.email||"Not set"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,mr.jsx)(xa,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Phone"}),(0,mr.jsx)("p",{className:"text-base text-gray-900",children:t.phone||"Not set"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,mr.jsx)(dr,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Location"}),(0,mr.jsx)("p",{className:"text-sm text-gray-700",children:t.latitude&&t.longitude?"".concat(parseFloat(t.latitude).toFixed(4),", ").concat(parseFloat(t.longitude).toFixed(4)):"Location not set"})]})]})]}),(0,mr.jsxs)("button",{onClick:()=>s(!0),className:"w-full bg-gradient-to-r from-indigo-600 to-blue-500 text-white py-3 rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-600 transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[(0,mr.jsx)(Lc,{size:18}),"Edit Profile"]})]}),t.googleId&&(0,mr.jsx)("div",{className:"mt-5 pt-4 border-t border-gray-200 text-center",children:(0,mr.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:["User ID: ",(0,mr.jsxs)("span",{className:"text-indigo-600",children:[t.googleId.substring(0,20),"..."]})]})})]})})},Bc=n.p+"static/media/Auto.5b3aec744ebed710213c.png",Fc=e=>{if(!e)return"Car";const t=e.toLowerCase();return t.includes("auto")?"Auto":t.includes("bike")?"Bike":"Car"},zc=()=>{const e=ye(),{bookings:t,setBookings:n}=Xa(),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)([]),g=(0,r.useRef)(!1);(0,r.useEffect)(()=>(document.body.style.overflow=u?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[u]),(0,r.useEffect)(()=>{g.current||(g.current=!0,y())},[]);const y=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||a(!0),c(!0);try{const e=localStorage.getItem("userId")||"690308d03a633b650dbc7e61";console.log("\ud83d\udd0d Fetching bookings for user:",e);const r=await ho.booking.getAllBookings(e);console.log("\ud83d\udce6 Raw API Response:",r);let i=[];if(null!==r&&void 0!==r&&r.data?i=Array.isArray(r.data)?r.data:[]:Array.isArray(r)?i=r:null!==r&&void 0!==r&&r.bookings&&(i=Array.isArray(r.bookings)?r.bookings:[]),console.log("\ud83d\udce6 Extracted bookings data:",i),i&&i.length>0){f(i);const e=i.map(e=>{const n=e.booking,r=e.vehicle,i=v(n.status);console.log("\ud83d\udd04 Status mapping:",{bookingId:n._id,originalStatus:n.status,mappedStatus:i});const s=t.find(e=>e.id===n._id);!s||"Cancelled"===s.status||"AutoCancelled"===s.status||"Cancelled"!==i&&"AutoCancelled"!==i||"Rejected"!==n.status&&"AutoCancelled"!==n.status||(p(n),d(!0));const o=(null===r||void 0===r?void 0:r.CarName)||(null===r||void 0===r?void 0:r.carName)||(null===r||void 0===r?void 0:r.bikeName)||"".concat(n.vechileType," Vehicle"),a=(null===r||void 0===r?void 0:r.carImages)&&r.carImages[0]||(null===r||void 0===r?void 0:r.bikeImages)&&r.bikeImages[0]||Bc,l=(()=>{const e=Number(n.pricePerKm)||0,t=Number(n.pricePerHour)||0,i=Number(n.pricePerDay)||0,s=Number(n.totalPrice)||0,o=Number(n.totalHours)||1,a=Number(null===r||void 0===r?void 0:r.RentPerHour)||0,l=Number(null===r||void 0===r?void 0:r.RentPerDay)||0;return e>0?e:t>0?t:i>0?i:s>0&&o>0?s/o:a>0?a:l>0?l:0})(),c=Number(n.pricePerKm)>0?"/km":Number(n.pricePerHour)>0?"/hour":Number(n.pricePerDay)>0?"/day":Number(null===r||void 0===r?void 0:r.RentPerHour)>0?"/hour":Number(null===r||void 0===r?void 0:r.RentPerDay)>0?"/day":"/hour";return{id:n._id,vehicleId:n.VechileId,vehicleName:o,vehicleImage:a,vehicleType:Fc(n.vechileType),customerName:n.contactName,contactNumber:n.contactNumber,bookingDate:x(n.createdAt||n.FromDate),bookingTime:b(n.FromTime),startDate:x(n.FromDate),startTime:b(n.FromTime),endDate:x(n.ToDate),endTime:b(n.ToTime),modelNo:n._id.slice(0,10).toUpperCase(),status:i,price:l,priceUnit:c}});console.log("\u2705 Converted bookings:",e),n(e)}else console.log("\ud83d\udced No bookings found"),n([])}catch(e){console.error("\u274c Error fetching bookings:",e),n([])}finally{a(!1),c(!1)}},v=e=>{if(!e)return"Pending";const t=e.toLowerCase();return"confirmed"===t?"Confirmed":"pending"===t?"Pending":"cancelled"===t||"rejected"===t?"Cancelled":"autocancelled"===t?"AutoCancelled":"picked"===t?"Picked":"completed"===t?"Completed":"Pending"},x=e=>{try{const t=new Date(e.trim());return isNaN(t.getTime())?e:t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return e}},b=e=>{try{const[t,n]=e.split("."),r=parseInt(t),i=n||"00",s=r>=12?"PM":"AM";return"".concat((r>12?r-12:0===r?12:r).toString().padStart(2,"0"),":").concat(i," ").concat(s)}catch(t){return e}},w=e=>{if(!e)return"bg-gray-100 text-gray-600";const t=e.toLowerCase();return"autocancelled"===t?"bg-orange-50 text-orange-700":"cancelled"===t?"bg-red-50 text-red-600":"pending"===t?"bg-amber-50 text-amber-700":"confirmed"===t?"bg-green-50 text-green-700":"picked"===t?"bg-blue-50 text-blue-700":"completed"===t?"bg-purple-50 text-purple-700":"bg-gray-100 text-gray-600"},k=i?t.filter(e=>{var t,n,r;return(null===(t=e.vehicleName)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null===(n=e.contactNumber)||void 0===n?void 0:n.includes(i))||(null===(r=e.status)||void 0===r?void 0:r.toLowerCase().includes(i.toLowerCase()))}):t;return(0,mr.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,mr.jsxs)("div",{className:"transition-all duration-300 ".concat(u?"blur-sm pointer-events-none":""),children:[(0,mr.jsx)("div",{className:"bg-white px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-gray-200",children:(0,mr.jsx)("div",{className:"max-w-[1400px] mx-auto",children:(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,mr.jsx)("h1",{className:"text-2xl sm:text-[32px] font-black text-gray-900 tracking-tight",children:"My Bookings"}),(0,mr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,mr.jsxs)("div",{className:"relative flex-1 sm:flex-initial sm:w-80",children:[(0,mr.jsx)(_r,{className:"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),(0,mr.jsx)("input",{type:"text",placeholder:"Search bookings...",value:i,onChange:e=>s(e.target.value),className:"w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-2 sm:py-2.5 bg-gray-50 rounded-[10px] border border-gray-200 text-sm text-gray-900 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("button",{onClick:()=>y(),disabled:l,className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-5 py-2 sm:py-2.5 rounded-[10px] text-xs sm:text-sm font-semibold transition-all whitespace-nowrap ".concat(l?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white"),children:[(0,mr.jsx)(qa,{size:16,className:"sm:w-[18px] sm:h-[18px] ".concat(l?"animate-spin":"")}),(0,mr.jsx)("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]})})}),(0,mr.jsxs)("div",{className:"max-w-[1000px] mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[(0,mr.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,mr.jsxs)("p",{className:"text-sm sm:text-[15px] font-medium text-gray-500",children:[k.length," Bookings"]})}),o?(0,mr.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-20",children:[(0,mr.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 border-4 border-gray-200 border-t-[#3D5AFE] rounded-full animate-spin"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-500 text-sm sm:text-base",children:"Loading bookings..."})]}):0===k.length?(0,mr.jsx)("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-8 sm:p-16 text-center",children:(0,mr.jsx)("p",{className:"text-sm sm:text-base text-gray-400",children:"No bookings found"})}):(0,mr.jsx)("div",{className:"flex flex-col gap-3 sm:gap-4",children:k.map(t=>(0,mr.jsx)("div",{onClick:()=>(t=>{if(!t.vehicleId)return void alert("Vehicle details not found.");const n=t.vehicleType.toLowerCase(),r=m.find(e=>e.booking._id===t.id),i=null===r||void 0===r?void 0:r.vehicle;e("/booking-detail/".concat(t.vehicleId),{state:{booking:t,vehicleType:n,openContact:!1,vehicleData:i||{_id:t.vehicleId,vehicleType:n,bikeName:t.vehicleName,carName:t.vehicleName,bikeImages:t.vehicleImage?[t.vehicleImage]:[],carImages:t.vehicleImage?[t.vehicleImage]:[],pricePerKm:t.price,RentPerHour:t.price}}})})(t),className:"bg-white rounded-xl sm:rounded-2xl shadow-sm border-2 border-transparent cursor-pointer transition-all duration-300 overflow-hidden hover:border-[#3D5AFE] hover:shadow-[0_4px_12px_rgba(61,90,254,0.15)]",children:(0,mr.jsx)("div",{className:"p-4 sm:p-7",children:(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[(0,mr.jsx)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:(0,mr.jsx)("div",{className:"w-full sm:w-[200px] h-[160px] sm:h-[200px] bg-gradient-to-br from-indigo-50 to-indigo-200 rounded-xl overflow-hidden flex items-center justify-center",children:t.vehicleImage&&t.vehicleImage!==Bc?(0,mr.jsx)("img",{src:t.vehicleImage,alt:t.vehicleName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='\n                                  <div class="text-center">\n                                    <div class="w-12 h-12 mx-auto mb-2 bg-white rounded-lg flex items-center justify-center">\n                                      <svg class="w-7 h-7 text-[#3D5AFE]" viewBox="0 0 24 24" fill="currentColor">\n                                        <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>\n                                      </svg>\n                                    </div>\n                                    <div class="text-xs font-semibold text-[#3D5AFE]">Rentongo</div>\n                                    <div class="text-[10px] text-indigo-400">vehicle</div>\n                                  </div>\n                                '}}):(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("div",{className:"w-12 h-12 mx-auto mb-2 bg-white rounded-lg flex items-center justify-center",children:(0,mr.jsx)("svg",{className:"w-7 h-7 text-[#3D5AFE]",viewBox:"0 0 24 24",fill:"currentColor",children:(0,mr.jsx)("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"})})}),(0,mr.jsx)("div",{className:"text-xs font-semibold text-[#3D5AFE]",children:"Rentongo"}),(0,mr.jsx)("div",{className:"text-[10px] text-indigo-400",children:"vehicle"})]})})}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsxs)("div",{className:"mb-2 sm:mb-2.5",children:[(0,mr.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1.5",children:(0,mr.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 tracking-tight",children:t.vehicleName})}),(0,mr.jsxs)("div",{className:"text-base sm:text-lg font-bold text-gray-900",children:["\u20b9",(t.price||0).toFixed(0),(0,mr.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-500",children:t.priceUnit||"/hour"})]})]}),(0,mr.jsxs)("div",{className:"flex flex-col gap-1.5 mb-2 sm:mb-2.5",children:[(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-5",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsxs)("svg",{className:"w-[13px] h-[13px] text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,mr.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10",strokeWidth:"2"})]}),(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"From:"}),(0,mr.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:t.startDate})]}),t.endDate&&(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsxs)("svg",{className:"w-[13px] h-[13px] text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,mr.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6",strokeWidth:"2"}),(0,mr.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10",strokeWidth:"2"})]}),(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"To:"}),(0,mr.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:t.endDate})]})]}),(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-5",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsxs)("svg",{className:"w-[13px] h-[13px] text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,mr.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),(0,mr.jsx)("polyline",{points:"12 6 12 12 16 14",strokeWidth:"2"})]}),(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"From:"}),(0,mr.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:t.startTime})]}),t.endTime&&(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsxs)("svg",{className:"w-[13px] h-[13px] text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,mr.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),(0,mr.jsx)("polyline",{points:"12 6 12 12 16 14",strokeWidth:"2"})]}),(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"To:"}),(0,mr.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:t.endTime})]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("svg",{className:"w-[13px] h-[13px] text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mr.jsx)("path",{strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Mobile:"}),(0,mr.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:t.contactNumber?t.contactNumber.replace(/\d(?=\d{3})/g,"X"):""})]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Status:"}),(0,mr.jsx)("span",{className:"px-2.5 sm:px-3 py-1 rounded-md text-[10px] sm:text-[11px] font-semibold ".concat(w(t.status)),children:"AutoCancelled"===t.status?"Auto Cancelled":t.status||"Pending"})]})]})]})})},t.id))})]})]}),u&&h&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,mr.jsx)("div",{className:"flex justify-center mb-4 sm:mb-6",children:(0,mr.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-red-50 rounded-full flex items-center justify-center",children:(0,mr.jsx)(hr,{size:48,className:"sm:w-[56px] sm:h-[56px] text-red-600"})})}),(0,mr.jsxs)("h2",{className:"text-2xl sm:text-[28px] font-bold text-center mb-3 sm:mb-4",children:["Booking ","AutoCancelled"===h.status?"Auto Cancelled":"Rejected"]}),(0,mr.jsx)("p",{className:"text-base sm:text-lg text-gray-600 text-center mb-4 sm:mb-6",children:"AutoCancelled"===h.status?"Your booking for the ".concat(h.vechileType," was automatically cancelled."):"The owner rejected your booking for the ".concat(h.vechileType,".")}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 text-sm text-gray-700 border border-gray-200",children:[(0,mr.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,mr.jsx)("span",{className:"font-semibold",children:"Booking ID:"}),(0,mr.jsx)("span",{className:"font-medium text-right break-all",children:h._id.slice(0,10)})]}),(0,mr.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,mr.jsx)("span",{className:"font-semibold",children:"Date:"}),(0,mr.jsx)("span",{className:"font-medium",children:x(h.FromDate)})]}),(0,mr.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,mr.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,mr.jsx)("span",{className:"font-medium",children:h.status})]}),(0,mr.jsxs)("div",{className:"flex justify-between",children:[(0,mr.jsx)("span",{className:"font-semibold",children:"Time:"}),(0,mr.jsx)("span",{className:"font-medium",children:b(h.FromTime)})]})]}),h.rejectionReason&&(0,mr.jsxs)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[(0,mr.jsx)("p",{className:"text-sm font-bold text-amber-800 mb-2",children:"Reason:"}),(0,mr.jsx)("p",{className:"text-sm text-amber-700",children:h.rejectionReason})]}),(0,mr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,mr.jsx)("button",{onClick:()=>{d(!1),p(null)},className:"w-full sm:flex-1 bg-gray-100 text-gray-700 font-bold py-3 sm:py-3.5 px-4 sm:px-6 rounded-xl hover:bg-gray-200 transition-colors text-sm sm:text-base",children:"Close"}),(0,mr.jsx)("button",{onClick:()=>{d(!1),p(null),e("/rental")},className:"w-full sm:flex-1 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white font-bold py-3 sm:py-3.5 px-4 sm:px-6 rounded-xl hover:opacity-90 transition-opacity text-sm sm:text-base",children:"Find Another Vehicle"})]})]})})]})},Uc=()=>{const e=ye();return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,mr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,mr.jsx)("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:(0,mr.jsx)(Dc,{className:"w-5 h-5"})}),(0,mr.jsx)(Nc,{className:"w-8 h-8 text-blue-600"}),(0,mr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Privacy Policy"})]}),(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sm:p-8 space-y-6",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Last updated: October 21, 2025"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"At RentOnGo Vehicle, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Information We Collect"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed mb-3",children:"We collect information that you provide directly to us, including:"}),(0,mr.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,mr.jsx)("li",{children:"Name, email address, and phone number"}),(0,mr.jsx)("li",{children:"Vehicle preferences and booking history"}),(0,mr.jsx)("li",{children:"Payment information (processed securely)"}),(0,mr.jsx)("li",{children:"Location data for nearby vehicle searches"}),(0,mr.jsx)("li",{children:"Reviews and feedback you provide"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"How We Use Your Information"}),(0,mr.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,mr.jsx)("li",{children:"To process your vehicle bookings and reservations"}),(0,mr.jsx)("li",{children:"To communicate with you about your bookings"}),(0,mr.jsx)("li",{children:"To improve our services and user experience"}),(0,mr.jsx)("li",{children:"To send you important updates and notifications"}),(0,mr.jsx)("li",{children:"To prevent fraud and ensure platform security"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Data Security"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"We implement industry-standard security measures to protect your personal information. Your data is encrypted during transmission and stored securely. We regularly review and update our security practices to maintain the highest level of protection."})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Your Rights"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed mb-3",children:"You have the right to:"}),(0,mr.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,mr.jsx)("li",{children:"Access your personal data"}),(0,mr.jsx)("li",{children:"Correct inaccurate information"}),(0,mr.jsx)("li",{children:"Request deletion of your data"}),(0,mr.jsx)("li",{children:"Opt-out of marketing communications"}),(0,mr.jsx)("li",{children:"Export your data in a portable format"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Contact Us"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"If you have any questions about this Privacy Policy or how we handle your data, please contact us at:"}),(0,mr.jsxs)("div",{className:"mt-3 p-4 bg-gray-50 rounded-lg",children:[(0,mr.jsx)("p",{className:"text-gray-900 font-semibold",children:"RentOnGo Vehicle Support"}),(0,mr.jsx)("p",{className:"text-gray-700",children:"Email: privacy@rentongo.com"}),(0,mr.jsx)("p",{className:"text-gray-700",children:"Phone: +91 1800-123-4567"})]})]})]})]})})},Vc=ur("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),Hc=ur("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),qc=ur("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Wc=()=>{const e=ye();return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,mr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,mr.jsx)("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:(0,mr.jsx)(Dc,{className:"w-5 h-5"})}),(0,mr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"About Us"})]}),(0,mr.jsxs)("div",{className:"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] rounded-xl shadow-lg p-6 sm:p-8 mb-6 text-white",children:[(0,mr.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"RentOnGo Vehicle"}),(0,mr.jsx)("p",{className:"text-lg opacity-90",children:"Your trusted partner for vehicle rentals - connecting vehicle owners with riders since 2024."})]}),(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sm:p-8 space-y-6",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Our Mission"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"At RentOnGo Vehicle, we're revolutionizing the way people access transportation. Our mission is to make vehicle rentals simple, affordable, and accessible to everyone while empowering vehicle owners to earn from their unused assets."})]}),(0,mr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4",children:[(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[(0,mr.jsx)(Vc,{className:"w-8 h-8 text-blue-600 flex-shrink-0 mt-1"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Wide Selection"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"From economy cars to luxury vehicles and autos for every need"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-lg",children:[(0,mr.jsx)(Hc,{className:"w-8 h-8 text-green-600 flex-shrink-0 mt-1"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Community Driven"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"Connecting local vehicle owners with riders in your community"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-purple-50 rounded-lg",children:[(0,mr.jsx)(qc,{className:"w-8 h-8 text-purple-600 flex-shrink-0 mt-1"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Verified Quality"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"All vehicles verified and rated by our community"})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 rounded-lg",children:[(0,mr.jsx)(dr,{className:"w-8 h-8 text-orange-600 flex-shrink-0 mt-1"}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"24/7 Service"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"Book anytime, anywhere with instant confirmation"})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Our Story"}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Founded in 2024, RentOnGo Vehicle was born from a simple observation: many vehicle owners have cars and autos sitting idle while countless people need affordable transportation. We created a platform that bridges this gap, making it easy for owners to list their vehicles and for riders to find the perfect ride."}),(0,mr.jsx)("p",{className:"text-gray-700 leading-relaxed",children:"Today, we're proud to serve thousands of users across multiple cities, facilitating thousands of rides every month. Our platform has helped vehicle owners earn extra income while providing riders with convenient, cost-effective transportation options."})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Why Choose Us?"}),(0,mr.jsxs)("ul",{className:"space-y-3",children:[(0,mr.jsxs)("li",{className:"flex items-start gap-3",children:[(0,mr.jsx)("span",{className:"text-blue-600 text-xl",children:"\u2713"}),(0,mr.jsxs)("span",{className:"text-gray-700",children:[(0,mr.jsx)("strong",{children:"Transparent Pricing:"})," No hidden fees, see exact costs upfront"]})]}),(0,mr.jsxs)("li",{className:"flex items-start gap-3",children:[(0,mr.jsx)("span",{className:"text-blue-600 text-xl",children:"\u2713"}),(0,mr.jsxs)("span",{className:"text-gray-700",children:[(0,mr.jsx)("strong",{children:"Secure Payments:"})," Protected transactions with multiple payment options"]})]}),(0,mr.jsxs)("li",{className:"flex items-start gap-3",children:[(0,mr.jsx)("span",{className:"text-blue-600 text-xl",children:"\u2713"}),(0,mr.jsxs)("span",{className:"text-gray-700",children:[(0,mr.jsx)("strong",{children:"Customer Support:"})," Dedicated support team available 24/7"]})]}),(0,mr.jsxs)("li",{className:"flex items-start gap-3",children:[(0,mr.jsx)("span",{className:"text-blue-600 text-xl",children:"\u2713"}),(0,mr.jsxs)("span",{className:"text-gray-700",children:[(0,mr.jsx)("strong",{children:"Flexible Bookings:"})," Hourly, daily, or long-term rentals available"]})]})]})]}),(0,mr.jsxs)("div",{className:"border-t pt-6",children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Get in Touch"}),(0,mr.jsx)("p",{className:"text-gray-700 mb-4",children:"Have questions or feedback? We'd love to hear from you!"}),(0,mr.jsxs)("div",{className:"space-y-2",children:[(0,mr.jsx)("p",{className:"text-gray-700",children:"\ud83d\udce7 Email: support@rentongo.com"}),(0,mr.jsx)("p",{className:"text-gray-700",children:"\ud83d\udcde Phone: +91 1800-123-4567"}),(0,mr.jsx)("p",{className:"text-gray-700",children:"\ud83d\udccd Address: Kakinada, Andhra Pradesh, India"})]})]})]})]})})},Kc=ur("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Gc=()=>{const e=ye(),[t,n]=(0,r.useState)(null);return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,mr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,mr.jsx)("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:(0,mr.jsx)(Dc,{className:"w-5 h-5"})}),(0,mr.jsx)(Ac,{className:"w-8 h-8 text-blue-600"}),(0,mr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Help & Support"})]}),(0,mr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,mr.jsxs)("a",{href:"tel:+911800123456",className:"flex items-center gap-3 p-4 bg-white rounded-xl shadow-md hover:shadow-lg transition cursor-pointer",children:[(0,mr.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,mr.jsx)(xa,{className:"w-6 h-6 text-green-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Call Us"}),(0,mr.jsx)("p",{className:"font-semibold text-gray-900",children:"1800-123-456"})]})]}),(0,mr.jsxs)("a",{href:"mailto:support@rentongo.com",className:"flex items-center gap-3 p-4 bg-white rounded-xl shadow-md hover:shadow-lg transition cursor-pointer",children:[(0,mr.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,mr.jsx)(Mc,{className:"w-6 h-6 text-blue-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Email Us"}),(0,mr.jsx)("p",{className:"font-semibold text-gray-900",children:"Support"})]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-white rounded-xl shadow-md hover:shadow-lg transition cursor-pointer",children:[(0,mr.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,mr.jsx)(va,{className:"w-6 h-6 text-purple-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"Live Chat"}),(0,mr.jsx)("p",{className:"font-semibold text-gray-900",children:"Coming Soon"})]})]})]}),(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 sm:p-8",children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),(0,mr.jsx)("div",{className:"space-y-4",children:[{question:"How do I book a vehicle?",answer:"Browse available vehicles on our Rental page, select your preferred vehicle, click 'Book Now', and follow the booking process. You can chat with the owner or call them directly to confirm your booking."},{question:"What payment methods are accepted?",answer:"We accept all major credit/debit cards, UPI, net banking, and digital wallets. All payments are processed securely through our payment gateway."},{question:"How do I list my vehicle?",answer:"Click the 'Listing +' button in the navigation bar, select whether you want to list a car or auto, fill in the vehicle details, upload photos, and submit. Your listing will be live immediately."},{question:"Can I cancel my booking?",answer:"Yes, you can cancel your booking by contacting the vehicle owner directly. Cancellation policies may vary by owner. We recommend discussing cancellation terms before confirming your booking."},{question:"How do I contact the vehicle owner?",answer:"Once you click 'Book Now' on a vehicle, you'll see chat and call options to contact the owner directly. You can discuss availability, pricing, and pickup details with them."},{question:"Are the vehicles insured?",answer:"Vehicle insurance coverage varies by owner. We recommend discussing insurance details with the owner before booking. Many owners provide basic insurance coverage."},{question:"What if I have an issue during my ride?",answer:"Contact our 24/7 support team immediately via phone or email. We're here to help resolve any issues quickly. You can also reach out to the vehicle owner directly."},{question:"How do I change my language preference?",answer:"Click the language icon (globe) in the navigation bar and select your preferred language from the dropdown menu. The app supports English, Spanish, French, and German."},{question:"How do reviews work?",answer:"After completing a ride, you'll receive a notification to give feedback. Your review helps other users make informed decisions and helps maintain quality on our platform."},{question:"What are the requirements to list a vehicle?",answer:"You need valid vehicle registration, your contact information, photos of the vehicle, and rental pricing details. Additional documents like driving license and Aadhar card may be requested."}].map((e,r)=>(0,mr.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,mr.jsxs)("button",{onClick:()=>(e=>{n(t===e?null:e)})(r),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition",children:[(0,mr.jsx)("span",{className:"font-semibold text-gray-900 pr-4",children:e.question}),t===r?(0,mr.jsx)(Kc,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}):(0,mr.jsx)(ea,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})]}),t===r&&(0,mr.jsx)("div",{className:"px-4 pb-4 text-gray-700 leading-relaxed",children:e.answer})]},r))})]}),(0,mr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mt-6",children:[(0,mr.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Still need help?"}),(0,mr.jsx)("p",{className:"text-gray-700 mb-4",children:"Our support team is available 24/7 to assist you with any questions or issues. Feel free to reach out via phone, email, or wait for our live chat feature."}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Average response time: ",(0,mr.jsx)("strong",{className:"text-gray-900",children:"Under 2 hours"})]})]})]})})},Zc=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[s,o]=(0,r.useState)(0),[a,l]=(0,r.useState)("");return t?(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,mr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Give Feedback"}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Rate your experience"}),(0,mr.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(e=>(0,mr.jsx)("button",{onClick:()=>o(e),className:"text-3xl",children:e<=s?"\u2b50":"\u2606"},e))})]}),(0,mr.jsxs)("div",{className:"mb-6",children:[(0,mr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Comments"}),(0,mr.jsx)("textarea",{value:a,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-lg p-3 h-24 resize-none",placeholder:"Share your experience..."})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:n,className:"flex-1 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-medium",children:"Cancel"}),(0,mr.jsx)("button",{onClick:()=>{i(s,a),n()},className:"flex-1 py-2.5 bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white rounded-lg font-medium",children:"Submit"})]})]})}):null},Qc=()=>{const e=ye(),[t]=Nt(),{addReview:n}=go(),{deleteNotification:i}=rr(),s=t.get("vehicleId")||"6901e279fc4e029e07c5f575",o=t.get("vehicleName")||"Vehicle",a=t.get("vehicleType")||"Car",l="6909e329d9c06ae981fa0965",[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)(0),[w,k]=(0,r.useState)(0),[N,_]=(0,r.useState)(!0);r.useEffect(()=>{s&&(async()=>{try{_(!0),console.log("\ud83d\udd0d Fetching average rating..."),console.log("\u27a1\ufe0f Vehicle ID:",s),console.log("\u27a1\ufe0f Vehicle Type:",a);const t={method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:c,feedback:d}),redirect:"follow"},n="http://3.110.122.127:3000/getAverageRating?vechileType=".concat(a,"&vechileId=").concat(s);console.log("\u27a1\ufe0f Average Rating API:",n);const r=await fetch(n,t);if(await r.json(),console.log("\ud83d\udcca Average Rating Response Status:",r.status),!r.ok)throw new Error("HTTP error! status: ".concat(r.status));const i=await r.text();console.log("\ud83d\udce6 Average Rating Raw Response:",i);try{const e=JSON.parse(i);console.log("\u2705 Parsed Average Rating:",e),void 0!==e.averageRating?(b(parseFloat(e.averageRating)||0),k(e.totalReviews||e.reviewCount||0)):void 0!==e.rating?(b(parseFloat(e.rating)||0),k(e.count||0)):(b(0),k(0))}catch(e){console.error("\u274c JSON Parse Error:",e)}}catch(t){console.error("\u274c Error fetching average rating:",t)}finally{_(!1)}})()},[s,a]),r.useEffect(()=>{(async()=>{try{console.log("\ud83d\udd0d Fetching review by ID..."),console.log("\u27a1\ufe0f Review ID:",l);const t=await fetch("http://3.110.122.127:3000/getReviewById/".concat(l),{method:"GET",redirect:"follow"});if(console.log("\ud83d\udcca API Response Status:",t.status),console.log("\ud83d\udcca API Response OK:",t.ok),!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const n=await t.text();console.log("\ud83d\udce6 Raw API Response:",n);try{const e=JSON.parse(n);console.log("\u2705 Parsed Review Data:",e),v(e),e&&e.rating&&(u(e.rating),console.log("\u2b50 Pre-filled rating:",e.rating)),e&&e.review&&(h(e.review),console.log("\ud83d\udcac Pre-filled feedback:",e.review))}catch(e){console.log("\ud83d\udcc4 Response is not JSON:",n),console.log("\u26a0\ufe0f Parse Error:",e.message)}}catch(t){console.error("\u274c Error fetching review:",t),console.error("\u274c Error message:",t.message),console.error("\u274c Error stack:",t.stack)}})()},[l]);return(0,mr.jsxs)("div",{className:"max-w-2xl mx-auto mt-10 px-4",children:[(0,mr.jsxs)("div",{className:"bg-white shadow-md rounded-xl p-4 sm:p-6 relative",children:[(0,mr.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:(0,mr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Current Average Rating"}),N?(0,mr.jsxs)("div",{className:"animate-pulse",children:[(0,mr.jsx)("div",{className:"h-6 bg-gray-200 rounded w-20 mb-2"}),(0,mr.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"})]}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"text-3xl font-bold text-gray-800",children:x.toFixed(1)}),(0,mr.jsx)("div",{className:"flex gap-0.5",children:(()=>{const e=[],t=Math.floor(x),n=x%1>=.5;for(let r=1;r<=5;r++)r<=t?e.push((0,mr.jsx)(ma,{size:20,className:"fill-yellow-400 text-yellow-400"},r)):r===t+1&&n?e.push((0,mr.jsxs)("div",{className:"relative inline-block",children:[(0,mr.jsx)(ma,{size:20,className:"text-gray-300"}),(0,mr.jsx)("div",{className:"absolute inset-0 overflow-hidden",style:{width:"50%"},children:(0,mr.jsx)(ma,{size:20,className:"fill-yellow-400 text-yellow-400"})})]},r)):e.push((0,mr.jsx)(ma,{size:20,className:"text-gray-300"},r));return e})()})]}),(0,mr.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Based on ",w," ",1===w?"review":"reviews"]})]})]}),(0,mr.jsx)("div",{className:"text-right",children:(0,mr.jsx)("div",{className:"w-16 h-16 rounded-full bg-white shadow-md flex items-center justify-center",children:(0,mr.jsx)(ma,{size:32,className:"fill-yellow-400 text-yellow-400"})})})]})}),(0,mr.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold mb-2 text-gray-800",children:"We value your feedback"}),(0,mr.jsxs)("p",{className:"text-base text-gray-600 mb-2",children:["Rate your experience with ",o]}),(0,mr.jsx)("p",{className:"text-xs text-gray-500 mb-6",children:"Your feedback helps other users make better decisions"}),y&&(0,mr.jsxs)("div",{className:"mb-4 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[(0,mr.jsx)("p",{className:"font-semibold text-blue-800",children:"Existing Review Loaded"}),(0,mr.jsxs)("p",{className:"text-blue-600",children:["Review ID: ",l]})]}),(0,mr.jsx)("div",{className:"flex items-center mb-6 justify-start",children:[1,2,3,4,5].map(e=>(0,mr.jsx)("button",{type:"button",className:"absolute top-3 right-3 bg-blue-600 text-white w-10 h-10 flex items-center justify-center rounded-full shadow-md hover:bg-blue-700 transition",onClick:()=>m(!0),children:(0,mr.jsx)(Lc,{size:18})}))}),(0,mr.jsxs)("div",{className:"relative mb-4",children:[(0,mr.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 rounded-md p-3 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none text-sm sm:text-base",rows:4,placeholder:"Type your feedback here..."}),(0,mr.jsx)("button",{className:"absolute top-2 right-2 bg-blue-600 text-white w-8 h-8 flex items-center justify-center rounded-full shadow-md hover:bg-blue-700 transition",onClick:()=>m(!0),children:(0,mr.jsx)(Lc,{size:16})})]}),(0,mr.jsx)("p",{className:"text-gray-600 text-left mb-4 text-xs sm:text-sm",children:"Tell us about your experience"}),(0,mr.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,mr.jsx)("button",{onClick:()=>e("/book-now/".concat(s),{state:{vehicleType:a}}),className:"flex-1 bg-white border-2 border-gray-300 text-gray-700 font-semibold px-6 py-3 rounded-lg hover:bg-gray-50 transition-all",children:"Cancel"}),(0,mr.jsx)("button",{onClick:async()=>{if(console.log("\ud83d\ude80 Submit button clicked"),console.log("\u27a1\ufe0f Current rating:",c),console.log("\u27a1\ufe0f Current feedback:",d),0===c)return console.warn("\u26a0\ufe0f Validation failed: No rating selected"),void alert("Please select a rating before submitting");if(!d.trim())return console.warn("\u26a0\ufe0f Validation failed: Empty feedback"),void alert("Please write your feedback before submitting");g(!0),console.log("\u23f3 Loading state: true");try{const t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");const r=new URLSearchParams;r.append("userId",localStorage.getItem("userId")||"6901dcf9fc4e029e07c5f54e"),r.append("vechileType",a),r.append("VechileId",s),r.append("BookingId",localStorage.getItem("bookingId")||"68fe3755db13aaf8e5dcdd56"),r.append("review",d),r.append("rating",c.toString()),console.log("\ud83d\udce4 Sending feedback to API..."),console.log("\u27a1\ufe0f Payload:",Object.fromEntries(r.entries())),console.log("\u27a1\ufe0f API Endpoint: http://3.110.122.127:3000/addReview");const i=await fetch("http://3.110.122.127:3000/addReview",{method:"POST",headers:t,body:r,redirect:"follow"});console.log("\ud83d\udcca Submit Response Status:",i.status),console.log("\ud83d\udcca Submit Response OK:",i.ok);const o=await i.text();console.log("\ud83d\udce6 Submit API Response:",o),i.ok?(console.log("\u2705 Feedback submitted successfully!"),alert("\u2705 Feedback submitted successfully!"),n({vehicleId:s,userName:"User",rating:c,location:"Kakinada",comment:d}),console.log("\ud83d\udccd Navigating to /notifications"),e("/notifications")):(console.error("\u274c API returned error status:",i.status),alert("\u274c Failed to submit feedback. Please try again."))}catch(t){console.error("\u26a0\ufe0f Error submitting review:",t),console.error("\u26a0\ufe0f Error message:",t.message),console.error("\u26a0\ufe0f Error stack:",t.stack),alert("Something went wrong while submitting feedback.")}finally{g(!1),console.log("\u23f3 Loading state: false")}},disabled:f,className:"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white text-sm font-semibold px-6 py-2 rounded-md hover:opacity-90 transition-all shadow-md disabled:opacity-50",children:f?"Submitting...":"Submit Feedback"})]})]}),(0,mr.jsx)(Zc,{isOpen:p,onClose:()=>m(!1),onSubmit:(e,t)=>{console.log("\ud83d\udcdd Modal Submit:",{modalRating:e,modalComment:t}),u(e),h(t)}})]})},Yc=e=>{let{onConfirm:t,onClose:n}=e;const[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)("18:00"),[u,d]=(0,r.useState)("20:00"),[h,p]=(0,r.useState)("Available");return(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex justify-center items-center z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-[900px] p-6 flex flex-col sm:flex-row gap-6 relative",children:[(0,mr.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-gray-600 text-xl font-bold",children:"\u2715"}),(0,mr.jsxs)("div",{className:"flex-1 border rounded-lg p-4 h-[400px] flex flex-col",children:[(0,mr.jsx)("label",{className:"text-gray-500 text-sm mb-2",children:"Select Start and End Dates"}),(0,mr.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,mr.jsx)("input",{type:"date",value:i,onChange:e=>s(e.target.value),className:"flex-1 border rounded-lg p-2"}),(0,mr.jsx)("input",{type:"date",value:o,onChange:e=>a(e.target.value),className:"flex-1 border rounded-lg p-2"})]})]}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col gap-4",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-gray-500 text-sm",children:"Start Time"}),(0,mr.jsx)("input",{type:"time",value:l,onChange:e=>c(e.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-gray-500 text-sm",children:"End Time"}),(0,mr.jsx)("input",{type:"time",value:u,onChange:e=>d(e.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"text-gray-500 text-sm",children:"Availability"}),(0,mr.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"mt-1 w-full border rounded-lg p-2 bg-green-100 text-green-700",children:[(0,mr.jsx)("option",{value:"Available",children:"Available"}),(0,mr.jsx)("option",{value:"Not Available",children:"Not Available"})]})]}),(0,mr.jsx)("button",{onClick:()=>{i&&o&&l&&u?t(i,o,l,u):alert("Please select all fields before confirming.")},className:"mt-auto bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white py-2 rounded-lg",children:"Confirm"})]})]})})},Jc=()=>{const e=ye(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)("06:00"),[l,c]=(0,r.useState)("08:00");return(0,mr.jsx)("div",{className:"flex justify-center items-start min-h-screen bg-gray-100 p-4",children:(0,mr.jsxs)("div",{className:"w-full max-w-md bg-white shadow-md rounded-xl p-6 sm:p-8",children:[(0,mr.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold mb-6 text-center",children:"Availability Date & Time"}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("label",{className:"block text-gray-600 mb-1",children:"Start Date"}),(0,mr.jsx)("input",{type:"date",value:t,onChange:e=>n(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"})]}),(0,mr.jsxs)("div",{className:"mb-4",children:[(0,mr.jsx)("label",{className:"block text-gray-600 mb-1",children:"End Date"}),(0,mr.jsx)("input",{type:"date",value:i,onChange:e=>s(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"})]}),(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-4 mb-6",children:[(0,mr.jsxs)("div",{className:"flex-1 mb-4 md:mb-0",children:[(0,mr.jsx)("label",{className:"block text-gray-600 mb-1",children:"Start Time"}),(0,mr.jsx)("input",{type:"time",value:o,onChange:e=>a(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("label",{className:"block text-gray-600 mb-1",children:"End Time"}),(0,mr.jsx)("input",{type:"time",value:l,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),(0,mr.jsx)("button",{onClick:()=>{e("/ListedCars")},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-2 rounded-lg hover:opacity-90 transition-all text-sm sm:text-base",children:"Confirm"})]})})},Xc={name:"Hyundai Verna",CarModel:"Thar",CarNumber:"",price:"250",rating:"4.2",transmission:"Automatic",seats:"5",fuel:"Petrol",ac:"AC",image:Ea,description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",contactName:"Manoj Kumar",contactNumber:"1234567898",email:"owner@example.com",city:"",street:"",pincode:"",doorName:"",isAvailable:!0},$c=()=>{var e;const{carId:t}=ve(),n=me(),i=ye(),{carData:s,openEditForm:o}=n&&n.state||{},[a,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(c(c({},Xc),{},{carImages:""})),[h,p]=(0,r.useState)(Xc),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),[k,N]=(0,r.useState)([]),[_,j]=(0,r.useState)(""),[A,C]=(0,r.useState)(0);(0,r.useEffect)(()=>{t&&!s?S(t):s&&E(s),o&&l(!0);const e=localStorage.getItem("userId");e&&!_&&(console.log("\u2705 Auto-loaded userId from localStorage:",e),j(e))},[t,s,o]);const S=async e=>{try{y(!0),console.log("\ud83d\udce1 Fetching car details for ID:",e);const t=await ho.car.getCarById(e),n=t.data||t;console.log("\ud83d\udce5 Received car data:",n),n&&n.car?E(n.car):n&&E(n)}catch(t){console.error("\u274c Error fetching car details:",t),alert("Failed to load car details: ".concat(t.message||"Unknown error"))}finally{y(!1)}},E=e=>{var t,n,r,i,s,o,a;console.log("\ud83d\uddfa\ufe0f Mapping car data:",e);const l=c(c({},Xc),{},{name:"".concat(e.CarName||e.name||""," ").concat(e.CarModel||e.model||"").trim(),CarNumber:e.CarNumber||e.carNumber||"",price:null!==(t=null!==(n=e.RentPerHour)&&void 0!==n?n:e.price)&&void 0!==t?t:Xc.price,CarModel:e.CarModel||Xc.CarModel,rating:(null===(r=e.rating)||void 0===r||null===(i=r.toString)||void 0===i?void 0:i.call(r))||Xc.rating,transmission:e.transmissionType||e.transmission||Xc.transmission,seats:(null===(s=e.Carseater)||void 0===s?void 0:s.toString())||e.seats||Xc.seats,fuel:e.fuelType||e.fuel||Xc.fuel,ac:e.Ac_available?"AC":e.ac||Xc.ac,image:(null===(o=e.carImages)||void 0===o?void 0:o[0])||e.image||Xc.image,description:e.description||Xc.description,contactName:e.contactName||Xc.contactName,contactNumber:e.contactNumber||Xc.contactNumber,email:e.email||Xc.email,id:e._id||e.id||void 0,userId:e.userId||e.user_id||void 0,isAvailable:!1!==e.Available&&!1!==e.isAvailable,city:e.pickupCity||"",street:e.pickupArea||"",pincode:e.pickupCityPinCode||"",state:e.pickupCityState||"",doorName:e.doorName||"",requireDrivingLicense:!0===e.drivingLicenseRequired,requireAadharCard:!0===e.AadharCardRequired,depositMoney:(null===(a=e.DepositAmount)||void 0===a?void 0:a.toString())||""});console.log("\u2705 Mapped vehicle data:",l),d(l),p(l),w(l.image||null)},T=e=>{const{name:t,value:n,type:r}=e.target;if("checkbox"===r){const n=e.target.checked;d(e=>c(c({},e),{},{[t]:n}))}else d(e=>c(c({},e),{},{[t]:n}))};if(g)return(0,mr.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,mr.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-700 font-medium",children:"Loading car details..."})]})});const I=["https://e7.pngegg.com/pngimages/768/421/png-clipart-car-computer-icons-sedan-auto-detailing-auto-driving-rectangle-thumbnail.png","https://png.pngtree.com/png-vector/20191201/ourmid/pngtree-car-vector-logo-design-png-image_2066853.jpg"],P=[...k.length>0?[b||u.image||Ea,...k.map(e=>URL.createObjectURL(e))]:[b||u.image||Ea]];for(;P.length<3;)P.push(I[P.length-1]||I[0]);return P.splice(3),(0,mr.jsxs)("div",{className:"min-h-screen bg-white px-4 sm:px-6 py-6 sm:py-10",children:[m&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,mr.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-700 font-medium",children:"Processing..."})]})}),(0,mr.jsxs)("div",{className:"max-w-[1400px] mx-auto flex flex-col lg:flex-row gap-8",children:[(0,mr.jsxs)("div",{className:"flex-1 bg-white",children:[(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[(0,mr.jsxs)("div",{className:"relative w-300px md:w-[420px] h-[300px] flex-shrink-0 rounded-[10px] border-2 border-transparent hover:border-[#0066FF] transition-all duration-200",children:[(0,mr.jsx)("img",{src:P[A],alt:u.name,className:"w-full h-full object-cover transition-all duration-500 rounded-[10px]"}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),C(e=>0===e?P.length-1:e-1)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Previous image",children:(0,mr.jsx)("svg",{className:"w-6 h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),C(e=>e===P.length-1?0:e+1)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Next image",children:(0,mr.jsx)("svg",{className:"w-6 h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),(0,mr.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5",children:P.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>C(t),className:"h-2 rounded-full transition-all ".concat(t===A?"bg-[#0066FF] w-6":"bg-gray-700 w-2")},t))})]}),(0,mr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,mr.jsx)("div",{className:"flex items-start justify-between gap-4 mb-1",children:(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("div",{className:"flex items-center gap-2",children:(0,mr.jsx)("h1",{className:"text-[32px] font-bold text-[#000000] leading-tight cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:u.name})}),u.CarNumber&&(0,mr.jsx)("p",{className:"text-[16px] text-[#666666] mt-1",style:{fontFamily:"Inter, sans-serif"},children:u.CarNumber})]})}),(0,mr.jsxs)("div",{className:"flex items-baseline gap-1 mb-3 w-fit cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",children:[(0,mr.jsxs)("span",{className:"text-[32px] font-bold text-[#000000]",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:["\u20b9",u.price]}),(0,mr.jsx)("span",{className:"text-base text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:"/hr"})]}),(0,mr.jsx)("div",{className:"border border-[#E5E5E5] rounded-[10px] overflow-hidden bg-white mb-4 cursor-pointer hover:border-[#0066FF] hover:border-2 transition-all duration-200",children:(0,mr.jsxs)("div",{className:"flex items-center gap-0",children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6 mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:u.transmission})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:vo,className:"w-6 h-6 mb-1.5",alt:"seats"}),(0,mr.jsxs)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:[u.seats," Seaters"]})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:wa,className:"w-6 h-6 mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:u.fuel})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:ka,className:"w-6 h-6 mb-1.5",alt:"ac"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:u.ac})]})]})}),(0,mr.jsxs)("div",{className:"border border-[#E5E5E5] rounded-[10px] p-4 bg-white mb-4 cursor-pointer hover:border-[#0066FF] hover:border-2 transition-all duration-200 w-full",children:[(0,mr.jsx)("h2",{className:"text-[18px] font-bold text-[#000000] mb-2 cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Description"}),(0,mr.jsx)("p",{className:"text-[#666666] text-[14px] leading-[1.6] min-h-[40px] break-words overflow-wrap-anywhere",style:{fontFamily:"Inter, sans-serif",wordBreak:"break-word"},children:u.description})]})]})]}),u.street&&u.city&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("img",{src:Yo,className:"w-5 h-5 mt-0.5",alt:"location"}),(0,mr.jsxs)("span",{className:"text-[14px] text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:[u.street,", ",u.city,u.pincode&&", ".concat(u.pincode)]})]})]}),(0,mr.jsx)("aside",{className:"md:w-[380px]",children:(0,mr.jsxs)("div",{className:"sticky top-6 bg-white p-6 rounded-[12px] shadow-lg border border-[#E5E5E5]",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mr.jsx)("h2",{className:"text-[20px] font-semibold text-[#000000]",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Edit Car Details"}),(0,mr.jsx)("button",{onClick:()=>l(e=>!e),type:"button","aria-label":a?"Hide form":"Show form",className:"w-auto px-3 h-8 flex items-center justify-center rounded-full text-white text-sm font-medium transition-colors \r bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] shadow-md hover:opacity-90",children:a?"Hide":"Show"})]}),a&&(0,mr.jsxs)("div",{className:"space-y-5 max-h-[70vh] overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#E5E5E5 transparent"},children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#F8F9FA] rounded-[8px] border border-[#E5E5E5]",children:[(0,mr.jsx)("label",{className:"text-[14px] font-medium text-[#333333]",style:{fontFamily:"Inter, sans-serif",fontWeight:500},children:"AC Available"}),(0,mr.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",name:"ac",checked:"ac"===(null===(e=u.ac)||void 0===e?void 0:e.toLowerCase()),onChange:e=>{const t=e.target.checked;d(e=>c(c({},e),{},{ac:t?"AC":"Non-AC"}))},className:"sr-only peer"}),(0,mr.jsx)("div",{className:"\r w-11 h-6 bg-[#E5E5E5] peer-focus:outline-none rounded-full\r peer\r peer-checked:after:translate-x-full\r peer-checked:after:border-white\r after:content-['']\r after:absolute after:top-[2px] after:left-[2px]\r after:bg-white after:border-gray-300 after:border\r after:rounded-full after:h-5 after:w-5 after:transition-all\r peer-checked:bg-gradient-to-r peer-checked:from-[#0A0747] peer-checked:to-[#4EC8FF]\r "})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[14px] font-medium text-[#000000] mb-2",style:{fontFamily:"Inter, sans-serif",fontWeight:500},children:"Description"}),(0,mr.jsx)("textarea",{name:"description",value:u.description,onChange:T,placeholder:"Car Description",className:"w-full border border-[#E5E5E5] rounded-[8px] p-3 h-20 resize-none text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[14px] font-medium text-[#000000] mb-2",style:{fontFamily:"Inter, sans-serif",fontWeight:500},children:"Price"}),(0,mr.jsxs)("div",{className:"space-y-2",children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:"Rent Price (per hour / per DAY)"}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsxs)("div",{className:"relative flex-1",children:[(0,mr.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:"\u20b9"}),(0,mr.jsx)("input",{type:"number",name:"price",value:u.price,onChange:T,placeholder:"250",className:"w-full border border-[#E5E5E5] rounded-[8px] pl-7 pr-3 py-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},min:"1",required:!0})]}),(0,mr.jsxs)("select",{className:"border border-[#E5E5E5] rounded-[8px] px-3 py-2.5 text-[14px] text-[#333333] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},children:[(0,mr.jsx)("option",{children:"Hour"}),(0,mr.jsx)("option",{children:"Day"})]})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Transmission"}),(0,mr.jsxs)("select",{name:"transmission",value:u.transmission,onChange:T,className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},children:[(0,mr.jsx)("option",{value:"Automatic",children:"Automatic"}),(0,mr.jsx)("option",{value:"Manual",children:"Manual"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Fuel Type"}),(0,mr.jsxs)("select",{name:"fuel",value:u.fuel,onChange:T,className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},children:[(0,mr.jsx)("option",{value:"Petrol",children:"Petrol"}),(0,mr.jsx)("option",{value:"Diesel",children:"Diesel"}),(0,mr.jsx)("option",{value:"Electric",children:"Electric"}),(0,mr.jsx)("option",{value:"Hybrid",children:"Hybrid"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Seating Capacity"}),(0,mr.jsx)("input",{type:"number",name:"seats",value:u.seats.toString().replace(/[^\d]/g,""),onChange:T,placeholder:"5",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},min:"1",max:"20"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-[14px] font-semibold text-[#000000] mb-3",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Your Contact Information"}),(0,mr.jsxs)("div",{className:"space-y-3",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Name"}),(0,mr.jsx)("input",{name:"contactName",value:u.contactName,onChange:T,placeholder:"Manoj Kumar",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Contact Number"}),(0,mr.jsx)("input",{name:"contactNumber",value:u.contactNumber,onChange:T,placeholder:"1234567898",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-[14px] font-semibold text-[#000000] mb-3",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Customer Required Documents"}),(0,mr.jsxs)("div",{className:"space-y-2",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#F8F9FA] rounded-[8px] border border-[#E5E5E5]",children:[(0,mr.jsx)("label",{className:"text-[13px] text-[#333333]",style:{fontFamily:"Inter, sans-serif"},children:"Driving License"}),(0,mr.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",name:"requireDrivingLicense",checked:u.requireDrivingLicense,onChange:T,className:"sr-only peer"}),(0,mr.jsx)("div",{className:"w-11 h-6 bg-[#E5E5E5] rounded-full peer\r peer-checked:after:translate-x-full peer-checked:after:border-white\r after:content-[''] after:absolute after:top-[2px] after:left-[2px]\r after:bg-white after:border-gray-300 after:border after:rounded-full\r after:h-5 after:w-5 after:transition-all\r peer-checked:bg-gradient-to-r peer-checked:from-[#0A0747] peer-checked:to-[#4EC8FF]"})]})]}),(0,mr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#F8F9FA] rounded-[8px] border border-[#E5E5E5]",children:[(0,mr.jsx)("label",{className:"text-[13px] text-[#333333]",style:{fontFamily:"Inter, sans-serif"},children:"Aadhar Card"}),(0,mr.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",name:"requireAadharCard",checked:u.requireAadharCard,onChange:T,className:"sr-only peer"}),(0,mr.jsx)("div",{className:"w-11 h-6 bg-[#E5E5E5] rounded-full peer\r peer-checked:after:translate-x-full peer-checked:after:border-white\r after:content-[''] after:absolute after:top-[2px] after:left-[2px]\r after:bg-white after:border-gray-300 after:border after:rounded-full\r after:h-5 after:w-5 after:transition-all\r peer-checked:bg-gradient-to-r peer-checked:from-[#0A0747] peer-checked:to-[#4EC8FF]"})]})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-[14px] font-semibold text-[#000000] mb-3",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Deposit Vehicle"}),(0,mr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#F8F9FA] rounded-[8px] border border-[#E5E5E5]",children:[(0,mr.jsx)("label",{className:"text-[13px] text-[#333333]",style:{fontFamily:"Inter, sans-serif"},children:"Or"}),(0,mr.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:!1,readOnly:!0}),(0,mr.jsx)("div",{className:"w-11 h-6 bg-[#E5E5E5] peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0066FF]"})]})]}),(0,mr.jsxs)("div",{className:"mt-3",children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Deposit Money"}),(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:"\u20b9"}),(0,mr.jsx)("input",{type:"number",name:"depositMoney",value:u.depositMoney,onChange:T,placeholder:"16300",className:"w-full border border-[#E5E5E5] rounded-[8px] pl-7 pr-3 py-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"},min:"0"})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-[14px] font-semibold text-[#000000] mb-3",style:{fontFamily:"Inter, sans-serif",fontWeight:600},children:"Vehicle Pickup Address"}),(0,mr.jsxs)("div",{className:"space-y-3",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Place"}),(0,mr.jsx)("input",{name:"doorName",value:u.doorName,onChange:T,placeholder:"Door Name",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"City"}),(0,mr.jsx)("input",{name:"city",value:u.city,onChange:T,placeholder:"Hyderabad",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"State"}),(0,mr.jsx)("input",{name:"state",value:u.state,onChange:T,placeholder:"Telangana",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Pincode"}),(0,mr.jsx)("input",{name:"pincode",value:u.pincode,onChange:T,placeholder:"500064",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-[13px] text-[#666666] mb-1.5",style:{fontFamily:"Inter, sans-serif"},children:"Street"}),(0,mr.jsx)("input",{name:"street",value:u.street,onChange:T,placeholder:"Gachibowli",className:"w-full border border-[#E5E5E5] rounded-[8px] p-2.5 text-[14px] text-[#333333] placeholder-[#999999] focus:ring-2 focus:ring-[#0066FF] focus:border-transparent",style:{fontFamily:"Inter, sans-serif"}})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("button",{onClick:()=>{var e;return null===(e=document.getElementById("main-image-upload"))||void 0===e?void 0:e.click()},className:"w-full border-2 border-dashed border-[#E5E5E5] rounded-[8px] p-6 flex flex-col items-center justify-center hover:border-[#0066FF] transition-all bg-[#F8F9FA]",type:"button",children:[(0,mr.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mb-2 shadow-sm",children:(0,mr.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf7"})}),(0,mr.jsx)("p",{className:"text-[14px] font-medium text-[#333333] mb-1",style:{fontFamily:"Inter, sans-serif"},children:"Add photos"}),(0,mr.jsx)("p",{className:"text-[12px] text-[#999999] text-center",style:{fontFamily:"Inter, sans-serif"},children:"Please, first Choose your car image will add supporting pictures to verify your details"})]}),(0,mr.jsx)("input",{id:"main-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){console.log("\ud83d\udcf8 Selected main image:",n.name,n.size,"bytes"),x(n);const e=URL.createObjectURL(n);w(e),d(t=>c(c({},t),{},{image:e}))}}}),b&&(0,mr.jsx)("div",{className:"mt-3 relative",children:(0,mr.jsx)("img",{src:b,alt:"Preview",className:"w-full h-40 object-cover rounded-[8px]"})}),k.length>0&&(0,mr.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:k.map((e,t)=>(0,mr.jsxs)("div",{className:"relative group",children:[(0,mr.jsx)("img",{src:URL.createObjectURL(e),alt:"Additional ".concat(t+1),className:"w-full h-20 object-cover rounded-[8px]"}),(0,mr.jsx)("button",{onClick:()=>{return e=t,console.log("\ud83d\uddd1\ufe0f Removing additional image at index:",e),void N(t=>t.filter((t,n)=>n!==e));var e},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600 transition",type:"button",children:"\xd7"})]},t))}),k.length<4&&(0,mr.jsx)("div",{className:"mt-2",children:(0,mr.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm",style:{fontFamily:"Inter, sans-serif"},onChange:e=>{const t=e.target.files;if(t){const e=Array.from(t).slice(0,4-k.length);console.log("\ud83d\udcf8 Selected additional images:",e.length),N(t=>[...t,...e])}}})})]}),(0,mr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,mr.jsx)("button",{onClick:async()=>{var e,n;const r=u.id||t;if(!r)return void alert("\u274c Vehicle ID missing \u2014 cannot update.");const s=null===(e=u.name)||void 0===e?void 0:e.trim(),o=(null!==(n=u.price)&&void 0!==n?n:"").toString().trim();if(s)if(!o||"0"===o||Number(o)<=0)alert("\u274c Valid price is required (must be greater than 0)");else if(!u.contactNumber||u.contactNumber.trim().length<10)alert("\u274c Valid contact number is required (minimum 10 digits)");else if(!u.contactName||u.contactName.trim().length<2)alert("\u274c Contact name is required");else{f(!0);try{var a,l,c;let e=_||localStorage.getItem("userId")||u.userId;if(!e){const t=["user","userData","currentUser","authUser","userInfo"];for(const n of t){const t=localStorage.getItem(n);if(t)try{const r=JSON.parse(t);if(e=r._id||r.id||r.userId||r.user_id||r.uid,e){console.log("\u2705 Retrieved userId from localStorage.".concat(n,":"),e),j(e);break}}catch(el){if(t&&t.length>=10&&/^[a-f0-9]+$/i.test(t)){e=t,console.log("\u2705 Retrieved userId directly from localStorage.".concat(n,":"),e),j(e);break}}}}if(!e)return console.error("\u274c userId not found"),void alert("\u274c User ID is missing. Please enter it manually in the form.");console.log("\u2705 Using userId:",e);const t=s.split(" "),n=t[0]||s,d=t.slice(1).join(" ")||u.CarModel||"";console.log("\ud83d\udcdd Preparing form data..."),console.log("  CarName:",n),console.log("  CarModel:",d);const h=new FormData;h.append("userId",e),h.append("CarName",n),h.append("CarModel",d||"Standard"),u.CarNumber&&u.CarNumber.trim()&&h.append("CarNumber",u.CarNumber.trim());const p=(null!==(a=u.seats)&&void 0!==a?a:"5").toString().replace(/[^\d]/g,"")||"5";h.append("Carseater",p);const m=u.fuel.toLowerCase(),f=u.transmission.toLowerCase();h.append("fuelType",m),h.append("transmissionType",f),h.append("Ac_available","ac"===(null===(l=u.ac)||void 0===l?void 0:l.toLowerCase())?"true":"false");const g=o,y=(24*Number(g)).toString();h.append("RentPerHour",g),h.append("RentPerDay",y),console.log("  RentPerHour:",g),console.log("  RentPerDay:",y),h.append("description",u.description||"No description provided"),h.append("contactName",u.contactName.trim()),h.append("contactNumber",u.contactNumber.trim()),h.append("gps","false"),h.append("kmDriven","50000"),h.append("Available",u.isAvailable?"true":"false");(u.city||u.street||u.pincode||u.state)&&(h.append("pickupCity",u.city||""),h.append("pickupArea",u.street||""),h.append("pickupCityPinCode",u.pincode||""),h.append("pickupCityState",u.state||""),h.append("pickupCityCountry","india"),h.append("pickupLatitude","17.4889"),h.append("pickupLongitude","78.4603"),console.log("\ud83d\udccd Location data:"),console.log("  City:",u.city),console.log("  Area:",u.street),console.log("  Pincode:",u.pincode),console.log("  State:",u.state)),h.append("drivingLicenseRequired",u.requireDrivingLicense?"true":"false"),h.append("AadharCardRequired",u.requireAadharCard?"true":"false"),u.depositMoney&&"0"!==u.depositMoney&&Number(u.depositMoney)>0?(h.append("DepositAmount",u.depositMoney),h.append("DepositVehicle","true")):h.append("DepositVehicle","false"),v instanceof File&&(h.append("carImages",v),console.log("\ud83d\udcf8 Added main image:",v.name)),k.length>0&&k.forEach((e,t)=>{h.append("carImages",e),console.log("\ud83d\udcf8 Adding additional image ".concat(t+1,":"),e.name)}),console.log("\ud83d\ude80 Sending update request for car ID:",r),console.log("\ud83d\udce6 Complete FormData:");for(const[r,i]of h.entries())i instanceof File?console.log("  ".concat(r,":"),{name:i.name,size:i.size}):console.log("  ".concat(r,":"),i);const b=await ho.car.updateCarById(r,h),w=b.data||b;if(console.log("\ud83d\udce5 API Response:",w),!(null!==w&&void 0!==w&&null!==(c=w.message)&&void 0!==c&&c.toLowerCase().includes("updated")||null!==w&&void 0!==w&&w.success||null!==w&&void 0!==w&&w.car))throw new Error((null===w||void 0===w?void 0:w.message)||"Update failed - no success confirmation received");alert("\u2705 Car updated successfully!"),console.log("\ud83c\udf89 Updated car data:",w.car),w.car?E(w.car):await S(r),x(null),N([]),i("/listed",{state:{refresh:!0}})}catch(w){var d,h,p,m,g,y,b;console.error("\u274c Update Error:",w),console.error("\u274c Error Response:",null===(d=w.response)||void 0===d?void 0:d.data);const e=(null===(h=w.response)||void 0===h||null===(p=h.data)||void 0===p?void 0:p.message)||(null===(m=w.response)||void 0===m||null===(g=m.data)||void 0===g?void 0:g.error)||w.message||"Unknown error occurred",t=(null===(y=w.response)||void 0===y||null===(b=y.data)||void 0===b?void 0:b.details)||"";alert("\u274c Failed to update car:\n\n".concat(e,"\n").concat(t?"\n"+t:"","\n\n")+"Please check:\n\u2022 All required fields are filled\n\u2022 Contact number is valid (10+ digits)\n\u2022 You have permission to edit this car\n\u2022 Image files are not too large (< 5MB each)")}finally{f(!1)}}else alert("\u274c Vehicle name is required")},disabled:m,className:"flex-1 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-3 rounded-[8px] hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-[14px]",style:{fontFamily:"Inter, sans-serif"},type:"button",children:m?"Saving...":"Save Changes"}),(0,mr.jsx)("button",{onClick:async()=>{const e=u.id||t;if(e){if(window.confirm('\u26a0\ufe0f Are you sure you want to delete "'.concat(u.name,'"?\n\nThis action cannot be undone.'))){f(!0);try{var n;console.log("\ud83d\uddd1\ufe0f Deleting car with ID:",e);const t=await ho.car.deleteCarById(e);console.log("\u2705 Delete Response:",t);const r=t.data||t;if(!(null!==r&&void 0!==r&&null!==(n=r.message)&&void 0!==n&&n.toLowerCase().includes("deleted")||null!==r&&void 0!==r&&r.success))throw new Error((null===r||void 0===r?void 0:r.message)||"Delete failed");alert("\u2705 Car deleted successfully!"),i("/listed",{state:{refresh:!0}})}catch(o){var r,s;console.error("\u274c Delete Car Error:",o);const e=(null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||o.message||"Unknown error";alert("\u274c Failed to delete car: ".concat(e))}finally{f(!1)}}}else alert("\u274c Vehicle ID missing \u2014 cannot delete.")},disabled:m,className:"px-6 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-3 rounded-[8px] hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-[14px]",type:"button",children:"Delete"})]})]})]})})]})]})},eu={name:"Royal Enfield Classic 350",BikeModel:"BS6",price:"10",rating:"4.5",image:La,description:"Well-maintained bike for rent",contactName:"Owner Name",contactNumber:"1234567890",email:"owner@example.com",city:"",street:"",pincode:"",doorName:"",isAvailable:!0,engineCapacity:"350",transmission:"Manual",fuel:"Petrol"},tu=()=>{const{bikeId:e}=ve(),t=me(),n=ye(),{bikeData:i,openEditForm:s}=t&&t.state||{},[o,a]=(0,r.useState)(!0),[l,u]=(0,r.useState)(c(c({},eu),{},{bikeImages:""})),[d,h]=(0,r.useState)(eu),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)(null),[w,k]=(0,r.useState)([]),[N,_]=(0,r.useState)(""),[j,A]=(0,r.useState)(0);(0,r.useEffect)(()=>{e&&!i?C(e):i&&S(i),s&&a(!0);const t=localStorage.getItem("userId");t&&!N&&(console.log("\u2705 Auto-loaded userId from localStorage:",t),_(t))},[e,i,s]);const C=async e=>{try{g(!0),console.log("\ud83d\udce1 Fetching bike details for ID:",e);const t=await ho.bike.getBikeById(e),n=t.data||t;console.log("\ud83d\udce5 Received bike data:",n),n&&n.bike?S(n.bike):n&&S(n)}catch(t){console.error("\u274c Error fetching bike details:",t),alert("Failed to load bike details: ".concat(t.message||"Unknown error"))}finally{g(!1)}},S=e=>{var t,n,r,i,s,o;console.log("\ud83d\uddfa\ufe0f Mapping bike data:",e);const a=c(c({},eu),{},{name:"".concat(e.bikeName||e.name||""," ").concat(e.bikeModel||e.BikeModel||e.model||"").trim(),bikenumber:e.bikeNumber||"",BikeNumber:e.bikeNumber||"",BikeModel:e.bikeModel||e.model||"",price:null!==(t=null!==(n=e.pricePerKm)&&void 0!==n?n:e.price)&&void 0!==t?t:eu.price,rating:(null===(r=e.rating)||void 0===r||null===(i=r.toString)||void 0===i?void 0:i.call(r))||eu.rating,image:(null===(s=e.bikeImages)||void 0===s?void 0:s[0])||e.image||eu.image,description:e.description||eu.description,contactName:e.contactName||eu.contactName,contactNumber:e.contactNumber||eu.contactNumber,email:e.email||eu.email,id:e._id||e.id||void 0,userId:e.userId||e.user_id||void 0,isAvailable:!1!==e.Available&&!1!==e.isAvailable,city:e.pickupCity||e.city||"",street:e.pickupArea||e.street||"",pincode:e.pickupCityPinCode||e.pincode||"",state:e.pickupCityState||e.state||"",country:e.pickupCityCountry||e.country||"India",requireDrivingLicense:"true"===e.drivingLicenseRequired||!0===e.drivingLicenseRequired,requireAadharCard:"true"===e.AadharCardRequired||!0===e.AadharCardRequired,depositMoney:(null===(o=e.DepositAmount)||void 0===o?void 0:o.toString())||"",engineCapacity:e.engineCapacity||"350",transmission:e.transmission||"Manual",fuel:e.fuel||"Petrol"});console.log("\u2705 Mapped vehicle data:",a),u(a),h(a),b(a.image||null)},E=e=>{const{name:t,value:n,type:r}=e.target;if("checkbox"===r){const n=e.target.checked;u(e=>c(c({},e),{},{[t]:n}))}else u(e=>c(c({},e),{},{[t]:n}))};if(f)return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,mr.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-700 font-medium",children:"Loading bike details..."})]})});const T=["https://w7.pngwing.com/pngs/579/51/png-transparent-computer-icons-motorcycle-bicycle-motorcycle-logo-black-silhouette.png","https://w1.pngwing.com/pngs/381/835/png-transparent-yamaha-logo-car-decal-motorcycle-sticker-sport-bike-yamaha-yzfr1-bicycle-thumbnail.png","https://imgd.aeplcdn.com/664x374/n/cw/ec/141113/interceptor-650-right-front-three-quarter-3.jpeg?isig=0&q=80"],I=[...w.length>0?[x||l.image||La,...w.map(e=>URL.createObjectURL(e))]:[x||l.image||La]];for(;I.length<3;)I.push(T[I.length-1]||T[0]);return I.splice(3),(0,mr.jsxs)("div",{className:"min-h-screen bg-gray-50 px-4 py-6",children:[p&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,mr.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,mr.jsx)("p",{className:"mt-4 text-gray-700 font-medium",children:"Processing..."})]})}),(0,mr.jsxs)("div",{className:"max-w-[1400px] mx-auto flex flex-col lg:flex-row gap-8",children:[(0,mr.jsxs)("div",{className:"flex-1 bg-white p-6 rounded-2xl shadow-lg",children:[(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[(0,mr.jsxs)("div",{className:"relative w-300px md:w-[420px] h-[300px] flex-shrink-0 rounded-[10px] border-2 border-transparent hover:border-[#0066FF] transition-all duration-200",children:[(0,mr.jsx)("img",{src:I[j],alt:l.name,className:"w-full h-full object-cover transition-all duration-500 rounded-[10px]"}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),A(e=>0===e?I.length-1:e-1)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Previous image",children:(0,mr.jsx)("svg",{className:"w-6 h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),A(e=>e===I.length-1?0:e+1)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-12 h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Next image",children:(0,mr.jsx)("svg",{className:"w-6 h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),(0,mr.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5",children:I.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>A(t),className:"h-2 rounded-full transition-all ".concat(t===j?"bg-[#0066FF] w-6":"bg-gray-700 w-2")},t))})]}),(0,mr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,mr.jsx)("div",{className:"flex items-start justify-between gap-4 mb-1",children:(0,mr.jsx)("h1",{className:"text-[32px] font-bold text-[#000000] leading-tight cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:l.name})}),l.BikeNumber&&(0,mr.jsx)("div",{className:"mt-2",children:(0,mr.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:l.BikeNumber})}),l.BikeModel&&(0,mr.jsx)("div",{className:"mt-1",children:(0,mr.jsxs)("p",{className:"text-md text-gray-500",children:["Model: ",l.BikeModel]})}),(0,mr.jsxs)("div",{className:"flex items-baseline mt-2 cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2",children:[(0,mr.jsxs)("span",{className:"text-3xl font-bold",children:["\u20b9",l.price]}),(0,mr.jsx)("span",{className:"text-gray-500 ml-2 text-sm",children:"/km"})]}),(0,mr.jsx)("div",{className:"border border-[#E5E5E5] rounded-[10px] overflow-hidden bg-white mb-4 mt-4 cursor-pointer hover:border-[#0066FF] hover:border-2 transition-all duration-200",children:(0,mr.jsxs)("div",{className:"flex items-center gap-0",children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:Na,className:"w-6 h-6 mb-1.5",alt:"engine"}),(0,mr.jsxs)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:[l.engineCapacity," CC"]})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6 mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:l.transmission})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:wa,className:"w-6 h-6 mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:l.fuel})]})]})}),(0,mr.jsxs)("div",{className:"border border-[#E5E5E5] rounded-[10px] p-4 bg-white mb-4 cursor-pointer hover:border-[#0066FF] hover:border-2 transition-all duration-200",children:[(0,mr.jsx)("h2",{className:"text-[18px] font-bold text-[#000000] mb-2 cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Description"}),(0,mr.jsx)("p",{className:"text-[#666666] text-[14px] leading-[1.6] min-h-[40px]",style:{fontFamily:"Inter, sans-serif"},children:l.description})]})]})]}),l.street&&l.city&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("img",{src:Yo,className:"w-5 h-5 mt-0.5",alt:"location"}),(0,mr.jsxs)("span",{className:"text-[14px] text-[#666666]",style:{fontFamily:"Inter, sans-serif"},children:[l.street,", ",l.city,l.pincode&&", ".concat(l.pincode)]})]})]}),(0,mr.jsx)("aside",{className:"md:w-[380px]",children:(0,mr.jsxs)("div",{className:"sticky top-6 bg-white p-6 rounded-2xl shadow-lg",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[(0,mr.jsx)("h2",{className:"text-2xl font-semibold",children:"Edit Bike Details"}),(0,mr.jsx)("button",{onClick:()=>a(e=>!e),type:"button","aria-label":o?"Hide form":"Show form",className:"w-auto px-3 h-8 flex items-center justify-center rounded-full text-white text-sm font-medium transition-colors \r bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] shadow-md hover:opacity-90",children:o?"Hide":"Show"})]}),o&&(0,mr.jsxs)("div",{className:"space-y-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Bike Name "}),(0,mr.jsx)("input",{name:"name",value:l.name,onChange:E,placeholder:"e.g., Royal Enfield Classic 350",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Bike Model"}),(0,mr.jsx)("input",{name:"BikeModel",value:l.BikeModel,onChange:E,placeholder:"e.g., BS6",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Description"}),(0,mr.jsx)("textarea",{name:"description",value:l.description,onChange:E,placeholder:"Describe your bike...",className:"w-full border border-gray-300 rounded-lg p-2 h-24 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Price per KM "}),(0,mr.jsx)("input",{type:"number",name:"price",value:l.price,onChange:E,placeholder:"10",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Contact Name"}),(0,mr.jsx)("input",{name:"contactName",value:l.contactName,onChange:E,placeholder:"John Doe",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Contact Number"}),(0,mr.jsx)("input",{name:"contactNumber",value:l.contactNumber,onChange:E,placeholder:"9876543210",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"City"}),(0,mr.jsx)("input",{name:"city",value:l.city,onChange:E,placeholder:"Hyderabad",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Street/Area"}),(0,mr.jsx)("input",{name:"street",value:l.street,onChange:E,placeholder:"Banjara Hills",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Pincode"}),(0,mr.jsx)("input",{name:"pincode",value:l.pincode,onChange:E,placeholder:"500034",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"State"}),(0,mr.jsx)("input",{name:"state",value:l.state,onChange:E,placeholder:"Telangana",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Country"}),(0,mr.jsx)("input",{name:"country",value:l.country,onChange:E,placeholder:"India",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,mr.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg",children:[(0,mr.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Required Documents"}),(0,mr.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,mr.jsx)("input",{type:"checkbox",name:"requireDrivingLicense",checked:l.requireDrivingLicense,onChange:E,className:"rounded"}),(0,mr.jsx)("span",{className:"text-sm text-gray-700",children:"Require Driving License"})]}),(0,mr.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,mr.jsx)("input",{type:"checkbox",name:"requireAadharCard",checked:l.requireAadharCard,onChange:E,className:"rounded"}),(0,mr.jsx)("span",{className:"text-sm text-gray-700",children:"Require Aadhar Card"})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Deposit Amount (\u20b9)"}),(0,mr.jsx)("input",{type:"number",name:"depositMoney",value:l.depositMoney,onChange:E,placeholder:"3000",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Main Bike Image"}),(0,mr.jsxs)("div",{className:"w-full h-[180px] border-2 border-dashed border-gray-300 rounded-md flex items-center justify-center relative bg-gray-50 hover:bg-gray-100 transition",children:[x?(0,mr.jsx)("img",{src:x,alt:"Bike Preview",className:"w-full h-full object-cover rounded-md"}):(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("p",{className:"text-gray-500",children:"\ud83d\udcf7 Click to upload bike photo"}),(0,mr.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG up to 5MB"})]}),(0,mr.jsx)("input",{type:"file",accept:"image/",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){console.log("\ud83d\udcf8 Selected main image:",n.name,n.size,"bytes"),v(n);const e=URL.createObjectURL(n);b(e),u(t=>c(c({},t),{},{image:e}))}}})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-gray-700 font-medium mb-2",children:["Additional Images (Max 4)",w.length>0&&(0,mr.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",w.length,"/4)"]})]}),(0,mr.jsxs)("div",{className:"w-full border-2 border-dashed border-gray-300 rounded-md p-4 bg-gray-50",children:[(0,mr.jsx)("input",{type:"file",accept:"image/",multiple:!0,className:"w-full",onChange:e=>{const t=e.target.files;if(t){const e=Array.from(t).slice(0,4-w.length);console.log("\ud83d\udcf8 Selected additional images:",e.length),k(t=>[...t,...e])}},disabled:w.length>=4}),w.length>0&&(0,mr.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:w.map((e,t)=>(0,mr.jsxs)("div",{className:"relative group",children:[(0,mr.jsx)("img",{src:URL.createObjectURL(e),alt:"Additional ".concat(t+1),className:"w-full h-20 object-cover rounded"}),(0,mr.jsx)("button",{onClick:()=>{return e=t,console.log("\ud83d\uddd1\ufe0f Removing additional image at index:",e),void k(t=>t.filter((t,n)=>n!==e));var e},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 transition",type:"button",children:"\xd7"})]},t))})]})]}),(0,mr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,mr.jsx)("button",{onClick:async()=>{var t,r;const i=l.id||e;if(!i)return void alert("\u274c Bike ID missing \u2014 cannot update.");const s=null===(t=l.name)||void 0===t?void 0:t.trim(),o=(null!==(r=l.price)&&void 0!==r?r:"").toString().trim();if(s)if(!o||"0"===o||Number(o)<=0)alert("\u274c Valid price is required (must be greater than 0)");else{m(!0);try{var a;let e=N||localStorage.getItem("userId")||l.userId;if(!e){const t=["user","userData","currentUser","authUser","userInfo"];for(const n of t){const t=localStorage.getItem(n);if(t)try{const r=JSON.parse(t);if(e=r._id||r.id||r.userId||r.user_id||r.uid,e){console.log("\u2705 Retrieved userId from localStorage.".concat(n,":"),e),_(e);break}}catch(el){if(t&&t.length>=10&&/^[a-f0-9]+$/i.test(t)){e=t,console.log("\u2705 Retrieved userId directly from localStorage.".concat(n,":"),e),_(e);break}}}}if(!e)return console.error("\u274c userId not found"),void alert("\u274c User ID is missing. Please enter it manually in the form.");console.log("\u2705 Using userId:",e);const t=s.split(" "),r=t[0]||s,c=t.slice(1).join(" ")||l.BikeModel||"";console.log("\ud83d\udcdd Preparing form data..."),console.log("  bikeName:",r),console.log("  bikeModel:",c);const u=new FormData;u.append("userId",e),u.append("bikeName",r),u.append("bikeModel",c),u.append("bikeNumber",l.BikeNumber||""),u.append("pricePerKm",o),u.append("description",l.description||""),u.append("contactName",l.contactName),u.append("contactNumber",l.contactNumber),l.city&&u.append("pickupCity",l.city),l.street&&u.append("pickupArea",l.street),l.pincode&&u.append("pickupCityPinCode",l.pincode),l.state&&u.append("pickupCityState",l.state),l.country&&u.append("pickupCityCountry",l.country),u.append("latitude","17.443649"),u.append("longitude","78.445824"),u.append("InsuranceNo","0987654321"),l.requireDrivingLicense&&u.append("drivingLicenseRequired","true"),l.requireAadharCard&&u.append("AadharCardRequired","true"),l.depositMoney&&"0"!==l.depositMoney&&u.append("DepositAmount",l.depositMoney),y instanceof File&&(u.append("bikeImages",y),console.log("\ud83d\udcf8 Added main image:",y.name)),w.length>0&&w.forEach((e,t)=>{u.append("bikeImages",e),console.log("\ud83d\udcf8 Adding additional image ".concat(t+1,":"),e.name)}),console.log("\ud83d\ude80 Sending update request for bike ID:",i),console.log("\ud83d\udce6 FormData contents:");for(const n of Array.from(u.keys())){const e=u.get(n);e instanceof File?console.log("  ".concat(n,":"),{name:e.name,size:e.size,type:e.type}):console.log("  ".concat(n,":"),e)}const d=await ho.bike.updateBikeById(i,u),h=d.data||d;if(console.log("\ud83d\udce5 API Response:",h),!(null!==h&&void 0!==h&&null!==(a=h.message)&&void 0!==a&&a.toLowerCase().includes("updated")||null!==h&&void 0!==h&&h.success||null!==h&&void 0!==h&&h.bike))throw new Error((null===h||void 0===h?void 0:h.message)||"Update failed - no success confirmation received");alert("\u2705 Bike updated successfully!"),console.log("\ud83c\udf89 Updated bike data:",h.bike),h.bike?S(h.bike):await C(i),v(null),k([]),n("/listed-bike",{state:{refresh:!0}})}catch(x){var c,u,d,h,p,f,g;console.error("\u274c Update Error:",x),console.error("\u274c Error Response:",null===(c=x.response)||void 0===c?void 0:c.data);const e=(null===(u=x.response)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.message)||(null===(h=x.response)||void 0===h||null===(p=h.data)||void 0===p?void 0:p.error)||x.message||"Unknown error occurred",t=(null===(f=x.response)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.details)||"";alert("\u274c Failed to update bike:\n\n".concat(e,"\n").concat(t?"\n"+t:"","\n\n")+"Please check:\n\u2022 User ID is correct and matches the bike owner\n\u2022 All required fields are filled\n\u2022 You have permission to edit this bike\n\u2022 Image files are not too large (< 5MB each)")}finally{m(!1)}}else alert("\u274c Bike name is required")},disabled:p,className:"flex-1 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-3 rounded-[8px] hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-[14px]",style:{fontFamily:"Inter, sans-serif"},type:"button",children:p?"Saving...":"Save Changes"}),(0,mr.jsx)("button",{onClick:async()=>{const t=l.id||e;if(t){if(window.confirm('\u26a0\ufe0f Are you sure you want to delete "'.concat(l.name,'"?\n\nThis action cannot be undone.'))){m(!0);try{var r;console.log("\ud83d\uddd1\ufe0f Deleting bike with ID:",t);const e=await ho.bike.deleteBikeById(t);console.log("\u2705 Delete Response:",e);const i=e.data||e;if(!(null!==i&&void 0!==i&&null!==(r=i.message)&&void 0!==r&&r.toLowerCase().includes("deleted")||null!==i&&void 0!==i&&i.success))throw new Error((null===i||void 0===i?void 0:i.message)||"Delete failed");alert("\u2705 Bike deleted successfully!"),n("/listed-bikes",{state:{refresh:!0}})}catch(o){var i,s;console.error("\u274c Delete Bike Error:",o);const e=(null===(i=o.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||o.message||"Unknown error";alert("\u274c Failed to delete bike: ".concat(e))}finally{m(!1)}}}else alert("\u274c Vehicle ID missing \u2014 cannot delete.")},disabled:p,className:"px-6 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white py-3 rounded-[8px] hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-[14px]",type:"button",children:"Delete"})]})]})]})})]})]})},nu=e=>{let{isOpen:t,onClose:n,onConfirm:r,bookingDetails:i,vehicleDetails:s,loading:o}=e;if(!t)return null;const{startDate:a,endDate:l,startTime:c,endTime:u,totalDays:d,totalPrice:h}=i,{vehicleName:p,vehicleType:m,pricePerDay:f}=s;return(0,mr.jsx)("div",{className:"fixed inset-0 bg-black/60 flex justify-center items-center p-4 z-[60]",children:(0,mr.jsxs)("div",{className:"bg-white max-w-md w-full rounded-2xl shadow-2xl overflow-hidden",children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:(0,mr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Confirm Booking"}),(0,mr.jsx)("p",{className:"text-blue-100 text-sm",children:"Review your rental details"})]}),(0,mr.jsx)("button",{onClick:n,className:"text-white hover:bg-white/20 rounded-full p-1 transition",disabled:o,children:(0,mr.jsx)(hr,{size:24})})]})}),(0,mr.jsxs)("div",{className:"p-6 space-y-4",children:[(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,mr.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Vehicle Details"}),(0,mr.jsx)("p",{className:"text-lg font-bold text-gray-900",children:p}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",m]})]}),(0,mr.jsxs)("div",{className:"space-y-3",children:[(0,mr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,mr.jsx)(jr,{className:"text-blue-600 mt-1",size:20}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Date"}),(0,mr.jsx)("p",{className:"font-semibold text-gray-900",children:a}),(0,mr.jsxs)("p",{className:"text-sm text-gray-500",children:["Time: ",c]})]})]}),(0,mr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,mr.jsx)(jr,{className:"text-blue-600 mt-1",size:20}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("p",{className:"text-sm text-gray-600",children:"Return Date"}),(0,mr.jsx)("p",{className:"font-semibold text-gray-900",children:l}),(0,mr.jsxs)("p",{className:"text-sm text-gray-500",children:["Time: ",u]})]})]})]}),(0,mr.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,mr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Rate per day"}),(0,mr.jsxs)("span",{className:"font-semibold",children:["\u20b9",f]})]}),(0,mr.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mr.jsx)("span",{className:"text-gray-600",children:"Total days"}),(0,mr.jsxs)("span",{className:"font-semibold",children:[d," days"]})]}),(0,mr.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,mr.jsx)("span",{children:"Total Amount"}),(0,mr.jsxs)("span",{className:"text-blue-600",children:["\u20b9",h]})]})]}),(0,mr.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex gap-2",children:[(0,mr.jsx)(Tc,{className:"text-amber-600 flex-shrink-0",size:20}),(0,mr.jsx)("p",{className:"text-xs text-amber-800",children:"These dates will be blocked for all other customers once confirmed."})]})]}),(0,mr.jsxs)("div",{className:"px-6 pb-6 flex gap-3",children:[(0,mr.jsx)("button",{onClick:n,disabled:o,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition disabled:opacity-50",children:"Cancel"}),(0,mr.jsx)("button",{onClick:r,disabled:o,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition shadow-lg disabled:opacity-50",children:o?"Processing...":"Confirm Booking"})]})]})})},ru=e=>{let{isOpen:t,onClose:n,VechileId:i,vehicleType:s,userId:o,userRole:a,vehicleName:l="Vehicle",pricePerDay:u=1500,onBookingConfirm:d}=e;const h="owner"===a,p="customer"===a,m=h?"Availability Calendar":"Book Your Ride",f=h?"Confirm & Block Dates":"Proceed to Confirm Booking",[g,y]=(0,r.useState)(new Date),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),[k,N]=(0,r.useState)("09:00"),[_,j]=(0,r.useState)("18:00"),[A,C]=(0,r.useState)([]),[S,E]=(0,r.useState)([]),[T,I]=(0,r.useState)([]),[P,R]=(0,r.useState)([]),[D,L]=(0,r.useState)(!1),[M,O]=(0,r.useState)({type:"",text:""}),[B,F]=(0,r.useState)(!1),[z,U]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),[q,W]=(0,r.useState)(null),[K,G]=(0,r.useState)(null),[Z,Q]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(null),[X,$]=(0,r.useState)([]),[ee,te]=(0,r.useState)(new Date),[ne,re]=(0,r.useState)(!1),[ie,se]=(0,r.useState)("start"),oe=e=>{if(!e)return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},ae=e=>e?e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Select Date",le=e=>{const[t,n]=e.split(":");return"".concat(parseInt(t),".").concat(n)},ce=e=>e._id||e.id||e.notAvailabilityId||null,ue=async()=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce1 FETCHING VEHICLE AVAILABILITY (".concat(a.toUpperCase()," Calendar)")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\ude97 Vehicle ID:",i),console.log("\ud83c\udff7\ufe0f Vehicle Type:",s);const e="http://3.110.122.127:3000/getVehicleAvailability?vechileType=".concat(s,"&VechileId=").concat(i),t=await fetch(e),n=await t.json();if(console.log("\u2705 Raw API Response:",n),n.success&&n.availability){const e=n.availability.filter(e=>"Unavailable"===e.status).map(e=>e.date);E(e);const t=n.availability.filter(e=>"Unavailable"===e.status&&!e.isCustomerBooking).map(e=>e.date);I(t);const r=n.availability.filter(e=>"Unavailable"===e.status&&!0===e.isCustomerBooking).map(e=>e.date);R(r),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udcca AVAILABILITY SUMMARY (".concat(a.toUpperCase()," Calendar)")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udd12 Total Unavailable Dates:",e.length),console.log("\ud83d\udc64 Owner Blocked Dates:",t.length),console.log("\ud83e\uddd1 Customer Booked Dates:",r.length),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501")}}catch(GN){console.error("\u274c Failed to fetch availability",GN)}},de=e=>{localStorage.setItem("blocked_slots_"+i,JSON.stringify(e))},he=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n<t},pe=e=>{const t=oe(e);return P.includes(t)},me=e=>{const t=oe(e);return T.includes(t)},fe=e=>{const t=oe(e);if(S.includes(t))return!0;for(const n of A){const t=n.fromDate.split("T")[0],r=n.toDate.split("T")[0],[i,s,o]=t.split("-").map(Number),[a,l,c]=r.split("-").map(Number),u=new Date(i,s-1,o),d=new Date(a,l-1,c);if(u.setHours(0,0,0,0),d.setHours(0,0,0,0),e>=u&&e<=d)return!0}return!1},ge=e=>(null===v||void 0===v?void 0:v.getTime())===e.getTime()||(null===b||void 0===b?void 0:b.getTime())===e.getTime(),ye=e=>!(!v||!b)&&(e>=v&&e<=b),ve=()=>{x(null),w(null),F(!1),U(!1),H(!1),W(null),se("start")},xe=(e,t)=>{const n=[],[r,i,s]=e.split("T")[0].split("-").map(Number),[o,a,l]=t.split("T")[0].split("-").map(Number),c=new Date(r,i-1,s),u=new Date(o,a-1,l),d=new Date(c);for(;d<=u;)n.push(oe(d)),d.setDate(d.getDate()+1);return n};(0,r.useEffect)(()=>{if(t){ue(),h&&(()=>{const e=localStorage.getItem("blocked_slots_"+i);e&&C(JSON.parse(e))})();const e=setInterval(()=>{console.log("\ud83d\udd04 Auto-refresh: Loading ".concat(a," calendar...")),ue()},3e4);return G(e),()=>{e&&clearInterval(e)}}K&&clearInterval(K),ve()},[t]);const be=async e=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce4 ".concat(a.toUpperCase()," ").concat(h?"BLOCKING":"BOOKING"," DATES")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udccb Slot Data:",e);const t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");const n=new URLSearchParams;n.append("userId",o),n.append("vechileType",e.vehicleType),n.append("VechileId",e.VechileId),n.append("fromDate",e.fromDate),n.append("toDate",e.toDate),n.append("fromTime",e.fromTime),n.append("toTime",e.toTime),n.append("isNotAvailable","true"),n.append("bikeImages",""),n.append("isCustomerBooking",p?"true":"false"),console.log("\ud83d\udce4 Request Body:",Object.fromEntries(n));const r=await fetch("http://3.110.122.127:3000/createNotAvailability",{method:"POST",headers:t,body:n}),i=await r.json();if(console.log("\u2705 API Response:",i),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),r.ok&&i.data)return i.data;throw new Error(i.message||"Failed to create slot")}catch(el){throw console.error("\u274c API Error:",el),el}},we=async e=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\uddd1\ufe0f ".concat(a.toUpperCase()," DELETING BLOCKED DATES")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udd94 Slot ID:",e);const t=new URLSearchParams,n=await fetch("http://3.110.122.127:3000/deleteNotAvailability/".concat(e),{method:"DELETE",body:t}),r=await n.text();if(console.log("\u2705 Delete Response:",r),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),n.ok)return r;throw new Error("Failed to delete slot")}catch(el){throw console.error("\u274c DELETE API Error:",el),el}},ke=e=>{X.includes(e)?$(X.filter(t=>t!==e)):$([...X,e])},Ne=e=>{if(he(e))return void Ce("error","\u26a0\ufe0f Cannot select past dates");const t=fe(e),n=pe(e);if(n&&h)return console.log("\ud83d\udeab Owner attempted to select customer booked date:",oe(e)),void Ce("error","\u274c This date is booked by a customer. Cannot modify.");if(t&&p)me(e)?Ce("error","\u26a0\ufe0f This date is blocked by the owner"):Ce("error",n?"\u26a0\ufe0f This date is already booked by another customer":"\u26a0\ufe0f This date is unavailable");else{if(V&&t&&h){const t=A.filter(t=>{const n=new Date(t.fromDate.split("T")[0]),r=new Date(t.toDate.split("T")[0]);return!(e>=n&&e<=r)});return C(t),de(t),void Ce("success","Blocked date removed.")}if(t&&!q&&h)Ce("error","This date is already blocked by you.");else if(p){if("start"===ie)return x(e),w(null),se("end"),void Ce("success","\u2713 Pickup date selected. Now select return date.");if("end"===ie){if(!v)return void Ce("error","\u26a0\ufe0f Select pickup date first");if(e<v)return void Ce("error","\u26a0\ufe0f Return date cannot be before pickup");if(((e,t)=>{const n=new Date(e);for(;n<=t;){if(fe(n))return!0;n.setDate(n.getDate()+1)}return!1})(v,e))return void Ce("error","\u26a0\ufe0f Some dates in this range are unavailable");w(e),se(null),Ce("success","\u2713 Dates selected successfully!")}}else{if(!v)return x(e),void w(null);if(!b)return e<v?void Ce("error","End date cannot be before start date"):void w(e);x(e),w(null)}}},_e=()=>v&&b?Math.ceil((b.getTime()-v.getTime())/864e5)+1:0,je=()=>_e()*u,Ae=async()=>{if(v&&b)if(p)re(!0);else{L(!0);try{const e={vehicleType:s,VechileId:i,fromDate:oe(v),toDate:oe(b),fromTime:le(k),toTime:le(_)};if(q){const t=await(async(e,t)=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce4 ".concat(a.toUpperCase()," UPDATING BLOCKED DATES")),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udd94 Slot ID:",e),console.log("\ud83d\udccb New Data:",t);const n=new Headers;n.append("Content-Type","application/x-www-form-urlencoded");const r=new URLSearchParams;r.append("vechileType",t.vehicleType),r.append("VechileId",t.VechileId),r.append("fromDate",t.fromDate),r.append("toDate",t.toDate),r.append("fromTime",t.fromTime),r.append("toTime",t.toTime),r.append("isNotAvailable","true");const i=await fetch("http://3.110.122.127:3000/updateNotAvailability/".concat(e),{method:"PUT",headers:n,body:r}),s=await i.json();if(console.log("\u2705 Update Response:",s),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),i.ok)return s.data||s;throw new Error(s.message||"Failed to update slot")}catch(el){throw console.error("\u274c UPDATE API Error:",el),el}})(q,e),n=A.map(n=>ce(n)===q?c(c({},n),{},{fromDate:t.fromDate||e.fromDate,toDate:t.toDate||e.toDate,fromTime:t.fromTime||e.fromTime,toTime:t.toTime||e.toTime}):n);C(n),de(n),await ue(),Ce("success","\u2705 Dates updated successfully!"),ve()}else{const t=await be(e),n={_id:t._id,fromDate:t.fromDate,toDate:t.toDate,fromTime:t.fromTime,toTime:t.toTime,isNotAvailable:t.isNotAvailable,VechileId:t.VechileId,vechileType:t.vechileType,isCustomerBooking:!1},r=[...A,n];C(r),de(r),await ue(),Ce("success","\u2705 Dates blocked successfully! Now visible in all customer calendars."),ve()}}catch(el){Ce("error",el.message||"Failed to save.")}finally{L(!1)}}else Ce("error","Please select both start and end dates.")},Ce=(e,t)=>{O({type:e,text:t}),setTimeout(()=>O({type:"",text:""}),4e3)},Se=g.toLocaleDateString("en-US",{month:"long",year:"numeric"}),Ee=new Date(g.getFullYear(),g.getMonth()+1,0).getDate(),Te=new Date(g.getFullYear(),g.getMonth(),1).getDay(),Ie=(()=>{const e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){const r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0");e.push({value:"".concat(r,":").concat(i),label:"".concat(t%12||12,":").concat(i," ").concat(t>=12?"PM":"AM")})}return e})();return t?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,mr.jsxs)("div",{className:"bg-white w-full max-w-6xl rounded-2xl p-6 overflow-y-auto max-h-[90vh] shadow-xl",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mr.jsxs)("h2",{className:"text-2xl font-bold flex items-center",children:[(0,mr.jsx)(jr,{className:"mr-2 text-blue-600"}),m,p&&(0,mr.jsxs)("span",{className:"ml-3 text-lg font-normal text-gray-600",children:[l," \u2022 \u20b9",u,"/day"]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsxs)("button",{onClick:async()=>{console.log("\ud83d\udd04 Manual refresh triggered by ".concat(a)),L(!0),await ue(),L(!1),Ce("success","\u2705 Availability refreshed!")},disabled:D,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm font-semibold flex items-center gap-2",children:[(0,mr.jsx)(qa,{size:16,className:D?"animate-spin":""}),D?"Refreshing...":"Refresh"]}),h&&(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsx)("button",{onClick:()=>F(!B),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:(0,mr.jsx)(Wa,{size:24})}),B&&(0,mr.jsxs)("div",{className:"absolute right-0 top-12 bg-white shadow-lg rounded-lg border border-gray-200 w-40 z-50",children:[(0,mr.jsxs)("button",{onClick:()=>{U(!0),F(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2",children:[(0,mr.jsx)(Lc,{size:16}),"Edit"]}),(0,mr.jsxs)("button",{onClick:()=>{U(!0),F(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2 text-red-600",children:[(0,mr.jsx)(Ga,{size:16}),"Delete"]})]})]}),(0,mr.jsx)("button",{onClick:n,children:(0,mr.jsx)(hr,{size:24})})]})]}),M.text&&(0,mr.jsxs)("div",{className:"p-4 rounded-lg mb-4 flex items-center gap-3 ".concat("error"===M.type?"bg-red-100 text-red-800":"success"===M.type?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:["success"===M.type&&(0,mr.jsx)(Ua,{size:20}),"error"===M.type&&(0,mr.jsx)(Tc,{size:20}),(0,mr.jsx)("span",{className:"font-medium",children:M.text})]}),p&&(0,mr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,mr.jsxs)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition ".concat("start"===ie?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300"),onClick:()=>se("start"),children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,mr.jsx)(jr,{size:16}),"Pickup Date"]}),(0,mr.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ae(v)}),(0,mr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,mr.jsx)(Ha,{size:16,className:"text-gray-400"}),(0,mr.jsx)("input",{type:"time",value:k,onChange:e=>N(e.target.value),className:"text-sm border rounded px-2 py-1"})]})]}),(0,mr.jsxs)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition ".concat("end"===ie?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300"),onClick:()=>se("end"),children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,mr.jsx)(jr,{size:16}),"Return Date"]}),(0,mr.jsx)("div",{className:"text-lg font-bold text-gray-900",children:ae(b)}),(0,mr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,mr.jsx)(Ha,{size:16,className:"text-gray-400"}),(0,mr.jsx)("input",{type:"time",value:_,onChange:e=>j(e.target.value),className:"text-sm border rounded px-2 py-1"})]})]})]}),(0,mr.jsxs)("div",{className:"grid ".concat(h?"grid-cols-3":"grid-cols-1"," gap-6"),children:[(0,mr.jsxs)("div",{className:h?"col-span-2":"",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("button",{onClick:()=>y(new Date(g.getFullYear(),g.getMonth()-1)),children:(0,mr.jsx)(Ar,{})}),(0,mr.jsx)("h3",{className:"text-xl font-bold",children:Se}),(0,mr.jsx)("button",{onClick:()=>y(new Date(g.getFullYear(),g.getMonth()+1)),children:(0,mr.jsx)(Cr,{})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,mr.jsx)("div",{className:"text-center font-bold text-gray-600",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const e=[],t=0===Te?6:Te-1;for(let n=0;n<t;n++)e.push((0,mr.jsx)("div",{},"empty-"+n));for(let n=1;n<=Ee;n++){const t=new Date(g.getFullYear(),g.getMonth(),n),r=he(t),i=fe(t),s=pe(t),o=me(t),a=ge(t),l=ye(t);let c="h-12 rounded-lg transition relative font-medium flex items-center justify-center ";c+=r?"bg-gray-100 text-gray-400 cursor-not-allowed":i?p?s?"bg-orange-100 border-2 border-orange-400 text-orange-700 cursor-not-allowed relative":"bg-red-50 border-2 border-red-400 text-red-500 cursor-not-allowed relative":s?"bg-orange-100 border-2 border-orange-500 text-orange-700 relative cursor-not-allowed":"bg-red-100 border-2 border-red-500 text-red-700 relative hover:bg-red-200":a?"bg-black text-white border-2 border-black scale-110 shadow-lg z-10":l&&p?"bg-blue-100 text-blue-700 shadow-sm":a&&h?"bg-black text-white border-2 border-black":"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white hover:opacity-90 hover:scale-105 cursor-pointer",e.push((0,mr.jsxs)("button",{className:c,disabled:r||i&&!h,onClick:()=>Ne(t),title:r?"Past date":s?h?"Customer Booking (Cannot Edit)":"Booked by another customer":o?h?"Your Blocked Date":"Blocked by owner":i?"Blocked":"Available",children:[n,h&&s&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 40 40",children:[(0,mr.jsx)("circle",{cx:"20",cy:"20",r:"15",fill:"none",stroke:"#f97316",strokeWidth:"2"}),(0,mr.jsx)("text",{x:"20",y:"24",textAnchor:"middle",fill:"#f97316",fontSize:"16",fontWeight:"bold",children:"C"})]}),(0,mr.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white"})]}),h&&o&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 40 40",children:[(0,mr.jsx)("line",{x1:"6",y1:"6",x2:"34",y2:"34",stroke:"#dc2626",strokeWidth:"3",strokeLinecap:"round"}),(0,mr.jsx)("line",{x1:"34",y1:"6",x2:"6",y2:"34",stroke:"#dc2626",strokeWidth:"3",strokeLinecap:"round"})]}),(0,mr.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]}),p&&i&&(0,mr.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:(0,mr.jsx)(hr,{size:16,className:s?"text-orange-500":"text-red-400"})})]},n))}return e})()}),(0,mr.jsxs)("div",{className:"mt-6",children:[(0,mr.jsx)("button",{onClick:Ae,disabled:!v||!b||D,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-bold text-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition shadow-lg hover:shadow-xl",children:D?"Processing...":q?"Update Dates":h?"Confirm & Block Dates":"Confirm Booking"}),q&&h&&(0,mr.jsx)("button",{onClick:ve,className:"w-full mt-2 bg-gray-200 text-gray-700 py-2 px-6 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Cancel Edit"})]}),(0,mr.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,mr.jsx)("p",{className:"font-semibold mb-2 text-sm",children:"Legend:"}),(0,mr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-500 rounded"}),(0,mr.jsx)("span",{children:"Your Blocked Dates"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-500 rounded"}),(0,mr.jsx)("span",{children:"Customer Bookings"})]})]}),p&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] rounded"}),(0,mr.jsx)("span",{children:"Available"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-red-50 border-2 border-red-400 rounded relative",children:(0,mr.jsx)(hr,{size:12,className:"text-red-400 absolute inset-0 m-auto"})}),(0,mr.jsx)("span",{children:"Not Available"})]})]})]})]})]}),h&&(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"font-semibold",children:"Start Time"}),(0,mr.jsx)("select",{className:"w-full p-2 border rounded mb-3",value:k,onChange:e=>N(e.target.value),children:Ie.map(e=>(0,mr.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,mr.jsx)("label",{className:"font-semibold",children:"End Time"}),(0,mr.jsx)("select",{className:"w-full p-2 border rounded mb-4",value:_,onChange:e=>j(e.target.value),children:Ie.map(e=>(0,mr.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,mr.jsx)("button",{onClick:Ae,disabled:!v||!b||D,className:"w-full bg-blue-600 text-white p-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Saving...":q?"Update Dates":f}),q&&(0,mr.jsx)("button",{onClick:ve,className:"w-full mt-2 bg-gray-200 text-gray-700 p-3 rounded-lg font-semibold",children:"Cancel Edit"}),(0,mr.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,mr.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,mr.jsx)("strong",{children:"\ud83d\udccc Note:"})," Customer booked dates (orange) cannot be edited or deleted by owner. Auto-refreshes every 30 seconds."]})})]})]}),p&&v&&b&&(0,mr.jsx)("div",{className:"mt-6",children:(0,mr.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-200",children:[(0,mr.jsx)("h4",{className:"font-bold text-gray-800 mb-3",children:"Booking Summary"}),(0,mr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-gray-600",children:"Total Days"}),(0,mr.jsx)("p",{className:"text-lg font-bold text-gray-900",children:_e()})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-gray-600",children:"Rate/Day"}),(0,mr.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["\u20b9",u]})]}),(0,mr.jsxs)("div",{className:"col-span-2",children:[(0,mr.jsx)("p",{className:"text-gray-600",children:"Total Amount"}),(0,mr.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",je()]})]})]})]})}),h&&(A.length>0||P.length>0||T.length>0)&&(0,mr.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,mr.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-red-800",children:[T.length," Your Blocked Dates"]}),(0,mr.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Can edit/delete"})]}),(0,mr.jsxs)("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-orange-800",children:[P.length," Customer Bookings"]}),(0,mr.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Cannot edit/delete"})]}),(0,mr.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-green-800",children:[S.length," Total Blocked"]}),(0,mr.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Owner + Customer"})]})]}),h&&z&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[70vh] overflow-y-auto",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("h3",{className:"text-xl font-bold",children:"Manage Blocked Dates"}),(0,mr.jsx)("button",{onClick:()=>U(!1),children:(0,mr.jsx)(hr,{size:24})})]}),0===A.length?(0,mr.jsx)("p",{className:"text-gray-500",children:"No blocked dates available."}):(0,mr.jsx)("div",{className:"space-y-3",children:A.map((e,t)=>{const n=e.isCustomerBooking,r=e.fromDate.split("T")[0],i=e.toDate.split("T")[0],[s,o,a]=r.split("-").map(Number),[l,c,u]=i.split("-").map(Number),d=new Date(s,o-1,a),h=new Date(l,c-1,u);return(0,mr.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-center ".concat(n?"border-orange-300 bg-orange-50":"border-gray-200"),children:[(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("p",{className:"font-semibold",children:[ae(d)," - ",ae(h)]}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Time: ",e.fromTime," - ",e.toTime]}),n&&(0,mr.jsx)("p",{className:"text-xs text-orange-600 font-semibold mt-1",children:"\ud83e\uddd1 Customer Booking (Cannot Edit/Delete)"})]}),(0,mr.jsx)("div",{className:"flex gap-2",children:n?(0,mr.jsx)("div",{className:"px-4 py-2 bg-orange-200 text-orange-800 rounded-lg text-sm font-semibold",children:"Customer Booking"}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("button",{onClick:()=>(e=>{const t=ce(e);if(!t)return void Ce("error","Cannot edit: slot ID not found");if(e.isCustomerBooking)return console.log("\ud83d\udeab Attempted to edit customer booking:",e),void Ce("error","\u274c Cannot edit customer bookings! Customers must cancel their own bookings.");console.log("\u270f\ufe0f Opening edit modal for slot:",t),J(e),W(t),$([]);const n=e.fromDate.split("T")[0],[r,i,s]=n.split("-").map(Number),o=new Date(r,i-1,s);te(o),Q(!0),F(!1),U(!1)})(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,mr.jsx)(Lc,{size:16}),"Edit"]}),(0,mr.jsxs)("button",{onClick:()=>(async e=>{const t=ce(e);if(t){if(e.isCustomerBooking)return console.log("\ud83d\udeab Attempted to delete customer booking:",e),void Ce("error","\u274c Cannot delete customer bookings! Customers must cancel their own bookings.");if(window.confirm("Are you sure you want to delete this blocked date range?")){L(!0);try{console.log("\ud83d\uddd1\ufe0f Deleting slot:",t),await we(t);const e=A.filter(e=>ce(e)!==t);C(e),de(e),await ue(),Ce("success","\u2705 Blocked dates deleted successfully!"),F(!1),U(!1)}catch(el){Ce("error",el.message||"Failed to delete")}finally{L(!1)}}}else Ce("error","Cannot delete: slot ID not found")})(e),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[(0,mr.jsx)(Ga,{size:16}),"Delete"]})]})})]},t)})})]})}),h&&Z&&Y&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-2xl font-bold",children:"Edit Blocked Dates"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Select dates to remove from blocking. Click dates to toggle."})]}),(0,mr.jsx)("button",{onClick:()=>{Q(!1),J(null),W(null),$([])},children:(0,mr.jsx)(hr,{size:24})})]}),(0,mr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,mr.jsx)("p",{className:"font-semibold text-blue-900 mb-2",children:"Current Blocked Range:"}),(0,mr.jsxs)("p",{className:"text-blue-800",children:[(0,mr.jsx)("strong",{children:ae((()=>{const e=Y.fromDate.split("T")[0],[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)})())})," \u2192 ",(0,mr.jsx)("strong",{children:ae((()=>{const e=Y.toDate.split("T")[0],[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)})())})]}),(0,mr.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Time: ",Y.fromTime," - ",Y.toTime]})]}),(0,mr.jsx)("div",{className:"mb-6",children:(()=>{if(!Y)return null;const e=xe(Y.fromDate,Y.toDate),t=ee.toLocaleDateString("en-US",{month:"long",year:"numeric"}),n=new Date(ee.getFullYear(),ee.getMonth()+1,0).getDate(),r=new Date(ee.getFullYear(),ee.getMonth(),1).getDay(),i=[],s=0===r?6:r-1;for(let o=0;o<s;o++)i.push((0,mr.jsx)("div",{},"empty-edit-"+o));for(let o=1;o<=n;o++){const t=new Date(ee.getFullYear(),ee.getMonth(),o),n=oe(t),r=e.includes(n),s=X.includes(n);let a="h-12 rounded-lg transition relative font-medium flex items-center justify-center ";a+=r?s?"bg-green-500 text-white border-2 border-green-600 cursor-pointer hover:bg-green-600":"bg-red-100 border-2 border-red-500 text-red-700 cursor-pointer hover:bg-red-200":"bg-gray-100 text-gray-400 cursor-not-allowed",i.push((0,mr.jsxs)("button",{className:a,disabled:!r,onClick:()=>r&&ke(n),title:r?s?"Click to keep (will remain blocked)":"Click to remove (will become available)":"Not in range",children:[o,s&&(0,mr.jsx)(vc,{className:"absolute top-1 right-1",size:16})]},o))}return(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("button",{onClick:()=>te(new Date(ee.getFullYear(),ee.getMonth()-1)),children:(0,mr.jsx)(Ar,{})}),(0,mr.jsx)("h3",{className:"text-xl font-bold",children:t}),(0,mr.jsx)("button",{onClick:()=>te(new Date(ee.getFullYear(),ee.getMonth()+1)),children:(0,mr.jsx)(Cr,{})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,mr.jsx)("div",{className:"text-center font-bold text-gray-600 text-sm",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2",children:i})]})})()}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,mr.jsx)("p",{className:"font-semibold mb-3 text-sm",children:"How to use:"}),(0,mr.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-6 h-6 bg-red-100 border-2 border-red-500 rounded flex-shrink-0"}),(0,mr.jsxs)("span",{children:[(0,mr.jsx)("strong",{children:"Red dates:"})," Currently blocked. Click to mark for removal."]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded flex-shrink-0 flex items-center justify-center",children:(0,mr.jsx)(vc,{size:12,className:"text-white"})}),(0,mr.jsxs)("span",{children:[(0,mr.jsx)("strong",{children:"Green dates with \u2713:"})," Marked for removal (will become available for customers)."]})]})]})]}),X.length>0&&(0,mr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,mr.jsxs)("p",{className:"font-semibold text-green-900 mb-2",children:[X.length," date(s) selected for removal:"]}),(0,mr.jsx)("div",{className:"flex flex-wrap gap-2",children:X.sort().map(e=>{const[t,n,r]=e.split("-").map(Number),i=new Date(t,n-1,r);return(0,mr.jsx)("span",{className:"px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-medium",children:ae(i)},e)})})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:async()=>{if(Y&&q)if(0!==X.length){L(!0);try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u2702\ufe0f SPLITTING DATE RANGE"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501");const e=xe(Y.fromDate,Y.toDate);console.log("\ud83d\udcc5 Original range dates:",e),console.log("\ud83d\uddd1\ufe0f Dates to remove:",X);const t=e.filter(e=>!X.includes(e));if(console.log("\u2705 Remaining dates:",t),0===t.length){console.log("\ud83d\uddd1\ufe0f All dates removed - deleting entire slot"),await we(q);const e=A.filter(e=>ce(e)!==q);return C(e),de(e),await ue(),Ce("success","\u2705 All dates removed - slot deleted!"),Q(!1),J(null),W(null),void $([])}const n=[];let r=t[0],o=t[0];for(let i=1;i<t.length;i++){const[e,s,a]=t[i].split("-").map(Number),[l,c,u]=t[i-1].split("-").map(Number),d=new Date(e,s-1,a),h=new Date(l,c-1,u);1===Math.round((d.getTime()-h.getTime())/864e5)||(n.push({from:r,to:o}),r=t[i]),o=t[i]}n.push({from:r,to:o}),console.log("\ud83d\udcca Split into",n.length,"range(s):",n),console.log("\ud83d\uddd1\ufe0f Deleting original slot:",q),await we(q);const a=[];for(const u of n){console.log("\u2795 Creating new range:",u);const e={vehicleType:s,VechileId:i,fromDate:u.from,toDate:u.to,fromTime:Y.fromTime,toTime:Y.toTime},t=await be(e);a.push({_id:t._id,fromDate:t.fromDate,toDate:t.toDate,fromTime:t.fromTime,toTime:t.toTime,isNotAvailable:t.isNotAvailable,VechileId:t.VechileId,vechileType:t.vechileType,isCustomerBooking:!1})}const l=A.filter(e=>ce(e)!==q),c=[...l,...a];C(c),de(c),await ue(),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udf89 RANGE SPLIT COMPLETE!"),console.log("\u2705 Created",a.length,"new range(s)"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),Ce("success","\u2705 Dates updated! Split into ".concat(n.length," range(s).")),Q(!1),J(null),W(null),$([])}catch(el){console.error("\u274c Edit failed:",el),Ce("error",el.message||"Failed to update dates")}finally{L(!1)}}else Ce("error","Please select at least one date to remove");else Ce("error","No slot selected for editing")},disabled:0===X.length||D,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:D?"Processing...":"Remove ".concat(X.length," Date(s) & Update")}),(0,mr.jsx)("button",{onClick:()=>{Q(!1),J(null),W(null),$([])},disabled:D,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 disabled:opacity-50 transition",children:"Cancel"})]}),(0,mr.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,mr.jsxs)("p",{className:"text-xs text-yellow-800",children:[(0,mr.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," If you remove dates from the middle of a range, it will be split into multiple ranges. Removed dates will immediately become available for customer bookings."]})})]})})]})}),p&&(0,mr.jsx)(nu,{isOpen:ne,onClose:()=>re(!1),onConfirm:async()=>{L(!0),Ce("info","Processing booking...");const e={userId:o,vehicleId:i,vehicleType:s,vehicleName:l,startDate:oe(v),endDate:oe(b),startTime:k,endTime:_,totalDays:_e(),totalPrice:je(),pricePerDay:u};if(console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udfaf CUSTOMER CONFIRMING BOOKING"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udccb Booking Details:",e),d)return d(e),re(!1),L(!1),Ce("success","\u2713 Booking confirmed!"),void setTimeout(()=>{ve(),n()},2e3);try{const e={vehicleType:s,VechileId:i,fromDate:oe(v),toDate:oe(b),fromTime:le(k),toTime:le(_)};await be(e);console.log("\u2705 Booking created successfully!"),await ue(),Ce("success","\u2713 Booking confirmed! Dates blocked for everyone."),re(!1),setTimeout(()=>{ve(),n()},2e3)}catch(el){Ce("error","\u274c Booking failed. Please try again.")}finally{L(!1)}},loading:D,bookingDetails:{startDate:ae(v),endDate:ae(b),startTime:k,endTime:_,totalDays:_e(),totalPrice:je()},vehicleDetails:{vehicleName:l,vehicleType:s,pricePerDay:u}})]}):null},iu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADoElEQVR4AezYobPUMBAG8BsUEolEIpFIJJI/AYlEIpFIJBKJRCKRSCQSiUQi2R9Dys6+tE17d3BveDfdyWazu99+aZL2eutwzX83BP71Dfyv78DtmP0HIU9CnoW8CHn5W+hPQzfGh290T3/tuQN3oozHIc9DWoF3Q89F0u+FTfF8ENKKDfPpri0EFNUKfxgl6EczfCGD9KPhiAHHUQJmzjJR+EDaRRcEEJFz0XFkcIQAIOtZW3P+CMPHkLchr0PaHngVOtunaL+H1EuuuZzVd7G/RmAOSFEKVCgCXwOFLZpfF2JsH6KH2Pto83h0D3O5D1t+awR6s2RW3wSIAqMZuj6HlxixoU5XI7F1P00JlghYqwAm51DMtlk1w9HddIkRK0cOhAEr24b1OQK9pGavgg8DJUc55Eqmg8MBZrYN6XME6oxYv4CHkg44ySVndkUi94f0HgHr0ZmdEwC0BLLtGF0uGzvngAk721b1HoH7JcpM2YTFfHTXIYBIS6T4it3GZtseAa8AOeBL7pxYr3uhYq/C9Qh4r8mB5yTgLmSsip3HunqPQD0NvnUjT2O0PHOmip3HunqPgLWYnfM6zfZT6JVAxV7F6BFYDbokhx6BOuO/b+tZyq4zXrFXQXsE6m09J4G6aSv2LgJ1024+2lZR/zjUc79i//Gc0Xp3oB5tux7xM3jVXAlU7Op/pd8j4NzPa9E6Pcdd8OpQlyfsK0UuGXoEFF9fHfwhR2Qp15YxueoLI0zYW/IcegQkqI94M1UB+e0VueTM8V4Yc39InyPgNKgk7AXAQ4kXnOSQK7vAgpltQ/ocAcFmpCYF7tOKJcBni4gRK0eOgwEr24b1JQLWoz/uAHJCs+cTi02Y7Uu6Q0CM2OpnKdXTqPrM9pcICFL8u1C00UwXUBvb9x2zqkAz3ByMs5ltX+V6Hwear1auLRMi5pesEeDk4dK7E8YUalYVqND2XQgxNgQyMTHE3dVm2UVihAAQd6D3WcTYVrFh27eiGruZxCgBQGbNZxHgzmy2URHbCpdDX476v1i+TSS2EJCcuBuAfZXTKsQyU5RxQmczxgdphYs13qSNt35rh0nsIdBAFNkKsLwQanuAzqZ4PnxbXG2N86v2IRLHEKiAx/R3k7gUAsjvInFJBHaRuDQCm0lcIoElEp76xic5D4Ep/VFKb09cOc0umQD2SLR3McV7lrBPcukEFOpvpgehZwudbZLrQGAqtqfcEOjNyt+0/QQAAP//61EzwgAAAAZJREFUAwAduqJhelwQTwAAAABJRU5ErkJggg==",su=e=>{let{isOpen:t,onConfirm:n,onCancel:r}=e;return t?(0,mr.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-[320px] p-6 text-center",children:[(0,mr.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Are You Sure?"}),(0,mr.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Do you want to delete this vehicle?"}),(0,mr.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,mr.jsx)("button",{onClick:n,className:"flex items-center justify-center w-[80px] h-[36px] rounded-full bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white font-medium hover:opacity-90 transition-all",children:"Yes"}),(0,mr.jsx)("button",{onClick:r,className:"flex items-center justify-center w-[80px] h-[36px] rounded-full border border-gray-300 text-gray-600 font-medium hover:bg-gray-100 transition-all",children:"No"})]})]})}):null},ou=()=>{const e=ye(),{currentCity:t}=vr(),{cars:n,deleteCar:i}=Ia(),s=(0,r.useRef)(!1),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[m,f]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)("cars"),[k,N]=(0,r.useState)(""),[_,j]=(0,r.useState)(!1),[A,C]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),P=localStorage.getItem("userId")||"68f32259cea8a9fa88029262";(0,r.useEffect)(()=>{if(s.current)return void console.log("\u26a0\ufe0f Already fetched cars, skipping...");(async()=>{try{s.current=!0,p(!0),f("");let e=localStorage.getItem("userId");e&&24===e.length&&/^[a-f0-9]{24}$/i.test(e)||(e="68f32259cea8a9fa88029262"),console.log("\ud83d\ude97 Fetching cars for user:",e);const n=await ho.car.getMyVehicles(e),r=n.data||n;let i=[];r.data&&r.data.cars?i=r.data.cars:r.cars?i=r.cars:Array.isArray(r)&&(i=r),console.log("\u2705 Found ".concat(i.length," cars"));const o=i.map(e=>{var n;const r=[e.pickupArea,e.pickupCity,e.pickupCityState,e.pickupCityPinCode].filter(Boolean),i=r.length>0?r.join(", "):t;return{_id:e._id,id:e._id,name:"".concat(e.CarName," ").concat(e.CarModel),number:e.CarNumber||"Unknown",contactNumber:e.contactNumber||"unknown",contactName:e.contactName||"unknown",price:e.RentPerHour||"0",description:e.description||"No description",kmDriven:e.KmDriven||e.kmDriven||"unknown",transmission:e.transmissionType||e.transmission||"Manual",fuel:e.fuelType||e.fuel||"Petrol",seats:"".concat(e.Carseater||5," Seaters"),location:i,rating:(null===(n=e.rating)||void 0===n?void 0:n.toString())||"4.0",available:!1!==e.Available&&!1!==e.isAvailable,image:e.carImages&&e.carImages.length>0?e.carImages[0]:Ea,Status:e.Status||e.status||"pending",status:e.Status||e.status||"pending"}});d(o)}catch(GN){var e,n;console.error("\u274c Error fetching cars:",GN),s.current=!1;const r=(null===GN||void 0===GN||null===(e=GN.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||(null===GN||void 0===GN?void 0:GN.message)||"Failed to fetch cars";f(r)}finally{p(!1)}})()},[]),(0,r.useEffect)(()=>{const e=()=>x(null);if(null!==v)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[v]),(0,r.useEffect)(()=>{if(g){const e=setTimeout(()=>y(""),5e3);return()=>clearTimeout(e)}},[g]);const R=(0,r.useMemo)(()=>[...n.map(e=>({name:"".concat(e.carName," ").concat(e.model),number:e.carNumber||"Unknown",price:e.rentPrice,transmission:e.transmission,fuel:e.fuel,seats:"5 Seaters",location:"".concat(e.city,", ").concat(e.street),rating:e.rating.toString(),available:!0,image:e.photos[0]||Ea,id:e.id,contactName:e.ownerName,contactNumber:e.contactNumber||"N/A",Status:"pending",status:"pending"})),...u],[n,u]),D=e=>{const t=(e.Status||e.status||"").toLowerCase().trim();return{status:t,isPending:"pending"===t,isApproved:"verified"===t||"approved"===t}},L=R.filter(e=>e.name.toLowerCase().includes(k.toLowerCase()));return h&&0===u.length?(0,mr.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,mr.jsx)(za,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,mr.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading cars..."})]}):(0,mr.jsxs)("div",{children:[g&&(0,mr.jsx)("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in",children:g}),m&&(0,mr.jsx)("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",children:m}),(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-stretch md:items-center mb-6 gap-4",children:[(0,mr.jsxs)("div",{className:"flex items-center w-full md:w-[300px] h-[50px] border rounded-lg px-3 bg-white cursor-pointer border-2 border-transparent hover:border-blue-500 hover:shadow-xl transition-all duration-200",children:[(0,mr.jsx)("img",{src:fc,alt:"Dropdown Logo",className:"w-[24px] h-[24px]"}),(0,mr.jsxs)("select",{className:"flex-1 ml-2 border-none outline-none text-sm bg-transparent",value:b,onChange:t=>{const n=t.target.value;w(n),"bikes"===n&&e("/listed-bike")},children:[(0,mr.jsx)("option",{value:"cars",children:"Listed Cars"}),(0,mr.jsx)("option",{value:"bikes",children:"Listed Bikes"})]})]}),(0,mr.jsxs)("div",{className:"flex gap-2 w-full md:w-auto mt-6",children:[(0,mr.jsxs)("div",{className:"relative flex-1 md:w-[300px] h-[40px] transition-all duration-200 rounded-full",children:[(0,mr.jsx)("img",{src:iu,alt:"Search",className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 pointer-events-none"}),(0,mr.jsx)("input",{type:"text",placeholder:"Search Cars...",value:k,onChange:e=>N(e.target.value),className:"w-full h-full rounded-full border pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer border-2 border-transparent hover:border-blue-500 hover:shadow-xl transition-all duration-200"})]}),(0,mr.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white text-lm font-semibold px-4 py-1 rounded-md hover:opacity-100 transition-all",children:[(0,mr.jsx)("img",{src:Rr,alt:"Filter",className:"w-6 h-4"})," Filter"]})]})]}),(0,mr.jsx)("div",{className:"flex flex-col pb-16",children:0===L.length?(0,mr.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,mr.jsx)("p",{className:"text-lg mb-2",children:"No cars found"}),(0,mr.jsx)("p",{className:"text-sm",children:k?"Try adjusting your search":"Start by adding your first car"})]}):L.map((t,n)=>{const i=!t.available,s=t._id||t.id,{isPending:o,isApproved:l}=D(t);return(0,mr.jsxs)(r.Fragment,{children:[(0,mr.jsxs)("div",{onClick:()=>(e=>{const{isApproved:t}=D(e)})(t),className:"relative flex flex-col md:flex-row bg-white rounded-xl shadow-sm \n                    transition-all duration-300 overflow-hidden\n                    border-2 border-transparent hover:border-blue-500 hover:shadow-xl\n                    p-4 gap-4 w-full max-w-4xl\n                    ".concat(l?"cursor-pointer":"opacity-60"),children:[(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[(0,mr.jsx)("div",{className:"w-300px md:w-[300px] h-[250px] flex-shrink-0 rounded-lg overflow-hidden bg-gray-100 rounded-2xl",children:(0,mr.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300 rounded-2xl",onError:e=>{e.currentTarget.src=Ea}})}),(0,mr.jsxs)("div",{className:"flex flex-col flex-1 font-medium gap-2",children:[(0,mr.jsx)("h3",{className:"font-bold text-xl text-gray-900 truncate",children:t.name}),(0,mr.jsxs)("p",{className:"font-bold text-2xl mt-0.5 mb-0.5",children:["\u20b9",t.price,(0,mr.jsx)("span",{className:"text-gray-500 font-normal text-sm",children:"/hr"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6",alt:"Transmission"}),(0,mr.jsx)("span",{children:t.transmission})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:gc,className:"w-6 h-6",alt:"Seats"}),(0,mr.jsx)("span",{children:t.seats})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:wa,className:"w-5 h-5",alt:"Fuel"}),(0,mr.jsx)("span",{children:t.fuel})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:Yo,className:"w-5 h-5",alt:"Location"}),(0,mr.jsx)("span",{className:"text-xs",children:t.location})]}),o&&(0,mr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md px-3 py-2 mt-2",children:(0,mr.jsx)("p",{className:"text-yellow-800 text-sm font-medium text-center",children:"Your car is under verification"})}),l&&(0,mr.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md px-3 py-2 mt-2",children:(0,mr.jsx)("p",{className:"text-green-800 text-sm font-medium text-center",children:"Your car is approved"})}),(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mt-3 w-full",children:[(0,mr.jsx)("button",{onClick:e=>((e,t)=>{t.stopPropagation();const{isApproved:n}=D(e);n&&(I(e),E(!0))})(t,e),disabled:h||!l,className:"px-4 py-1.5 rounded-lg text-sm font-semibold shadow-sm \n                            bg-red-100 text-red-700 border border-red-300 \n                            hover:bg-red-200 hover:shadow-md transition-all duration-200\n                            ".concat(l?"":"opacity-50 cursor-not-allowed bg-gray-200 text-gray-500 border-gray-300","\n                            disabled:opacity-50 disabled:cursor-not-allowed"),children:i?"Manage Unavailability":"Add Not Available Slot +"}),(0,mr.jsx)("button",{onClick:n=>{if(n.stopPropagation(),!l)return;const r=t._id||t.id;console.log("\ud83d\ude97 Navigating to car history, ID:",r),e("/vehicle-history/".concat(r),{state:{vehicleData:t,vehicleType:"car"}})},disabled:!l,className:"flex items-center justify-center bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white text-sm font-semibold px-4 py-1.5 rounded-lg shadow-md hover:opacity-90 hover:shadow-lg transition-all duration-200\n                            ".concat(l?"":"opacity-50 cursor-not-allowed bg-gray-400"),children:"View Booking History"})]})]}),(0,mr.jsxs)("div",{className:"absolute top-4 right-4 z-10",children:[(0,mr.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full transition",onClick:e=>((e,t)=>{t.stopPropagation(),x(v===e?null:e)})(n,e),children:(0,mr.jsx)("span",{className:"text-2xl",children:"\u22ee"})}),v===n&&(0,mr.jsxs)("div",{className:"absolute right-0 mt-1 bg-white border rounded-lg shadow-lg min-w-[150px] overflow-hidden",children:[(0,mr.jsx)("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-2 transition-all duration-200\n                              ".concat(l?"":"opacity-50 cursor-not-allowed"),onClick:n=>{n.stopPropagation(),(t=>{const{isApproved:n}=D(t);if(!n)return;const r=t._id||t.id;r?(console.log("\u270f\ufe0f Editing vehicle:",t.name,"ID:",r),e("/Car-Details/".concat(r),{state:{carData:t,openEditForm:!0}}),x(null)):console.error("\u274c No vehicle ID found for:",t.name)})(t)},disabled:!l,children:"\u270f\ufe0f Edit"}),(0,mr.jsx)("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-2 text-red-600 transition-all duration-200",onClick:e=>{var n;e.stopPropagation(),n=t,console.log("\ud83d\uddd1\ufe0f Preparing to delete vehicle:",n.name),c(n),a(!0),x(null)},disabled:A===s,children:A===s?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(za,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,mr.jsx)(mr.Fragment,{children:"\ud83d\uddd1\ufe0f Delete"})})]})]})]}),i&&l&&(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,mr.jsx)("div",{className:"bg-red-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg",children:"UNAVAILABLE"})})]}),n<L.length-1&&(0,mr.jsx)("div",{className:"w-full max-w-4xl h-px bg-gray-200 my-4"})]},s||"car-".concat(n))})}),_&&(0,mr.jsx)(Er,{onApply:()=>j(!1)}),S&&T&&P&&(0,mr.jsx)(ru,{isOpen:S,onClose:()=>{E(!1),I(null),f("")},VechileId:T._id||T.id||"",vehicleType:"Car",userId:P,userRole:"owner"}),o&&l&&(0,mr.jsx)(su,{isOpen:o,onConfirm:()=>(async e=>{const t=e._id||e.id;if(!t)return f("Cannot delete vehicle without ID"),a(!1),void c(null);try{C(t),console.log("\ud83d\uddd1\ufe0f Deleting car with ID:",t),await ho.car.deleteCarById(t),console.log("\u2705 Car deleted successfully"),d(u.filter(e=>(e._id||e.id)!==t)),i(t),y("".concat(e.name," deleted successfully!")),f("")}catch(m){var n,r;console.error("\u274c Error deleting car:",m);const i=(null===m||void 0===m||null===(n=m.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||(null===m||void 0===m?void 0:m.message)||"Failed to delete vehicle. Please try again.";f("Failed to delete ".concat(e.name,". ").concat(i))}finally{C(null),x(null),a(!1),c(null)}})(l),onCancel:()=>{a(!1),c(null)}})]})},au=e=>{let{isOpen:t,onClose:n,VechileId:i,vehicleType:s,userId:o}=e;const[a,l]=(0,r.useState)(new Date),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)("06:00"),[g,y]=(0,r.useState)("18:00"),[v,x]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[k,N]=(0,r.useState)([]),[_,j]=(0,r.useState)([]),[A,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)({type:"",text:""}),[T,I]=(0,r.useState)(!1),[P,R]=(0,r.useState)(!1),[D,L]=(0,r.useState)(!1),[M,O]=(0,r.useState)(null),[B,F]=(0,r.useState)(null),[z,U]=(0,r.useState)(!1),[V,H]=(0,r.useState)(null),[q,W]=(0,r.useState)([]),[K,G]=(0,r.useState)(new Date),Z=e=>{if(!e)return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},Q=e=>e?e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Select Date",Y=e=>{const[t,n]=e.split(":");return"".concat(parseInt(t),".").concat(n)},J=e=>e._id||e.id||e.notAvailabilityId||null,X=async()=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce1 FETCHING VEHICLE AVAILABILITY (Owner Calendar)"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\ude97 Vehicle ID:",i),console.log("\ud83c\udff7\ufe0f Vehicle Type:",s);const e="http://3.110.122.127:3000/getVehicleAvailability?vechileType=".concat(s,"&VechileId=").concat(i),t=await fetch(e),n=await t.json();if(console.log("\u2705 Raw API Response:",n),n.success&&n.availability){const e=n.availability.filter(e=>"Unavailable"===e.status).map(e=>e.date);w(e);const t=n.availability.filter(e=>"Unavailable"===e.status&&!e.isCustomerBooking).map(e=>e.date);N(t);const r=n.availability.filter(e=>"Unavailable"===e.status&&!0===e.isCustomerBooking).map(e=>e.date);j(r),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udcca AVAILABILITY SUMMARY (Owner Calendar)"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udd12 Total Unavailable Dates:",e.length),console.log("   All Unavailable:",e),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udc64 Owner Blocked Dates:",t.length),console.log("   Owner Dates:",t),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83e\uddd1 Customer Booked Dates:",r.length),console.log("   Customer Dates:",r),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501")}}catch(GN){console.error("\u274c Failed to fetch availability",GN)}},$=e=>{localStorage.setItem("blocked_slots_"+i,JSON.stringify(e))},ee=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n<t},te=e=>{const t=Z(e);return _.includes(t)},ne=e=>{const t=Z(e);return k.includes(t)},re=e=>{const t=Z(e);if(b.includes(t))return!0;for(const n of v){const t=n.fromDate.split("T")[0],r=n.toDate.split("T")[0],[i,s,o]=t.split("-").map(Number),[a,l,c]=r.split("-").map(Number),u=new Date(i,s-1,o),d=new Date(a,l-1,c);if(u.setHours(0,0,0,0),d.setHours(0,0,0,0),e>=u&&e<=d)return!0}return!1},ie=()=>{d(null),p(null),I(!1),R(!1),L(!1),O(null)},se=(e,t)=>{const n=[],[r,i,s]=e.split("T")[0].split("-").map(Number),[o,a,l]=t.split("T")[0].split("-").map(Number),c=new Date(r,i-1,s),u=new Date(o,a-1,l),d=new Date(c);for(;d<=u;)n.push(Z(d)),d.setDate(d.getDate()+1);return n};(0,r.useEffect)(()=>{if(t){X(),(()=>{const e=localStorage.getItem("blocked_slots_"+i);e&&x(JSON.parse(e))})();const e=setInterval(()=>{console.log("\ud83d\udd04 Auto-refresh: Loading owner calendar..."),X()},3e4);return F(e),()=>{e&&clearInterval(e)}}B&&clearInterval(B),ie()},[t]);const oe=async e=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce4 OWNER BLOCKING DATES"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udccb Slot Data:",e);const t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");const n=new URLSearchParams;n.append("userId",o),n.append("vechileType",e.vehicleType),n.append("VechileId",e.VechileId),n.append("fromDate",e.fromDate),n.append("toDate",e.toDate),n.append("fromTime",e.fromTime),n.append("toTime",e.toTime),n.append("isNotAvailable","true"),n.append("bikeImages",""),n.append("isCustomerBooking","false"),console.log("\ud83d\udce4 Request Body:",Object.fromEntries(n));const r=await fetch("http://3.110.122.127:3000/createNotAvailability",{method:"POST",headers:t,body:n}),i=await r.json();if(console.log("\u2705 API Response:",i),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udf89 OWNER DATES BLOCKED!"),console.log("\ud83d\udcc5 From:",e.fromDate,"To:",e.toDate),console.log("\ud83d\udd12 These dates are now BLOCKED in:"),console.log("   \u2705 Owner Calendar"),console.log("   \u2705 All Customer Calendars"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),r.ok&&i.data)return i.data;throw new Error(i.message||"Failed to create slot")}catch(el){throw console.error("\u274c API Error:",el),el}},ae=async e=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\uddd1\ufe0f OWNER DELETING BLOCKED DATES"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udd94 Slot ID:",e);const t=new URLSearchParams,n=await fetch("http://3.110.122.127:3000/deleteNotAvailability/".concat(e),{method:"DELETE",body:t}),r=await n.text();if(console.log("\u2705 Delete Response:",r),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),n.ok)return r;throw new Error("Failed to delete slot")}catch(el){throw console.error("\u274c DELETE API Error:",el),el}},le=e=>{q.includes(e)?W(q.filter(t=>t!==e)):W([...q,e])},ce=e=>{if(ee(e))return;const t=re(e),n=te(e);if(n)return console.log("\ud83d\udeab Owner attempted to select customer booked date:",Z(e)),void ue("error","\u274c This date is booked by a customer. Cannot modify.");if(D&&t){const t=v.filter(t=>{const n=new Date(t.fromDate.split("T")[0]),r=new Date(t.toDate.split("T")[0]);return!(e>=n&&e<=r)});return x(t),$(t),void ue("success","Blocked date removed.")}if(!t||M){if(!u)return d(e),void p(null);if(!h)return e<u?void ue("error","End date cannot be before start date"):void p(e);d(e),p(null)}else ue("error",n?"This date is booked by a customer.":"This date is already blocked by you.")},ue=(e,t)=>{E({type:e,text:t}),setTimeout(()=>E({type:"",text:""}),4e3)},de=a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),he=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),pe=new Date(a.getFullYear(),a.getMonth(),1).getDay(),me=(()=>{const e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){const r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0");e.push({value:"".concat(r,":").concat(i),label:"".concat(t%12||12,":").concat(i," ").concat(t>=12?"PM":"AM")})}return e})();return t?(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,mr.jsxs)("div",{className:"bg-white w-full max-w-6xl rounded-2xl p-6 overflow-y-auto max-h-[90vh] shadow-xl",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mr.jsxs)("h2",{className:"text-2xl font-bold flex items-center",children:[(0,mr.jsx)(jr,{className:"mr-2 text-blue-600"}),"Manage Vehicle Availability"]}),(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsxs)("button",{onClick:async()=>{console.log("\ud83d\udd04 Manual refresh triggered by owner"),C(!0),await X(),C(!1),ue("success","\u2705 Availability refreshed!")},disabled:A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm font-semibold flex items-center gap-2",children:[(0,mr.jsx)(qa,{size:16,className:A?"animate-spin":""}),A?"Refreshing...":"Refresh"]}),(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsx)("button",{onClick:()=>I(!T),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:(0,mr.jsx)(Wa,{size:24})}),T&&(0,mr.jsxs)("div",{className:"absolute right-0 top-12 bg-white shadow-lg rounded-lg border border-gray-200 w-40 z-50",children:[(0,mr.jsxs)("button",{onClick:()=>{R(!0),I(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2",children:[(0,mr.jsx)(Lc,{size:16}),"Edit"]}),(0,mr.jsxs)("button",{onClick:()=>{R(!0),I(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2 text-red-600",children:[(0,mr.jsx)(Ga,{size:16}),"Delete"]})]})]}),(0,mr.jsx)("button",{onClick:n,children:(0,mr.jsx)(hr,{size:24})})]})]}),S.text&&(0,mr.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat("error"===S.type?"bg-red-100 text-red-800":"success"===S.type?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:S.text}),(0,mr.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,mr.jsxs)("div",{className:"col-span-2",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("button",{onClick:()=>l(new Date(a.getFullYear(),a.getMonth()-1)),children:(0,mr.jsx)(Ar,{})}),(0,mr.jsx)("h3",{className:"text-xl font-bold",children:de}),(0,mr.jsx)("button",{onClick:()=>l(new Date(a.getFullYear(),a.getMonth()+1)),children:(0,mr.jsx)(Cr,{})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,mr.jsx)("div",{className:"text-center font-bold text-gray-600",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const e=[],t=0===pe?6:pe-1;for(let n=0;n<t;n++)e.push((0,mr.jsx)("div",{},"empty-"+n));for(let n=1;n<=he;n++){const t=new Date(a.getFullYear(),a.getMonth(),n),r=ee(t),i=re(t),s=te(t),o=ne(t),l=(null===u||void 0===u?void 0:u.getTime())===t.getTime()||(null===h||void 0===h?void 0:h.getTime())===t.getTime();let c="h-12 rounded-lg transition relative font-medium flex items-center justify-center ";c+=r?"bg-gray-100 text-gray-400 cursor-not-allowed":s?"bg-orange-100 border-2 border-orange-500 text-orange-700 relative cursor-not-allowed":o||i?"bg-red-100 border-2 border-red-500 text-red-700 relative hover:bg-red-200":l?"bg-black text-white border-2 border-black":"bg-gradient-to-r from-[#0B0E92] to-[#69A6F0] text-white hover:opacity-90",e.push((0,mr.jsxs)("button",{className:c,disabled:r||s,onClick:()=>ce(t),title:s?"Customer Booking (Cannot Edit)":o?"Your Blocked Date":i?"Blocked":"Available",children:[n,s&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 40 40",children:[(0,mr.jsx)("circle",{cx:"20",cy:"20",r:"15",fill:"none",stroke:"#f97316",strokeWidth:"2"}),(0,mr.jsx)("text",{x:"20",y:"24",textAnchor:"middle",fill:"#f97316",fontSize:"16",fontWeight:"bold",children:"C"})]}),(0,mr.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white"})]}),o&&(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 40 40",children:[(0,mr.jsx)("line",{x1:"6",y1:"6",x2:"34",y2:"34",stroke:"#dc2626",strokeWidth:"3",strokeLinecap:"round"}),(0,mr.jsx)("line",{x1:"34",y1:"6",x2:"6",y2:"34",stroke:"#dc2626",strokeWidth:"3",strokeLinecap:"round"})]}),(0,mr.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]})]},n))}return e})()}),(0,mr.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,mr.jsx)("p",{className:"font-semibold mb-2 text-sm",children:"Legend:"}),(0,mr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-500 rounded"}),(0,mr.jsx)("span",{children:"Your Blocked Dates"})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-500 rounded"}),(0,mr.jsx)("span",{children:"Customer Bookings"})]})]})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"font-semibold",children:"Start Time"}),(0,mr.jsx)("select",{className:"w-full p-2 border rounded mb-3",value:m,onChange:e=>f(e.target.value),children:me.map(e=>(0,mr.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,mr.jsx)("label",{className:"font-semibold",children:"End Time"}),(0,mr.jsx)("select",{className:"w-full p-2 border rounded mb-4",value:g,onChange:e=>y(e.target.value),children:me.map(e=>(0,mr.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,mr.jsx)("button",{onClick:async()=>{if(u&&h){C(!0);try{const e={vehicleType:s,VechileId:i,fromDate:Z(u),toDate:Z(h),fromTime:Y(m),toTime:Y(g)};if(M){const t=await(async(e,t)=>{try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83d\udce4 OWNER UPDATING BLOCKED DATES"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udd94 Slot ID:",e),console.log("\ud83d\udccb New Data:",t);const n=new Headers;n.append("Content-Type","application/x-www-form-urlencoded");const r=new URLSearchParams;r.append("vechileType",t.vehicleType),r.append("VechileId",t.VechileId),r.append("fromDate",t.fromDate),r.append("toDate",t.toDate),r.append("fromTime",t.fromTime),r.append("toTime",t.toTime),r.append("isNotAvailable","true");const i=await fetch("http://3.110.122.127:3000/updateNotAvailability/".concat(e),{method:"PUT",headers:n,body:r}),s=await i.json();if(console.log("\u2705 Update Response:",s),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),i.ok)return s.data||s;throw new Error(s.message||"Failed to update slot")}catch(el){throw console.error("\u274c UPDATE API Error:",el),el}})(M,e),n=v.map(n=>J(n)===M?c(c({},n),{},{fromDate:t.fromDate||e.fromDate,toDate:t.toDate||e.toDate,fromTime:t.fromTime||e.fromTime,toTime:t.toTime||e.toTime}):n);x(n),$(n),await X(),ue("success","\u2705 Dates updated successfully!"),ie()}else{const t=await oe(e),n={_id:t._id,fromDate:t.fromDate,toDate:t.toDate,fromTime:t.fromTime,toTime:t.toTime,isNotAvailable:t.isNotAvailable,VechileId:t.VechileId,vechileType:t.vechileType,isCustomerBooking:!1},r=[...v,n];x(r),$(r),await X(),ue("success","\u2705 Dates blocked successfully! Now visible in all customer calendars."),ie()}}catch(el){ue("error",el.message||"Failed to save.")}finally{C(!1)}}else ue("error","Please select both start and end dates.")},disabled:!u||!h||A,className:"w-full bg-blue-600 text-white p-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Saving...":M?"Update Dates":"Confirm & Block Dates"}),M&&(0,mr.jsx)("button",{onClick:ie,className:"w-full mt-2 bg-gray-200 text-gray-700 p-3 rounded-lg font-semibold",children:"Cancel Edit"}),(0,mr.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,mr.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,mr.jsx)("strong",{children:"\ud83d\udccc Note:"})," Customer booked dates (orange) cannot be edited or deleted by owner. Customers must cancel their own bookings. Auto-refreshes every 30 seconds."]})})]})]}),(v.length>0||_.length>0||k.length>0)&&(0,mr.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,mr.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-red-800",children:[k.length," Your Blocked Dates"]}),(0,mr.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Can edit/delete"})]}),(0,mr.jsxs)("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-orange-800",children:[_.length," Customer Bookings"]}),(0,mr.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Cannot edit/delete"})]}),(0,mr.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,mr.jsxs)("p",{className:"font-bold text-green-800",children:[b.length," Total Blocked"]}),(0,mr.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Owner + Customer"})]})]}),P&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[70vh] overflow-y-auto",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("h3",{className:"text-xl font-bold",children:"Manage Blocked Dates"}),(0,mr.jsx)("button",{onClick:()=>R(!1),children:(0,mr.jsx)(hr,{size:24})})]}),0===v.length?(0,mr.jsx)("p",{className:"text-gray-500",children:"No blocked dates available."}):(0,mr.jsx)("div",{className:"space-y-3",children:v.map((e,t)=>{const n=e.isCustomerBooking,r=e.fromDate.split("T")[0],i=e.toDate.split("T")[0],[s,o,a]=r.split("-").map(Number),[l,c,u]=i.split("-").map(Number),d=new Date(s,o-1,a),h=new Date(l,c-1,u);return(0,mr.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-center ".concat(n?"border-orange-300 bg-orange-50":"border-gray-200"),children:[(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("p",{className:"font-semibold",children:[Q(d)," - ",Q(h)]}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Time: ",e.fromTime," - ",e.toTime]}),n&&(0,mr.jsx)("p",{className:"text-xs text-orange-600 font-semibold mt-1",children:"\ud83e\uddd1 Customer Booking (Cannot Edit/Delete)"})]}),(0,mr.jsx)("div",{className:"flex gap-2",children:n?(0,mr.jsx)("div",{className:"px-4 py-2 bg-orange-200 text-orange-800 rounded-lg text-sm font-semibold",children:"Customer Booking"}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("button",{onClick:()=>(e=>{const t=J(e);if(!t)return void ue("error","Cannot edit: slot ID not found");if(e.isCustomerBooking)return console.log("\ud83d\udeab Attempted to edit customer booking:",e),void ue("error","\u274c Cannot edit customer bookings! Customers must cancel their own bookings.");console.log("\u270f\ufe0f Opening edit modal for slot:",t),H(e),O(t),W([]);const n=e.fromDate.split("T")[0],[r,i,s]=n.split("-").map(Number),o=new Date(r,i-1,s);G(o),U(!0),I(!1),R(!1)})(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,mr.jsx)(Lc,{size:16}),"Edit"]}),(0,mr.jsxs)("button",{onClick:()=>(async e=>{const t=J(e);if(t){if(e.isCustomerBooking)return console.log("\ud83d\udeab Attempted to delete customer booking:",e),void ue("error","\u274c Cannot delete customer bookings! Customers must cancel their own bookings.");if(window.confirm("Are you sure you want to delete this blocked date range?")){C(!0);try{console.log("\ud83d\uddd1\ufe0f Deleting owner blocked slot:",t),await ae(t);const e=v.filter(e=>J(e)!==t);x(e),$(e),await X(),ue("success","\u2705 Blocked dates deleted successfully!"),I(!1),R(!1)}catch(el){ue("error",el.message||"Failed to delete")}finally{C(!1)}}}else ue("error","Cannot delete: slot ID not found")})(e),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[(0,mr.jsx)(Ga,{size:16}),"Delete"]})]})})]},t)})})]})}),z&&V&&(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h3",{className:"text-2xl font-bold",children:"Edit Blocked Dates"}),(0,mr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Select dates to remove from blocking. Click dates to toggle."})]}),(0,mr.jsx)("button",{onClick:()=>{U(!1),H(null),O(null),W([])},children:(0,mr.jsx)(hr,{size:24})})]}),(0,mr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,mr.jsx)("p",{className:"font-semibold text-blue-900 mb-2",children:"Current Blocked Range:"}),(0,mr.jsxs)("p",{className:"text-blue-800",children:[(0,mr.jsx)("strong",{children:Q((()=>{const e=V.fromDate.split("T")[0],[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)})())})," \u2192 ",(0,mr.jsx)("strong",{children:Q((()=>{const e=V.toDate.split("T")[0],[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)})())})]}),(0,mr.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["Time: ",V.fromTime," - ",V.toTime]})]}),(0,mr.jsx)("div",{className:"mb-6",children:(()=>{if(!V)return null;const e=se(V.fromDate,V.toDate),t=K.toLocaleDateString("en-US",{month:"long",year:"numeric"}),n=new Date(K.getFullYear(),K.getMonth()+1,0).getDate(),r=new Date(K.getFullYear(),K.getMonth(),1).getDay(),i=[],s=0===r?6:r-1;for(let o=0;o<s;o++)i.push((0,mr.jsx)("div",{},"empty-edit-"+o));for(let o=1;o<=n;o++){const t=new Date(K.getFullYear(),K.getMonth(),o),n=Z(t),r=e.includes(n),s=q.includes(n);let a="h-12 rounded-lg transition relative font-medium flex items-center justify-center ";a+=r?s?"bg-green-500 text-white border-2 border-green-600 cursor-pointer hover:bg-green-600":"bg-red-100 border-2 border-red-500 text-red-700 cursor-pointer hover:bg-red-200":"bg-gray-100 text-gray-400 cursor-not-allowed",i.push((0,mr.jsxs)("button",{className:a,disabled:!r,onClick:()=>r&&le(n),title:r?s?"Click to keep (will remain blocked)":"Click to remove (will become available)":"Not in range",children:[o,s&&(0,mr.jsx)(vc,{className:"absolute top-1 right-1",size:16})]},o))}return(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,mr.jsx)("button",{onClick:()=>G(new Date(K.getFullYear(),K.getMonth()-1)),children:(0,mr.jsx)(Ar,{})}),(0,mr.jsx)("h3",{className:"text-xl font-bold",children:t}),(0,mr.jsx)("button",{onClick:()=>G(new Date(K.getFullYear(),K.getMonth()+1)),children:(0,mr.jsx)(Cr,{})})]}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(e=>(0,mr.jsx)("div",{className:"text-center font-bold text-gray-600 text-sm",children:e},e))}),(0,mr.jsx)("div",{className:"grid grid-cols-7 gap-2",children:i})]})})()}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,mr.jsx)("p",{className:"font-semibold mb-3 text-sm",children:"How to use:"}),(0,mr.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-6 h-6 bg-red-100 border-2 border-red-500 rounded flex-shrink-0"}),(0,mr.jsxs)("span",{children:[(0,mr.jsx)("strong",{children:"Red dates:"})," Currently blocked. Click to mark for removal."]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded flex-shrink-0 flex items-center justify-center",children:(0,mr.jsx)(vc,{size:12,className:"text-white"})}),(0,mr.jsxs)("span",{children:[(0,mr.jsx)("strong",{children:"Green dates with \u2713:"})," Marked for removal (will become available for customers)."]})]})]})]}),q.length>0&&(0,mr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,mr.jsxs)("p",{className:"font-semibold text-green-900 mb-2",children:[q.length," date(s) selected for removal:"]}),(0,mr.jsx)("div",{className:"flex flex-wrap gap-2",children:q.sort().map(e=>{const[t,n,r]=e.split("-").map(Number),i=new Date(t,n-1,r);return(0,mr.jsx)("span",{className:"px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-medium",children:Q(i)},e)})})]}),(0,mr.jsxs)("div",{className:"flex gap-3",children:[(0,mr.jsx)("button",{onClick:async()=>{if(V&&M)if(0!==q.length){C(!0);try{console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u2702\ufe0f SPLITTING DATE RANGE"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501");const e=se(V.fromDate,V.toDate);console.log("\ud83d\udcc5 Original range dates:",e),console.log("\ud83d\uddd1\ufe0f Dates to remove:",q);const t=e.filter(e=>!q.includes(e));if(console.log("\u2705 Remaining dates:",t),0===t.length){console.log("\ud83d\uddd1\ufe0f All dates removed - deleting entire slot"),await ae(M);const e=v.filter(e=>J(e)!==M);return x(e),$(e),await X(),ue("success","\u2705 All dates removed - slot deleted!"),U(!1),H(null),O(null),void W([])}const n=[];let r=t[0],o=t[0];for(let i=1;i<t.length;i++){const[e,s,a]=t[i].split("-").map(Number),[l,c,u]=t[i-1].split("-").map(Number),d=new Date(e,s-1,a),h=new Date(l,c-1,u);1===Math.round((d.getTime()-h.getTime())/864e5)||(n.push({from:r,to:o}),r=t[i]),o=t[i]}n.push({from:r,to:o}),console.log("\ud83d\udcca Split into",n.length,"range(s):",n),console.log("\ud83d\uddd1\ufe0f Deleting original slot:",M),await ae(M);const a=[];for(const u of n){console.log("\u2795 Creating new range:",u);const e={vehicleType:s,VechileId:i,fromDate:u.from,toDate:u.to,fromTime:V.fromTime,toTime:V.toTime},t=await oe(e);a.push({_id:t._id,fromDate:t.fromDate,toDate:t.toDate,fromTime:t.fromTime,toTime:t.toTime,isNotAvailable:t.isNotAvailable,VechileId:t.VechileId,vechileType:t.vechileType,isCustomerBooking:!1})}const l=v.filter(e=>J(e)!==M),c=[...l,...a];x(c),$(c),await X(),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\ud83c\udf89 RANGE SPLIT COMPLETE!"),console.log("\u2705 Created",a.length,"new range(s)"),console.log("\ud83d\udcc5 Removed dates are now available for customers"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),ue("success","\u2705 Dates updated! Split into ".concat(n.length," range(s). Removed dates are now available for customers.")),U(!1),H(null),O(null),W([])}catch(el){console.error("\u274c Edit failed:",el),ue("error",el.message||"Failed to update dates")}finally{C(!1)}}else ue("error","Please select at least one date to remove");else ue("error","No slot selected for editing")},disabled:0===q.length||A,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:A?"Processing...":"Remove ".concat(q.length," Date(s) & Update")}),(0,mr.jsx)("button",{onClick:()=>{U(!1),H(null),O(null),W([])},disabled:A,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 disabled:opacity-50 transition",children:"Cancel"})]}),(0,mr.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,mr.jsxs)("p",{className:"text-xs text-yellow-800",children:[(0,mr.jsx)("strong",{children:"\u26a0\ufe0f Important:"})," If you remove dates from the middle of a range, it will be split into multiple ranges. Removed dates will immediately become available for customer bookings."]})})]})})]})}):null},lu=()=>{const e=ye(),{currentCity:t}=vr(),{bikes:n,deleteBike:i}=Pa(),s=(0,r.useRef)(!1),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)([]),[g,y]=(0,r.useState)(!0),[v,x]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[k,N]=(0,r.useState)(null),[_,j]=(0,r.useState)("bikes"),[A,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),[P,R]=(0,r.useState)("");(0,r.useEffect)(()=>{if(s.current)return void console.log("\u26a0\ufe0f Already fetched bikes, skipping...");(async()=>{try{s.current=!0,y(!0),x("");let e=localStorage.getItem("userId");e&&24===e.length&&/^[a-f0-9]{24}$/i.test(e)||(e="68f32259cea8a9fa88029262"),console.log("\ud83c\udfcd\ufe0f Fetching bikes for user:",e);const n=await ho.bike.getMyVehicles(e),r=n.data||n;let i=[];r.data&&r.data.bikes?i=r.data.bikes:r.bikes?i=r.bikes:Array.isArray(r)&&(i=r),console.log("\u2705 Found ".concat(i.length," bikes"));const o=i.map(e=>{var n,r,i,s,o;const a=[e.pickupArea,e.pickupCity,e.pickupCityState,e.pickupCityPinCode].filter(Boolean),l=a.length>0?a.join(", "):t||"Unknown";return{_id:e._id,id:e._id,name:"".concat(e.bikeName||""," ").concat(e.bikeModel||"").trim(),number:e.bikeNumber||"unknown",contactNumber:(null===(n=e.contactNumber)||void 0===n?void 0:n.toString())||"unknown",contactName:e.contactName||"unknown",price:(null===(r=e.pricePerKm)||void 0===r?void 0:r.toString())||"0",transmission:e.transmission||e.Transmission||"Manual",fuel:e.fuel||e.fuelType||e.Fuel||"Petrol",location:l,rating:(null===(i=e.averageRating)||void 0===i?void 0:i.toString())||"4.0",available:!1!==e.Available,image:e.bikeImages&&e.bikeImages.length>0?e.bikeImages[0]:La,engineCapacity:e.bikeEngine||e.engineCapacity||(null===(s=e.cc)||void 0===s?void 0:s.toString())||"150",cc:(null===(o=e.cc)||void 0===o?void 0:o.toString())||"150",Status:e.Status||e.status||"pending",status:e.Status||e.status||"pending"}});f(o)}catch(GN){var e,n;console.error("\u274c Error fetching bikes:",GN),s.current=!1;const r=(null===GN||void 0===GN||null===(e=GN.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||(null===GN||void 0===GN?void 0:GN.message)||"Failed to fetch bikes";x(r)}finally{y(!1)}})()},[]),(0,r.useEffect)(()=>{const e=()=>N(null);if(null!==k)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[k]),(0,r.useEffect)(()=>{if(b){const e=setTimeout(()=>w(""),5e3);return()=>clearTimeout(e)}},[b]);const D=(0,r.useMemo)(()=>[...n.map(e=>{var n,r;return{id:e.id,_id:e.id,name:e.vehicleName,number:e.vehicleNumber||"",price:e.farePrice,transmission:e.transmission||"Manual",fuel:e.fuel||"Petrol",engineCapacity:e.engineCapacity||"150",location:e.city&&e.street?"".concat(e.city,", ").concat(e.street):e.city||t,rating:(null===(n=e.rating)||void 0===n?void 0:n.toString())||"4.0",available:!0,contactName:"unknown",contactNumber:"unknown",image:(null===(r=e.photos)||void 0===r?void 0:r[0])||La,cc:"150",Status:"pending",status:"pending"}}),...m],[n,m,t]),L=e=>{const t=(e.Status||e.status||"").toLowerCase().trim();return{status:t,isPending:"pending"===t,isApproved:"verified"===t||"approved"===t}},M=D.filter(e=>e.name.toLowerCase().includes(A.toLowerCase()));return g&&0===m.length?(0,mr.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,mr.jsx)(za,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,mr.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading bikes..."})]}):(0,mr.jsxs)("div",{children:[b&&(0,mr.jsx)("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in",children:b}),v&&(0,mr.jsx)("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",children:v}),(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-stretch md:items-center mb-6 gap-4",children:[(0,mr.jsxs)("div",{className:"flex items-center w-full md:w-[300px] h-[50px] border rounded-lg px-3 bg-white cursor-pointer border-2 border-transparent hover:border-blue-500 hover:shadow-xl transition-all duration-200",children:[(0,mr.jsx)("img",{src:"data:image/png;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAWsAAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAABAA0ABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEAYIDBAAAFrhtZGF0EgAKChkmZxnHggIaDQgyny0RQAEEEEFA9LrNyy9Il6LMWWcCoG7e3fR+Ni4S+KmSHgWobWA8ROdAJHE9HAnlJ5nGtl7XeLOJSHTP/5WjysyArkBdIbMfk2BKk7h7KeBvLb/T/QcseT6QhUK+ZkHl+JLz4p7QeIzeQu57sRVM3eFJjt8yjsei4f6rwfEeqIl4sFUebZx89NAZH0+AafGiadz0hx5ALRtaQuv4LKTq03vPcEqnSOfCRGTg9CxQLz/NfrtJThIS1qRrr17LiCP2GRYRMW174XM9ZP8iTZ7Yc/Mp23S4PSRtd2OHlytat+gvz5O3jn+ToHw+vIeCfuC6exXPg9AYYZSPTQ9tUbzI4oQgvlLE2syCYZRB0tv54jQQme0wKAgCjhXbw/HGkyhVv0N3Pz2cpWYf/jX0Zcm0D3jfIu2DR2uzrjc2btkfXLjWukKNKKKh7bLwtgCnxSybIRRgAq69GfJAqccVnghI7J0jrYyo4L+PQEbipoiPhEVXjM6w2l3e9b3zqwFU1Q56LyH5tcHsaW1RQk0jfiE/Mqvh2RQBNapfS5bXrnttwvRyT58VRZw4uf8ZOZ1uvNMf1oadb79+A1IqAVJmjMNVy3B5kZFTJGNhfiJITL6+OWqCLCeuECKs3ln5znNDsjcU6cm28SssCjgQ6IqUJSaAmyx6E9xNtICHs65etKSHvUBsn0QcIQ+kF4bXaSE61vOfJZYUNZJnDZahQn7WbMCSIbq3jKl4acRVuCMV7KU0UDrQaEGrbdrk8oNQ4MrletiBKkTCiCgEvTu5fqNrbSiWcpCAbyUdIn7kinTIp5RrSS6rStN/BXmLKP98tqfOGEIrO2yqBag5AnMODgEgGxv1GrXrwb0004rXBxlaaS9pv8zXhhSDORHegwTpWS52l0eFxpeGadrIISqJ+zxhmEsAqpO5D9pSHll5GL0v/9RS3E8AmN+OBCr52oM15AlyArgx3yLIQeFQ1yVTzeDTUpAX1CXh8Kmbw2/ceaI1fd7H8YUlqDDhXufFjeGprFZgFcVkOTKYp5s/5qKnwRPF3bJmgOyu8g+E9G/T+u7pU5WA8oDewpuhZ1VXUJJ0+/Zawf5/m46V3dNtCAE+sfzSLUghixVFETMg6J8whgVLkLfNR6sEBwnsAFqZ9k3h42mE4p6r4z3qPF4tUyceS+zb1+9sRChOnNBfHDPs8WwUvH5ICsbbgVkkruSLisQjc46CER5cmckAIyKPTessSx9EwzLeZILB/yhqzrcBdG1fZaL0fqRoyFeWt2jyyQeHqmDlTrQTYDKADiOyekIWE3x8+dpxQYutYrPYuyB1K3ArI8clcgkaLMAR9vWtXTQQXgns6Rv9d/Ko7UeQ9+MYftUPlW7iYc831uYwFi4offau0M8AoQHR8QBQT/a9uhYoTXiBWTgQVvgK5bGExLrG+S9uAJVD5VPlB2ayF5dC3bX7QsUR99zxZ3MTaNOw8hsTPrBGU9pJhre17JJLtr8ffsK8Kd/WgpgWkcVRbuCVup3dt8VSrvgUZCoqiEMPysTyeMrI3+RIipVt4VidZ0wIR+LbWimhue7lezaJ4A7IxfjQZGvVyuentk93+o3F3qea71G4/PC+xgZjYadp4N7cf83TU6J3CAvNzj2j0yS3Dskur60/tjtAIcMcBgSwji0zKTSH1W1mt5z0NU8FYfU6LRpyGK7iZiT84HbTT4iN4viin7ekjkQov8HN3nlhToQ1dMV+Tch0pZ2lL0AIaguRYSdDjekSvyysgF3b/SaP4d2Acr/RyNS7SsFmNjBnX83/NaTg+swcJDACgXGST5t9w/o6JmHFdi7Yn2h9t73elkd0XoQ7PsBnP9dskZdTcXKesCUWzSYHOHnniRmya8Lj4yvT5w28chX/qRGYDtHbTm2No38Rr8WN02/f5bO9WNw4ufudFHdDjzA7u86nKL24MtqcAOWkCNoF/t95TK0H4JyHf7u0wYP9Nt3fcV7H8snp76PUqg025hEtx8wFdl7x8riWqSmTUVuDBSbRzxdilx8We4KBjPHZAGcPLRPh4F8631PlpfBOsrU9mQnTkJE6jaUvkihX/Z/kBjTPpv+92Afk6guy/milnMeEx539qYC846jTnx8M6gjfwNkBFaQzMgZ8ZnKTheySjMVq8O51vKaZmTh1s4TmDotvDHTPdaj8XLsQImApIiDFPAM4HBPoJuXSuaIDmVESVBgCOrgKz/zDrOie8BPdDJh5InidukAAkRQU3Lsw4Oy0nTDIsFo7/aGzOloX66+Cvs3M2GfmWEA/bdv0dZvn+nfT7zDEi9yF/KKWpC5zkSKP9T9s304uUgqSz0BWITU4bX61O50JvzXNj7MJdybKuYzVUmZuW5QtLVJY3mE3zHxkvIGegpT/qznSxODd6p9Z/ZSFEzw847Ov8nysdTx5016yPUZy6avi08/cv510eiEznzzrJgutIyCCrZOSoZCUhcK1h3ZQw86klwhqPknupMcOLDt5cNQfIE9XwOPPpJM6SJ470V39pIGqlRb4pUAtkA1Jz3xjMBfdYlqU4dSk9dtZ1YoF3ycZZCUbeZdUEMWRcSTQ/nYDitltdjKXVtE8FnZuw5peEZRnV81vPut8cPdppYIUYeQCDlh4N98wLO5JMgSblTHGJBtBWoE69LFgFVz/tAQt4RGwnFgryWioHn1Aug1hkfrJVx7DSg2xz1GnsdccY+d4TfJbMfpd5Kz4w7FNhbOkJJ1x8FXIfUsQblx1kgCX8HV6WNOhw9nPNWa0qxJWR2P1Lgt2/vaEtbDEetZ+Yn+HmExF9GPkge+EMHLN8Ttr7chUEPY2jJ8c9Qjf6ZC+m+HNd8/1NPubtye4kP1hW40JO7AFLJO1jdmZUBIL7EP5LtpjY8QBJyR0PvnLRerqzM80NJB1ineRSSP64n/WpSbLEMO/sDHVDcL9igwjO5eKZqNo8IyIOW9YJawWkd1yWqTPCb7N/2UOuyaWd5RdANrf5nFO4Upjiow9rqc0TxdjZMHBIZ2LEjq6opkFmZBm1if6pcgf+zGUur4lF1GUXHVYq/RFs6A3rf0w7/+Swv0EgZsd5+dk0Odymemk9Yg9lb5DlS4L5IDEnojQLEyOMXOLlyoSwgLCntOEV0gFTmEsReogTPtMHgbDzGBDB+0BC0n4AZ4AveYDl/yqNyqbn088uDIHbcneGBQASi50OqHW7QC/YQJI8OuOUJojkXU2uWLGjvzrsYIfMYeDnWaONkxRseMOm40+gAIwPenGp8OhnAwoHfsV+fTkOGixUKKtZfPUr3eHOPmSs6gAAm5+MT/KAgoMIpzrGCt/2KSsVfs/N9rPATSr9CipurYQ2rVV8v/qj+/s2yWxZslDaVXgNnRbsNp7nCEEbRhYijBwFXwKFLZJoIh6DqVqAUsBMDIZeXc5bYkQXuX7CQb5sUzOjdLyFtudEs8LPJgOPXMHQjGtEH493+EWYUbr99B6pIzOT/A0CxiHbJq9y0grDEjPhkZYoGllRCtm3LUWSCzQy1QHqyPHq2qAgPsci4HzZWPQUnOzmKfKadXYbLky09yVyN2mrIGKpyVmY/vcVKHZPm4JKicrIpndMT2hVAuaKUHARnBsOx/EYzjt/0ZyPuI2FS1m/RhyEr3tLBI0H2ZMksuAoMvyS9rjt/iQH+5wZjuunhP3K11s32p73NzBSbCzSxUODM8z0NhPNuhCEPYkQoN9ZWYU3YTh7Bfp1z+NwPttqzW0E/4d/e6rWdkG5Mb+uG74wOrMZMBUlv5XZ7B/YbhBbQeR7W0QieFhNqFmI09S7F29+RZJ3qe3IjnCi1/Qv6Gs5HuWvQGylMVV+J8cbfPlUsuUr1ctD8HYtlL9VSUJ/6ypfg+HYOTdBGU3ePxUhkHiBFQtRDO45hLPgjGUhkqa+IJPvquDUncqQAFUKowwEp/0qdUkJXyRH+IBc+6nxCAe3nZyrl9Qspka+QiXRjtfzTbJkSaoHA8aRticA+qrfoJiS5sRdi4NPIBZNn1m+j5P8bXN1K8ha3o8FJmqFdo9nzfVcXmBavpgswXOddvVo4o375fshUMrk3dI1bvt1xCrVum/7cxeg6gQ6ngqflZy4DHFYv8LfxwxyPjAdNkfxUiYY386GfJooWI7WUrS1cWAlfUG4b+o58YWI//ScWItTWvlHoZz0i/QR5zjZ/hmoHAmpqoDqc5KKMfqz9y79MWjNGcpqrPjMsoijarTmogBz/MsfT47uRGDs7PKzs1IsRVpjQG+oxHmuQccH3TJXqrHiF/bfNfayR/ehLaOFaiK+9QgMV1Np40F93UBrsh+JaGuN0B5+4yCGmPfYZ543tK9MHrhQa2VKcmAWyypTKP7ctCJaj7Lyhzi3QsVGgQWyXRNYQAsQJk7Tl4/6Xpvk/ZdEhvTxRusUL55vDc6aG8N/bwzskv9BbrIGK5486JkjEVfplHLEGOfAZfsmPVjqLtn2CW/lIO35ZW+DKSe+XMdbyeCTJW6+2BQB+kqlblakTgfR2sg1reMeaNQ6W+jInGPmpJXoeAuU3bJ2T2h/ckfaHCJzO3xu/QhYzHx1GomNCWRrsWodKbSOEfxghnySA/3iUIJwTy034JQ8vFmEbrDeJW7V/nR4Ya6NQIfZLzW3IoIP5RxNLHqpi1iRS1YgqPJ4vVH0ASxr9TiTIa/vKCqEZgNrxdmOefaAeXnoTouE5sp8RBEDSveS5l6nVkGJ5f4RmNzgKh4pK/QxA57iI6FcvkqgdiWGsZGrf+Yf9j2U5i8k3L4V9OC2XG0KdWM98JeghP/4JkH3wwZEUNnWR8hEGG+9mZv/xv0P5Y7TdIGyIzhswPJ1CU8htxcMjWIocp3G4K/OAvb/49cVdMniohZhM7p2pwlLhFVlej8cjbMY52KK5eX7BBoyA5/Pv8Ibt8xE/kmM2Luef+FApA6hSV/a9Uiu9UU2e9A/ak4X9Aq/qyA23+DISZzY8pd/xX1dsCV11I2cjQGHhGjFcBmlQmesdUCK/7UT75Cn+qVp15fZGbs2HyiXM6MFif1+N1P5C4xtplwqSDe6Uvo1PlVfD8V+hAz00Iu/k0DROBNoNjWVh8UdFBktoOZ9BnVEnn87o0NJEARHzQC1YJywWGbVLiDY2MClSsz3qWRHK15GJFCviTFn/hS+Y6XGBsPKeOXa4c/0Xx5FOdvow0whVn+gASw/Fz6ttBPXkG/F+FnrroBPmZswhUZ4kEdnfkpLDFKmDMB4i81wUtb48GnncGvEEBGViUH8y0Wpsins/kwLbHQAJxU1yy7qxU2GIGJ1WnEYgRoV8yCIdLdOQjmF9uj/v1q4I7bnGUD/i1aWdgB3eVZGJRv1kZjZ2GkZDHQTpb4yYFFadHZEzOsnNKOYF1XKmwfX5sehDWEUe3K2nL1xnkbX8w5yOBD5VbayH/YKEn8/0un0UcI94/tkg9R2M6NTNEirtYDraeyMbeVC2TIGM7z1oN4EcVja/Kh0C0uzwrrQiHfqvJSCVTRqkAYtynQ8qEAxm62zWJBkz2lbO29gqU6mxLpDaB+UGm8jHpisZD2x0NzbdgvFCgppcUNHhK+2TeUm06ipyWUcqQOb0Asu1BattGTHqNIi9rDZx7pD2W0suPdYLGAMrlBi5JAkbeOGFPJn3t4lG49rN1WodDNwaDGswZaSZofwFaF/znw1C45+iSuunMw62w2uX7l7e6YQC2yRdR8CcwQz4Xu2lmZ6dupTo1e2K49lO37StK0R08+nprs1sVNP/Ccb3asYSjJp9FMIXFk9BhcrJkQaNBWzBVQxk6gr6Nrc+AiSrG2vJg6fkukSyFTbnA4Km17LfkfyFm5Ick+jbMOqBR/7EHvNu9vdzXRxyI0/PD983NhAF/MqlZI+3NAlP7xzuHs1YQZcWKAXMAAMhD6N2z4Vxmlgw7x/U3ZOo6pYccD6Gma1Zl/MFmcsKLSLyCSaf/muY7r6rRgDrl/8kqek4Pdqh1oiFZmTneWFqw+4Tx4N2PkXES5LYbSSMBr2/Gpq5lk+QuHPzoljOpiJIOr0w5TkYz8kercgDc2GCXrBlU90ovylMQ99NKwf7lJ2JXRxH/7+C0NvI6nVN+f/9VIve07lSLWWElniMWNuea78BkTIE0DcXwY3hLAFo0oqQQdOpq9bi7kakiVsFkC1b2GC3JZPxS6dbuBOJgSMSoiUexKz7kYDIpIsb0WU72orc6bTK3w51usvFH5RYJku2at7J2xEKQIwrj7d0aN4Zo24t+QEvNtsA/X8s4f3njWjD7JqfdPO6TNj9FqelIqyCiXwutMvjJsn7mlinueh90Xf63Sjt3s9w0E9Nk+UCpVWUNDTEaA4dt6ApuHz9e8lB1Q8GlfT6AvtvzFACahXNNwAGnC+mXjiuJBm/kuSBgvP359ANgEJHmwKsUi5EfRN/ktEpeWAQhakPiVx4h++SHj+l3q8QQy+JH1ao8y25bKLZM2rKvEVYKsq7ZJWDBuU0KhYXXiWqdcBhSUFwRjwuCFK9tJ/XHyPDGMePwnLFb+KqAm4ko621VJOYSQPc2epAhIMKT9HE6LKtWI96Ro6YPv6LEs5hW0girpeAEnX1dYAFLDeCGG4ub66UNWsbnPi84WnPiSYTRzzkQDqJ3KUytlGahcLelMs4uLS7xXUTMpP8kiYS3ZMW1g6sgdJr4kerOSuZcCCGq5MQvoKu+aSZTWBjrn9C7ERMRCbv817+3B5R56ndx7VGiMybfCqzWCzPB+9Inz/omAOjlOzkhZuRB2EF+JwllfG0oatjFNZbtbdbJ1N3AwKAehblKyzKHD0FFGj7c8VCU+UKcP9b/Jog8lt1ef2jfZ9K/lxpt/LPOC1rOqDHINaQjBLX6HkPdzf7FuM8JcmIO+l2wWHb9BbvzLGZ/1FDXUwdyQ2z6Fswj3zqKAvUqLLyt1jgNemcEdkriiKdiwA2yLD92LOpcRt+cPNLLylpWY9/gn4BEOX9h7FxOc35tLpVmfjGGaDGJbgJ8wZKOB0zCP4CmS+V4GlTQKckCs8h9PLzgORtfxuaODDPB79n2aCKNZPgRnLQKNVoHibv6+tSvEq+jbQdMH4Z+U+UJeiMAtsTXeq93hdph0fM1dD5b2YHXq0C4UwJl9J6DCn+bieLFEnvu6bvSvJNokuXLPADJK4k8KaTtV2b65NQRM3CTwV5KUfBCryeS5JeJzQ//0k0vwictX2nbquEff9EoGdIu2Y09+ib5vOYrntHlfXn3Vpr0yLpF4Wc0VaxSPzkEXW71JOr4a1xQq+ugYBjmpQbPECeS+axoPpGYhS/tmTGH0/stJawmbm0qBtu7CCRpKcGkLHr3DxrPdiZceencjpICbEq9R8pjLCI1g9ZnHve5+A+5QJWZ33HusjEt8aUOInlh3xNi/uvnEKsxIam0hdMOlK22aDXKhA864rh7wyhP3x2keTNcmy0kWWCR3wxLaCSjGHhBrC5V3NiqBpo9Bt6IzGmFonXxYShE1ebgKxEOaJ12MlIGzSFvvQlPcxP5AOtZHWdct9vz8EEhcriEez/T4ubgl16KS8SRyIOksKu+3PHMsf5GDAH2i76Q36gbZCGbx50/ZoIcncSKIJka+o5lS3fWO4k0jotcwd9/P3oADNSMtEkDFv6XACvvE8REIY72RYhmSUnSXWnB0O/RSx+7kmmNdZ6H5VhQOL6cIxJqc2aIOTd7o3Y24T4D9n2yk1dJ5HlCZAe0lq2IBvUdwvp9uFXvxafngzBbwpx3iw4/A",alt:"Dropdown Logo",className:"w-[24px] h-[24px]"}),(0,mr.jsxs)("select",{className:"flex-1 ml-2 border-none outline-none text-sm bg-transparent",value:_,onChange:t=>{const n=t.target.value;j(n),"cars"===n&&e("/listed")},children:[(0,mr.jsx)("option",{value:"bikes",children:"Listed Bikes"}),(0,mr.jsx)("option",{value:"cars",children:"Listed Cars"})]})]}),(0,mr.jsxs)("div",{className:"flex gap-2 w-full md:w-auto mt-6",children:[(0,mr.jsxs)("div",{className:"relative flex-1 md:w-[300px] h-[40px] transition-all duration-200 rounded-full",children:[(0,mr.jsx)("img",{src:iu,alt:"Search",className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 pointer-events-none"}),(0,mr.jsx)("input",{type:"text",placeholder:"Search Bikes...",value:A,onChange:e=>C(e.target.value),className:"w-full h-full rounded-full border pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer border-2 border-transparent hover:border-blue-500 hover:shadow-xl transition-all duration-200"})]}),(0,mr.jsxs)("button",{onClick:()=>E(!0),className:"flex items-center gap-2 bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white text-lm font-semibold px-4 py-1 rounded-md hover:opacity-100 transition-all",children:[(0,mr.jsx)("img",{src:Rr,alt:"Filter",className:"w-6 h-4"})," Filter"]})]})]}),(0,mr.jsx)("div",{className:"flex flex-col pb-16",children:0===M.length?(0,mr.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,mr.jsx)("p",{className:"text-lg mb-2",children:"No bikes found"}),(0,mr.jsx)("p",{className:"text-sm",children:A?"Try adjusting your search":"Start by adding your first bike"})]}):M.map((t,n)=>{const i=!t.available,s=t._id||t.id,{isPending:o,isApproved:l}=L(t);return(0,mr.jsxs)(r.Fragment,{children:[(0,mr.jsxs)("div",{onClick:()=>(e=>{const{isApproved:t}=L(e)})(t),className:"relative flex flex-col md:flex-row bg-white rounded-xl shadow-sm \n                    transition-all duration-300 overflow-hidden\n                    border-2 border-transparent hover:border-blue-500 hover:shadow-xl\n                    p-4 gap-4 w-full max-w-4xl\n                    ".concat(l?"cursor-pointer":"opacity-60"),children:[(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[(0,mr.jsx)("div",{className:"w-300px md:w-[300px] h-[250px] flex-shrink-0 rounded-lg overflow-hidden bg-gray-100 rounded-2xl",children:(0,mr.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300 rounded-2xl",onError:e=>{e.currentTarget.src=La}})}),(0,mr.jsxs)("div",{className:"flex flex-col flex-1 font-medium gap-2",children:[(0,mr.jsx)("h3",{className:"font-bold text-xl text-gray-900 truncate",children:t.name}),(0,mr.jsxs)("p",{className:"font-bold text-2xl mt-0.5 mb-0.5",children:["\u20b9",t.price,(0,mr.jsx)("span",{className:"text-gray-500 font-normal text-sm",children:"/km"})]}),t.engineCapacity&&(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:Na,className:"w-6 h-6",alt:"Engine"}),(0,mr.jsxs)("span",{children:[t.engineCapacity," CC"]})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:ba,className:"w-5 h-5",alt:"Transmission"}),(0,mr.jsx)("span",{children:t.transmission})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:wa,className:"w-5 h-5",alt:"Fuel"}),(0,mr.jsx)("span",{children:t.fuel})]}),(0,mr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mr.jsx)("img",{src:Yo,className:"w-5 h-5",alt:"Location"}),(0,mr.jsx)("span",{className:"text-xs",children:t.location})]}),o&&(0,mr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md px-3 py-2 mt-2",children:(0,mr.jsx)("p",{className:"text-yellow-800 text-sm font-medium text-center",children:"Your bike is under verification"})}),l&&(0,mr.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md px-3 py-2 mt-2",children:(0,mr.jsx)("p",{className:"text-green-800 text-sm font-medium text-center",children:"Your bike is approved"})}),(0,mr.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mt-3 w-full",children:[(0,mr.jsx)("button",{onClick:e=>((e,t)=>{t.stopPropagation();const{isApproved:n}=L(e);if(!n)return;c(e);let r=localStorage.getItem("userId");r&&24===r.length&&/^[a-f0-9]{24}$/i.test(r)||(r="68f32259cea8a9fa88029262"),console.log("\ud83d\udd27 Opening calendar for vehicle:",{vehicleId:e._id||e.id,userId:r}),R(r),a(!0),x("")})(t,e),disabled:g||!l,className:"px-4 py-1.5 rounded-lg text-sm font-semibold shadow-sm \n                            bg-red-100 text-red-700 border border-red-300 \n                            hover:bg-red-200 hover:shadow-md transition-all duration-200\n                            ".concat(l?"":"opacity-50 cursor-not-allowed bg-gray-200 text-gray-500 border-gray-300","\n                            disabled:opacity-50 disabled:cursor-not-allowed"),children:i?"Manage Unavailability":"Add Not Available Slot +"}),(0,mr.jsx)("button",{onClick:n=>{if(n.stopPropagation(),!l)return;const r=t._id||t.id;console.log("\ud83c\udfcd\ufe0f Navigating to bike history, ID:",r),e("/vehicle-history/".concat(r),{state:{vehicleData:t,vehicleType:"bike"}})},disabled:!l,className:"flex items-center justify-center bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white text-sm font-semibold px-4 py-1.5 rounded-lg shadow-md hover:opacity-90 hover:shadow-lg transition-all duration-200\n                            ".concat(l?"":"opacity-50 cursor-not-allowed bg-gray-400"),children:"View Booking History"})]})]}),(0,mr.jsxs)("div",{className:"absolute top-4 right-4 z-10",children:[(0,mr.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full transition",onClick:e=>((e,t)=>{t.stopPropagation(),N(k===e?null:e)})(n,e),children:(0,mr.jsx)("span",{className:"text-2xl",children:"\u22ee"})}),k===n&&(0,mr.jsxs)("div",{className:"absolute right-0 mt-1 bg-white border rounded-lg shadow-lg min-w-[150px] overflow-hidden",children:[(0,mr.jsx)("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-2 transition-all duration-200\n                              ".concat(l?"":"opacity-50 cursor-not-allowed"),onClick:n=>{n.stopPropagation(),(t=>{const{isApproved:n}=L(t);if(!n)return;const r=t._id||t.id;r?(console.log("\u270f\ufe0f Editing vehicle:",t.name,"ID:",r),e("/Bike-Details/".concat(r),{state:{bikeData:t,openEditForm:!0}}),N(null)):console.error("\u274c No vehicle ID found for:",t.name)})(t)},disabled:!l,children:"\u270f\ufe0f Edit"}),(0,mr.jsx)("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 flex items-center gap-2 text-red-600 transition-all duration-200",onClick:e=>{var n;e.stopPropagation(),n=t,console.log("\ud83d\uddd1\ufe0f Preparing to delete bike:",n.name),p(n),d(!0),N(null)},disabled:T===s,children:T===s?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(za,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,mr.jsx)(mr.Fragment,{children:"\ud83d\uddd1\ufe0f Delete"})})]})]})]}),i&&l&&(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,mr.jsx)("div",{className:"bg-red-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg",children:"UNAVAILABLE"})})]}),n<M.length-1&&(0,mr.jsx)("div",{className:"w-full max-w-4xl h-px bg-gray-200 my-4"})]},s||"bike-".concat(n))})}),S&&(0,mr.jsx)(Er,{onApply:()=>E(!1)}),o&&l&&P&&(0,mr.jsx)(au,{isOpen:o,onClose:()=>{a(!1),c(null),x("")},VechileId:l._id||l.id||"",vehicleType:"Bike",userId:P}),u&&h&&(0,mr.jsx)(su,{isOpen:u,onConfirm:()=>(async e=>{const t=e._id||e.id;if(!t)return x("Cannot delete vehicle without ID"),d(!1),void p(null);try{I(t),console.log("\ud83d\uddd1\ufe0f Deleting bike with ID:",t),await ho.bike.deleteBikeById(t),console.log("\u2705 Bike deleted successfully"),f(m.filter(e=>(e._id||e.id)!==t)),i(t),w("".concat(e.name," deleted successfully!")),x("")}catch(v){var n,r;console.error("\u274c Error deleting bike:",v);const i=(null===v||void 0===v||null===(n=v.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||(null===v||void 0===v?void 0:v.message)||"Failed to delete vehicle. Please try again.";x("Failed to delete ".concat(e.name,". ").concat(i))}finally{I(null),N(null),d(!1),p(null)}})(h),onCancel:()=>{d(!1),p(null)}})]})},cu=()=>{var e,t,n,i,s;const{vehicleId:o}=ve(),a=ye(),l=me(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),[p,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(0),[y,v]=(0,r.useState)(!1),x=null===(e=l.state)||void 0===e?void 0:e.vehicleData,b=null===(t=l.state)||void 0===t?void 0:t.booking,w=(null===(n=l.state)||void 0===n?void 0:n.openContact)||!1,k=(null===(i=l.state)||void 0===i?void 0:i.vehicleType)||(null===x||void 0===x?void 0:x.vehicleType)||(null!==x&&void 0!==x&&x.CarName||null!==x&&void 0!==x&&x.carName||null!==x&&void 0!==x&&x.carImages||null!==x&&void 0!==x&&x.RentPerHour?"car":"bike"),N=o||(null===x||void 0===x?void 0:x._id),_="confirmed"===(null===b||void 0===b||null===(s=b.status)||void 0===s?void 0:s.toLowerCase());(0,r.useEffect)(()=>{w&&b&&v(!0)},[w,b]),(0,r.useEffect)(()=>{(async()=>{if(x&&x._id&&(x.CarName||x.carName||x.bikeName))return u(x),h(!1),void m("");if(!N)return m("No vehicle ID provided"),void h(!1);try{var e,t,n,r;let i;h(!0),i="car"===k?await ho.car.getCarById(N):await ho.bike.getBikeById(N);const s=null!==(e=null===(t=i)||void 0===t?void 0:t.data)&&void 0!==e?e:i;let o=(null===s||void 0===s?void 0:s.car)||(null===s||void 0===s?void 0:s.bike)||(null===s||void 0===s?void 0:s.data)||(null===s||void 0===s?void 0:s.vehicle)||s;if(null!==(n=o)&&void 0!==n&&n.bike&&(o=o.bike),null!==(r=o)&&void 0!==r&&r.car&&(o=o.car),!o||"object"!==typeof o||!o._id)throw new Error("Invalid vehicle response format");u(o),m("")}catch(GN){if(x&&x._id)u(x),m("");else{var i,s;const t=(null===GN||void 0===GN||null===(i=GN.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||(null===GN||void 0===GN?void 0:GN.message)||"Failed to load vehicle details";m(t)}}finally{h(!1)}})()},[N,k,x]);if(d)return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)(za,{className:"animate-spin mx-auto mb-4",size:48}),(0,mr.jsx)("p",{className:"text-gray-600",children:"Loading vehicle details..."})]})});if(p||!c)return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("p",{className:"text-red-600 text-lg mb-4",children:p||"Vehicle not found"}),(0,mr.jsx)("button",{onClick:()=>a(-1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})});const j="car"===k||!!c.CarName||!!c.carName||!!c.carImages;let A=(j?c.carImages:c.bikeImages)||[];A=A.filter(e=>e&&""!==e.trim()&&"undefined"!==e);const C=j?["https://e7.pngegg.com/pngimages/768/421/png-clipart-car-computer-icons-sedan-auto-detailing-auto-driving-rectangle-thumbnail.png","https://png.pngtree.com/png-vector/20191201/ourmid/pngtree-car-vector-logo-design-png-image_2066853.jpg"]:["https://w7.pngwing.com/pngs/579/51/png-transparent-computer-icons-motorcycle-bicycle-motorcycle-logo-black-silhouette.png","https://w1.pngwing.com/pngs/381/835/png-transparent-yamaha-logo-car-decal-motorcycle-sticker-sport-bike-yamaha-yzfr1-bicycle-thumbnail.png"];0===A.length&&(A=C);const S=[...A];for(;S.length<3;)S.push(C[S.length%C.length]);const E=j?c.CarName||c.carName||(null===b||void 0===b?void 0:b.vehicleName)||"Unknown Vehicle":c.bikeName||(null===b||void 0===b?void 0:b.vehicleName)||"Unknown Bike",T=(j?c.CarModel:c.bikeModel,j?c.RentPerHour||(null===b||void 0===b?void 0:b.price)||0:c.pricePerKm||(null===b||void 0===b?void 0:b.price)||0),I=j?"/hr":"/km",P=localStorage.getItem("userId")||"temp-user-"+Date.now(),R=c.userId||c.ownerId||c.contactNumber||"temp-owner-"+Date.now(),D=(null===b||void 0===b||b.userId,(null===b||void 0===b?void 0:b._id)||(null===b||void 0===b?void 0:b.bookingId)||N||"temp-booking-"+Date.now()),L="flex-1 flex items-center justify-center gap-2 sm:gap-3 text-white font-semibold text-[16px] sm:text-[18px] transition-all duration-200 hover:opacity-90 rounded-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] py-3 sm:py-0",M="flex-1 flex items-center justify-center gap-2 sm:gap-3 text-gray-400 font-semibold text-[16px] sm:text-[18px] rounded-full bg-gray-200 cursor-not-allowed py-3 sm:py-0";return(0,mr.jsx)("div",{className:"min-h-screen bg-gray-50 px-3 sm:px-4 py-4 sm:py-6 flex justify-center",children:(0,mr.jsxs)("div",{className:"max-w-[900px] w-full bg-white p-4 sm:p-6 rounded-2xl shadow-lg flex flex-col md:flex-row",children:[S.length>0?(0,mr.jsxs)("div",{className:"relative w-full md:w-[420px] h-[250px] sm:h-[300px] md:h-[300px] flex-shrink-0 rounded-[10px] border-2 border-transparent hover:border-[#0066FF] transition-all duration-200 overflow-hidden mx-auto md:mx-0",children:[(0,mr.jsx)("img",{src:S[f],alt:E,className:"w-full h-full object-cover transition-all duration-500 rounded-[10px]"}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),g(e=>0===e?S.length-1:e-1)},className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Previous image",children:(0,mr.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,mr.jsx)("button",{onClick:e=>{e.stopPropagation(),g(e=>e===S.length-1?0:e+1)},className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 bg-white hover:bg-gray-100 rounded-full flex items-center justify-center shadow-2xl z-20 transition-all cursor-pointer border border-gray-200",type:"button","aria-label":"Next image",children:(0,mr.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-800 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:3,children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),(0,mr.jsx)("div",{className:"absolute bottom-3 sm:bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5",children:S.map((e,t)=>(0,mr.jsx)("button",{onClick:()=>g(t),className:"h-2 rounded-full transition-all ".concat(t===f?"bg-[#0066FF] w-6":"bg-gray-700 w-2")},t))})]}):(0,mr.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded-[10px]",children:(0,mr.jsx)("span",{className:"text-gray-400 text-lg",children:"No Image Available"})}),(0,mr.jsxs)("div",{className:"flex flex-col ml-0 md:ml-6 mt-4 sm:mt-6 md:mt-0 flex-1",children:[(0,mr.jsx)("h1",{className:"text-[24px] sm:text-[28px] md:text-[32px] font-bold text-[#000000] leading-tight cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:E}),(0,mr.jsxs)("div",{className:"flex items-baseline mt-2 cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2",children:[(0,mr.jsxs)("span",{className:"text-[24px] sm:text-[28px] md:text-[32px] font-bold text-[#000000]",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:["\u20b9",T]}),(0,mr.jsx)("span",{className:"text-gray-500 ml-2 text-sm",children:I})]}),(0,mr.jsx)("div",{className:"flex items-center mt-4 border border-gray-300 rounded-xl overflow-hidden cursor-pointer hover:border-[#0066FF] hover:border-2",children:j?(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-2 sm:px-4",children:[(0,mr.jsx)("img",{src:ba,className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[11px] sm:text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:c.transmissionType||"Manual"})]}),(0,mr.jsx)("div",{className:"w-[1px] h-10 sm:h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-2 sm:px-4",children:[(0,mr.jsx)("img",{src:vo,className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-1.5",alt:"seats"}),(0,mr.jsxs)("span",{className:"text-[11px] sm:text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:[c.Carseater||"5"," Seats"]})]}),(0,mr.jsx)("div",{className:"w-[1px] h-10 sm:h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-2 sm:px-4",children:[(0,mr.jsx)("img",{src:wa,className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[11px] sm:text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:c.fuelType||"Petrol"})]}),(0,mr.jsx)("div",{className:"w-[1px] h-10 sm:h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-2 sm:px-4",children:[(0,mr.jsx)("img",{src:ka,className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-1.5",alt:"ac"}),(0,mr.jsx)("span",{className:"text-[11px] sm:text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:c.Ac_available?"AC":"Non-AC"})]})]}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:Na,className:"w-6 h-6 mb-1.5",alt:"engine"}),(0,mr.jsxs)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:[c.engineCapacity||c.bikeEngine||c.bikeCC||"350"," CC"]})]}),(0,mr.jsx)("div",{className:"w-[1px] h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-3 px-4",children:[(0,mr.jsx)("img",{src:ba,className:"w-6 h-6 mb-1.5",alt:"transmission"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:c.transmissionType||"Manual"})]}),(0,mr.jsx)("div",{className:"w-[1px] h-10 sm:h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-3 px-2 sm:px-4",children:[(0,mr.jsx)("img",{src:wa,className:"w-5 h-5 sm:w-6 sm:h-6 mb-1 sm:mb-1.5",alt:"fuel"}),(0,mr.jsx)("span",{className:"text-[11px] sm:text-[13px] text-[#333333] font-medium",style:{fontFamily:"Inter, sans-serif"},children:"Petrol"})]}),(0,mr.jsx)("div",{className:"w-[1px] h-10 sm:h-12 bg-[#E5E5E5]"}),(0,mr.jsxs)("div",{className:"flex flex-col items-center px-3 sm:px-4 py-2 sm:py-3",children:[(0,mr.jsx)("img",{src:Yo,className:"w-6 h-6 mb-1.5",alt:"location"}),(0,mr.jsx)("span",{className:"text-[13px] text-[#333333] font-medium whitespace-nowrap",style:{fontFamily:"Inter, sans-serif"},children:c.pickupCity||c.pickupArea||"N/A"})]})]})}),(0,mr.jsxs)("div",{className:"border border-[#E5E5E5] rounded-[10px] p-3 sm:p-4 bg-white mb-3 sm:mb-4 mt-3 sm:mt-4 cursor-pointer hover:border-[#0066FF] hover:border-2 transition-all duration-200 w-full max-w-full",children:[(0,mr.jsx)("h2",{className:"text-[16px] sm:text-[18px] font-bold text-[#000000] mb-2 cursor-pointer hover:underline hover:decoration-[#0066FF] hover:decoration-2 transition-all",style:{fontFamily:"Inter, sans-serif",fontWeight:700},children:"Description"}),(0,mr.jsx)("p",{className:"text-[#666666] text-[13px] sm:text-[14px] leading-[1.6] min-h-[40px] break-words whitespace-normal overflow-hidden",style:{fontFamily:"Inter, sans-serif",wordBreak:"break-word",overflowWrap:"break-word"},children:c.description||"No description available"})]}),!_&&(null===b||void 0===b?void 0:b.status)&&(0,mr.jsxs)("div",{className:"mb-3 sm:mb-4 p-3 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-2",children:[(0,mr.jsx)(Tc,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),(0,mr.jsxs)("p",{className:"text-xs sm:text-sm text-amber-700",children:["Chat and Call are available only for ",(0,mr.jsx)("span",{className:"font-semibold",children:"Confirmed"})," bookings. Current status: ",(0,mr.jsx)("span",{className:"font-semibold",children:"AutoCancelled"===b.status?"Auto Cancelled":b.status})]})]}),(0,mr.jsxs)("div",{className:"flex gap-3 sm:gap-4 h-[50px] sm:h-[56px]",children:[(0,mr.jsxs)("button",{onClick:()=>{_&&(console.log("\ud83d\udcac Opening chat..."),v(!0))},disabled:!_,className:_?L:M,style:{fontFamily:"Inter, sans-serif"},title:_?"":"Chat is available only for confirmed bookings",children:[(0,mr.jsx)(va,{size:20,className:"sm:w-6 sm:h-6",strokeWidth:2}),(0,mr.jsx)("span",{children:"Chat"})]}),(0,mr.jsxs)("button",{onClick:()=>{_&&(null!==c&&void 0!==c&&c.contactNumber?window.location.href="tel:".concat(c.contactNumber):alert("Contact number not available"))},disabled:!_,className:_?L:M,style:{fontFamily:"Inter, sans-serif"},title:_?"":"Call is available only for confirmed bookings",children:[(0,mr.jsx)(xa,{size:20,className:"sm:w-6 sm:h-6",strokeWidth:2}),(0,mr.jsx)("span",{children:"Call"})]})]}),(0,mr.jsx)(Ca,{isOpen:y,onClose:()=>{console.log("\u274c Closing chat..."),v(!1)},pageRole:"customerView",currentUserId:P,currentUserName:localStorage.getItem("userName")||"You",ownerId:R,ownerName:c.contactName||"Vehicle Owner",ownerAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(c.contactName||"Owner"),customerId:P,customerName:localStorage.getItem("userName")||"You",customerAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(localStorage.getItem("userName")||"You"),bookingId:D,vehicleId:c._id,apiUrl:ho.chat.apiUrl,useRealtime:!0})]})]})})},uu=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uu(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new hu;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hu extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pu=function(e){return function(e){const t=uu(e);return du.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mu=function(e){try{return du.decodeString(e,!0)}catch(el){console.error("base64Decode failed: ",el)}return null};function fu(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const gu=()=>{try{return fu().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_:"C:\\Program Files\\nodejs\\",REACT_APP_API_BASE_URL:"http://3.110.122.127:3000",REACT_APP_API_TIMEOUT:"15000",REACT_APP_USER_ID:"68fe32425c4f3da11dc7d030"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(el){return}const t=e&&mu(e[1]);return t&&JSON.parse(t)})()}catch(el){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(el))}},yu=e=>{var t;return null===(t=gu())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},vu=()=>{var e;return null===(e=gu())||void 0===e?void 0:e.config},xu=e=>{var t;return null===(t=gu())||void 0===t?void 0:t["_".concat(e)]};class bu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function wu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function ku(e){return(await fetch(e,{credentials:"include"})).ok}const Nu={};let _u=!1;function ju(e,t){if("undefined"===typeof window||"undefined"===typeof document||!wu(window.location.host)||Nu[e]===t||Nu[e]||_u)return;function n(e){return"__firebase__banner__".concat(e)}Nu[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Nu))Nu[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{_u=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function Au(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Cu(){var e;const t=null===(e=gu())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(el){return!1}}function Su(){return!Cu()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eu(){try{return"object"===typeof indexedDB}catch(el){return!1}}function Tu(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class Iu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Iu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ru,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Iu(n,s,t)}}const Ru=/\{\$([^}]+)}/g;function Du(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Lu(n)&&Lu(s)){if(!Du(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lu(e){return null!==e&&"object"===typeof e}function Mu(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ou(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Bu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Fu{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=zu),void 0===r.error&&(r.error=zu),void 0===r.complete&&(r.complete=zu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(el){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(el){"undefined"!==typeof console&&console.error&&console.error(el)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zu(){}function Uu(e){return e&&e._delegate?e._delegate:e}class Vu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Hu="[DEFAULT]";class qu{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new bu;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(el){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(el){if(r)return null;throw el}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Hu})}catch(el){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(el){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hu;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hu;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hu;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Hu?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hu;return this.component?this.component.multipleInstances?e:Hu:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wu{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ku=[];var Gu;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gu||(Gu={}));const Zu={debug:Gu.DEBUG,verbose:Gu.VERBOSE,info:Gu.INFO,warn:Gu.WARN,error:Gu.ERROR,silent:Gu.SILENT},Qu=Gu.INFO,Yu={[Gu.DEBUG]:"log",[Gu.VERBOSE]:"log",[Gu.INFO]:"info",[Gu.WARN]:"warn",[Gu.ERROR]:"error"},Ju=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Yu[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Xu{constructor(e){this.name=e,this._logLevel=Qu,this._logHandler=Ju,this._userLogHandler=null,Ku.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gu))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Zu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gu.DEBUG,...t),this._logHandler(this,Gu.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gu.VERBOSE,...t),this._logHandler(this,Gu.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gu.INFO,...t),this._logHandler(this,Gu.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gu.WARN,...t),this._logHandler(this,Gu.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Gu.ERROR,...t),this._logHandler(this,Gu.ERROR,...t)}}let $u,ed;const td=new WeakMap,nd=new WeakMap,rd=new WeakMap,id=new WeakMap,sd=new WeakMap;let od={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ad(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ed||(ed=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ud(this),n),cd(td.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cd(e.apply(ud(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ud(this),t,...r);return rd.set(s,t.sort?t.sort():[t]),cd(s)}}function ld(e){return"function"===typeof e?ad(e):(e instanceof IDBTransaction&&function(e){if(nd.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});nd.set(e,t)}(e),t=e,($u||($u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,od):e);var t}function cd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(cd(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&td.set(t,e)}).catch(()=>{}),sd.set(t,e),t}(e);if(id.has(e))return id.get(e);const t=ld(e);return t!==e&&(id.set(e,t),sd.set(t,e)),t}const ud=e=>sd.get(e);function dd(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=cd(o);return r&&o.addEventListener("upgradeneeded",e=>{r(cd(o.result),e.oldVersion,e.newVersion,cd(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function hd(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),cd(n).then(()=>{})}const pd=["get","getKey","getAll","getAllKeys","count"],md=["put","add","delete","clear"],fd=new Map;function gd(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fd.get(t))return fd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=md.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pd.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return fd.set(t,s),s}od=(e=>c(c({},e),{},{get:(t,n,r)=>gd(t,n)||e.get(t,n,r),has:(t,n)=>!!gd(t,n)||e.has(t,n)}))(od);class yd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const vd="@firebase/app",xd="0.14.6",bd=new Xu("@firebase/app"),wd="@firebase/app-compat",kd="@firebase/analytics-compat",Nd="@firebase/analytics",_d="@firebase/app-check-compat",jd="@firebase/app-check",Ad="@firebase/auth",Cd="@firebase/auth-compat",Sd="@firebase/database",Ed="@firebase/data-connect",Td="@firebase/database-compat",Id="@firebase/functions",Pd="@firebase/functions-compat",Rd="@firebase/installations",Dd="@firebase/installations-compat",Ld="@firebase/messaging",Md="@firebase/messaging-compat",Od="@firebase/performance",Bd="@firebase/performance-compat",Fd="@firebase/remote-config",zd="@firebase/remote-config-compat",Ud="@firebase/storage",Vd="@firebase/storage-compat",Hd="@firebase/firestore",qd="@firebase/ai",Wd="@firebase/firestore-compat",Kd="firebase",Gd="[DEFAULT]",Zd={[vd]:"fire-core",[wd]:"fire-core-compat",[Nd]:"fire-analytics",[kd]:"fire-analytics-compat",[jd]:"fire-app-check",[_d]:"fire-app-check-compat",[Ad]:"fire-auth",[Cd]:"fire-auth-compat",[Sd]:"fire-rtdb",[Ed]:"fire-data-connect",[Td]:"fire-rtdb-compat",[Id]:"fire-fn",[Pd]:"fire-fn-compat",[Rd]:"fire-iid",[Dd]:"fire-iid-compat",[Ld]:"fire-fcm",[Md]:"fire-fcm-compat",[Od]:"fire-perf",[Bd]:"fire-perf-compat",[Fd]:"fire-rc",[zd]:"fire-rc-compat",[Ud]:"fire-gcs",[Vd]:"fire-gcs-compat",[Hd]:"fire-fst",[Wd]:"fire-fst-compat",[qd]:"fire-vertex","fire-js":"fire-js",[Kd]:"fire-js-all"},Qd=new Map,Yd=new Map,Jd=new Map;function Xd(e,t){try{e.container.addComponent(t)}catch(el){bd.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),el)}}function $d(e){const t=e.name;if(Jd.has(t))return bd.debug("There were multiple attempts to register component ".concat(t,".")),!1;Jd.set(t,e);for(const n of Qd.values())Xd(n,e);for(const n of Yd.values())Xd(n,e);return!0}function eh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function th(e){return null!==e&&void 0!==e&&void 0!==e.settings}const nh=new Pu("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rh{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nh.create("app-deleted",{appName:this._name})}}const ih="12.6.0";function sh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:Gd,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw nh.create("bad-app-name",{appName:String(i)});if(n||(n=vu()),!n)throw nh.create("no-options");const s=Qd.get(i);if(s){if(Du(n,s.options)&&Du(r,s.config))return s;throw nh.create("duplicate-app",{appName:i})}const o=new Wu(i);for(const l of Jd.values())o.addComponent(l);const a=new rh(n,r,o);return Qd.set(i,a),a}function oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gd;const t=Qd.get(e);if(!t&&e===Gd&&vu())return sh();if(!t)throw nh.create("no-app",{appName:e});return t}function ah(e,t,n){var r;let i=null!==(r=Zd[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bd.warn(e.join(" "))}$d(new Vu("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const lh="firebase-heartbeat-store";let ch=null;function uh(){return ch||(ch=dd("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(lh)}catch(el){console.warn(el)}}}).catch(e=>{throw nh.create("idb-open",{originalErrorMessage:e.message})})),ch}async function dh(e,t){try{const n=(await uh()).transaction(lh,"readwrite"),r=n.objectStore(lh);await r.put(t,hh(e)),await n.done}catch(el){if(el instanceof Iu)bd.warn(el.message);else{const t=nh.create("idb-set",{originalErrorMessage:null===el||void 0===el?void 0:el.message});bd.warn(t.message)}}}function hh(e){return"".concat(e.name,"!").concat(e.options.appId)}class ph{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fh(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mh();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(el){bd.warn(el)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=mh(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),gh(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=pu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(el){return bd.warn(el),""}}}function mh(){return(new Date).toISOString().substring(0,10)}class fh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Eu()&&Tu().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await uh()).transaction(lh),n=await t.objectStore(lh).get(hh(e));return await t.done,n}catch(el){if(el instanceof Iu)bd.warn(el.message);else{const t=nh.create("idb-get",{originalErrorMessage:null===el||void 0===el?void 0:el.message});bd.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return dh(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return dh(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function gh(e){return pu(JSON.stringify({version:2,heartbeats:e})).length}var yh;yh="",$d(new Vu("platform-logger",e=>new yd(e),"PRIVATE")),$d(new Vu("heartbeat",e=>new ph(e),"PRIVATE")),ah(vd,xd,yh),ah(vd,xd,"esm2020"),ah("fire-js","");const vh=["providerId"],xh=["uid","auth","stsTokenManager"],bh=["providerId","signInMethod"];function wh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kh=wh,Nh=new Pu("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_h=new Xu("@firebase/auth");function jh(e){if(_h.logLevel<=Gu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_h.error("Auth (".concat(ih,"): ").concat(e),...n)}}function Ah(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ih(e,...n)}function Ch(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ih(e,...n)}function Sh(e,t,n){const r=c(c({},kh()),{},{[t]:n});return new Pu("auth","Firebase",r).create(t,{appName:e.name})}function Eh(e){return Sh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Th(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ah(e,"argument-error"),Sh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ih(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Nh.create(e,...n)}function Ph(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ih(t,...r)}}function Rh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jh(t),new Error(t)}function Dh(e,t){e||Rh(t)}function Lh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mh(){return"http:"===Oh()||"https:"===Oh()}function Oh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Bh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mh()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Fh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Au())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Bh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zh(e,t){Dh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Uh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Rh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Rh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Rh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Hh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qh=new Fh(3e4,6e4);function Wh(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Kh(e,t,n,r){return Gh(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Mu(c({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&wu(e.emulatorConfig.host)&&(l.credentials="include"),Uh.fetch()(await Qh(e,e.config.apiHost,n,o),l)})}async function Gh(e,t,n){e._canInitEmulator=!1;const r=c(c({},Vh),t);try{const t=new Jh(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Xh(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xh(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Xh(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Xh(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Sh(e,a,o);Ah(e,a)}}catch(el){if(el instanceof Iu)throw el;Ah(e,"network-request-failed",{message:String(el)})}}async function Zh(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Kh(e,t,n,r,i);return"mfaPendingCredential"in s&&Ah(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Qh(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?zh(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Hh.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Yh(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ch(this.auth,"network-request-failed")),qh.get())})}}function Xh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ch(e,t,r);return i.customData._tokenResponse=n,i}function $h(e){return void 0!==e&&void 0!==e.enterprise}class ep{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yh(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tp(e,t){return Kh(e,"GET","/v2/recaptchaConfig",Wh(e,t))}async function np(e,t){return Kh(e,"POST","/v1/accounts:lookup",t)}function rp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(el){}}function ip(e){return 1e3*Number(e)}function sp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const e=mu(n);return e?JSON.parse(e):(jh("Failed to decode base64 JWT payload"),null)}catch(el){return jh("Caught error parsing JWT payload as JSON",null===el||void 0===el?void 0:el.toString()),null}}function op(e){const t=sp(e);return Ph(t,"internal-error"),Ph("undefined"!==typeof t.exp,"internal-error"),Ph("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ap(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(el){throw el instanceof Iu&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(el)&&e.auth.currentUser===e&&await e.auth.signOut(),el}}class lp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(el){return void((null===el||void 0===el?void 0:el.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class cp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rp(this.lastLoginAt),this.creationTime=rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function up(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ap(e,np(n,{idToken:r}));Ph(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?dp(s.providerUserInfo):[],a=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function dp(e){return e.map(e=>{let{providerId:t}=e,n=i(e,vh);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class hp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ph(e.idToken,"internal-error"),Ph("undefined"!==typeof e.idToken,"internal-error"),Ph("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):op(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ph(0!==e.length,"internal-error");const t=op(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ph(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Gh(e,{},async()=>{const n=Mu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Qh(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&wu(e.emulatorConfig.host)&&(a.credentials="include"),Uh.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new hp;return n&&(Ph("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ph("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ph("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hp,this.toJSON())}_performRefresh(){return Rh("not implemented")}}function pp(e,t){Ph("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class mp{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,xh);this.providerId="firebase",this.proactiveRefresh=new lp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ap(this,this.stsTokenManager.getToken(this.auth,e));return Ph(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Uu(e),r=await n.getIdToken(t),i=sp(r);Ph(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rp(ip(i.auth_time)),issuedAtTime:rp(ip(i.iat)),expirationTime:rp(ip(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Uu(e);await up(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ph(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mp(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ph(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await up(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(th(this.auth.app))return Promise.reject(Eh(this.auth));const e=await this.getIdToken();return await ap(this,async function(e,t){return Kh(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,m=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:N}=t;Ph(x&&N,e,"internal-error");const _=hp.fromJSON(this.name,N);Ph("string"===typeof x,e,"internal-error"),pp(d,e.name),pp(h,e.name),Ph("boolean"===typeof b,e,"internal-error"),Ph("boolean"===typeof w,e,"internal-error"),pp(p,e.name),pp(m,e.name),pp(f,e.name),pp(g,e.name),pp(y,e.name),pp(v,e.name);const j=new mp({uid:x,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:p,tenantId:f,stsTokenManager:_,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(j.providerData=k.map(e=>c({},e))),g&&(j._redirectEventId=g),j}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hp;r.updateFromServerResponse(t);const i=new mp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await up(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ph(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?dp(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new hp;o.updateFromIdToken(n);const a=new mp({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new cp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const fp=new Map;function gp(e){Dh(e instanceof Function,"Expected a class definition");let t=fp.get(e);return t?(Dh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fp.set(e,t),t)}class yp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yp.type="NONE";const vp=yp;function xp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class bp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=xp(this.userKey,r.apiKey,i),this.fullPersistenceKey=xp("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await np(this.auth,{idToken:e}).catch(()=>{});return t?mp._fromGetAccountInfoResponse(this.auth,t,e):null}return mp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new bp(gp(vp),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||gp(vp);const s=xp(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await np(e,{idToken:t}).catch(()=>{});if(!r)break;n=await mp._fromGetAccountInfoResponse(e,r,t)}else n=mp._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new bp(i,e,n)):new bp(i,e,n)}}function wp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cp(t))return"Blackberry";if(Sp(t))return"Webos";if(Np(t))return"Safari";if((t.includes("chrome/")||_p(t))&&!t.includes("edge/"))return"Chrome";if(Ap(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function kp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/firefox\//i.test(e)}function Np(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/crios\//i.test(e)}function jp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/iemobile/i.test(e)}function Ap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/android/i.test(e)}function Cp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/blackberry/i.test(e)}function Sp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/webos/i.test(e)}function Ep(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tp(){return function(){const e=Au();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au();return Ep(e)||Ap(e)||Sp(e)||Cp(e)||/windows phone/i.test(e)||jp(e)}function Pp(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=wp(Au());break;case"Worker":t="".concat(wp(Au()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ih,"/").concat(r)}class Rp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(el){r(el)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(el){t.reverse();for(const n of t)try{n()}catch(zl){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===el||void 0===el?void 0:el.message})}}}class Dp{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Lp{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Op(this),this.idTokenSubscription=new Op(this),this.beforeStateQueue=new Rp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gp(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await bp.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(el){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await np(this,{idToken:e}),n=await mp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(GN){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",GN),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(th(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(el){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(el))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ph(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(el){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await up(e)}catch(el){if((null===el||void 0===el?void 0:el.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(th(this.app))return Promise.reject(Eh(this));const t=e?Uu(e):null;return t&&Ph(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ph(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return th(this.app)?Promise.reject(Eh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return th(this.app)?Promise.reject(Eh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gp(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Kh(e,"GET","/v2/passwordPolicy",Wh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Dp(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Kh(e,"POST","/v2/accounts:revokeToken",Wh(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gp(e)||this._popupRedirectResolver;Ph(t,this,"argument-error"),this.redirectPersistenceManager=await bp.create(this,[gp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ph(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ph(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(th(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(_h.logLevel<=Gu.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_h.warn("Auth (".concat(ih,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Mp(e){return Uu(e)}class Op{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Fu(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ph(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fp(e){return Bp.loadJS(e)}function zp(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Up{constructor(){this.enterprise=new Vp}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Vp{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Hp="NO_RECAPTCHA";class qp{constructor(e){this.type="recaptcha-enterprise",this.auth=Mp(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;$h(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Hp)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Up).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{tp(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ep(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&$h(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Bp.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Fp(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Wp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new qp(e);let o;if(i)o=Hp;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kp(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Wp(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Wp(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await Wp(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Wp(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Wp(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Gp(e){const t=Mp(e),n=await tp(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ep(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new qp(t).verify()}}function Zp(e,t,n){const r=Mp(e);Ph(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Qp(t),{host:o,port:a}=function(e){const t=Qp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Yp(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yp(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ph(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ph(Du(c,r.config.emulator)&&Du(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,wu(o)?(ku("".concat(s,"//").concat(o).concat(l)),ju("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yp(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Jp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rh("not implemented")}_getIdTokenResponse(e){return Rh("not implemented")}_linkToIdToken(e,t){return Rh("not implemented")}_getReauthenticationResolver(e){return Rh("not implemented")}}async function Xp(e,t){return Kh(e,"POST","/v1/accounts:signUp",t)}async function $p(e,t){return Zh(e,"POST","/v1/accounts:signInWithPassword",Wh(e,t))}class em extends Jp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new em(e,t,"password")}static _fromEmailAndCode(e,t){return new em(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Kp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$p,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithEmailLink",Wh(e,t))}(e,{email:this._email,oobCode:this._password});default:Ah(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Kp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xp,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithEmailLink",Wh(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ah(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tm(e,t){return Zh(e,"POST","/v1/accounts:signInWithIdp",Wh(e,t))}class nm extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ah("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,bh);if(!n||!r)return null;const o=new nm(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return tm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}async function rm(e,t){return Kh(e,"POST","/v1/accounts:sendVerificationCode",Wh(e,t))}const im={USER_NOT_FOUND:"user-not-found"};class sm extends Jp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sm({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sm({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",Wh(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",Wh(e,t));if(n.temporaryProof)throw Xh(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Zh(e,"POST","/v1/accounts:signInWithPhoneNumber",Wh(e,c(c({},t),{},{operation:"REAUTH"})),im)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new sm({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class om{constructor(e){var t,n,r,i,s,o;const a=Ou(Bu(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ph(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ou(Bu(e)).link,n=t?Ou(Bu(t)).deep_link_id:null,r=Ou(Bu(e)).deep_link_id;return(r?Ou(Bu(r)).link:null)||r||n||t||e}(e);try{return new om(t)}catch(n){return null}}}class am{constructor(){this.providerId=am.PROVIDER_ID}static credential(e,t){return em._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=om.parseLink(t);return Ph(n,"argument-error"),em._fromEmailAndCode(e,n.code,n.tenantId)}}am.PROVIDER_ID="password",am.EMAIL_PASSWORD_SIGN_IN_METHOD="password",am.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cm extends lm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class um extends cm{constructor(){super("facebook.com")}static credential(e){return nm._fromParams({providerId:um.PROVIDER_ID,signInMethod:um.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return um.credentialFromTaggedObject(e)}static credentialFromError(e){return um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return um.credential(t.oauthAccessToken)}catch(n){return null}}}um.FACEBOOK_SIGN_IN_METHOD="facebook.com",um.PROVIDER_ID="facebook.com";class dm extends cm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return nm._fromParams({providerId:dm.PROVIDER_ID,signInMethod:dm.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dm.credentialFromTaggedObject(e)}static credentialFromError(e){return dm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dm.credential(n,r)}catch(i){return null}}}dm.GOOGLE_SIGN_IN_METHOD="google.com",dm.PROVIDER_ID="google.com";class hm extends cm{constructor(){super("github.com")}static credential(e){return nm._fromParams({providerId:hm.PROVIDER_ID,signInMethod:hm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hm.credentialFromTaggedObject(e)}static credentialFromError(e){return hm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hm.credential(t.oauthAccessToken)}catch(n){return null}}}hm.GITHUB_SIGN_IN_METHOD="github.com",hm.PROVIDER_ID="github.com";class pm extends cm{constructor(){super("twitter.com")}static credential(e,t){return nm._fromParams({providerId:pm.PROVIDER_ID,signInMethod:pm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pm.credentialFromTaggedObject(e)}static credentialFromError(e){return pm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return pm.credential(n,r)}catch(i){return null}}}pm.TWITTER_SIGN_IN_METHOD="twitter.com",pm.PROVIDER_ID="twitter.com";class mm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await mp._fromIdTokenResponse(e,n,r),s=fm(n);return new mm({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fm(n);return new mm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class gm extends Iu{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,gm.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new gm(e,t,n,r)}}function ym(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw gm._fromErrorAndOperation(e,n,t,r);throw n})}async function vm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ap(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mm._forOperation(e,"link",r)}async function xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(th(r.app))return Promise.reject(Eh(r));const i="reauthenticate";try{const s=await ap(e,ym(r,i,t,e),n);Ph(s.idToken,r,"internal-error");const o=sp(s.idToken);Ph(o,r,"internal-error");const{sub:a}=o;return Ph(e.uid===a,r,"user-mismatch"),mm._forOperation(e,i,s)}catch(el){throw(null===el||void 0===el?void 0:el.code)==="auth/".concat("user-not-found")&&Ah(r,"user-mismatch"),el}}async function bm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(th(e.app))return Promise.reject(Eh(e));const r="signIn",i=await ym(e,r,t),s=await mm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function wm(e,t){return Kh(e,"POST","/v2/accounts/mfaEnrollment:start",Wh(e,t))}new WeakMap;const km="__sak";class Nm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(km,"1"),this.storage.removeItem(km),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _m extends Nm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ip(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Tp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_m.type="LOCAL";const jm=_m;function Am(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Cm(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Sm{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Cm(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Am(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Cm(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Cm(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Am(n);const i=setInterval(()=>{const e=Am(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Sm.type="COOKIE";class Em extends Nm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Em.type="SESSION";const Tm=Em;class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Im(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Im.receivers=[];class Rm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Pm("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Dm(){return window}function Lm(){return"undefined"!==typeof Dm().WorkerGlobalScope&&"function"===typeof Dm().importScripts}const Mm="firebaseLocalStorageDb",Om="firebaseLocalStorage",Bm="fbase_key";class Fm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zm(e,t){return e.transaction([Om],t?"readwrite":"readonly").objectStore(Om)}function Um(){const e=indexedDB.open(Mm,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Om,{keyPath:Bm})}catch(el){n(el)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Om)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Mm);return new Fm(e).toPromise()}(),t(await Um()))})})}async function Vm(e,t,n){const r=zm(e,!0).put({[Bm]:t,value:n});return new Fm(r).toPromise()}function Hm(e,t){const n=zm(e,!0).delete(t);return new Fm(n).toPromise()}class qm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Um()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(el){if(t++>3)throw el;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(Lm()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Rm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await Vm(e,km,"1"),await Hm(e,km),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vm(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zm(e,!1).get(t),r=await new Fm(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zm(e,!1).getAll();return new Fm(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qm.type="LOCAL";const Wm=qm;function Km(e,t){return Kh(e,"POST","/v2/accounts/mfaSignIn:start",Wh(e,t))}zp("rcb"),new Fh(3e4,6e4);const Gm="recaptcha";async function Zm(e,t,n){if(!e._getRecaptchaConfig())try{await Gp(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ph("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Kp(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Hp){Ph((null===n||void 0===n?void 0:n.type)===Gm,e,"argument-error");return wm(e,await Qm(e,t,n))}return wm(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Ph("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ph(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Kp(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Hp){Ph((null===n||void 0===n?void 0:n.type)===Gm,e,"argument-error");return Km(e,await Qm(e,t,n))}return Km(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Kp(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Hp){Ph((null===n||void 0===n?void 0:n.type)===Gm,e,"argument-error");return rm(e,await Qm(e,t,n))}return rm(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qm(e,t,n){Ph(n.type===Gm,e,"argument-error");const r=await n.verify();Ph("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ym{constructor(e){this.providerId=Ym.PROVIDER_ID,this.auth=Mp(e)}verifyPhoneNumber(e,t){return Zm(this.auth,e,Uu(t))}static credential(e,t){return sm._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ym.credentialFromTaggedObject(t)}static credentialFromError(e){return Ym.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?sm._fromTokenResponse(n,r):null}}function Jm(e,t){return t?gp(t):(Ph(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ym.PROVIDER_ID="phone",Ym.PHONE_SIGN_IN_METHOD="phone";class Xm extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $m(e){return bm(e.auth,new Xm(e),e.bypassAuthState)}function ef(e){const{auth:t,user:n}=e;return Ph(n,t,"internal-error"),xm(n,new Xm(e),e.bypassAuthState)}async function tf(e){const{auth:t,user:n}=e;return Ph(n,t,"internal-error"),vm(n,new Xm(e),e.bypassAuthState)}class nf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(el){this.reject(el)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(el){this.reject(el)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $m;case"linkViaPopup":case"linkViaRedirect":return tf;case"reauthViaPopup":case"reauthViaRedirect":return ef;default:Ah(this.auth,"internal-error")}}resolve(e){Dh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rf=new Fh(2e3,1e4);class sf extends nf{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sf.currentPopupAction&&sf.currentPopupAction.cancel(),sf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ph(e,this.auth,"internal-error"),e}async onExecution(){Dh(1===this.filter.length,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ch(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ch(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ch(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rf.get())};e()}}sf.currentPopupAction=null;const of=new Map;class af extends nf{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=uf(t),r=cf(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(el){e=()=>Promise.reject(el)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function lf(e,t){of.set(e._key(),t)}function cf(e){return gp(e._redirectPersistence)}function uf(e){return xp("pendingRedirect",e.config.apiKey,e.name)}async function df(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(th(e.app))return Promise.reject(Eh(e));const r=Mp(e),i=Jm(r,t),s=new af(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class hf{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mf(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ch(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pf(e))}saveEventToCache(e){this.cachedEventUids.add(pf(e)),this.lastProcessedEventTime=Date.now()}}function pf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function mf(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ff=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gf=/^https?/;async function yf(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Kh(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vf(r))return}catch(n){}Ah(e,"unauthorized-domain")}function vf(e){const t=Lh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gf.test(n))return!1;if(ff.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const xf=new Fh(3e4,6e4);function bf(){const e=Dm().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function wf(e){return new Promise((t,n)=>{var r,i;function s(){bf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bf(),n(Ch(e,"network-request-failed"))},timeout:xf.get()})}if(null!==(r=Dm().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Dm().gapi)||void 0===i||!i.load){const t=zp("iframefcb");return Dm()[t]=()=>{gapi.load?s():n(Ch(e,"network-request-failed"))},Fp("".concat(Bp.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw kf=null,e})}let kf=null;const Nf=new Fh(5e3,15e3),_f={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Af(e){const t=e.config;Ph(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zh(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ih},i=jf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Mu(r).slice(1))}async function Cf(e){const t=await function(e){return kf=kf||wf(e),kf}(e),n=Dm().gapi;return Ph(n,e,"internal-error"),t.open({where:document.body,url:Af(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_f,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ch(e,"network-request-failed"),s=Dm().setTimeout(()=>{r(i)},Nf.get());function o(){Dm().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Sf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ef{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(el){}}}function Tf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},Sf),{},{width:r.toString(),height:i.toString(),top:s,left:o}),u=Au().toLowerCase();n&&(a=_p(u)?"_blank":n),kp(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ep(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ef(null);const h=window.open(t||"",a,d);Ph(h,e,"popup-blocked");try{h.focus()}catch(el){}return new Ef(h)}const If="__/auth/handler",Pf="emulator/auth/handler",Rf=encodeURIComponent("fac");async function Df(e,t,n,r,i,s){Ph(e.config.authDomain,e,"auth-domain-config-required"),Ph(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ih,eventId:i};if(t instanceof lm){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof cm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Rf,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(If);return zh(t,Pf)}(e),"?").concat(Mu(a).slice(1)).concat(c)}const Lf="webStorageSupport";const Mf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tm,this._completeRedirectFn=df,this._overrideRedirectResult=lf}async _openPopup(e,t,n,r){var i;Dh(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Tf(e,await Df(e,t,n,Lh(),r),Pm())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Dm().location.href=e}(await Df(e,t,n,Lh(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cf(e),n=new hf(e);return t.register("authEvent",t=>{Ph(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lf,{type:Lf},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Lf];void 0!==i&&t(!!i),Ah(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yf(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ip()||Np()||Ep()}};var Of="@firebase/auth",Bf="1.11.1";class Ff{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ph(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zf=xu("authIdTokenMaxAge")||300;let Uf=null;var Vf;!function(e){Bp=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ch("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Vf="Browser",$d(new Vu("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ph(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Vf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pp(Vf)},c=new Lp(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gp);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$d(new Vu("auth-internal",e=>(e=>new Ff(e))(Mp(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ah(Of,Bf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vf)),ah(Of,Bf,"esm2020");ah("firebase","12.6.0","app");var Hf,qf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Wf={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(a,a);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new f(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new f(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=p(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,m(n,2*i+2*t),n[2*i+2*t+1]+=r*a,m(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,m(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,m(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Wf.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},Hf=Wf.Integer=r}).apply("undefined"!==typeof qf?qf:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Kf,Gf,Zf,Qf,Yf,Jf,Xf,$f,eg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},tg={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof eg&&eg];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){s.setTimeout(()=>{throw e},0)}function f(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,x=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=f();){try{e.h.call(e.g)}catch(ol){m(ol)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}x=!1}function N(){this.u=this.u,this.C=this.C}function _(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},_.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(ol){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,_),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var S="closure_listenable_"+(1e6*Math.random()|0),E=0;function T(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++E,this.da=this.fa=!1}function I(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function O(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(I(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}M.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=B(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new T(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),z={};function U(e,t,n,r,i){if(r&&r.once)return H(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)U(e,t[s],n,r,i);return null}return n=Y(n),e&&e[S]?e.J(t,n,o(r)?!!r.capture:!!r,i):V(e,t,n,!1,r,i)}function V(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Z(e);if(l||(e[F]=l=new M(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=Y(n),e&&e[S]?e.K(t,n,o(r)?!!r.capture:!!r,i):V(e,t,n,!0,r,i)}function q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Y(n),e&&e[S]?(e=e.i,(s=String(t).toString())in e.g&&((n=B(t=e.g[s],n,r,i))>-1&&(I(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[S])O(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(O(n,e),0==n.h&&(n.src=null,t[F]=null)):I(e)}}}function K(e){return e in z?z[e]:z[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Z(e){return(e=e[F])instanceof M?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function J(){N.call(this),this.i=new M(this),this.M=this,this.G=null}function X(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new _(t,e);else if(t instanceof _)t.target=t.target||e;else{var i=t;L(t=new _(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=$(s,r,!0,t)&&i;if(s=t.g=e,i=$(s,r,!0,t)&&i,i=$(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=$(s,r,!1,t)&&i}function $(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&O(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,N),J.prototype[S]=!0,J.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)I(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){N.call(this),this.h=e,this.g={}}u(ne,N);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){_.call(this,"d")}function he(){_.call(this,"c")}u(de,_),u(he,_);var pe={},me=null;function fe(){return me=me||new J}function ge(e){_.call(this,pe.Ia,e)}function ye(e){const t=fe();X(t,new ge(t))}function ve(e,t){_.call(this,pe.STAT_EVENT,e),this.stat=t}function xe(e){const t=fe();X(t,new ve(t,e))}function be(e,t){_.call(this,pe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(dl){return t}}(e,n)+(r?" "+r:"")})}pe.Ia="serverreachability",u(ge,_),pe.STAT_EVENT="statevent",u(ve,_),pe.Ja="timingevent",u(be,_),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var _e,je={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ae={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Se(e){return encodeURIComponent(String(e))}function Ee(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},_e=new Ce;var Pe={},Re={};function De(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Be(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),xt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ie,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=U(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Oe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function ze(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ue(e){0==e.j.I||e.K||en(e.j,e)}function Ve(e){ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ze(n.h,e)))if(!e.L&&Ze(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;$t(n),Ht(n)}Yt(n),xe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&$t(n),!A(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qe(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),o.L){Ye(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(ze(a),Be(a)),r.g=o}else Qt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Vt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Te.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Bt(e)?t.j():this.Y(e)},Te.prototype.Y=function(e){try{if(e==this.g)e:{const l=Bt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==c||ye(),ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Bt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Ve(e),Ue(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,xe(12),Ve(this),Ue(this);break e}Ne(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Oe(this,n),t==Re){4==l&&(this.m=4,xe(14),e=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,xe(15),Ne(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ne(this.i,this.l,t,null),He(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,xe(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(a),a.P=!0,xe(11))}}else Ne(this.i,this.l,n,"[Invalid Chunked Response]"),Ve(this),Ue(this)}else Ne(this.i,this.l,n,null),He(this,n);4==l&&Ve(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&Bt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(A(e[r]))continue;var n=Ee(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,xe(12)):(this.m=0,xe(13)),Ve(this),Ue(this)}}}catch(Dl){}},Te.prototype.cancel=function(){this.K=!0,Ve(this)},Te.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),xe(17)),Ve(this),this.m=2,Ue(this)):Fe(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Ye(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof $e?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Xe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new mt(null,this.l))}function et(e){return new $e(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof mt?(e.i=t,function(e,t){t&&!e.j&&(ft(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),xt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new mt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$e.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Se(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,pt)),e.join("")},$e.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,pt=/#/g;function mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ft(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){ft(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return ft(e),t=wt(e,t),e.g.has(t)}function vt(e,t){ft(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function xt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function bt(e){const t=new mt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(dl){}}function Nt(){this.g=new ae}function _t(e){this.i=e.Sb||null,this.h=e.ab||!1}function jt(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function At(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,St(e)}function St(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Et(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Tt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Et(n),"string"===typeof e?null!=n&&Se(n):it(e,t,n))}function It(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=mt.prototype).add=function(e,t){ft(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){ft(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return ft(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Se(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Se(n[t])),e.push(r)}}return this.i=e.join("&")},u(_t,le),_t.prototype.g=function(){return new jt(this.i,this.h)},u(jt,J),(e=jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,St(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,St(this)),this.g&&(this.readyState=3,St(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;At(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):St(this),3==this.readyState&&At(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(It,J);var Pt=/^https?$/i,Rt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),Ot(e)}function Lt(e){e.A||(e.A=!0,X(e,"complete"),X(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Bt(e))setTimeout(e.Ca.bind(e),0);else if(X(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Xe)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)X(e,"complete"),X(e,"success");else{e.o=6;try{var o=Bt(e)>2?e.g.statusText:""}catch(hl){o=""}e.l=o+" ["+e.ca()+"]",Lt(e)}}finally{Ot(e)}}}function Ot(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||X(e,"ready");try{n.onreadystatechange=null}catch(ul){}}}function Bt(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ut(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zt("baseRetryDelayMs",5e3,e),this.Za=zt("retryDelaySeedMs",1e4,e),this.Ta=zt("forwardChannelMaxRetries",2,e),this.va=zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new Nt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Vt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Te(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(ul){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Be(t)}rn(e)}function Ht(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function qt(e){Ht(e),e.v&&(s.clearTimeout(e.v),e.v=null),$t(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),x||(v(),x=!0),b.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Tt(r,e.u,e.o),n=new Te(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Zt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),De(n,r,t)}function Gt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Zt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(rg){throw e.push(s+"type="+encodeURIComponent("_badmap")),rg}}catch(rg){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),x||(v(),x=!0),b.add(t,e),e.A=0}}function Yt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Xt(e){e.g=new Te(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Tt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Le(n,e)}function $t(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){$t(e),Jt(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.G,Ye(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;X(r=fe(),new be(r,n)),Wt(e)}else Qt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Yt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new $e(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else xe(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof $e?et(n):new $e(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new $e(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new It(new _t({ab:n})):new It(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){J.call(this),this.g=new Ut(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!A(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=It.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_e.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(dl){return void Dt(this,dl)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(dl){Dt(this,dl)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,X(this,"complete"),X(this,"abort"),Ot(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ot(this,!0)),It.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Bt(this)>2?this.g.status:-1}catch(rl){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(rl){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Ut.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){xe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Te(this,this.j,e);let s=this.o;if(this.U&&(s?(s=R(s),L(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),s&&(this.R?t="headers="+Se(Et(s))+"&"+t:this.u&&Tt(n,this.u,s)),Qe(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,De(i,n,null)):De(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Xt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xe(10),Ht(this),Xt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Yt(this),xe(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Vt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,an),hn.prototype.ra=function(){X(this.g,"a")},hn.prototype.qa=function(e){X(this.g,new un(e))},hn.prototype.pa=function(e){X(this.g,new dn)},hn.prototype.oa=function(){X(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,$f=tg.createWebChannelTransport=function(){return new ln},Xf=tg.getStatEventTarget=function(){return fe()},Jf=tg.Event=pe,Yf=tg.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Qf=tg.ErrorCode=je,Ae.COMPLETE="complete",Zf=tg.EventType=Ae,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Gf=tg.WebChannel=ce,tg.FetchXmlHttpFactory=_t,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,Kf=tg.XhrIo=It}).apply("undefined"!==typeof eg?eg:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ng="@firebase/firestore",rg="4.9.2";class ig{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ig.UNAUTHENTICATED=new ig(null),ig.GOOGLE_CREDENTIALS=new ig("google-credentials-uid"),ig.FIRST_PARTY=new ig("first-party-uid"),ig.MOCK_USER=new ig("mock-user");let sg="12.3.0";const og=new Xu("@firebase/firestore");function ag(){return og.logLevel}function lg(e){if(og.logLevel<=Gu.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dg);og.debug("Firestore (".concat(sg,"): ").concat(e),...i)}}function cg(e){if(og.logLevel<=Gu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dg);og.error("Firestore (".concat(sg,"): ").concat(e),...i)}}function ug(e){if(og.logLevel<=Gu.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dg);og.warn("Firestore (".concat(sg,"): ").concat(e),...i)}}function dg(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(tl){return e}}function hg(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,pg(e,r,n)}function pg(e,t,n){let r="FIRESTORE (".concat(sg,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw cg(r),new Error(r)}function mg(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||pg(t,i,r)}function fg(e,t){return e}const gg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yg extends Iu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class vg{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class bg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ig.UNAUTHENTICATED))}shutdown(){}}class wg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kg{constructor(e){this.t=e,this.currentUser=ig.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mg(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new vg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vg,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{lg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(lg("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vg)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(lg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mg("string"==typeof t.accessToken,31837,{l:t}),new xg(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mg(null===e||"string"==typeof e,2055,{h:e}),new ig(e)}}class Ng{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ig.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _g{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ng(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ig.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ag{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,th(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mg(void 0===this.o,3512);const n=e=>{null!=e.error&&lg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,lg("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{lg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):lg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(mg("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new jg(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cg(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Sg{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Cg(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Eg(e,t){return e<t?-1:e>t?1:0}function Tg(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Rg(n)===Rg(i)?Eg(n,i):Rg(n)?1:-1}return Eg(e.length,t.length)}const Ig=55296,Pg=57343;function Rg(e){const t=e.charCodeAt(0);return t>=Ig&&t<=Pg}function Dg(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Lg="__name__";class Mg{constructor(e,t,n){void 0===t?t=0:t>e.length&&hg(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&hg(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mg?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Mg.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Eg(e.length,t.length)}static compareSegments(e,t){const n=Mg.isNumericId(e),r=Mg.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Mg.extractNumericId(e).compare(Mg.extractNumericId(t)):Tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hf.fromString(e.substring(4,e.length-2))}}class Og extends Mg{construct(e,t,n){return new Og(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new yg(gg.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Og(e)}static emptyPath(){return new Og([])}}const Bg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fg extends Mg{construct(e,t,n){return new Fg(e,t,n)}static isValidIdentifier(e){return Bg.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fg.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Lg}static keyField(){return new Fg([Lg])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new yg(gg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yg(gg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yg(gg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new yg(gg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fg(t)}static emptyPath(){return new Fg([])}}class zg{constructor(e){this.path=e}static fromPath(e){return new zg(Og.fromString(e))}static fromName(e){return new zg(Og.fromString(e).popFirst(5))}static empty(){return new zg(Og.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Og.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Og.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zg(new Og(e.slice()))}}function Ug(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Vg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":hg(12329,{type:typeof e})}function Hg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yg(gg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vg(e);throw new yg(gg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function qg(e,t){const n={typeString:e};return t&&(n.value=t),n}function Wg(e,t){if(!Ug(e))throw new yg(gg.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new yg(gg.INVALID_ARGUMENT,n);return!0}const Kg=-62135596800,Gg=1e6;class Zg{static now(){return Zg.fromMillis(Date.now())}static fromDate(e){return Zg.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Gg);return new Zg(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yg(gg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yg(gg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kg)throw new yg(gg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yg(gg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gg}_compareTo(e){return this.seconds===e.seconds?Eg(this.nanoseconds,e.nanoseconds):Eg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zg._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wg(e,Zg._jsonSchema))return new Zg(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zg._jsonSchemaVersion="firestore/timestamp/1.0",Zg._jsonSchema={type:qg("string",Zg._jsonSchemaVersion),seconds:qg("number"),nanoseconds:qg("number")};class Qg{static fromTimestamp(e){return new Qg(e)}static min(){return new Qg(new Zg(0,0))}static max(){return new Qg(new Zg(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yg=-1;class Jg{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Jg.UNKNOWN_ID=-1;function Xg(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Qg.fromTimestamp(1e9===r?new Zg(n+1,0):new Zg(n,r));return new ey(i,zg.empty(),t)}function $g(e){return new ey(e.readTime,e.key,Yg)}class ey{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ey(Qg.min(),zg.empty(),Yg)}static max(){return new ey(Qg.max(),zg.empty(),Yg)}}function ty(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zg.comparator(e.documentKey,t.documentKey),0!==n?n:Eg(e.largestBatchId,t.largestBatchId))}class ny{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ry{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hg(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ry((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ry?t:ry.resolve(t)}catch(e){return ry.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ry.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ry.reject(t)}static resolve(e){return new ry((t,n)=>{t(e)})}static reject(e){return new ry((t,n)=>{n(e)})}static waitFor(e){return new ry((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ry.resolve(!1);for(const n of e)t=t.next(e=>e?ry.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ry((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ry((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function iy(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sy(e){return"IndexedDbTransactionError"===e.name}class oy{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}oy.ce=-1;const ay=-1;function ly(e){return null==e}function cy(e){return 0===e&&1/e==-1/0}const uy="remoteDocuments",dy="owner",hy="mutationQueues",py="mutations";const my="documentMutations",fy="remoteDocumentsV14",gy="remoteDocumentGlobal",yy="targets",vy="targetDocuments",xy="targetGlobal",by="collectionParents",wy="clientMetadata",ky="bundles",Ny="namedQueries",_y="indexConfiguration",jy="indexState",Ay="indexEntries",Cy="documentOverlays",Sy="globals",Ey=[hy,py,my,uy,yy,dy,xy,vy,wy,gy,by,ky,Ny],Ty=[hy,py,my,fy,yy,dy,xy,vy,wy,gy,by,ky,Ny,Cy],Iy=Ty,Py=[...Iy,_y,jy,Ay];function Ry(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dy(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ly(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class My{constructor(e,t){this.comparator=e,this.root=t||By.EMPTY}insert(e,t){return new My(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,By.BLACK,null,null))}remove(e){return new My(this.comparator,this.root.remove(e,this.comparator).copy(null,null,By.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oy(this.root,e,this.comparator,!0)}}class Oy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class By{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:By.RED,this.left=null!=r?r:By.EMPTY,this.right=null!=i?i:By.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new By(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return By.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return By.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,By.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,By.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hg(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hg(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw hg(27949);return e+(this.isRed()?0:1)}}By.EMPTY=null,By.RED=!0,By.BLACK=!1,By.EMPTY=new class{constructor(){this.size=0}get key(){throw hg(57766)}get value(){throw hg(16141)}get color(){throw hg(16727)}get left(){throw hg(29726)}get right(){throw hg(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new By(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fy{constructor(e){this.comparator=e,this.data=new My(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Fy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fy(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Uy{constructor(e){this.fields=e,e.sort(Fg.comparator)}static empty(){return new Uy([])}unionWith(e){let t=new Fy(Fg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Uy(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dg(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Vy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vy("Invalid base64 string: "+e):e}}(e);return new Hy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Eg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hy.EMPTY_BYTE_STRING=new Hy("");const qy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wy(e){if(mg(!!e,39018),"string"==typeof e){let t=0;const n=qy.exec(e);if(mg(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ky(e.seconds),nanos:Ky(e.nanos)}}function Ky(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gy(e){return"string"==typeof e?Hy.fromBase64String(e):Hy.fromUint8Array(e)}const Zy="server_timestamp",Qy="__type__",Yy="__previous_value__",Jy="__local_write_time__";function Xy(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Qy])||void 0===t?void 0:t.stringValue)===Zy}function $y(e){const t=e.mapValue.fields[Yy];return Xy(t)?$y(t):t}function ev(e){const t=Wy(e.mapValue.fields[Jy].timestampValue);return new Zg(t.seconds,t.nanos)}const tv="(default)";class nv{constructor(e,t){this.projectId=e,this.database=t||tv}static empty(){return new nv("","")}get isDefaultDatabase(){return this.database===tv}isEqual(e){return e instanceof nv&&e.projectId===this.projectId&&e.database===this.database}}const rv="__type__",iv="__max__",sv={mapValue:{fields:{__type__:{stringValue:iv}}}},ov="__vector__",av="value";function lv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xy(e)?4:wv(e)?9007199254740991:xv(e)?10:11:hg(28295,{value:e})}function cv(e,t){if(e===t)return!0;const n=lv(e);if(n!==lv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ev(e).isEqual(ev(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Wy(e.timestampValue),r=Wy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Gy(e.bytesValue).isEqual(Gy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ky(e.geoPointValue.latitude)===Ky(t.geoPointValue.latitude)&&Ky(e.geoPointValue.longitude)===Ky(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ky(e.integerValue)===Ky(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ky(e.doubleValue),r=Ky(t.doubleValue);return n===r?cy(n)===cy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dg(e.arrayValue.values||[],t.arrayValue.values||[],cv);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ry(n)!==Ry(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cv(n[i],r[i])))return!1;return!0}(e,t);default:return hg(52216,{left:e})}}function uv(e,t){return void 0!==(e.values||[]).find(e=>cv(e,t))}function dv(e,t){if(e===t)return 0;const n=lv(e),r=lv(t);if(n!==r)return Eg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Eg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ky(e.integerValue||e.doubleValue),r=Ky(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hv(e.timestampValue,t.timestampValue);case 4:return hv(ev(e),ev(t));case 5:return Tg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Gy(e),r=Gy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Eg(n[i],r[i]);if(0!==e)return e}return Eg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Eg(Ky(e.latitude),Ky(t.latitude));return 0!==n?n:Eg(Ky(e.longitude),Ky(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return pv(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[av])||void 0===n?void 0:n.arrayValue,c=null===(r=a[av])||void 0===r?void 0:r.arrayValue,u=Eg((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:pv(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===sv.mapValue&&t===sv.mapValue)return 0;if(e===sv.mapValue)return 1;if(t===sv.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Tg(r[o],s[o]);if(0!==e)return e;const t=dv(n[r[o]],i[s[o]]);if(0!==t)return t}return Eg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw hg(23264,{he:n})}}function hv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Eg(e,t);const n=Wy(e),r=Wy(t),i=Eg(n.seconds,r.seconds);return 0!==i?i:Eg(n.nanos,r.nanos)}function pv(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=dv(n[i],r[i]);if(e)return e}return Eg(n.length,r.length)}function mv(e){return fv(e)}function fv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Wy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Gy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zg.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=fv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(fv(e.fields[i]));return n+"}"}(e.mapValue):hg(61005,{value:e})}function gv(e){return!!e&&"integerValue"in e}function yv(e){return!!e&&"arrayValue"in e}function vv(e){return!!e&&"mapValue"in e}function xv(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[rv])||void 0===t?void 0:t.stringValue)===ov}function bv(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Dy(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=bv(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bv(e.arrayValue.values[n]);return t}return c({},e)}function wv(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===iv}class kv{constructor(e){this.value=e}static empty(){return new kv({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bv(t)}setAll(e){let t=Fg.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=bv(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());vv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Dy(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new kv(bv(this.value))}}class Nv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Nv(e,0,Qg.min(),Qg.min(),Qg.min(),kv.empty(),0)}static newFoundDocument(e,t,n,r){return new Nv(e,1,t,Qg.min(),n,r,0)}static newNoDocument(e,t){return new Nv(e,2,t,Qg.min(),Qg.min(),kv.empty(),0)}static newUnknownDocument(e,t){return new Nv(e,3,t,Qg.min(),Qg.min(),kv.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kv.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kv.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class _v{constructor(e,t){this.position=e,this.inclusive=t}}function jv(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?zg.comparator(zg.fromName(o.referenceValue),n.key):dv(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Av(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cv(e.position[n],t.position[n]))return!1;return!0}class Cv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Sv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ev{}class Tv extends Ev{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Bv(e,t,n):"array-contains"===t?new Vv(e,n):"in"===t?new Hv(e,n):"not-in"===t?new qv(e,n):"array-contains-any"===t?new Wv(e,n):new Tv(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Fv(e,n):new zv(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(dv(t,this.value)):null!==t&&lv(this.value)===lv(t)&&this.matchesComparison(dv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hg(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Iv extends Ev{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Iv(e,t)}matches(e){return Pv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pv(e){return"and"===e.op}function Rv(e){return Dv(e)&&Pv(e)}function Dv(e){for(const t of e.filters)if(t instanceof Iv)return!1;return!0}function Lv(e){if(e instanceof Tv)return e.field.canonicalString()+e.op.toString()+mv(e.value);if(Rv(e))return e.filters.map(e=>Lv(e)).join(",");{const t=e.filters.map(e=>Lv(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Mv(e,t){return e instanceof Tv?function(e,t){return t instanceof Tv&&e.op===t.op&&e.field.isEqual(t.field)&&cv(e.value,t.value)}(e,t):e instanceof Iv?function(e,t){return t instanceof Iv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Mv(n,t.filters[r]),!0)}(e,t):void hg(19439)}function Ov(e){return e instanceof Tv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(mv(e.value))}(e):e instanceof Iv?function(e){return e.op.toString()+" {"+e.getFilters().map(Ov).join(" ,")+"}"}(e):"Filter"}class Bv extends Tv{constructor(e,t,n){super(e,t,n),this.key=zg.fromName(n.referenceValue)}matches(e){const t=zg.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fv extends Tv{constructor(e,t){super(e,"in",t),this.keys=Uv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zv extends Tv{constructor(e,t){super(e,"not-in",t),this.keys=Uv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Uv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zg.fromName(e.referenceValue))}class Vv extends Tv{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yv(t)&&uv(t.arrayValue,this.value)}}class Hv extends Tv{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uv(this.value.arrayValue,t)}}class qv extends Tv{constructor(e,t){super(e,"not-in",t)}matches(e){if(uv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!uv(this.value.arrayValue,t)}}class Wv extends Tv{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>uv(this.value.arrayValue,e))}}class Kv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Gv(e){return new Kv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zv(e){const t=fg(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lv(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ly(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>mv(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>mv(e)).join(",")),t.Te=e}return t.Te}function Qv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Sv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Av(e.startAt,t.startAt)&&Av(e.endAt,t.endAt)}class Yv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Jv(e,t,n,r,i,s,o,a){return new Yv(e,t,n,r,i,s,o,a)}function Xv(e){return new Yv(e)}function $v(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ex(e){return null!==e.collectionGroup}function tx(e){const t=fg(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Fy(Fg.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Cv(r,n))}),e.has(Fg.keyField().canonicalString())||t.Ie.push(new Cv(Fg.keyField(),n))}return t.Ie}function nx(e){const t=fg(e);return t.Ee||(t.Ee=rx(t,tx(e))),t.Ee}function rx(e,t){if("F"===e.limitType)return Gv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Cv(e.field,t)});const n=e.endAt?new _v(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _v(e.startAt.position,e.startAt.inclusive):null;return Gv(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ix(e,t,n){return new Yv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sx(e,t){return Qv(nx(e),nx(t))&&e.limitType===t.limitType}function ox(e){return"".concat(Zv(nx(e)),"|lt:").concat(e.limitType)}function ax(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ov(e)).join(", "),"]")),ly(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>mv(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>mv(e)).join(",")),"Target(".concat(t,")")}(nx(e)),"; limitType=").concat(e.limitType,")")}function lx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of tx(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=jv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tx(e),t))&&!(e.endAt&&!function(e,t,n){const r=jv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tx(e),t))}(e,t)}function cx(e){return(t,n)=>{let r=!1;for(const i of tx(e)){const e=ux(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ux(e,t,n){const r=e.field.isKeyField()?zg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?dv(r,i):hg(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return hg(19790,{direction:e.dir})}}class dx{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Dy(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ly(this.inner)}size(){return this.innerSize}}const hx=new My(zg.comparator);function px(){return hx}const mx=new My(zg.comparator);function fx(){let e=mx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gx(e){let t=mx;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function yx(){return xx()}function vx(){return xx()}function xx(){return new dx(e=>e.toString(),(e,t)=>e.isEqual(t))}new My(zg.comparator);const bx=new Fy(zg.comparator);function wx(){let e=bx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const kx=new Fy(Eg);function Nx(){return kx}function _x(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cy(t)?"-0":t}}function jx(e){return{integerValue:""+e}}class Ax{constructor(){this._=void 0}}function Cx(e,t,n){return e instanceof Tx?function(e,t){const n={fields:{[Qy]:{stringValue:Zy},[Jy]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xy(t)&&(t=$y(t)),t&&(n.fields[Yy]=t),{mapValue:n}}(n,t):e instanceof Ix?Px(e,t):e instanceof Rx?Dx(e,t):function(e,t){const n=Ex(e,t),r=Mx(n)+Mx(e.Ae);return gv(n)&&gv(e.Ae)?jx(r):_x(e.serializer,r)}(e,t)}function Sx(e,t,n){return e instanceof Ix?Px(e,t):e instanceof Rx?Dx(e,t):n}function Ex(e,t){return e instanceof Lx?function(e){return gv(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Tx extends Ax{}class Ix extends Ax{constructor(e){super(),this.elements=e}}function Px(e,t){const n=Ox(t);for(const r of e.elements)n.some(e=>cv(e,r))||n.push(r);return{arrayValue:{values:n}}}class Rx extends Ax{constructor(e){super(),this.elements=e}}function Dx(e,t){let n=Ox(t);for(const r of e.elements)n=n.filter(e=>!cv(e,r));return{arrayValue:{values:n}}}class Lx extends Ax{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mx(e){return Ky(e.integerValue||e.doubleValue)}function Ox(e){return yv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bx{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bx}static exists(e){return new Bx(void 0,e)}static updateTime(e){return new Bx(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fx(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zx{}function Ux(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yx(e.key,Bx.none()):new Wx(e.key,e.data,Bx.none());{const n=e.data,r=kv.empty();let i=new Fy(Fg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Kx(e.key,r,new Uy(i.toArray()),Bx.none())}}function Vx(e,t,n){e instanceof Wx?function(e,t,n){const r=e.value.clone(),i=Zx(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kx?function(e,t,n){if(!Fx(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Zx(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gx(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Hx(e,t,n,r){return e instanceof Wx?function(e,t,n,r){if(!Fx(e.precondition,t))return n;const i=e.value.clone(),s=Qx(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kx?function(e,t,n,r){if(!Fx(e.precondition,t))return n;const i=Qx(e.fieldTransforms,r,t),s=t.data;return s.setAll(Gx(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fx(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dg(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ix&&t instanceof Ix||e instanceof Rx&&t instanceof Rx?Dg(e.elements,t.elements,cv):e instanceof Lx&&t instanceof Lx?cv(e.Ae,t.Ae):e instanceof Tx&&t instanceof Tx}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Wx extends zx{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kx extends zx{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gx(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Zx(e,t,n){const r=new Map;mg(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Sx(o,a,n[i]))}return r}function Qx(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Cx(e,s,t))}return r}class Yx extends zx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jx{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vx(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Hx(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Hx(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vx();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ux(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Qg.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wx())}isEqual(e){return this.batchId===e.batchId&&Dg(this.mutations,e.mutations,(e,t)=>qx(e,t))&&Dg(this.baseMutations,e.baseMutations,(e,t)=>qx(e,t))}}class Xx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var $x,eb;function tb(e){if(void 0===e)return cg("GRPC error has no .code"),gg.UNKNOWN;switch(e){case $x.OK:return gg.OK;case $x.CANCELLED:return gg.CANCELLED;case $x.UNKNOWN:return gg.UNKNOWN;case $x.DEADLINE_EXCEEDED:return gg.DEADLINE_EXCEEDED;case $x.RESOURCE_EXHAUSTED:return gg.RESOURCE_EXHAUSTED;case $x.INTERNAL:return gg.INTERNAL;case $x.UNAVAILABLE:return gg.UNAVAILABLE;case $x.UNAUTHENTICATED:return gg.UNAUTHENTICATED;case $x.INVALID_ARGUMENT:return gg.INVALID_ARGUMENT;case $x.NOT_FOUND:return gg.NOT_FOUND;case $x.ALREADY_EXISTS:return gg.ALREADY_EXISTS;case $x.PERMISSION_DENIED:return gg.PERMISSION_DENIED;case $x.FAILED_PRECONDITION:return gg.FAILED_PRECONDITION;case $x.ABORTED:return gg.ABORTED;case $x.OUT_OF_RANGE:return gg.OUT_OF_RANGE;case $x.UNIMPLEMENTED:return gg.UNIMPLEMENTED;case $x.DATA_LOSS:return gg.DATA_LOSS;default:return hg(39323,{code:e})}}(eb=$x||($x={}))[eb.OK=0]="OK",eb[eb.CANCELLED=1]="CANCELLED",eb[eb.UNKNOWN=2]="UNKNOWN",eb[eb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eb[eb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eb[eb.NOT_FOUND=5]="NOT_FOUND",eb[eb.ALREADY_EXISTS=6]="ALREADY_EXISTS",eb[eb.PERMISSION_DENIED=7]="PERMISSION_DENIED",eb[eb.UNAUTHENTICATED=16]="UNAUTHENTICATED",eb[eb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eb[eb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eb[eb.ABORTED=10]="ABORTED",eb[eb.OUT_OF_RANGE=11]="OUT_OF_RANGE",eb[eb.UNIMPLEMENTED=12]="UNIMPLEMENTED",eb[eb.INTERNAL=13]="INTERNAL",eb[eb.UNAVAILABLE=14]="UNAVAILABLE",eb[eb.DATA_LOSS=15]="DATA_LOSS";new Hf([4294967295,4294967295],0);Error;class nb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rb(e){return mg(!!e,49232),Qg.fromTimestamp(function(e){const t=Wy(e);return new Zg(t.seconds,t.nanos)}(e))}function ib(e,t){const n=function(e){return new Og(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function sb(e){const t=Og.fromString(e);return mg(db(t),10190,{key:t.toString()}),t}function ob(e){const t=sb(e);return 4===t.length?Og.emptyPath():ab(t)}function ab(e){return mg(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function lb(e){let t=ob(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mg(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=cb(e);return t instanceof Iv&&Rv(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Cv(ub(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ly(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new _v(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new _v(n,t)}(n.endAt)),Jv(t,i,o,s,a,"F",l,c)}function cb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ub(e.unaryFilter.field);return Tv.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ub(e.unaryFilter.field);return Tv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ub(e.unaryFilter.field);return Tv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ub(e.unaryFilter.field);return Tv.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hg(61313);default:return hg(60726)}}(e):void 0!==e.fieldFilter?function(e){return Tv.create(ub(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hg(58110);default:return hg(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Iv.create(e.compositeFilter.filters.map(e=>cb(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return hg(1026)}}(e.compositeFilter.op))}(e):hg(30097,{filter:e})}function ub(e){return Fg.fromServerFormat(e.fieldPath)}function db(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hb{constructor(e){this.yt=e}}function pb(e){const t=lb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ix(t,t.limit,"L"):t}class mb{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ky(e.integerValue));else if("doubleValue"in e){const n=Ky(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),cy(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Wy(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Gy(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?wv(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):hg(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=av,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Ky(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),zg.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mb.Kt=new mb;class fb{constructor(){this.Cn=new gb}addToCollectionParentIndex(e,t){return this.Cn.add(t),ry.resolve()}getCollectionParents(e,t){return ry.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ry.resolve()}deleteFieldIndex(e,t){return ry.resolve()}deleteAllFieldIndexes(e){return ry.resolve()}createTargetIndexes(e,t){return ry.resolve()}getDocumentsMatchingTarget(e,t){return ry.resolve(null)}getIndexType(e,t){return ry.resolve(0)}getFieldIndexes(e,t){return ry.resolve([])}getNextCollectionGroupToUpdate(e){return ry.resolve(null)}getMinOffset(e,t){return ry.resolve(ey.min())}getMinOffsetFromCollectionGroup(e,t){return ry.resolve(ey.min())}updateCollectionGroup(e,t,n){return ry.resolve()}updateIndexEntries(e,t){return ry.resolve()}}class gb{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fy(Og.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Fy(Og.comparator)).toArray()}}new Uint8Array(0);const yb=41943040;class vb{static withCacheSize(e){return new vb(e,vb.DEFAULT_COLLECTION_PERCENTILE,vb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}vb.DEFAULT_COLLECTION_PERCENTILE=10,vb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vb.DEFAULT=new vb(yb,vb.DEFAULT_COLLECTION_PERCENTILE,vb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vb.DISABLED=new vb(-1,0,0);class xb{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xb(0)}static cr(){return new xb(-1)}}const bb=1048576;class wb{constructor(){this.changes=new dx(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ry.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Nb{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Hx(n.mutation,e,Uy.empty(),Zg.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,wx()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wx();const r=yx();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=fx();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=yx();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,wx()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=px();const s=xx(),o=xx();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kx)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Hx(o.mutation,t,o.mutation.getFieldMask(),Zg.now())):s.set(t.key,Uy.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new kb(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=xx();let r=new My((e,t)=>e-t),i=wx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Uy.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||wx()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=vx();l.forEach(e=>{if(!i.has(e)){const r=Ux(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ry.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ex(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ry.resolve(yx());let o=Yg,a=i;return s.next(t=>ry.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ry.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,wx())).next(e=>({batchId:o,changes:gx(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zg(t)).next(e=>{let t=fx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=fx();return this.indexManager.getCollectionParents(e,i).next(o=>ry.forEach(o,o=>{const a=function(e,t){return new Yv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Nv.newInvalidDocument(r)))});let n=fx();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Hx(s.mutation,r,Uy.empty(),Zg.now()),lx(t,r)&&(n=n.insert(e,r))}),n})}}class _b{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ry.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:rb(e.createTime)}}(t)),ry.resolve()}getNamedQuery(e,t){return ry.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:pb(e.bundledQuery),readTime:rb(e.readTime)}}(t)),ry.resolve()}}class jb{constructor(){this.overlays=new My(zg.comparator),this.qr=new Map}getOverlay(e,t){return ry.resolve(this.overlays.get(t))}getOverlays(e,t){const n=yx();return ry.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ry.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ry.resolve()}getOverlaysForCollection(e,t,n){const r=yx(),i=t.length+1,s=new zg(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ry.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new My((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=yx(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=yx(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return ry.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xx(t,n));let i=this.qr.get(t);void 0===i&&(i=wx(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ab{constructor(){this.sessionToken=Hy.EMPTY_BYTE_STRING}getSessionToken(e){return ry.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ry.resolve()}}class Cb{constructor(){this.Qr=new Fy(Sb.$r),this.Ur=new Fy(Sb.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Sb(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Sb(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new zg(new Og([])),n=new Sb(t,e),r=new Sb(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new zg(new Og([])),n=new Sb(t,e),r=new Sb(t,e+1);let i=wx();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Sb(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sb{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return zg.comparator(e.key,t.key)||Eg(e.Yr,t.Yr)}static Kr(e,t){return Eg(e.Yr,t.Yr)||zg.comparator(e.key,t.key)}}class Eb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Fy(Sb.$r)}checkEmpty(e){return ry.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Jx(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Sb(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ry.resolve(s)}lookupMutationBatch(e,t){return ry.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return ry.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ry.resolve(0===this.mutationQueue.length?ay:this.tr-1)}getAllMutationBatches(e){return ry.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sb(t,0),r=new Sb(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),ry.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Fy(Eg);return t.forEach(e=>{const t=new Sb(e,0),r=new Sb(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ry.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;zg.isDocumentKey(i)||(i=i.child(""));const s=new Sb(new zg(i),0);let o=new Fy(Eg);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),ry.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){mg(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ry.forEach(t.mutations,r=>{const i=new Sb(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Sb(t,0),r=this.Zr.firstAfterOrEqual(n);return ry.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ry.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tb{constructor(e){this.ri=e,this.docs=new My(zg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ry.resolve(n?n.document.mutableCopy():Nv.newInvalidDocument(t))}getEntries(e,t){let n=px();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Nv.newInvalidDocument(e))}),ry.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=px();const s=t.path,o=new zg(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ty($g(o),n)<=0||(r.has(o.key)||lx(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ry.resolve(i)}getAllFromCollectionGroup(e,t,n,r){hg(9500)}ii(e,t){return ry.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ib(this)}getSize(e){return ry.resolve(this.size)}}class Ib extends wb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ry.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Pb{constructor(e){this.persistence=e,this.si=new dx(e=>Zv(e),Qv),this.lastRemoteSnapshotVersion=Qg.min(),this.highestTargetId=0,this.oi=0,this._i=new Cb,this.targetCount=0,this.ai=xb.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ry.resolve()}getLastRemoteSnapshotVersion(e){return ry.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ry.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ry.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ry.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xb(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ry.resolve()}updateTargetData(e,t){return this.Pr(t),ry.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ry.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),ry.waitFor(i).next(()=>r)}getTargetCount(e){return ry.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ry.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ry.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ry.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ry.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ry.resolve(n)}containsKey(e,t){return ry.resolve(this._i.containsKey(t))}}class Rb{constructor(e,t){this.ui={},this.overlays={},this.ci=new oy(0),this.li=!1,this.li=!0,this.hi=new Ab,this.referenceDelegate=e(this),this.Pi=new Pb(this),this.indexManager=new fb,this.remoteDocumentCache=function(e){return new Tb(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new hb(t),this.Ii=new _b(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Eb(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){lg("MemoryPersistence","Starting transaction:",e);const r=new Db(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ry.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Db extends ny{constructor(e){super(),this.currentSequenceNumber=e}}class Lb{constructor(e){this.persistence=e,this.Ri=new Cb,this.Vi=null}static mi(e){return new Lb(e)}get fi(){if(this.Vi)return this.Vi;throw hg(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ry.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ry.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ry.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ry.forEach(this.fi,n=>{const r=zg.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Qg.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ry.or([()=>ry.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=wx(),r=wx();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Mb(e,t.fromCache,n,r)}}class Ob{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Bb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Su()?8:iy(Au())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ob;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(ag()<=Gu.DEBUG&&lg("QueryEngine","SDK will not create cache indexes for query:",ax(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ry.resolve()):(ag()<=Gu.DEBUG&&lg("QueryEngine","Query:",ax(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(ag()<=Gu.DEBUG&&lg("QueryEngine","The SDK decides to create cache indexes for query:",ax(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nx(t))):ry.resolve())}ys(e,t){if($v(t))return ry.resolve(null);let n=nx(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ix(t,null,"F"),n=nx(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=wx(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,ix(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return $v(t)||r.isEqual(Qg.min())?ry.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?ry.resolve(null):(ag()<=Gu.DEBUG&&lg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ax(t)),this.vs(e,s,t,Xg(r,Yg)).next(e=>e))})}Ds(e,t){let n=new Fy(cx(e));return t.forEach((t,r)=>{lx(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return ag()<=Gu.DEBUG&&lg("QueryEngine","Using full collection scan to execute query:",ax(t)),this.ps.getDocumentsMatchingQuery(e,t,ey.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Fb="LocalStore";class zb{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new My(Eg),this.xs=new dx(e=>Zv(e),Qv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Ub(e,t,n,r){return new zb(e,t,n,r)}async function Vb(e,t){const n=fg(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=wx();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}class Hb{constructor(){this.activeTargetIds=Nx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qb{constructor(){this.Mo=new Hb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wb{Oo(e){}shutdown(){}}const Kb="ConnectivityMonitor";class Gb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lg(Kb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){lg(Kb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Zb=null;function Qb(){return null===Zb?Zb=268435456+Math.round(2147483648*Math.random()):Zb++,"0x"+Zb.toString(16)}const Yb="RestConnection",Jb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===tv?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Qb(),o=this.zo(e,t.toUriEncodedString());lg(Yb,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=wu(l);return this.Jo(e,o,a,n,c).then(t=>(lg(Yb,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw ug(Yb,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Jb[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class $b{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ew="WebChannelConnection";class tw extends Xb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Qb();return new Promise((i,o)=>{const a=new Kf;a.setWithCredentials(!0),a.listenOnce(Zf.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Qf.NO_ERROR:const n=a.getResponseJson();lg(ew,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Qf.TIMEOUT:lg(ew,"RPC '".concat(e,"' ").concat(s," timed out")),o(new yg(gg.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const r=a.getStatus();if(lg(ew,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(gg).indexOf(t)>=0?t:gg.UNKNOWN}(n.status);o(new yg(e,n.message))}else o(new yg(gg.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new yg(gg.UNAVAILABLE,"Connection failed."));break;default:hg(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{lg(ew,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);lg(ew,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Qb(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$f(),o=Xf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");lg(ew,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const p=new $b({Yo:t=>{h?lg(ew,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(lg(ew,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),lg(ew,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,Gf.EventType.OPEN,()=>{h||(lg(ew,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(u,Gf.EventType.CLOSE,()=>{h||(h=!0,lg(ew,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(u))}),m(u,Gf.EventType.ERROR,t=>{h||(h=!0,ug(ew,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new yg(gg.UNAVAILABLE,"The operation could not be completed")))}),m(u,Gf.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];mg(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){lg(ew,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=$x[e];if(void 0!==t)return tb(t)}(t),i=o.message;void 0===n&&(n=gg.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,p.a_(new yg(n,i)),u.close()}else lg(ew,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(o,Jf.STAT_EVENT,t=>{t.stat===Yf.PROXY?lg(ew,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Yf.NOPROXY&&lg(ew,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function nw(){return"undefined"!=typeof document?document:null}function rw(e){return new nb(e,!0)}class iw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&lg("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class sw{}class ow extends sw{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new yg(gg.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,ib(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yg(gg.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,ib(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===gg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yg(gg.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(cg(t),this.aa=!1):lg("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const lw="RemoteStore";class cw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{hw(this)&&(lg(lw,"Restarting streams for network reachability change."),await async function(e){const t=fg(e);t.Ea.add(4),await dw(t),t.Ra.set("Unknown"),t.Ea.delete(4),await uw(t)}(this))})}),this.Ra=new aw(n,r)}}async function uw(e){if(hw(e))for(const t of e.da)await t(!0)}async function dw(e){for(const t of e.da)await t(!1)}function hw(e){return 0===fg(e).Ea.size}async function pw(e,t){const n=fg(e);t?(n.Ea.delete(2),await uw(n)):t||(n.Ea.add(2),await dw(n),n.Ra.set("Unknown"))}class mw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new mw(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yg(gg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class fw{constructor(){this.queries=gw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=fg(e),r=n.queries;n.queries=gw(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new yg(gg.ABORTED,"Firestore shutting down"))}}function gw(){return new dx(e=>ox(e),sx)}function yw(e){e.Ca.forEach(e=>{e.next()})}var vw,xw;(xw=vw||(vw={})).Ma="default",xw.Cache="cache";const bw="SyncEngine";class ww{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new dx(e=>ox(e),sx),this.Iu=new Map,this.Eu=new Set,this.du=new My(zg.comparator),this.Au=new Map,this.Ru=new Cb,this.Vu={},this.mu=new Map,this.fu=xb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function kw(e,t,n){const r=fg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=fg(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&yw(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Nw(e,t,n){const r=fg(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Mb.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=fg(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ry.forEach(t,t=>ry.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ry.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!sy(e))throw e;lg(Fb,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function _w(e,t){const n=fg(e);if(!n.currentUser.isEqual(t)){lg(bw,"User change. New user:",t.toKey());const e=await Vb(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new yg(gg.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Nw(n,e.Ls)}}class jw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ub(this.persistence,new Bb,e.initialUser,this.serializer)}Cu(e){return new Rb(Lb.mi,this.serializer)}Du(e){return new qb}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jw.provider={build:()=>new jw};class Aw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>kw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=_w.bind(null,this.syncEngine),await pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fw}createDatastore(e){const t=rw(e.databaseInfo.databaseId),n=function(e){return new tw(e)}(e.databaseInfo);return function(e,t,n,r){return new ow(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new cw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>kw(this.syncEngine,e,0),Gb.v()?new Gb:new Wb)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ww(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=fg(e);lg(lw,"RemoteStore shutting down."),t.Ea.add(5),await dw(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Aw.provider={build:()=>new Aw};function Cw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Sw=new Map,Ew="firestore.googleapis.com",Tw=!0;class Iw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yg(gg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ew,this.ssl=Tw}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Tw;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=yb;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<bb)throw new yg(gg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new yg(gg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yg(gg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new yg(gg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new yg(gg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yg(gg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yg(gg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iw(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new bg;switch(e.type){case"firstParty":return new _g(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yg(gg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sw.get(e);t&&(lg("ComponentProvider","Removing Datastore"),Sw.delete(e),t.terminate())}(this),Promise.resolve()}}function Rw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Hg(e,Pw);const i=wu(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(ku("https://".concat(a)),ju("Firestore",!0)),s.host!==Ew&&s.host!==a&&ug("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!Du(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ig.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[pu(JSON.stringify({alg:"none",type:"JWT"})),pu(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new yg(gg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ig(i)}e._authCredentials=new wg(new xg(t,n))}}class Dw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dw(this.firestore,e,this._query)}}class Lw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lw(this.firestore,e,this._key)}toJSON(){return{type:Lw._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Wg(t,Lw._jsonSchema))return new Lw(e,n||null,new zg(Og.fromString(t.referencePath)))}}Lw._jsonSchemaVersion="firestore/documentReference/1.0",Lw._jsonSchema={type:qg("string",Lw._jsonSchemaVersion),referencePath:qg("string")};class Mw extends Dw{constructor(e,t,n){super(e,t,Xv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lw(this.firestore,null,new zg(e))}withConverter(e){return new Mw(this.firestore,e,this._path)}}const Ow="AsyncQueue";class Bw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iw(this,"async_queue_retry"),this._c=()=>{const e=nw();e&&lg(Ow,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=nw();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=nw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new vg;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(el){if(!sy(el))throw el;lg(Ow,"Operation failed with retryable error: "+el)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,cg("INTERNAL UNHANDLED ERROR: ",Fw(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=mw.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&hg(47125,{Pc:Fw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Fw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class zw extends Pw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Bw,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}class Uw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uw(Hy.fromBase64String(e))}catch(e){throw new yg(gg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Uw(Hy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Uw._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wg(e,Uw._jsonSchema))return Uw.fromBase64String(e.bytes)}}Uw._jsonSchemaVersion="firestore/bytes/1.0",Uw._jsonSchema={type:qg("string",Uw._jsonSchemaVersion),bytes:qg("string")};class Vw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new yg(gg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yg(gg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yg(gg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Eg(this._lat,e._lat)||Eg(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hw._jsonSchemaVersion}}static fromJSON(e){if(Wg(e,Hw._jsonSchema))return new Hw(e.latitude,e.longitude)}}Hw._jsonSchemaVersion="firestore/geoPoint/1.0",Hw._jsonSchema={type:qg("string",Hw._jsonSchemaVersion),latitude:qg("number"),longitude:qg("number")};class qw{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qw._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wg(e,qw._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new qw(e.vectorValues);throw new yg(gg.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qw._jsonSchemaVersion="firestore/vectorValue/1.0",qw._jsonSchema={type:qg("string",qw._jsonSchemaVersion),vectorValues:qg("object")};const Ww=new RegExp("[~\\*/\\[\\]]");function Kw(e,t,n){if(t.search(Ww)>=0)throw Gw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Vw(...t.split("."))._internalPath}catch(r){throw Gw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Gw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new yg(gg.INVALID_ARGUMENT,a+e+l)}class Zw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Lw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qw extends Zw{data(){return super.data()}}function Yw(e,t){return"string"==typeof t?Kw(e,t):t instanceof Vw?t._internalPath:t._delegate._internalPath}class Jw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xw extends Zw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $w(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new yg(gg.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xw._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Xw._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xw._jsonSchema={type:qg("string",Xw._jsonSchemaVersion),bundleSource:qg("string","DocumentSnapshot"),bundleName:qg("string"),bundle:qg("string")};class $w extends Xw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ek{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $w(this._firestore,this._userDataWriter,n.key,n,new Jw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yg(gg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new $w(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new $w(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:tk(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new yg(gg.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ek._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hg(61501,{type:e})}}ek._jsonSchemaVersion="firestore/querySnapshot/1.0",ek._jsonSchema={type:qg("string",ek._jsonSchemaVersion),bundleSource:qg("string","QuerySnapshot"),bundleName:qg("string"),bundle:qg("string")};new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sg=e}(ih),$d(new Vu("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new zw(new kg(e.getProvider("auth-internal")),new Ag(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yg(gg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nv(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ah(ng,rg,e),ah(ng,rg,"esm2020")}();const nk=sh({apiKey:"AIzaSyB_32kh2o6DdBVVvLFFBUdMnTbPWWYp4z8",authDomain:"rentongovehicle-7e6c0.firebaseapp.com",projectId:"rentongovehicle-7e6c0",storageBucket:"rentongovehicle-7e6c0.firebasestorage.app",messagingSenderId:"406882720905",appId:"1:406882720905:web:e7a2a367658a2cf1b03a58",measurementId:"G-BC3ZM7VJ9C"}),rk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oh();const t=eh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=eh(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Du(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ah(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Mf,persistence:[Wm,jm,Tm]}),r=xu("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zf)return;const i=null===n||void 0===n?void 0:n.token;Uf!==i&&(Uf=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))})(e.toString());!function(e,t,n){Uu(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Uu(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const i=yu("auth");return i&&Zp(n,"http://".concat(i)),n}(nk),ik=new dm,sk=(function(e,t){const n="object"==typeof e?e:oh(),r="string"==typeof e?e:t||tv,i=eh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=yu(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Rw(i,...e)}}(nk),"@firebase/installations"),ok="0.6.19",ak=1e4,lk="w:".concat(ok),ck="FIS_v2",uk=36e5,dk=new Pu("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function hk(e){return e instanceof Iu&&e.code.includes("request-failed")}function pk(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function mk(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function fk(e,t){const n=(await t.json()).error;return dk.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function gk(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yk(e,t){let{refreshToken:n}=t;const r=gk(e);return r.append("Authorization",function(e){return"".concat(ck," ").concat(e)}(n)),r}async function vk(e){const t=await e();return t.status>=500&&t.status<600?e():t}function xk(e){return new Promise(t=>{setTimeout(t,e)})}const bk=/^[cdef][\w-]{21}$/;function wk(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return bk.test(t)?t:""}catch(e){return""}}function kk(e){return"".concat(e.appName,"!").concat(e.appId)}const Nk=new Map;function _k(e,t){const n=kk(e);jk(n,t),function(e,t){const n=Ck();n&&n.postMessage({key:e,fid:t});Sk()}(n,t)}function jk(e,t){const n=Nk.get(e);if(n)for(const r of n)r(t)}let Ak=null;function Ck(){return!Ak&&"BroadcastChannel"in self&&(Ak=new BroadcastChannel("[Firebase] FID Change"),Ak.onmessage=e=>{jk(e.data.key,e.data.fid)}),Ak}function Sk(){0===Nk.size&&Ak&&(Ak.close(),Ak=null)}const Ek="firebase-installations-store";let Tk=null;function Ik(){return Tk||(Tk=dd("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ek)}})),Tk}async function Pk(e,t){const n=kk(e),r=(await Ik()).transaction(Ek,"readwrite"),i=r.objectStore(Ek),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||_k(e,t.fid),t}async function Rk(e){const t=kk(e),n=(await Ik()).transaction(Ek,"readwrite");await n.objectStore(Ek).delete(t),await n.done}async function Dk(e,t){const n=kk(e),r=(await Ik()).transaction(Ek,"readwrite"),i=r.objectStore(Ek),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||_k(e,o.fid),o}async function Lk(e){let t;const n=await Dk(e.appConfig,n=>{const r=function(e){const t=e||{fid:wk(),registrationStatus:0};return Bk(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(dk.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=pk(n),o=gk(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:ck,appId:n.appId,sdkVersion:lk},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await vk(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:mk(e.authToken)}}throw await fk("Create Installation",u)}(e,t);return Pk(e.appConfig,n)}catch(el){throw hk(el)&&409===el.customData.serverCode?await Rk(e.appConfig):await Pk(e.appConfig,{fid:t.fid,registrationStatus:0}),el}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Mk(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Mk(e){let t=await Ok(e.appConfig);for(;1===t.registrationStatus;)await xk(100),t=await Ok(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Lk(e);return n||t}return t}function Ok(e){return Dk(e,e=>{if(!e)throw dk.create("installation-not-found");return Bk(e)})}function Bk(e){return 1===(t=e).registrationStatus&&t.registrationTime+ak<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Fk(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(pk(e),"/").concat(n,"/authTokens:generate")}(n,t),s=yk(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:lk,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await vk(()=>fetch(i,l));if(c.ok){return mk(await c.json())}throw await fk("Generate Auth Token",c)}async function zk(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Dk(e.appConfig,r=>{if(!Vk(r))throw dk.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+uk}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Uk(e.appConfig);for(;1===n.authToken.requestStatus;)await xk(100),n=await Uk(e.appConfig);const r=n.authToken;return 0===r.requestStatus?zk(e,t):r}(e,n),r;{if(!navigator.onLine)throw dk.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return c(c({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await Fk(e,t),r=c(c({},t),{},{authToken:n});return await Pk(e.appConfig,r),n}catch(el){if(!hk(el)||401!==el.customData.serverCode&&404!==el.customData.serverCode){const n=c(c({},t),{},{authToken:{requestStatus:0}});await Pk(e.appConfig,n)}else await Rk(e.appConfig);throw el}}(e,n),n}});return t?await t:r.authToken}function Uk(e){return Dk(e,e=>{if(!Vk(e))throw dk.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ak<Date.now()?c(c({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Vk(e){return void 0!==e&&2===e.registrationStatus}async function Hk(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Lk(e);t&&await t}(n);return(await zk(n,t)).token}function qk(e){return dk.create("missing-app-config-values",{valueName:e})}const Wk="installations",Kk=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw qk("App Configuration");if(!e.name)throw qk("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw qk(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:eh(t,"heartbeat"),_delete:()=>Promise.resolve()}},Gk=e=>{const t=eh(e.getProvider("app").getImmediate(),Wk).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Lk(t);return r?r.catch(console.error):zk(t).catch(console.error),n.fid}(t),getToken:e=>Hk(t,e)}};$d(new Vu(Wk,Kk,"PUBLIC")),$d(new Vu("installations-internal",Gk,"PRIVATE")),ah(sk,ok),ah(sk,ok,"esm2020");const Zk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qk="google.c.a.c_id",Yk=1e4;var Jk,Xk;function $k(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eN(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Jk||(Jk={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Xk||(Xk={}));const tN="fcm_token_details_db",nN="fcm_token_object_Store";const rN="firebase-messaging-store";let iN=null;function sN(){return iN||(iN=dd("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(rN)}})),iN}async function oN(e){const t=lN(e),n=await sN(),r=await n.transaction(rN).objectStore(rN).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(tN))return null}let t=null;const n=await dd(tN,5,{upgrade:async(n,r,i,s)=>{if(r<2)return;if(!n.objectStoreNames.contains(nN))return;const o=s.objectStore(nN),a=await o.index("fcmSenderId").get(e);if(await o.clear(),a)if(2===r){var l;const e=a;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(l=e.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:$k(e.vapidKey)}}}else if(3===r){const e=a;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:$k(e.auth),p256dh:$k(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:$k(e.vapidKey)}}}else if(4===r){const e=a;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:$k(e.auth),p256dh:$k(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:$k(e.vapidKey)}}}}});return n.close(),await hd(tN),await hd("fcm_vapid_details_db"),await hd("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await aN(e,t),t}}async function aN(e,t){const n=lN(e),r=(await sN()).transaction(rN,"readwrite");return await r.objectStore(rN).put(t,n),await r.done,t}function lN(e){let{appConfig:t}=e;return t.appId}const cN=new Pu("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function uN(e,t){const n={method:"DELETE",headers:await hN(e)};try{const r=await fetch("".concat(dN(e.appConfig),"/").concat(t),n),i=await r.json();if(i.error){const e=i.error.message;throw cN.create("token-unsubscribe-failed",{errorInfo:e})}}catch(GN){throw cN.create("token-unsubscribe-failed",{errorInfo:null===GN||void 0===GN?void 0:GN.toString()})}}function dN(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function hN(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function pN(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==Zk&&(s.web.applicationPubKey=i),s}async function mN(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eN(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:$k(t.getKey("auth")),p256dh:$k(t.getKey("p256dh"))},r=await oN(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await hN(e),r=pN(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch("".concat(dN(e.appConfig),"/").concat(t.token),i);s=await n.json()}catch(GN){throw cN.create("token-update-failed",{errorInfo:null===GN||void 0===GN?void 0:GN.toString()})}if(s.error){const e=s.error.message;throw cN.create("token-update-failed",{errorInfo:e})}if(!s.token)throw cN.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=c(c({},t),{},{token:n,createTime:Date.now()});return await aN(e.firebaseDependencies,r),n}catch(el){throw el}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await uN(e.firebaseDependencies,r.token)}catch(el){console.warn(el)}return fN(e.firebaseDependencies,n)}return fN(e.firebaseDependencies,n)}async function fN(e,t){const n=await async function(e,t){const n=await hN(e),r=pN(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(dN(e.appConfig),i);s=await t.json()}catch(GN){throw cN.create("token-subscribe-failed",{errorInfo:null===GN||void 0===GN?void 0:GN.toString()})}if(s.error){const e=s.error.message;throw cN.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw cN.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await aN(e,r),r.token}function gN(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,i,s,o;if(!t.fcmOptions&&(null===(n=t.notification)||void 0===n||!n.click_action))return;e.fcmOptions={};const a=null!==(r=null===(i=t.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=t.notification)||void 0===s?void 0:s.click_action;a&&(e.fcmOptions.link=a);const l=null===(o=t.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function yN(e){return cN.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vN{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw yN("App Configuration Object");if(!e.name)throw yN("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw yN(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function xN(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{}),await async function(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Service worker not registered after ".concat(Yk," ms"))),Yk),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=e=>{var n;"activated"===(null===(n=e.target)||void 0===n?void 0:n.state)&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}(e.swRegistration)}catch(el){throw cN.create("failed-service-worker-registration",{browserErrorMessage:null===el||void 0===el?void 0:el.message})}}async function bN(e,t){if(!navigator)throw cN.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw cN.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Zk)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await xN(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw cN.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),mN(e)}async function wN(e,t,n){const r=function(e){switch(e){case Xk.NOTIFICATION_CLICKED:return"notification_open";case Xk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Qk],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function kN(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Xk.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(gN(n)):e.onMessageHandler.next(gN(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&Qk in e})(r)&&"1"===r["google.c.a.e"]&&await wN(e,n.messageType,r)}const NN="@firebase/messaging",_N="0.12.23",jN=e=>{const t=new vN(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>kN(t,e)),t},AN=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>bN(t,e)}};async function CN(){try{await Tu()}catch(el){return!1}return"undefined"!==typeof window&&Eu()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}async function SN(){try{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oh();return CN().then(e=>{if(!e)throw cN.create("unsupported-browser")},e=>{throw cN.create("indexed-db-unsupported")}),eh(Uu(e),"messaging").getImmediate()}(nk),t="BOYFVt6rhMqZqBZJjnWaF_xnWGpCvJqq-d6wipy9XlOmv3h1H_SzSN8i33sL2BS9ciOEFbYerQc3HvRuQF-3LVo",n=await async function(e,t){return bN(e=Uu(e),t)}(e,{vapidKey:t});return n||(console.warn("No registration token available. Request permission to generate one."),null)}catch(GN){return console.error("An error occurred while retrieving FCM token:",GN),null}}$d(new Vu("messaging",jN,"PUBLIC")),$d(new Vu("messaging-internal",AN,"PRIVATE")),ah(NN,_N),ah(NN,_N,"esm2020");const EN=n.p+"static/media/login.7d8c49a6bdd7e675387e.png",TN=()=>{const[e,t]=(0,r.useState)(null),n=ye();return(0,mr.jsx)("div",{className:"flex items-center justify-center bg-gray-100 min-h-[calc(100vh-80px)] py-8",children:(0,mr.jsxs)("div",{className:"w-full max-w-4xl flex bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,mr.jsxs)("div",{className:"hidden md:flex w-1/2 bg-gradient-to-b from-blue-600 to-blue-400 text-white flex-col justify-center items-center p-10",children:[(0,mr.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Welcome Back!"}),(0,mr.jsx)("p",{className:"text-lg text-center",children:"Manage your vehicle listings, rentals, and bookings anytime."}),(0,mr.jsx)("img",{src:EN,alt:"Login Illustration",className:"mt-10 w-72"})]}),(0,mr.jsxs)("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center p-8",children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Sign in to Continue"}),e?(0,mr.jsx)("div",{className:"bg-gray-50 shadow-lg rounded-lg p-6 text-center w-full max-w-sm"}):(0,mr.jsxs)("button",{className:"flex items-center justify-center gap-3 w-full max-w-sm bg-blue-600 border border-gray-300 rounded-lg px-4 py-3 text-gray-700 shadow hover:shadow-md transition",onClick:async()=>{try{const e=await async function(e,t,n){if(th(e.app))return Promise.reject(Ch(e,"operation-not-supported-in-this-environment"));const r=Mp(e);Th(e,t,lm);const i=Jm(r,n);return new sf(r,"signInViaPopup",t,i).executeNotNull()}(rk,ik),r=e.user,i=await SN(),s={name:r.displayName||"",email:r.email||"",fcmToken:i,googleId:r.uid};t(s),console.log("\u2705 Firebase Google Auth Success:",s);const o={googleId:r.uid,name:s.name,email:s.email,fcmToken:s.fcmToken};console.log("Payload sent to backend:",o);const a=await fetch("http://3.110.122.127:3000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l=await a.json();if(console.log("\ud83d\udce5 Backend Response:",l),!a.ok)throw new Error("Backend error: ".concat(l.message||JSON.stringify(l)));const c=l.user._id;c?console.log("\ud83d\udd0d Extracted userId from backend:",c):console.error("\u274c ERROR: Backend did not return userId (_id). Check backend response.");const u=c||r.uid,d={userId:u,googleId:r.uid,name:s.name,email:s.email,fcmToken:s.fcmToken};localStorage.setItem("userId",u),localStorage.setItem("user",JSON.stringify(d)),localStorage.setItem("userProfile",JSON.stringify(d)),localStorage.setItem("googleId",r.uid),localStorage.setItem("fcmToken",s.fcmToken||""),localStorage.setItem("userName",s.name),localStorage.setItem("userEmail",s.email),t(d),console.log("\ud83d\udcbe User data stored successfully:",{userId:u,googleId:r.uid,name:s.name,email:s.email}),console.log("\ud83c\udf89 Registration successful! Navigating to main page..."),n("/change-location")}catch(e){console.error("\u274c Google Login Error:",e.message),alert("Google login failed! Check console for details.")}},children:[(0,mr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAQAElEQVR4AeybC5SV1XXHz3fvnQc4AwzOKI9R0aIEXElRBCVWwCQNsqIJyqOpFmNXQFostIj4SGMB02rUQkQMFiJraZrQxEFlVVkRH1GkUaxV03Y5VsSKAiIPh5EZYJj7+Pr/7fm+yx24d5iZeweBVdbZ9+zvPPY55//ts/c+5xsi7v//FRSB4w1QT6vLRswzW3lYpm4OnvwLJSZ6TCfg+z4LzyTmEBLl8OQQPATvjRkzJqrJRubPn2/PYa4yL+QD+Sr6YhKT7fKRMxYJEOF48CExj5Aoiw4bNszAU+OIeOqiO3fuNP7pp5+mLko+adIkaw+g4iOe/omnvce4IUnOMUkM3NUDsWDGMC3Sej0WLm1jbKMhQ4ZYPnDgQICKqXFsx44dlsO/+eabRdXV1bHa2tqo+JiIdtHPP/88UlNTQzv6R8WTR15++WVyhoosWLCA3AGsZHV5YuCuHsRnRYAYLBQQwkVHQ6A0idimTZtip59+OmDFtm7dClBFKod4Lurduze8UVVVFe2N79evX0xy6GekcSxXX8wDa4QM1ADY8CWrSWGTDVRYkc62mmSikchncYDoaaGRAQMGABRl5AAVC4Hq2bNnsTSzWH2LysvLyY1CPh6P27PqS3bt2gVf1KtXr9gnn3xStG/fvuLKysoivRDkIh9ifCO9VDMHygEzJIkqbGKwQklMTzKYdKZ2MA4LjW3evDnKwjUoz8U9evQoqqurKy4rKytJJBLFp5xyCkCVJJPJErWBihsaGsKcupAosz6027NnT9Hu3buL9EKKKioq0Fzkx9Be1UdlTmKBmbF5ys5arrowF5t/YqH5S2ktIZxgJLCNaIotTs1iaCELF18CeAIRYIrvvvvuc956661rBfg/yDY+KnpdGrlBW3SbaKuIfJvKXm9qanp+//79T0hL//6VV1656qmnnhrarVu3ku7duyOzROCGoBepbYwXKHOCmWEezCfzZWsqzsyBMXn+FAJQA1ALZirIA0ibNE5EhfAAidYUCyjykhkzZlQC4LZt2xYnk8l3Z86c+dp55523SIv/vrT2m7FYrBpS/1aJspKSkiECcGRlZeX3L7jggkfGjx+/du/evRu2bNnyIDKnTp1ayctSx2JpP5prZqVKdref7K201eYpjWXugBtsqvxjWQRr3I4nAchksJd0ZkIAF9FkowGQaAPgmbZIE4ulQcXSqFHSrB8tWbJkAwDKBk6KRCI9EJIPAbRs8URkLlu2bINe1IOrVq26QDJtB0izizVukextVNoaw4nJpkcBle0PqW3eqdOACkEbXDkBN3IAOKKtCLAGppxJGtA1a9YA5BOXXXZZDZpVCBBtAll+kC3TMmnChAnPaj6rBNwo2eGiUGvVxUyB8ohMDHONBoCG62Atqu54QkBHe9E+1Ez6Rwi45b2j2k5RaQAThIpSqVSRtGSoPPATo0ePflwaegmdjyVhGhhbpubRe+6552zNAQeYNgMCNKK5sw4UgcgkBJMc6tB0EdShDmpsg0yePJm+8BG2uCYGmGikETZSW2suWqJFHHMgNc9WCbuMnd64ceOtjY2NFk3IvhYTEWjusRBUaarZ1KCzH+TtzgClvY0BL02yRyGPDN4uWgkVLV269JxFixat6tOnz83tFX6s2vXv3/9vZE83oK0aM5ZIJFAAwjly8wEZoEYCX6Gm7UuA0b6WQSsNBpfe5npgIgYk/Hvvvfen06dPX4sn1vNxmXBgN91009qPPvpoOrZVk+SAYEqhXQUmaCk5LkLV5v1RIPg2iU5tNqCStyRyAhMbQx+2eUS2ESBtImqHB70VL4tT0PNxnZjjmWeeOV82f64mGquvrw8Vg+Mwa4oQAYTrVpt2JcA5akO9JsclwzvvvMNbShtxbXsALZKNBMy5ffv2nX1UYcdZA+ase4NbWUNZWRnriR08eNBAVXTAcTWMANplT48KqN4QIKKZHrc5ijO9QDNtcE0kJkN/QoIZvlvsqrb6LXJWpqVSlKhANi3V1SHrpylYwUM8ZyUaZa0ICqWcHtdtCIEiGhhDzmDEddz4zNWETjjNDNaXztBUbf9bVMBBBGCjumjhuhCMWDvEEVVNcica564NaqSZCANEKKKzsmmnwqXpTCRodsJnrEVr+hMdAGx9OhJHiK21MHACA3I95k45G7DVcUKTdCOO2itO83QWjuioCKhRhUYDdHw77sKi3EttX82gQYPmK6QaoNYxhVdcDUa0TtYMoI4tCzaqz5pyAkprAeqknRGdMiIHDhyIYlvkDe3tTZs2rQZPSbuTiVjTjTfeuEIXLL217pgUKKYTH2Da5xfWKlDJslIuQNXHMyHq5cluRlB/nTZ4U7y1W4jlVHdSJmLou+66a5oWRzjFCTAmLY3o04tjx6ocJ50Vu6yF6hAmD6+uh4juMKN6UzG2OrZGZR1JJ1xb1qh7iK9o4lw9mtcXFnx5iACqdm/WMCoXoGinkbQTrTRSWBG77rrrFmiQLk1+Q4Pbv+YpV7/oHvfZrX/ldv3l99LE896f/dQdfOvfHe26ciLjxo2bL/lRbX3WT4RD7sn0GTaqI1d2KB0BKAaXN6AmNA4pUlZWFlWge6m2/TdV1yXpwLoXDbht37jY1d31t67x1//sDqz7rcB7I008733kp2p3g2tp9wOX3L6tS+bTvXv3S1izhANkFKcs/gjMVJZOR1R6nocj8tSCupCi0s7o8OHDu8Sro23bx/+xtHGmAaex2532r1nt6Ft3V9cAO2LEiNm6AozpbjcizTQ8BLJteyaJApKHRIOQJ2gNgXSyFyFv2qnvNl/mjaUbF4Bhy9b/5MembflqGcDumHKN2/fM6gLM7JAIgTly7dq1I3WJEpXHBy/Itr3sKBiFuFknKo3hx/Na6ok7ZTupg0w7L7/88qm0KRQB4E7ZxsZf/bxQIl1KtnfPj34gM/FiwWQiaPDgwVcoj9bX1/PF1hPvCWCPuw3P84hN0w4KwFRvybNf5wgPvIAnjygm6yWVHxuU5Z21gHmDi7//P3nLOlzAKVeOd91Gf/3w4rye9a1qEhhIiIWPCqE8hVDcbaiodcoElBoADHMMcUTHsOicOXPGEfBSUQjaPXdmux1JpLyHKzr3S67kwuGWtzU+YFbceXdbTTpVx9rnzp17hbDg2B3RxQm4gVUmmWwqjAl+MhvAc+fpKSYr2CcMQp6jaSYg9ph2k6t6+FHX74UN7vRfPCn+McurX68V/6jr/q3xwZRbsq4Cs0W6c6eddtpI3bKBl+GicuNlR8UeShQeego4XQhQ7mmbk0f1ZkYGVXllbHVCnraElGq79nnqeddj6k3SyhFZm5ZcOML1/ru7DdhY3/6uq8FkEgoXx3br1g08IE/b3g0ZMoQTEwCnHROVtIeoMNI1lquoqDDDK+9+fqGOmftfvJ9xchJaWXnfEhcpL8/ZJrMCYCulxV2xzTPHgWfb33vvvWeI9/D22vZgpUdnX4A9zzPHZIAGsZQVEC7pHtDTFR0dImecccaZ9MqX/KbNrrjfYld25afOK00dIa7su1NMK4+oOEoBGnqUJgWrHjt2LDvVMAMjXfXxNwl4ebCycawyQNcLwiW3Y8cOymnk6bsLQqxxPj/JLYute7dL97iKWf/rohVxe+YHUHrNvgM2k447Xt7+fE3KU/jkCSPwcQ0NDWx7FbckgGvh9KtQQL/OGspmkHuyn0MozJdSe15OiwDMitl1rvTilqLyqTNamOP8t7S01La8pgk2yhzhkz9//nzj9eOFgNIAUpkB6u3du9eeo9Fo3n935BL1zm/8PbLT5BXVufLx77ryid3kVK5Ol+di9jUl3K76pk5TLrkdKRegQ3RaBBevsrKSPLO72dL0h3yhbDYU70UreXinzq4QgKYaWoOJ/JC6X8kNWfiUO//5b953sxa92mmq/bA+t/BO1Og6MwTUcvkhw4/PpMYLUCo8ea9QvLd///5IITw8DikUengeKRt6eFGXPO+qP5C3XLAQWOBkUZAE4neUObkhjx/fNFRPFIbkwcjY+oq7YPMmv+mjnDK88j/MWVfIiv0yGYWQp09BaCJRkOV65qswcSjiPTTUBdpJQSYZsJkFXcLHC7sVc80RG5yrriPlUjLzO7KhAOordCIPRfhU4qXShTolWaVsKP97I11uhZ388UrPytnTT3yes66QFaeUxgoiThppmOhzkJ2WJNQ7//zzwUqscwDqGRf86JRkHYJHl0gktoZ8Z3MvVpGzq9+Gw8rZqRMVVRWlnejVukuABfhATv6GHIVMNwTQcP9bZVgjG+rklCgLizqdRypG5+y78v323V2OHtrH/cXVg9uki75UlXOc7iX8MUjO6nZV6MvvXjX0tXtdXV2dP2DAAD06w0jOCt4DUCvgKSA/tA8K6v2mpqZ3gvLOZ7Feziu1wdMyGlIxd/uur7gHdp3m/uPT/0yX52KGnF3hRl/Qt03a3xTP1d2d1bcsZ117KwCUUFLKBmb+5s2b7eip/jwrc2ZDYYzGjBljFYqx/J49e/q6rgLQvLc8wiN9byAz+tT1cd/79GK37kCLRs3/t/tcQ3Oj1XX2h6C/dnN2Bzd4QC9XCBuqHfuOyDBintJQX9+XYC1kgkFDeYB3QSUdfH06tVyqXWuVef5Eqr5jEn699wx3/dZBbnui1J75+aRxh1v2+/w+hfzTkzZNxB1BwwdXHVHWmYItW7a8FvQzbKShvr4Qa7fz2FJjgKqE0IkSanzdpDhdBHAl5OsD1atU5EsE8DXRKe6B+vMc2/1weStrn+w0qE+89KHLpZ2Mc1GBAN22bdsWyUuKDBvlfk1NjcJ4Dz9kzt0AVQmeCrTVxnHblJJmOhlf/7bbbtuiEAFjbHX5/Az/8rw2u6OlN/92nvuk8dM224WVmIkf16x3qwRoWHZ4PmpoX1fV69BuOLy+vc94+MmTJ+NPfCkbihd2Bdz0LjdApaGGrtAOG5pjkvFNKe7Sx8SGtWHvfPJBvf/ATR96fZsiXv74d+7KVX/m5smubqz7IGvbN+XEAP/KVde5VQ33uj0938jajsKJXzubLG9qbGx8DSx0C4ey4eFTEgopO5QMUDRUoIalNPJ1KUKekqdP6e4vtB1hm07nADqsz9GPm09ves5991+nu9Erv2P5tGfnuG8JQJ7hAbSheZ9LRZrczlOfd59VrD9iThMuP7sg2ongnTt3gkFKt3CYxBT2k3KdMslQRMgCewpQWQqM9K0EQI2Xp08uXLjwN4Xa9gy26GsLXN+y02GPSg0CDU1FK7fLefGcrdNuAfpR/xUuHmvx9ONGVruJAjRb246WsfbFixc/q35mP6VgYKPHlhgUJiTTUB6koWx7yOm86hcXF5uGqi61fPnyz2VTa8QXJJUXl7mfXbHQnScTUBCBgZCmkh1uS79fuq8O7+auH3deUJp/JtO3dunSpbwpgASXdC4NhU8PkgZU255CKjkJELQ6nevtjagi+e677z6rvGCpX1kf96tv2Jt2wAAAB6FJREFUL3PXDrmmYDIRNOkrX3czryrIVxvEGb3wwgsrxKQUmwNmSGClYkumiHBpQPUgJfVx/wSrvrZ9Sl/6cE5JefvUqFGjXlVQu0HtCppuGTHDLeyACcg1eD+ZkOXSeuTlatOZctY8ceLE/xYGyaKiooRkAChghqSiQ1s/E1Czo4Gm2rbXhSq3KL6ARVOTb7zxxiJ6F5ouP/NSt2biL938P5rrLmqHw8ocn/a8kGfUHz6zrhB8sGaUK8kJUjJTY8aMAVSxlgDWGH5aAUqBiAa+PtildG5N7dq1KyWPj5YmJeh3vDG16ZL07YFjHVr2zMRfmNZiDgAboEK6Sm0oB/x116629rTpignJoz/HmqWdCZ0ckxoDIP2qqirDSFtaRa1TNkCxB9ahtrYWAcRdSRlmBCaee+65tqPz1vI79YR9BSS2L9oHyCEtkBZTDvg4t04N0M5Ojz32GGtNBDvUsFBXTkfKnO1emEzKBihg2lGUc6oah4KwH8mrr776v7Zv3/4TlZ8sKes6WOPtt9/OtxvTTjnoEAfwgbL2ywYoDf158+aFbyIURG6gKlRY3tzczDGMticdccwUgAtl3rgPZGcmdfHO+gEyzLOuOxeg5qDUg/N9KCQp24HwxMqVK+tWrFgxlYBXbU6qxJoefvjhSVpUQmFSUnfDAMi68SHceRAJqdqBC3kryglo0Aot9WWY/YEDB/o4KJUndK5Nzpgx48ONGzd2+f8I0XjHNOmzxqI77rjjQw1qW10HnCQhpJ7NGWl3ZrWdqrd0NEDNluqe1N+0aVNSoCZ1tccbi8vzJQcPHvwv2BqTdBL8sJazzjprOcdtLcfMm7Z6MnDOKBdrV1Xu1CaghAW8EXVHvQGVixLUnxso7EtcIN/PRNTmhE6sQXbzH7UIgISSupG3taqMrQ4GYrNvdSqgNgFVkI+QTOINMYgN2KtXrwSG+0QHNQPMuNaEoiQEZkI3SilFOqwZQC0HtLaoTUDDjmiqeAMWeyoe4cn6+nqANVB5u0xMdSdUYs7MXZOOywkltKaknlOAqbWm+Oau9bN2NTl6aheggabi3TjnAyaEpuL5DVQN1Yymfvzxx/PxlHo+rhNzlFO9+dxzz71PE21GM4OzegK7qbKUfEeK8DFcv8qOmtoFaCAl8y35vD2VJ3UBHQIa1xG1WUZ92YMPPngFsZzqj8ukGLqWOV544YUr5YBs/tLMhM7q8KYs8h3khI8dWkNHAEU42g/x9gxUtoZGTBCj6njKhOJ33nnnB/pUMJLtpLrjKjGnOXPmTJg9e/YHAZhmMzVJ23FSFHI72KgMJYLEti91CFBEov4iWANVTIo4TfYnnFhccSraepDttGTJkpF6Lsg3KY3V6STnuWH16tVjZR/vf+ihhz6ToLiC9mblKAEEkEm2uTQmFayxQ2BK1qFPIDx0lBhYXpC/QEsqTmWLMDEmSvAflwbEZ82a9WF5efmfr1+/fhKL6ugY+bZnzHXr1k2WaZowZcoU/vIXEG2O2uKAyJzJmb8BGIDZ1tA56zqsoYEkBubE4B5//PFwIuRQsrS0NKEDABqL52QBzbqgXs+i0BJdhdXgFAJZBc+QLbBW8BI15jXaxuv0Upu1U5iLzUv15IDJnENiXfDMCZ68Q9RZQMNBDFRpKoMzEbt81fEtqQ9ZTDYu8Jg4xGKa0ZL+/fvPmj59+iV4WdXXFMKBAaK+e61CJrJl03+ol/iKJmpjy74zfqK6uppnNBKyOasN84fEWsrkraC9P/kCyjgGKozIAJVGhBNNESCrHKfFQrCvzUQDjzzyyO5BgwatVLjy1wpXLkZz33777anSnBVs04MHD9ZmA5oyiMtf2gLgAw888FXJHHLqqafOQiay5RQBMN67d2/LmQPEyyYXpecoPgQwzFXUuVQIQBmZiZiiKtwgVuXtczuT3Lx5Mzw3NwBqixMYIc/zQQlo1j3r2wpjnkGzRNfIbHxDju5i2bP++nJQTa7t21/gXyIaobob9LJ+qD4r5bE3aUsfFIgmC3nhGNJaxrI5DBs2jDwXkKxBXfNLhQLUZqFFZ07KwioBbIuQ0+LWBh5TAMVlZwE01CJ4I2loswAyTZbg5gMHDhhQ0kLKjaecZzk+68OW1s0Q4MXlyePV1dWMATGm0TnnnJPSW4dnnpkkcYVJBQU0mFI4UccpQ4DynFKe4tZG5oAF2UJlZ41HiwBB/ZulnSFAcUCiTOENIB7kWQRvbUItVBsDUiYAuZx0EmxtxlIUktTYjGO3RYe9dHUtbOoKQMMZYlsBEwJQy4nz1IBtl9CCDQA9cyPOohPa1mGZgaS6uICiDqIsrOcCw5515KUuXa4+PFtMSRQiQBmP8VVlKZO3gkL9dCWgh8+RRWjH+eQsMAW4Wiy2lmcAweaSJ2TvLJeQzNyACuriw4cPj+ulEAPTJrwZok04RvhSJcau3SiH7zI6loCyiHCB4cK4FgudGDzAGukzNsCg2eQARm6ELZSwFH8t+NJLL1FmfdBGldsljnLGgMQeu3SsAc1cGYvNJMDjGXCSpsq+n8IOq1NmOUDSxiiwib7+2V0DbYMyscc+fZGAZlstwFk5oISkAsqhNGgqa5Vo26rgC3r4PwAAAP//VXKUywAAAAZJREFUAwBzxcJOMCTp7AAAAABJRU5ErkJggg==",alt:"Google",className:"w-9 h-9"}),(0,mr.jsx)("span",{className:"font-medium text-white",children:"Login with Google"})]}),(0,mr.jsx)("p",{className:"text-gray-500 text-sm mt-6 text-center",children:"No separate signup needed \u2014 your Google account is your key."})]})]})})},IN=ur("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),PN=ur("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const RN=function(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{a()},[]);const a=async()=>{try{i(!0),o(null);const e=localStorage.getItem("userId")||"69034c0e60c1777de040024f",n={method:"GET"},r=await fetch("http://192.168.1.20:3000/getTicketsByUser/".concat(e),n);if(!r.ok)throw new Error("Failed to fetch tickets");const s=await r.json();console.log("Fetched Tickets:",s),s.tickets&&Array.isArray(s.tickets)?t(s.tickets):s.data&&Array.isArray(s.data)?t(s.data):Array.isArray(s)?t(s):t([])}catch(GN){console.error("Error fetching tickets:",GN),o("Failed to load tickets. Please try again.")}finally{i(!1)}},l=e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return"open"===t||"pending"===t?(0,mr.jsx)(Ha,{size:20,className:"text-orange-600"}):"in progress"===t||"inprogress"===t?(0,mr.jsx)(Tc,{size:20,className:"text-blue-600"}):"resolved"===t||"closed"===t?(0,mr.jsx)(Ua,{size:20,className:"text-green-600"}):"cancelled"===t?(0,mr.jsx)(Va,{size:20,className:"text-red-600"}):(0,mr.jsx)(jc,{size:20,className:"text-gray-600"})},c=e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return"open"===t||"pending"===t?"bg-orange-100 text-orange-700 border-orange-200":"in progress"===t||"inprogress"===t?"bg-blue-100 text-blue-700 border-blue-200":"resolved"===t||"closed"===t?"bg-green-100 text-green-700 border-green-200":"cancelled"===t?"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-700 border-gray-200"},u=e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return"high"===t||"urgent"===t?"bg-red-50 text-red-700 border-red-200":"medium"===t?"bg-yellow-50 text-yellow-700 border-yellow-200":"low"===t?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"},d=e=>{if(!e)return"";const t=new Date(e),n=new Date,r=Math.abs(n.getTime()-t.getTime()),i=Math.floor(r/864e5);return 0===i?"Today":1===i?"Yesterday":i<7?"".concat(i," days ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},h=e=>{if(!e)return"";return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,mr.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-6 shadow-lg",children:(0,mr.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[(0,mr.jsx)("button",{onClick:()=>{window.history.back()},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,mr.jsx)(Dc,{size:24})}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("h1",{className:"text-2xl font-bold",children:"Support Tickets"}),(0,mr.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"View and manage your support requests"})]})]})}),(0,mr.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,mr.jsxs)("button",{onClick:()=>{window.location.href="/raise-ticket"},className:"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white py-4 rounded-xl flex items-center justify-center gap-3 font-semibold text-lg hover:shadow-lg hover:scale-[1.02] transition-all mb-8",children:[(0,mr.jsx)("div",{className:"bg-white/20 rounded-full p-1.5",children:(0,mr.jsx)(ta,{size:22})}),"Create New Support Ticket"]}),s&&(0,mr.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-200 rounded-xl",children:[(0,mr.jsx)("p",{className:"text-red-700 font-medium",children:s}),(0,mr.jsx)("button",{onClick:a,className:"mt-2 text-sm text-red-700 underline hover:text-red-800 font-medium",children:"Try Again"})]}),(0,mr.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,mr.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[(0,mr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mr.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,mr.jsx)(jc,{size:24,className:"text-blue-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"My Tickets"}),(0,mr.jsx)("p",{className:"text-sm text-gray-500",children:"All your support requests"})]})]}),e.length>0&&(0,mr.jsxs)("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[(0,mr.jsx)("span",{className:"text-lg font-bold text-blue-700",children:e.length}),(0,mr.jsx)("span",{className:"text-sm text-blue-600 ml-1",children:1===e.length?"ticket":"tickets"})]})]}),n&&(0,mr.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,mr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mb-4"}),(0,mr.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading your tickets..."})]}),!n&&0===e.length&&(0,mr.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,mr.jsx)("div",{className:"bg-gray-100 p-6 rounded-full mb-6",children:(0,mr.jsx)(jc,{size:64,strokeWidth:1.5,className:"text-gray-400"})}),(0,mr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No tickets found"}),(0,mr.jsx)("p",{className:"text-gray-600 mb-6 max-w-md",children:"You haven't created any support tickets yet. Click the button above to create your first ticket."})]}),!n&&e.length>0&&(0,mr.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,mr.jsxs)("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-400 transition-all cursor-pointer bg-gradient-to-br from-white to-gray-50",children:[(0,mr.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,mr.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,mr.jsx)("div",{className:"mt-1",children:l(e.status)}),(0,mr.jsxs)("div",{className:"flex-1",children:[(0,mr.jsx)("h3",{className:"font-bold text-gray-900 text-xl mb-2",children:e.subject||"Untitled Ticket"}),(0,mr.jsx)("p",{className:"text-gray-700 text-base leading-relaxed mb-4",children:e.description||"No description provided"})]})]})}),(0,mr.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,mr.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-semibold rounded-lg border ".concat(c(e.status)),children:[(0,mr.jsx)("span",{className:"w-2 h-2 rounded-full bg-current"}),e.status||"Pending"]}),(0,mr.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-semibold rounded-lg border ".concat(u(e.priority)),children:[(0,mr.jsx)(IN,{size:14}),e.priority||"Medium"," Priority"]})]}),(0,mr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[e.vehicleType&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("div",{className:"bg-purple-100 p-1.5 rounded-md mt-0.5",children:(0,mr.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Vehicle Type"}),(0,mr.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.vehicleType})]})]}),e.createdAt&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("div",{className:"bg-blue-100 p-1.5 rounded-md mt-0.5",children:(0,mr.jsx)(jr,{size:16,className:"text-blue-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Created"}),(0,mr.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:d(e.createdAt)}),(0,mr.jsx)("p",{className:"text-xs text-gray-500",children:h(e.createdAt)})]})]}),e.bookingId&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("div",{className:"bg-green-100 p-1.5 rounded-md mt-0.5",children:(0,mr.jsx)(PN,{size:16,className:"text-green-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Booking ID"}),(0,mr.jsx)("p",{className:"text-sm font-semibold text-gray-900 font-mono",children:e.bookingId.slice(-8)})]})]}),e._id&&(0,mr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mr.jsx)("div",{className:"bg-orange-100 p-1.5 rounded-md mt-0.5",children:(0,mr.jsx)(IN,{size:16,className:"text-orange-600"})}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Ticket ID"}),(0,mr.jsxs)("p",{className:"text-sm font-semibold text-gray-900 font-mono",children:["#",e._id.slice(-8)]})]})]})]}),e.review&&(0,mr.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,mr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,mr.jsx)("p",{className:"text-xs font-semibold text-blue-700 uppercase mb-1",children:"Review"}),(0,mr.jsx)("p",{className:"text-sm text-gray-700",children:e.review}),e.reviewDate&&(0,mr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Reviewed on ",h(e.reviewDate)]})]})})]},e._id))})]})]})]})};const DN=function(){const[e,t]=(0,r.useState)({issue:"",vehicle:"",description:"",name:"",mobile:"",photos:[]}),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);return(0,mr.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[(0,mr.jsx)("div",{className:"bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] text-white px-6 py-4 shadow-lg flex-shrink-0",children:(0,mr.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[(0,mr.jsx)("button",{onClick:()=>{window.history.back()},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,mr.jsx)(Dc,{size:22})}),(0,mr.jsx)("h1",{className:"text-xl font-semibold",children:"Raise Ticket"})]})}),(0,mr.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,mr.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6 h-full",children:[u&&(0,mr.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,mr.jsx)("p",{className:"text-sm text-red-600",children:u})}),(0,mr.jsxs)("div",{className:"grid grid-cols-2 gap-6 h-full",children:[(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-gray-900 font-medium mb-2 text-sm",children:["Select Issue ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsxs)("button",{onClick:()=>i(!n),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 flex items-center justify-between hover:border-gray-400 transition-colors text-sm",type:"button",children:[(0,mr.jsx)("span",{className:e.issue?"text-gray-900":"text-gray-500",children:e.issue||"Select an issue"}),(0,mr.jsx)(Cr,{className:"text-gray-400",size:18})]}),n&&(0,mr.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:["Booking issue","Payment issue","Vehicle issue","Driver issue","App issue","Other"].map(e=>(0,mr.jsx)("button",{onClick:()=>{t(t=>c(c({},t),{},{issue:e})),i(!1),d(null)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",type:"button",children:e},e))})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-900 font-medium mb-2 text-sm",children:"Select Vehicle"}),(0,mr.jsxs)("div",{className:"relative",children:[(0,mr.jsxs)("button",{onClick:()=>o(!s),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 flex items-center justify-between hover:border-gray-400 transition-colors text-sm",type:"button",children:[(0,mr.jsx)("span",{className:e.vehicle?"text-gray-900":"text-gray-500",children:e.vehicle||"Car"}),(0,mr.jsx)(Cr,{className:"text-gray-400",size:18})]}),s&&(0,mr.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:["Car","Bike","Auto","Other"].map(e=>(0,mr.jsx)("button",{onClick:()=>{t(t=>c(c({},t),{},{vehicle:e})),o(!1)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",type:"button",children:e},e))})]})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-gray-900 font-medium mb-2 text-sm",children:["Describe your issue ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("textarea",{value:e.description,onChange:e=>{t(t=>c(c({},t),{},{description:e.target.value})),d(null)},placeholder:"Describe your issue here",rows:4,className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-400 resize-none text-sm"})]}),(0,mr.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[(0,mr.jsxs)("label",{className:"flex flex-col items-center justify-center cursor-pointer",children:[(0,mr.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const n=Array.from(e.target.files);t(e=>c(c({},e),{},{photos:[...e.photos,...n]}))},className:"hidden"}),(0,mr.jsx)(ja,{size:36,className:"text-gray-600 mb-2",strokeWidth:1.5}),(0,mr.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Add Photos"})]}),e.photos.length>0&&(0,mr.jsxs)("div",{className:"mt-2 text-center text-xs text-gray-600",children:[e.photos.length," photo(s) selected"]})]})]}),(0,mr.jsxs)("div",{className:"space-y-4",children:[(0,mr.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,mr.jsxs)("div",{children:[(0,mr.jsxs)("label",{className:"block text-gray-900 font-medium mb-2 text-sm",children:["Name ",(0,mr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,mr.jsx)("input",{type:"text",value:e.name,onChange:e=>{t(t=>c(c({},t),{},{name:e.target.value})),d(null)},placeholder:"Enter your name",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-400 text-sm"})]}),(0,mr.jsxs)("div",{children:[(0,mr.jsx)("label",{className:"block text-gray-900 font-medium mb-2 text-sm",children:"Mobile Number"}),(0,mr.jsx)("input",{type:"tel",value:e.mobile,onChange:e=>t(t=>c(c({},t),{},{mobile:e.target.value})),placeholder:"Enter mobile number",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-400 text-sm"})]}),(0,mr.jsx)("div",{className:"pt-6",children:(0,mr.jsx)("button",{onClick:async()=>{if(e.issue&&e.description&&e.name){l(!0),d(null);try{const r=localStorage.getItem("userId")||"690c9fb0e524c979c76104c9",i=localStorage.getItem("vehicleId")||"690dcd0ce524c979c76122c7",s=localStorage.getItem("bookingId")||"691448d706702f6b9f792c2b",o=e.vehicle||"Car",a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded");const l=new URLSearchParams;l.append("userId",r),l.append("vehicleType",o),l.append("vehicleId",i),l.append("bookingId",s),l.append("subject",e.issue),l.append("description",e.description);const c={method:"POST",headers:a,body:l},u=await fetch("http://192.168.1.20:3000/createTicket",c),d=await u.text();let h;try{h=JSON.parse(d)}catch(n){h={success:!1,message:"Invalid response format"}}if(!h.success&&!u.ok)throw new Error(h.message||"Failed to create ticket");alert("\u2705 Ticket created successfully!"),t({issue:"",vehicle:"",description:"",name:"",mobile:"",photos:[]})}catch(GN){d("Failed to create ticket: "+GN.message),alert("\u274c Failed to create ticket: "+GN.message)}finally{l(!1)}}else d("Please fill in all required fields")},disabled:a,className:"w-full bg-gradient-to-r from-[#0A0747] to-[#4EC8FF] \r text-white py-3.5 rounded-lg font-semibold text-base\r hover:shadow-lg transition-shadow\r disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Submitting...":"Submit Ticket"})})]})]})]})})]})},LN=ur("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),MN=ur("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ON="http://3.110.122.127:3001",BN="http://3.110.122.127:3000",FN=12e4;function zN(){const{showOwnerModal:e,setShowOwnerModal:t,currentBooking:n,setCurrentBooking:i,bookingQueue:s,setBookingQueue:o,addBookingToQueue:a,removeBookingFromQueue:l,actionLoading:u,setActionLoading:d}=dc(),h=(0,r.useRef)(null),p=(0,r.useRef)({}),m=(0,r.useRef)({}),f=(0,r.useRef)(null),g=(0,r.useRef)(null),[y,v]=(0,r.useState)({}),[x,b]=(0,r.useState)(!1),w=localStorage.getItem("userId")||"",{addNotification:k,updateNotificationStatus:N}=rr(),_=()=>{try{f.current||(f.current=new Audio("/sounds/WhatsApp Audio 2025-11-26 at 12.29.34.mp3")),f.current.currentTime=0,f.current.play().catch(e=>console.log("Audio play failed:",e))}catch(e){console.log("Could not play new booking sound:",e)}};(0,r.useEffect)(()=>{if(!n)return;const e=n._id||n.id||"",t=setInterval(()=>{const r=(n.expiresAt||0)-Date.now();r<=2e4&&r>0&&!y[e]&&(console.log("\u26a0\ufe0f 20 seconds warning for booking:",e),(()=>{try{g.current||(g.current=new Audio("/sounds/WhatsApp Audio 2025-11-26 at 12.29.55.mp3")),g.current.currentTime=0,g.current.play().catch(e=>console.log("Warning audio play failed:",e))}catch(e){console.log("Could not play warning sound:",e)}})(),v(t=>c(c({},t),{},{[e]:!0}))),r<=0&&(clearInterval(t),S(e))},500);return()=>clearInterval(t)},[n,y]),(0,r.useEffect)(()=>{if(w)return console.log("\ud83d\udd0c Initializing owner socket for:",w),h.current=er(ON,{query:{userId:w},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,timeout:2e4}),h.current.on("connect",()=>{console.log("\u2705 Global Socket connected for owner:",w),b(!0),j()}),h.current.on("disconnect",()=>{console.log("\u274c Socket disconnected for owner:",w),b(!1)}),h.current.on("reconnect",e=>{console.log("\ud83d\udd04 Socket reconnected for owner after",e,"attempts"),b(!0),j()}),h.current.on("new-booking-request",e=>{console.log("\ud83d\udd14 New booking received (global) via socket:",e),A(e)}),h.current.on("booking-created",e=>{console.log("\ud83d\udd14 Booking created event received:",e),A(e)}),()=>{console.log("\ud83d\udd0c Cleaning up owner socket"),h.current&&h.current.disconnect(),Object.values(p.current).forEach(clearTimeout),Object.values(m.current).forEach(clearTimeout)};console.log("\u26a0\ufe0f No ownerId found, socket not initialized")},[w]),(0,r.useEffect)(()=>{if(w){j();const e=setInterval(()=>{j()},1e4);return()=>clearInterval(e)}},[w]),(0,r.useEffect)(()=>{!n&&s.length>0&&E()},[n,s]);const j=async()=>{try{const e=await fetch("".concat(BN,"/getPendingBookingsOfOwner/").concat(w));if(!e.ok)throw new Error("Failed to fetch bookings");const n=await e.json();console.log("\ud83d\udccb Raw API response:",n);let r=[];Array.isArray(n)?r=n:n.data&&Array.isArray(n.data)?r=n.data:n.bookings&&Array.isArray(n.bookings)&&(r=n.bookings),console.log("\ud83d\udccb Parsed bookings:",r.length,r);const s=r.filter(e=>{const t=(e.status||"").toLowerCase(),n="pending"===t||""===t;return console.log("\ud83d\udccb Booking:",e._id,"status:",e.status,"isPending:",n),n});console.log("\ud83d\udccb Pending bookings:",s.length);const a=dc.getState().bookingQueue,l=new Set(a.map(e=>e._id||e.id)),u=s.map(e=>c(c({},e),{},{receivedAt:new Date(e.createdAt||e.CreatedAt||Date.now()).getTime(),expiresAt:new Date(e.createdAt||e.CreatedAt||Date.now()).getTime()+FN})),d=u.filter(e=>!l.has(e._id||e.id));d.length>0&&(console.log("\ud83c\udd95 Found",d.length,"new pending booking(s) via polling"),_()),o(u),u.forEach(e=>{C(e)});const h=dc.getState().currentBooking;if(u.length>0&&!h){const e=u[0];i(e),t(!0)}}catch(e){console.error("Error fetching bookings:",e)}},A=e=>{if((e.ownerId||e.OwnerId)!==w)return void console.log("Skipping booking - current user is not the owner");const r=s.find(t=>(t._id||t.id)===(e._id||e.id));if(r)return void console.log("\u26a0\ufe0f Booking already in queue, skipping");console.log("\ud83c\udd95 New booking received for owner - showing modal immediately"),_();const o=c(c({},e),{},{receivedAt:Date.now(),expiresAt:Date.now()+FN}),l=e.vehicleName||e.VehicleName||"your vehicle",u=e.contactName||e.customerName||"A customer",d=e._id||e.id;k({type:"new_booking",title:"Your car has been booked?",message:"".concat(u," requested to book ").concat(l,"."),vehicleName:l,vehicleId:e.VechileId||e.vehicleId,bookingId:d,userId:w,bookingStatus:"Pending",customerName:u,fromDate:e.FromDate||e.fromDate,toDate:e.ToDate||e.toDate,totalPrice:e.totalPrice}),a(o),C(o),n||(i(o),t(!0),console.log("\ud83d\udce2 Immediately showing modal for new booking:",o._id||o.id))},C=e=>{const t=e._id||e.id||"",n=(e.expiresAt||0)-Date.now();n>0&&(p.current[t]=setTimeout(()=>{S(t)},n))},S=async e=>{console.log("\u23f1\ufe0f Booking expired (timeout):",e);const r=s.find(t=>(t._id||t.id)===e)||n,o=(null===r||void 0===r?void 0:r.userId)||(null===r||void 0===r?void 0:r.customerId),a=(null===r||void 0===r?void 0:r.vehicleName)||(null===r||void 0===r?void 0:r.VehicleName);try{var u;await fetch("".concat(BN,"/confirmBooking/").concat(e,"/Cancelled"),{method:"POST",headers:{"Content-Type":"application/json"}}),N(e,"Expired"),null!==(u=h.current)&&void 0!==u&&u.connected&&o&&h.current.emit("booking-status-update",{bookingId:e,customerId:o,status:"timeout",ownerId:w,vehicleName:a}),l(e),n&&(n._id||n.id)===e&&(i(null),t(!1)),p.current[e]&&(clearTimeout(p.current[e]),delete p.current[e]),m.current[e]&&(clearTimeout(m.current[e]),delete m.current[e]),v(t=>{const n=c({},t);return delete n[e],n})}catch(d){console.error("Error expiring booking:",d)}},E=()=>{if(0===s.length)return;const e=s[0];i(e),t(!0)},T=e=>{const t=Date.now(),n=(e.expiresAt||0)-t;if(n<=0)return"00:00";const r=Math.floor(n/6e4),i=Math.floor(n%6e4/1e3);return"".concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))},I=e=>{let{booking:t}=e;const[n,i]=(0,r.useState)(T(t));(0,r.useEffect)(()=>{const e=setInterval(()=>{i(T(t))},1e3);return()=>clearInterval(e)},[t]);const s=(t.expiresAt||0)-Date.now(),o=s<3e4,a=s<1e4;return(0,mr.jsx)("span",{className:"font-mono font-bold text-xl ".concat(a?"text-red-600 animate-pulse":o?"text-orange-600 animate-pulse":"text-blue-600"),children:n})};if(!w||!e||!n)return null;const P=(n.expiresAt||0)-Date.now()<1e4;return(0,mr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[9999] p-4",children:(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative animate-fadeIn ".concat(P?"ring-4 ring-red-500 ring-opacity-50":""),children:[(0,mr.jsx)("button",{onClick:()=>{t(!1),i(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",disabled:u,children:(0,mr.jsx)(hr,{size:24})}),(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ".concat(P?"bg-red-100 animate-pulse":"bg-blue-100"),children:(0,mr.jsx)(LN,{className:P?"text-red-600":"text-blue-600",size:48})}),(0,mr.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"You've got a new booking!"}),(0,mr.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6 p-3 rounded-xl ".concat(P?"bg-red-50":"bg-gray-50"),children:[(0,mr.jsx)(Ha,{size:24,className:P?"text-red-600":"text-orange-600"}),(0,mr.jsx)(I,{booking:n}),(0,mr.jsx)("span",{className:"text-sm text-gray-500",children:"remaining"})]}),P&&(0,mr.jsxs)("div",{className:"bg-red-100 text-red-700 p-3 rounded-lg mb-4 flex items-center justify-center gap-2",children:[(0,mr.jsx)(MN,{size:20}),(0,mr.jsx)("span",{className:"font-semibold",children:"Hurry! Time is running out!"})]}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,mr.jsx)("p",{className:"font-bold text-lg text-gray-800 mb-2",children:n.vehicleName||n.VehicleName||"Vehicle"}),(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Customer: ",n.contactName||n.customerName||"N/A"]}),n.totalPrice&&(0,mr.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: \u20b9",n.totalPrice]})]}),(0,mr.jsx)("button",{onClick:async()=>{if(!n)return;const e=n._id||n.id||"",r=n.userId||n.customerId,s=n.vehicleName||n.VehicleName;d(!0);try{var o;if(!(await fetch("".concat(BN,"/confirmBooking/").concat(e,"/Confirmed"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to confirm booking");console.log("\u2705 Booking confirmed:",e),N(e,"Confirmed"),null!==(o=h.current)&&void 0!==o&&o.connected&&r&&h.current.emit("booking-status-update",{bookingId:e,customerId:r,status:"accepted",ownerId:w,vehicleName:s}),p.current[e]&&(clearTimeout(p.current[e]),delete p.current[e]),m.current[e]&&(clearTimeout(m.current[e]),delete m.current[e]),v(t=>{const n=c({},t);return delete n[e],n}),l(e),i(null),t(!1),d(!1)}catch(a){console.error("Error confirming booking:",a),alert("Error: ".concat(a.message)),d(!1)}},disabled:u,className:"w-full py-3 rounded-xl text-white font-semibold bg-gradient-to-r from-green-600 to-green-400 hover:opacity-90 mb-4 disabled:opacity-50 flex items-center justify-center gap-2",children:u?(0,mr.jsx)(za,{className:"animate-spin",size:20}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(vc,{size:20}),"Accept Booking"]})}),(0,mr.jsx)("button",{onClick:async()=>{if(!n)return;const e=n._id||n.id||"",r=n.userId||n.customerId,s=n.vehicleName||n.VehicleName;d(!0);try{var o;if(!(await fetch("".concat(BN,"/confirmBooking/").concat(e,"/Cancelled"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to reject booking");console.log("\u274c Booking rejected:",e),N(e,"Rejected"),null!==(o=h.current)&&void 0!==o&&o.connected&&r&&h.current.emit("booking-status-update",{bookingId:e,customerId:r,status:"rejected",ownerId:w,vehicleName:s}),p.current[e]&&(clearTimeout(p.current[e]),delete p.current[e]),m.current[e]&&(clearTimeout(m.current[e]),delete m.current[e]),v(t=>{const n=c({},t);return delete n[e],n}),l(e),i(null),t(!1),d(!1)}catch(a){console.error("Error rejecting booking:",a),alert("Error: ".concat(a.message)),d(!1)}},disabled:u,className:"w-full py-3 rounded-xl font-semibold border border-red-500 text-red-600 hover:bg-red-50 disabled:opacity-50 flex items-center justify-center gap-2",children:u?(0,mr.jsx)(za,{className:"animate-spin",size:20}):(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(hr,{size:20}),"Reject Booking"]})})]})]})})}function UN(){const{showWaitingPopup:e,waitingBookingInfo:t,showCustomerTimeoutModal:n,closeWaitingPopup:i}=dc(),[s,o]=(0,r.useState)(120);if((0,r.useEffect)(()=>{if(e&&t){console.log("\ud83d\udd50 Waiting popup opened for booking:",t.bookingId),console.log("\ud83d\udd50 Expires at:",new Date(t.expiresAt).toLocaleTimeString());const e=Math.max(0,Math.floor((t.expiresAt-Date.now())/1e3));o(e>0?e:120)}},[e,null===t||void 0===t?void 0:t.bookingId]),(0,r.useEffect)(()=>{if(!e||!t)return;console.log("\ud83d\udd50 Starting countdown timer, remaining:",s);const r=setInterval(()=>{const e=Math.max(0,Math.floor((t.expiresAt-Date.now())/1e3));if(o(e),e<=0){console.log("\ud83d\udd50 Timer expired - showing timeout modal"),clearInterval(r);const e=t.vehicleName;n(e)}},1e3);return()=>clearInterval(r)},[e,null===t||void 0===t?void 0:t.bookingId,null===t||void 0===t?void 0:t.expiresAt,n]),!e||!t)return null;const a=2*Math.PI*45,l=Math.max(0,Math.min(1,s/120)),c=a*(1-l);return(0,mr.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-end justify-center",children:[(0,mr.jsx)("div",{className:"absolute inset-0 bg-black/40",style:{backdropFilter:"blur(12px)"}}),(0,mr.jsxs)("div",{className:"relative w-full bg-white rounded-t-3xl shadow-2xl pb-8 pt-6 px-6 animate-slideUp",style:{maxWidth:"600px"},children:[(0,mr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-1",children:"Waiting for response!"}),t.vehicleName&&(0,mr.jsx)("p",{className:"text-center text-sm text-gray-600 mb-2",children:t.vehicleName}),(0,mr.jsx)("div",{className:"w-full h-px bg-gray-300 my-5"}),(0,mr.jsx)("div",{className:"flex justify-center gap-3 mb-8 px-8",children:[0,1,2,3].map(e=>(0,mr.jsx)("div",{className:"flex-1 h-1.5 rounded-full transition-opacity duration-300",style:{background:"linear-gradient(to right, #1A2980, #26D0CE)",opacity:e<Math.floor(4*l)?1:.28}},e))}),(0,mr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,mr.jsxs)("div",{className:"relative w-32 h-32 mb-3",children:[(0,mr.jsxs)("svg",{width:"128",height:"128",viewBox:"0 0 128 128",style:{transform:"rotate(-90deg)"},children:[(0,mr.jsx)("defs",{children:(0,mr.jsxs)("linearGradient",{id:"waitingGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,mr.jsx)("stop",{offset:"0%",stopColor:"#1A2980"}),(0,mr.jsx)("stop",{offset:"100%",stopColor:"#26D0CE"})]})}),(0,mr.jsx)("circle",{cx:"64",cy:"64",r:45,stroke:"#E5E7EB",strokeWidth:10,fill:"none"}),(0,mr.jsx)("circle",{cx:"64",cy:"64",r:45,stroke:"url(#waitingGrad)",strokeWidth:10,strokeDasharray:a,strokeDashoffset:c,strokeLinecap:"round",fill:"none",style:{transition:"stroke-dashoffset 0.45s ease"}})]}),(0,mr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,mr.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",children:[(0,mr.jsx)("defs",{children:(0,mr.jsxs)("linearGradient",{id:"waitingClockGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,mr.jsx)("stop",{offset:"0%",stopColor:"#1A2980"}),(0,mr.jsx)("stop",{offset:"100%",stopColor:"#26D0CE"})]})}),(0,mr.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"url(#waitingClockGrad)",strokeWidth:"2",fill:"none"}),(0,mr.jsx)("path",{d:"M12 6V12L16 14",stroke:"url(#waitingClockGrad)",strokeWidth:"2",strokeLinecap:"round"})]})})]}),(0,mr.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:[s," sec"]})]}),(0,mr.jsx)("div",{className:"mt-6 px-4",children:(0,mr.jsx)("button",{onClick:i,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-lg transition font-medium",children:"Cancel Waiting"})})]})]})}function VN(){const{showCustomerModal:e,customerModalType:t,customerBookingInfo:n,closeCustomerModal:i}=dc(),{addNotification:s}=rr(),o=(0,r.useRef)(null),a=(0,r.useRef)(null),l=localStorage.getItem("userId")||"",c=()=>{try{a.current||(a.current=new Audio("/sounds/WhatsApp Audio 2025-11-26 at 12.30.04.mp3")),a.current.currentTime=0,a.current.play().catch(e=>console.log("Rejection audio play failed:",e))}catch(e){console.log("Could not play rejection sound:",e)}};return(0,r.useEffect)(()=>{if(l)return o.current=er(ON,{query:{userId:l},transports:["websocket"],reconnection:!0}),o.current.on("connect",()=>{console.log("\u2705 Global Socket connected for customer:",l)}),o.current.on("booking-status-update",e=>{if(console.log("\ud83d\udd14 Booking status update received (customer):",e),e.customerId&&e.customerId!==l)return void console.log("Ignoring status update - not for this customer");const t=dc.getState().waitingBookingInfo;dc.getState().showWaitingPopup||t?t&&t.bookingId&&e.bookingId&&t.bookingId!==e.bookingId?console.log("Ignoring status update - not for current waiting booking"):"accepted"===e.status?(s({type:"booking_confirmed",title:"Booking Confirmed!",message:"Your booking for ".concat(e.vehicleName||"the vehicle"," has been accepted by the owner."),vehicleName:e.vehicleName,bookingId:e.bookingId,userId:l}),dc.getState().showCustomerAcceptedModal(e.vehicleName,e.ownerName)):"rejected"===e.status?(s({type:"booking_declined",title:"Booking Declined",message:"Your booking for ".concat(e.vehicleName||"the vehicle"," was declined by the owner."),vehicleName:e.vehicleName,bookingId:e.bookingId,userId:l}),c(),dc.getState().showCustomerRejectedModal(e.vehicleName,e.ownerName)):"timeout"===e.status&&(s({type:"booking_timeout",title:"Booking Auto-Cancelled",message:"Your booking for ".concat(e.vehicleName||"the vehicle"," was auto-cancelled because the owner did not respond in time."),vehicleName:e.vehicleName,bookingId:e.bookingId,userId:l}),c(),dc.getState().showCustomerTimeoutModal(e.vehicleName)):console.log("Ignoring status update - no waiting popup open")}),()=>{o.current&&o.current.disconnect()}},[l]),(0,r.useEffect)(()=>{!e||"rejected"!==t&&"timeout"!==t||(console.log("\ud83d\udd0a Playing rejection sound for customer modal type:",t),c())},[e,t]),e?(0,mr.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999] p-4",children:["accepted"===t&&(0,mr.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 relative animate-fadeIn",children:(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("div",{className:"w-24 h-24 bg-[#4AC9E3] rounded-full flex items-center justify-center mx-auto mb-6",children:(0,mr.jsx)(vc,{className:"text-white",size:48,strokeWidth:3})}),(0,mr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your booking is confirmed"}),(0,mr.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"with the owner"}),(0,mr.jsx)("p",{className:"text-gray-500 text-sm mb-8",children:"Please meet at the pickup point and complete the process offline."}),(0,mr.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:[(0,mr.jsx)("p",{className:"font-semibold text-gray-800 mb-3",children:"Required Documents"}),(0,mr.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,mr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"w-1.5 h-1.5 bg-gray-700 rounded-full"}),"Driving License"]}),(0,mr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"w-1.5 h-1.5 bg-gray-700 rounded-full"}),"Aadhar Card"]}),(0,mr.jsxs)("li",{className:"flex items-center gap-2",children:[(0,mr.jsx)("span",{className:"w-1.5 h-1.5 bg-gray-700 rounded-full"}),"Deposit money :- 10,000"]})]}),(0,mr.jsxs)("p",{className:"text-red-500 text-xs mt-3 flex items-center gap-1",children:[(0,mr.jsx)("span",{className:"text-red-500",children:"\u26a0"}),"Don't forget to carry these documents."]})]}),(0,mr.jsx)("button",{onClick:i,className:"w-full py-3 rounded-xl text-white font-semibold bg-[#4AC9E3] hover:bg-[#3BB8D2] transition-colors",children:"Okay"})]})}),"rejected"===t&&(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-10 relative animate-fadeIn",children:[(0,mr.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,mr.jsx)(hr,{size:24})}),(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-5 animate-bounce",children:(0,mr.jsx)(Va,{className:"text-red-600",size:48})}),(0,mr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Booking Declined"}),(0,mr.jsx)("p",{className:"text-gray-600 text-lg mb-6",children:"Unfortunately, your booking request was not accepted by the owner. Please try another vehicle."}),(null===n||void 0===n?void 0:n.vehicleName)&&(0,mr.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-5 mb-6",children:(0,mr.jsx)("p",{className:"text-red-800 font-bold text-lg",children:n.vehicleName})}),(0,mr.jsx)("button",{onClick:i,className:"w-full py-3 rounded-xl text-white font-semibold bg-gradient-to-r from-blue-600 to-blue-400 hover:opacity-90",children:"Browse Other Vehicles"})]})]}),"timeout"===t&&(0,mr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-10 relative animate-fadeIn",children:[(0,mr.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,mr.jsx)(hr,{size:24})}),(0,mr.jsxs)("div",{className:"text-center",children:[(0,mr.jsx)("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-5 animate-bounce",children:(0,mr.jsx)(Ha,{className:"text-orange-600",size:48})}),(0,mr.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Booking Autocancelled"}),(0,mr.jsx)("p",{className:"text-gray-600 text-lg mb-6",children:"The owner did not respond within the time limit. Your booking has been automatically cancelled. Please try booking again or choose another vehicle."}),(null===n||void 0===n?void 0:n.vehicleName)&&(0,mr.jsx)("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-5 mb-6",children:(0,mr.jsx)("p",{className:"text-orange-800 font-bold text-lg",children:n.vehicleName})}),(0,mr.jsx)("button",{onClick:i,className:"w-full py-3 rounded-xl text-white font-semibold bg-gradient-to-r from-blue-600 to-blue-400 hover:opacity-90",children:"Browse Other Vehicles"})]})]})]}):null}function HN(){return(0,mr.jsxs)(mr.Fragment,{children:[(0,mr.jsx)(zN,{}),(0,mr.jsx)(UN,{}),(0,mr.jsx)(VN,{}),(0,mr.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease-out;\n        }\n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        .animate-slideUp {\n          animation: slideUp 0.28s ease-out;\n        }\n      "})]})}const qN=()=>{const e=me(),{initializeSocket:t,disconnectSocket:n,fetchNotifications:i}=rr();(0,r.useEffect)(()=>{const e=localStorage.getItem("userId");return e&&(console.log("\ud83d\udd14 App: Initializing notification system for user:",e),t(e),i(e)),()=>{n()}},[t,n,i]);const s=["/","/register"].includes(e.pathname);return(0,mr.jsxs)("div",{className:"min-h-screen bg-[#f8fafc]",children:[!s&&(0,mr.jsx)(Nr,{}),(0,mr.jsxs)(Oe,{children:[(0,mr.jsx)(Le,{path:"/",element:(0,mr.jsx)(TN,{})}),(0,mr.jsx)(Le,{path:"/register",element:(0,mr.jsx)(TN,{})}),(0,mr.jsx)(Le,{path:"/rental",element:(0,mr.jsx)(_o,{})}),(0,mr.jsx)(Le,{path:"/list-car",element:(0,mr.jsx)(la,{})}),(0,mr.jsx)(Le,{path:"/list-bike",element:(0,mr.jsx)(pa,{})}),(0,mr.jsx)(Le,{path:"/nearby-cars",element:(0,mr.jsx)(wo,{})}),(0,mr.jsx)(Le,{path:"/nearby-bikes",element:(0,mr.jsx)(No,{})}),(0,mr.jsx)(Le,{path:"/vehicle-details/:id",element:(0,mr.jsx)(ya,{})}),(0,mr.jsx)(Le,{path:"/Car-Details/:carId",element:(0,mr.jsx)($c,{})}),(0,mr.jsx)(Le,{path:"/Bike-Details/:bikeId",element:(0,mr.jsx)(tu,{})}),(0,mr.jsx)(Le,{path:"/vehicle-history/:vehicleName",element:(0,mr.jsx)(Sa,{})}),(0,mr.jsx)(Le,{path:"/vehicle-details/:vehicleName/edit/:bookingId",element:(0,mr.jsx)(Da,{})}),(0,mr.jsx)(Le,{path:"/book-now/:id",element:(0,mr.jsx)(mc,{})}),(0,mr.jsx)(Le,{path:"/booking-detail/:vehicleId",element:(0,mr.jsx)(cu,{})}),(0,mr.jsx)(Le,{path:"/profile",element:(0,mr.jsx)(Rc,{})}),(0,mr.jsx)(Le,{path:"/my-profile",element:(0,mr.jsx)(Oc,{})}),(0,mr.jsx)(Le,{path:"/mybookings",element:(0,mr.jsx)(zc,{})}),(0,mr.jsx)(Le,{path:"/notifications",element:(0,mr.jsx)(xc,{})}),(0,mr.jsx)(Le,{path:"/feedback",element:(0,mr.jsx)(Qc,{})}),(0,mr.jsx)(Le,{path:"/change-location",element:(0,mr.jsx)($o,{})}),(0,mr.jsx)(Le,{path:"/privacy-policy",element:(0,mr.jsx)(Uc,{})}),(0,mr.jsx)(Le,{path:"/about-us",element:(0,mr.jsx)(Wc,{})}),(0,mr.jsx)(Le,{path:"/help",element:(0,mr.jsx)(Gc,{})}),(0,mr.jsx)(Le,{path:"/listed",element:(0,mr.jsx)(ou,{})}),(0,mr.jsx)(Le,{path:"/listed-bike",element:(0,mr.jsx)(lu,{})}),(0,mr.jsx)(Le,{path:"/Support-Ticket",element:(0,mr.jsx)(RN,{})}),(0,mr.jsx)(Le,{path:"/Raise-Ticket",element:(0,mr.jsx)(DN,{})}),(0,mr.jsx)(Le,{path:"/feedback",element:(0,mr.jsx)(Qc,{})}),(0,mr.jsx)(Le,{path:"/calendar",element:(0,mr.jsx)(Yc,{onConfirm:()=>console.log("Confirmed!")})}),(0,mr.jsx)(Le,{path:"/calendar-screen",element:(0,mr.jsx)(Jc,{})})]}),(0,mr.jsx)(HN,{})]})};var WN=n(391);const KN=document.getElementById("root");(0,WN.H)(KN).render((0,mr.jsx)(r.StrictMode,{children:(0,mr.jsx)(yt,{children:(0,mr.jsx)(yr,{children:(0,mr.jsx)(qN,{})})})}))})()})();
//# sourceMappingURL=main.aee13f59.js.map